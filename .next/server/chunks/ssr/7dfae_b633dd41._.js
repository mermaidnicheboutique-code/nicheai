module.exports=[794300,(a,b,c)=>{"use strict";function d(a){if(!Number.isSafeInteger(a)||a<0)throw Error(`positive integer expected, not ${a}`)}function e(a){if("boolean"!=typeof a)throw Error(`boolean expected, not ${a}`)}function f(a){return a instanceof Uint8Array||null!=a&&"object"==typeof a&&"Uint8Array"===a.constructor.name}function g(a,...b){if(!f(a))throw Error("Uint8Array expected");if(b.length>0&&!b.includes(a.length))throw Error(`Uint8Array expected of length ${b}, not of length=${a.length}`)}function h(a){if("function"!=typeof a||"function"!=typeof a.create)throw Error("Hash should be wrapped by utils.wrapConstructor");d(a.outputLen),d(a.blockLen)}function i(a,b=!0){if(a.destroyed)throw Error("Hash instance has been destroyed");if(b&&a.finished)throw Error("Hash#digest() has already been called")}function j(a,b){g(a);let c=b.outputLen;if(a.length<c)throw Error(`digestInto() expects output buffer of length at least ${c}`)}Object.defineProperty(c,"__esModule",{value:!0}),c.output=c.exists=c.hash=c.bytes=c.bool=c.number=c.isBytes=void 0,c.number=d,c.bool=e,c.isBytes=f,c.bytes=g,c.hash=h,c.exists=i,c.output=j,c.default={number:d,bool:e,bytes:g,hash:h,exists:i,output:j}},106788,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.add5L=c.add5H=c.add4H=c.add4L=c.add3H=c.add3L=c.add=c.rotlBL=c.rotlBH=c.rotlSL=c.rotlSH=c.rotr32L=c.rotr32H=c.rotrBL=c.rotrBH=c.rotrSL=c.rotrSH=c.shrSL=c.shrSH=c.toBig=c.split=c.fromBig=void 0;let d=BigInt(0x100000000-1),e=BigInt(32);function f(a,b=!1){return b?{h:Number(a&d),l:Number(a>>e&d)}:{h:0|Number(a>>e&d),l:0|Number(a&d)}}function g(a,b=!1){let c=new Uint32Array(a.length),d=new Uint32Array(a.length);for(let e=0;e<a.length;e++){let{h:g,l:h}=f(a[e],b);[c[e],d[e]]=[g,h]}return[c,d]}c.fromBig=f,c.split=g;let h=(a,b)=>BigInt(a>>>0)<<e|BigInt(b>>>0);c.toBig=h;let i=(a,b,c)=>a>>>c;c.shrSH=i;let j=(a,b,c)=>a<<32-c|b>>>c;c.shrSL=j;let k=(a,b,c)=>a>>>c|b<<32-c;c.rotrSH=k;let l=(a,b,c)=>a<<32-c|b>>>c;c.rotrSL=l;let m=(a,b,c)=>a<<64-c|b>>>c-32;c.rotrBH=m;let n=(a,b,c)=>a>>>c-32|b<<64-c;c.rotrBL=n;let o=(a,b)=>b;c.rotr32H=o;let p=(a,b)=>a;c.rotr32L=p;let q=(a,b,c)=>a<<c|b>>>32-c;c.rotlSH=q;let r=(a,b,c)=>b<<c|a>>>32-c;c.rotlSL=r;let s=(a,b,c)=>b<<c-32|a>>>64-c;c.rotlBH=s;let t=(a,b,c)=>a<<c-32|b>>>64-c;function u(a,b,c,d){let e=(b>>>0)+(d>>>0);return{h:a+c+(e/0x100000000|0)|0,l:0|e}}c.rotlBL=t,c.add=u;let v=(a,b,c)=>(a>>>0)+(b>>>0)+(c>>>0);c.add3L=v;let w=(a,b,c,d)=>b+c+d+(a/0x100000000|0)|0;c.add3H=w;let x=(a,b,c,d)=>(a>>>0)+(b>>>0)+(c>>>0)+(d>>>0);c.add4L=x;let y=(a,b,c,d,e)=>b+c+d+e+(a/0x100000000|0)|0;c.add4H=y;let z=(a,b,c,d,e)=>(a>>>0)+(b>>>0)+(c>>>0)+(d>>>0)+(e>>>0);c.add5L=z;let A=(a,b,c,d,e,f)=>b+c+d+e+f+(a/0x100000000|0)|0;c.add5H=A,c.default={fromBig:f,split:g,toBig:h,shrSH:i,shrSL:j,rotrSH:k,rotrSL:l,rotrBH:m,rotrBL:n,rotr32H:o,rotr32L:p,rotlSH:q,rotlSL:r,rotlBH:s,rotlBL:t,add:u,add3L:v,add3H:w,add4L:x,add4H:y,add5H:A,add5L:z}},403207,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.crypto=void 0;let d=a.r(666680);c.crypto=d&&"object"==typeof d&&"webcrypto"in d?d.webcrypto:void 0},392419,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.randomBytes=c.wrapXOFConstructorWithOpts=c.wrapConstructorWithOpts=c.wrapConstructor=c.checkOpts=c.Hash=c.concatBytes=c.toBytes=c.utf8ToBytes=c.asyncLoop=c.nextTick=c.hexToBytes=c.bytesToHex=c.byteSwap32=c.byteSwapIfBE=c.byteSwap=c.isLE=c.rotl=c.rotr=c.createView=c.u32=c.u8=c.isBytes=void 0;let d=a.r(403207),e=a.r(794300);c.isBytes=function(a){return a instanceof Uint8Array||null!=a&&"object"==typeof a&&"Uint8Array"===a.constructor.name},c.u8=a=>new Uint8Array(a.buffer,a.byteOffset,a.byteLength),c.u32=a=>new Uint32Array(a.buffer,a.byteOffset,Math.floor(a.byteLength/4)),c.createView=a=>new DataView(a.buffer,a.byteOffset,a.byteLength),c.rotr=(a,b)=>a<<32-b|a>>>b,c.rotl=(a,b)=>a<<b|a>>>32-b>>>0,c.isLE=68===new Uint8Array(new Uint32Array([0x11223344]).buffer)[0],c.byteSwap=a=>a<<24&0xff000000|a<<8&0xff0000|a>>>8&65280|a>>>24&255,c.byteSwapIfBE=c.isLE?a=>a:a=>(0,c.byteSwap)(a),c.byteSwap32=function(a){for(let b=0;b<a.length;b++)a[b]=(0,c.byteSwap)(a[b])};let f=Array.from({length:256},(a,b)=>b.toString(16).padStart(2,"0"));c.bytesToHex=function(a){(0,e.bytes)(a);let b="";for(let c=0;c<a.length;c++)b+=f[a[c]];return b};function g(a){return a>=48&&a<=57?a-48:a>=65&&a<=70?a-55:a>=97&&a<=102?a-87:void 0}async function h(a,b,d){let e=Date.now();for(let f=0;f<a;f++){d(f);let a=Date.now()-e;a>=0&&a<b||(await (0,c.nextTick)(),e+=a)}}function i(a){if("string"!=typeof a)throw Error(`utf8ToBytes expected string, got ${typeof a}`);return new Uint8Array(new TextEncoder().encode(a))}function j(a){return"string"==typeof a&&(a=i(a)),(0,e.bytes)(a),a}c.hexToBytes=function(a){if("string"!=typeof a)throw Error("hex string expected, got "+typeof a);let b=a.length,c=b/2;if(b%2)throw Error("padded hex string expected, got unpadded hex of length "+b);let d=new Uint8Array(c);for(let b=0,e=0;b<c;b++,e+=2){let c=g(a.charCodeAt(e)),f=g(a.charCodeAt(e+1));if(void 0===c||void 0===f)throw Error('hex string expected, got non-hex character "'+(a[e]+a[e+1])+'" at index '+e);d[b]=16*c+f}return d},c.nextTick=async()=>{},c.asyncLoop=h,c.utf8ToBytes=i,c.toBytes=j,c.concatBytes=function(...a){let b=0;for(let c=0;c<a.length;c++){let d=a[c];(0,e.bytes)(d),b+=d.length}let c=new Uint8Array(b);for(let b=0,d=0;b<a.length;b++){let e=a[b];c.set(e,d),d+=e.length}return c},c.Hash=class{clone(){return this._cloneInto()}};let k={}.toString;c.checkOpts=function(a,b){if(void 0!==b&&"[object Object]"!==k.call(b))throw Error("Options should be object or undefined");return Object.assign(a,b)},c.wrapConstructor=function(a){let b=b=>a().update(j(b)).digest(),c=a();return b.outputLen=c.outputLen,b.blockLen=c.blockLen,b.create=()=>a(),b},c.wrapConstructorWithOpts=function(a){let b=(b,c)=>a(c).update(j(b)).digest(),c=a({});return b.outputLen=c.outputLen,b.blockLen=c.blockLen,b.create=b=>a(b),b},c.wrapXOFConstructorWithOpts=function(a){let b=(b,c)=>a(c).update(j(b)).digest(),c=a({});return b.outputLen=c.outputLen,b.blockLen=c.blockLen,b.create=b=>a(b),b},c.randomBytes=function(a=32){if(d.crypto&&"function"==typeof d.crypto.getRandomValues)return d.crypto.getRandomValues(new Uint8Array(a));throw Error("crypto.getRandomValues must be defined")}},622432,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.shake256=c.shake128=c.keccak_512=c.keccak_384=c.keccak_256=c.keccak_224=c.sha3_512=c.sha3_384=c.sha3_256=c.sha3_224=c.Keccak=c.keccakP=void 0;let d=a.r(794300),e=a.r(106788),f=a.r(392419),g=[],h=[],i=[],j=BigInt(0),k=BigInt(1),l=BigInt(2),m=BigInt(7),n=BigInt(256),o=BigInt(113);for(let a=0,b=k,c=1,d=0;a<24;a++){[c,d]=[d,(2*c+3*d)%5],g.push(2*(5*d+c)),h.push((a+1)*(a+2)/2%64);let e=j;for(let a=0;a<7;a++)(b=(b<<k^(b>>m)*o)%n)&l&&(e^=k<<(k<<BigInt(a))-k);i.push(e)}let[p,q]=(0,e.split)(i,!0),r=(a,b,c)=>c>32?(0,e.rotlBH)(a,b,c):(0,e.rotlSH)(a,b,c),s=(a,b,c)=>c>32?(0,e.rotlBL)(a,b,c):(0,e.rotlSL)(a,b,c);function t(a,b=24){let c=new Uint32Array(10);for(let d=24-b;d<24;d++){for(let b=0;b<10;b++)c[b]=a[b]^a[b+10]^a[b+20]^a[b+30]^a[b+40];for(let b=0;b<10;b+=2){let d=(b+8)%10,e=(b+2)%10,f=c[e],g=c[e+1],h=r(f,g,1)^c[d],i=s(f,g,1)^c[d+1];for(let c=0;c<50;c+=10)a[b+c]^=h,a[b+c+1]^=i}let b=a[2],e=a[3];for(let c=0;c<24;c++){let d=h[c],f=r(b,e,d),i=s(b,e,d),j=g[c];b=a[j],e=a[j+1],a[j]=f,a[j+1]=i}for(let b=0;b<50;b+=10){for(let d=0;d<10;d++)c[d]=a[b+d];for(let d=0;d<10;d++)a[b+d]^=~c[(d+2)%10]&c[(d+4)%10]}a[0]^=p[d],a[1]^=q[d]}c.fill(0)}c.keccakP=t;class u extends f.Hash{constructor(a,b,c,e=!1,g=24){if(super(),this.blockLen=a,this.suffix=b,this.outputLen=c,this.enableXOF=e,this.rounds=g,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,d.number)(c),0>=this.blockLen||this.blockLen>=200)throw Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,f.u32)(this.state)}keccak(){f.isLE||(0,f.byteSwap32)(this.state32),t(this.state32,this.rounds),f.isLE||(0,f.byteSwap32)(this.state32),this.posOut=0,this.pos=0}update(a){(0,d.exists)(this);let{blockLen:b,state:c}=this,e=(a=(0,f.toBytes)(a)).length;for(let d=0;d<e;){let f=Math.min(b-this.pos,e-d);for(let b=0;b<f;b++)c[this.pos++]^=a[d++];this.pos===b&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:a,suffix:b,pos:c,blockLen:d}=this;a[c]^=b,(128&b)!=0&&c===d-1&&this.keccak(),a[d-1]^=128,this.keccak()}writeInto(a){(0,d.exists)(this,!1),(0,d.bytes)(a),this.finish();let b=this.state,{blockLen:c}=this;for(let d=0,e=a.length;d<e;){this.posOut>=c&&this.keccak();let f=Math.min(c-this.posOut,e-d);a.set(b.subarray(this.posOut,this.posOut+f),d),this.posOut+=f,d+=f}return a}xofInto(a){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(a)}xof(a){return(0,d.number)(a),this.xofInto(new Uint8Array(a))}digestInto(a){if((0,d.output)(a,this),this.finished)throw Error("digest() was already called");return this.writeInto(a),this.destroy(),a}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(a){let{blockLen:b,suffix:c,outputLen:d,rounds:e,enableXOF:f}=this;return a||(a=new u(b,c,d,f,e)),a.state32.set(this.state32),a.pos=this.pos,a.posOut=this.posOut,a.finished=this.finished,a.rounds=e,a.suffix=c,a.outputLen=d,a.enableXOF=f,a.destroyed=this.destroyed,a}}c.Keccak=u;let v=(a,b,c)=>(0,f.wrapConstructor)(()=>new u(b,a,c));c.sha3_224=v(6,144,28),c.sha3_256=v(6,136,32),c.sha3_384=v(6,104,48),c.sha3_512=v(6,72,64),c.keccak_224=v(1,144,28),c.keccak_256=v(1,136,32),c.keccak_384=v(1,104,48),c.keccak_512=v(1,72,64);let w=(a,b,c)=>(0,f.wrapXOFConstructorWithOpts)((d={})=>new u(b,a,void 0===d.dkLen?c:d.dkLen,!0));c.shake128=w(31,168,16),c.shake256=w(31,136,32)},890948,(a,b,c)=>{let{keccak_256:d}=a.r(622432);function e(a){return Buffer.allocUnsafe(a).fill(0)}function f(a,b){let c=a.toString(16);c.length%2!=0&&(c="0"+c);let d=c.match(/.{1,2}/g).map(a=>parseInt(a,16));for(;d.length<b;)d.unshift(0);return Buffer.from(d)}function g(a,b,c){let d=e(b);return(a=h(a),c)?a.length<b?(a.copy(d),d):a.slice(0,b):a.length<b?(a.copy(d,b-a.length),d):a.slice(-b)}function h(a){if(!Buffer.isBuffer(a))if(Array.isArray(a))a=Buffer.from(a);else if("string"==typeof a)a=j(a)?Buffer.from(i(k(a)),"hex"):Buffer.from(a);else if("number"==typeof a){let b;a=new Buffer(i((b=a.toString(16),`0x${b}`).slice(2)),"hex")}else if(null==a)a=Buffer.allocUnsafe(0);else if("bigint"==typeof a)a=f(a);else if(a.toArray)a=Buffer.from(a.toArray());else throw Error("invalid type");return a}function i(a){return a.length%2?"0"+a:a}function j(a){return"string"==typeof a&&a.match(/^0x[0-9A-Fa-f]*$/)}function k(a){return"string"==typeof a&&a.startsWith("0x")?a.slice(2):a}b.exports={zeros:e,setLength:g,setLengthRight:function(a,b){return g(a,b,!0)},isHexString:j,stripHexPrefix:k,toBuffer:h,bufferToHex:function(a){return"0x"+(a=h(a)).toString("hex")},keccak:function(a,b){if(a=h(a),b||(b=256),256!==b)throw Error("unsupported");return Buffer.from(d(new Uint8Array(a)))},bitLengthFromBigInt:function(a){return a.toString(2).length},bufferBEFromBigInt:f,twosFromBigInt:function(a,b){return(a<0n?(~a&(1n<<BigInt(b))-1n)+1n:a)&(1n<<BigInt(b))-1n}}},691800,(a,b,c)=>{let d=a.r(890948);function e(a){if(a.startsWith("int["))return"int256"+a.slice(3);if("int"===a)return"int256";if(a.startsWith("uint["))return"uint256"+a.slice(4);if("uint"===a)return"uint256";if(a.startsWith("fixed["))return"fixed128x128"+a.slice(5);else if("fixed"===a)return"fixed128x128";else if(a.startsWith("ufixed["))return"ufixed128x128"+a.slice(6);else if("ufixed"===a)return"ufixed128x128";return a}function f(a){return Number.parseInt(/^\D+(\d+)$/.exec(a)[1],10)}function g(a){var b=/^\D+(\d+)x(\d+)$/.exec(a);return[Number.parseInt(b[1],10),Number.parseInt(b[2],10)]}function h(a){var b=a.match(/(.*)\[(.*?)\]$/);return b?""===b[2]?"dynamic":Number.parseInt(b[2],10):null}function i(a){var b=typeof a;if("string"===b||"number"===b)return BigInt(a);if("bigint"===b)return a;throw Error("Argument is not a number")}function j(a,b){if("address"===a)return j("uint160",i(b));if("bool"===a)return j("uint8",+!!b);if("string"===a)return j("bytes",new Buffer(b,"utf8"));if((m=a).lastIndexOf("]")===m.length-1){if(void 0===b.length)throw Error("Not an array?");if("dynamic"!==(c=h(a))&&0!==c&&b.length>c)throw Error("Elements exceed array size: "+c);for(l in k=[],a=a.slice(0,a.lastIndexOf("[")),"string"==typeof b&&(b=JSON.parse(b)),b)k.push(j(a,b[l]));if("dynamic"===c){var c,e,k,l,m,n=j("uint256",b.length);k.unshift(n)}return Buffer.concat(k)}else if("bytes"===a)return b=new Buffer(b),k=Buffer.concat([j("uint256",b.length),b]),b.length%32!=0&&(k=Buffer.concat([k,d.zeros(32-b.length%32)])),k;else if(a.startsWith("bytes")){if((c=f(a))<1||c>32)throw Error("Invalid bytes<N> width: "+c);return d.setLengthRight(b,32)}else if(a.startsWith("uint")){if((c=f(a))%8||c<8||c>256)throw Error("Invalid uint<N> width: "+c);e=i(b);let g=d.bitLengthFromBigInt(e);if(g>c)throw Error("Supplied uint exceeds width: "+c+" vs "+g);if(e<0)throw Error("Supplied uint is negative");return d.bufferBEFromBigInt(e,32)}else if(a.startsWith("int")){if((c=f(a))%8||c<8||c>256)throw Error("Invalid int<N> width: "+c);e=i(b);let g=d.bitLengthFromBigInt(e);if(g>c)throw Error("Supplied int exceeds width: "+c+" vs "+g);let h=d.twosFromBigInt(e,256);return d.bufferBEFromBigInt(h,32)}else if(a.startsWith("ufixed")){if(c=g(a),(e=i(b))<0)throw Error("Supplied ufixed is negative");return j("uint256",e*BigInt(2)**BigInt(c[1]))}else if(a.startsWith("fixed"))return c=g(a),j("int256",i(b)*BigInt(2)**BigInt(c[1]));throw Error("Unsupported or invalid type: "+a)}function k(a,b){if(a.length!==b.length)throw Error("Number of types are not matching the values");for(var c,g,h=[],j=0;j<a.length;j++){var k=e(a[j]),l=b[j];if("bytes"===k)h.push(l);else if("string"===k)h.push(new Buffer(l,"utf8"));else if("bool"===k)h.push(new Buffer(l?"01":"00","hex"));else if("address"===k)h.push(d.setLength(l,20));else if(k.startsWith("bytes")){if((c=f(k))<1||c>32)throw Error("Invalid bytes<N> width: "+c);h.push(d.setLengthRight(l,c))}else if(k.startsWith("uint")){if((c=f(k))%8||c<8||c>256)throw Error("Invalid uint<N> width: "+c);g=i(l);let a=d.bitLengthFromBigInt(g);if(a>c)throw Error("Supplied uint exceeds width: "+c+" vs "+a);h.push(d.bufferBEFromBigInt(g,c/8))}else if(k.startsWith("int")){if((c=f(k))%8||c<8||c>256)throw Error("Invalid int<N> width: "+c);g=i(l);let a=d.bitLengthFromBigInt(g);if(a>c)throw Error("Supplied int exceeds width: "+c+" vs "+a);let b=d.twosFromBigInt(g,c);h.push(d.bufferBEFromBigInt(b,c/8))}else throw Error("Unsupported or invalid type: "+k)}return Buffer.concat(h)}b.exports={rawEncode:function(a,b){var c=[],d=[],f=32*a.length;for(var g in a){var i=e(a[g]),k=j(i,b[g]);"string"===i||"bytes"===i||"dynamic"===h(i)?(c.push(j("uint256",f)),d.push(k),f+=k.length):c.push(k)}return Buffer.concat(c.concat(d))},solidityPack:k,soliditySHA3:function(a,b){return d.keccak(k(a,b))}}},332603,(a,b,c)=>{let d=a.r(890948),e=a.r(691800),f={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]},g={encodeData(a,b,c,f=!0){let g=["bytes32"],h=[this.hashType(a,c)];if(f){let i=(a,b,g)=>{if(void 0!==c[b])return["bytes32",null==g?"0x0000000000000000000000000000000000000000000000000000000000000000":d.keccak(this.encodeData(b,g,c,f))];if(void 0===g)throw Error(`missing value for field ${a} of type ${b}`);if("bytes"===b)return["bytes32",d.keccak(g)];if("string"===b)return"string"==typeof g&&(g=Buffer.from(g,"utf8")),["bytes32",d.keccak(g)];if(b.lastIndexOf("]")===b.length-1){let c=b.slice(0,b.lastIndexOf("[")),f=g.map(b=>i(a,c,b));return["bytes32",d.keccak(e.rawEncode(f.map(([a])=>a),f.map(([,a])=>a)))]}return[b,g]};for(let d of c[a]){let[a,c]=i(d.name,d.type,b[d.name]);g.push(a),h.push(c)}}else for(let e of c[a]){let a=b[e.name];if(void 0!==a)if("bytes"===e.type)g.push("bytes32"),a=d.keccak(a),h.push(a);else if("string"===e.type)g.push("bytes32"),"string"==typeof a&&(a=Buffer.from(a,"utf8")),a=d.keccak(a),h.push(a);else if(void 0!==c[e.type])g.push("bytes32"),a=d.keccak(this.encodeData(e.type,a,c,f)),h.push(a);else if(e.type.lastIndexOf("]")===e.type.length-1)throw Error("Arrays currently unimplemented in encodeData");else g.push(e.type),h.push(a)}return e.rawEncode(g,h)},encodeType(a,b){let c="",d=this.findTypeDependencies(a,b).filter(b=>b!==a);for(let e of d=[a].concat(d.sort())){if(!b[e])throw Error("No type definition specified: "+e);c+=e+"("+b[e].map(({name:a,type:b})=>b+" "+a).join(",")+")"}return c},findTypeDependencies(a,b,c=[]){if(a=a.match(/^\w*/)[0],c.includes(a)||void 0===b[a])return c;for(let d of(c.push(a),b[a]))for(let a of this.findTypeDependencies(d.type,b,c))c.includes(a)||c.push(a);return c},hashStruct(a,b,c,e=!0){return d.keccak(this.encodeData(a,b,c,e))},hashType(a,b){return d.keccak(this.encodeType(a,b))},sanitizeData(a){let b={};for(let c in f.properties)a[c]&&(b[c]=a[c]);return b.types&&(b.types=Object.assign({EIP712Domain:[]},b.types)),b},hash(a,b=!0){let c=this.sanitizeData(a),e=[Buffer.from("1901","hex")];return e.push(this.hashStruct("EIP712Domain",c.domain,c.types,b)),"EIP712Domain"!==c.primaryType&&e.push(this.hashStruct(c.primaryType,c.message,c.types,b)),d.keccak(Buffer.concat(e))}};b.exports={TYPED_MESSAGE_SCHEMA:f,TypedDataUtils:g,hashForSignTypedDataLegacy:function(a){return function(a){let b=Error("Expect argument to be non-empty array");if("object"!=typeof a||!a.length)throw b;let c=a.map(function(a){return"bytes"===a.type?d.toBuffer(a.value):a.value}),f=a.map(function(a){return a.type}),g=a.map(function(a){if(!a.name)throw b;return a.type+" "+a.name});return e.soliditySHA3(["bytes32","bytes32"],[e.soliditySHA3(Array(a.length).fill("string"),g),e.soliditySHA3(f,c)])}(a.data)},hashForSignTypedData_v3:function(a){return g.hash(a.data,!1)},hashForSignTypedData_v4:function(a){return g.hash(a.data)}}},822554,a=>{"use strict";let b,c,d,e,f,g,h,i,j=()=>new Promise((a,b)=>{if(window.ClientAnalytics)return a();try{let b=document.createElement("script");b.textContent='!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ClientAnalytics=t():e.ClientAnalytics=t()}(this,(function(){return(()=>{var e={792:e=>{var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}};e.exports=t},562:e=>{var t,n;t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&n.rotl(e,8)|4278255360&n.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=n.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,r=0;n<e.length;n++,r+=8)t[r>>>5]|=e[n]<<24-r%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var n=[],r=0;r<e.length;r+=3)for(var i=e[r]<<16|e[r+1]<<8|e[r+2],a=0;a<4;a++)8*r+6*a<=8*e.length?n.push(t.charAt(i>>>6*(3-a)&63)):n.push("=");return n.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\\/]/gi,"");for(var n=[],r=0,i=0;r<e.length;i=++r%4)0!=i&&n.push((t.indexOf(e.charAt(r-1))&Math.pow(2,-2*i+8)-1)<<2*i|t.indexOf(e.charAt(r))>>>6-2*i);return n}},e.exports=n},335:e=>{function t(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(t(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&t(e.slice(0,0))}(e)||!!e._isBuffer)}},762:(e,t,n)=>{var r,i,a,o,s;r=n(562),i=n(792).utf8,a=n(335),o=n(792).bin,(s=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?o.stringToBytes(e):i.stringToBytes(e):a(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var n=r.bytesToWords(e),c=8*e.length,u=1732584193,l=-271733879,d=-1732584194,p=271733878,m=0;m<n.length;m++)n[m]=16711935&(n[m]<<8|n[m]>>>24)|4278255360&(n[m]<<24|n[m]>>>8);n[c>>>5]|=128<<c%32,n[14+(c+64>>>9<<4)]=c;var f=s._ff,v=s._gg,g=s._hh,b=s._ii;for(m=0;m<n.length;m+=16){var h=u,w=l,y=d,T=p;u=f(u,l,d,p,n[m+0],7,-680876936),p=f(p,u,l,d,n[m+1],12,-389564586),d=f(d,p,u,l,n[m+2],17,606105819),l=f(l,d,p,u,n[m+3],22,-1044525330),u=f(u,l,d,p,n[m+4],7,-176418897),p=f(p,u,l,d,n[m+5],12,1200080426),d=f(d,p,u,l,n[m+6],17,-1473231341),l=f(l,d,p,u,n[m+7],22,-45705983),u=f(u,l,d,p,n[m+8],7,1770035416),p=f(p,u,l,d,n[m+9],12,-1958414417),d=f(d,p,u,l,n[m+10],17,-42063),l=f(l,d,p,u,n[m+11],22,-1990404162),u=f(u,l,d,p,n[m+12],7,1804603682),p=f(p,u,l,d,n[m+13],12,-40341101),d=f(d,p,u,l,n[m+14],17,-1502002290),u=v(u,l=f(l,d,p,u,n[m+15],22,1236535329),d,p,n[m+1],5,-165796510),p=v(p,u,l,d,n[m+6],9,-1069501632),d=v(d,p,u,l,n[m+11],14,643717713),l=v(l,d,p,u,n[m+0],20,-373897302),u=v(u,l,d,p,n[m+5],5,-701558691),p=v(p,u,l,d,n[m+10],9,38016083),d=v(d,p,u,l,n[m+15],14,-660478335),l=v(l,d,p,u,n[m+4],20,-405537848),u=v(u,l,d,p,n[m+9],5,568446438),p=v(p,u,l,d,n[m+14],9,-1019803690),d=v(d,p,u,l,n[m+3],14,-187363961),l=v(l,d,p,u,n[m+8],20,1163531501),u=v(u,l,d,p,n[m+13],5,-1444681467),p=v(p,u,l,d,n[m+2],9,-51403784),d=v(d,p,u,l,n[m+7],14,1735328473),u=g(u,l=v(l,d,p,u,n[m+12],20,-1926607734),d,p,n[m+5],4,-378558),p=g(p,u,l,d,n[m+8],11,-2022574463),d=g(d,p,u,l,n[m+11],16,1839030562),l=g(l,d,p,u,n[m+14],23,-35309556),u=g(u,l,d,p,n[m+1],4,-1530992060),p=g(p,u,l,d,n[m+4],11,1272893353),d=g(d,p,u,l,n[m+7],16,-155497632),l=g(l,d,p,u,n[m+10],23,-1094730640),u=g(u,l,d,p,n[m+13],4,681279174),p=g(p,u,l,d,n[m+0],11,-358537222),d=g(d,p,u,l,n[m+3],16,-722521979),l=g(l,d,p,u,n[m+6],23,76029189),u=g(u,l,d,p,n[m+9],4,-640364487),p=g(p,u,l,d,n[m+12],11,-421815835),d=g(d,p,u,l,n[m+15],16,530742520),u=b(u,l=g(l,d,p,u,n[m+2],23,-995338651),d,p,n[m+0],6,-198630844),p=b(p,u,l,d,n[m+7],10,1126891415),d=b(d,p,u,l,n[m+14],15,-1416354905),l=b(l,d,p,u,n[m+5],21,-57434055),u=b(u,l,d,p,n[m+12],6,1700485571),p=b(p,u,l,d,n[m+3],10,-1894986606),d=b(d,p,u,l,n[m+10],15,-1051523),l=b(l,d,p,u,n[m+1],21,-2054922799),u=b(u,l,d,p,n[m+8],6,1873313359),p=b(p,u,l,d,n[m+15],10,-30611744),d=b(d,p,u,l,n[m+6],15,-1560198380),l=b(l,d,p,u,n[m+13],21,1309151649),u=b(u,l,d,p,n[m+4],6,-145523070),p=b(p,u,l,d,n[m+11],10,-1120210379),d=b(d,p,u,l,n[m+2],15,718787259),l=b(l,d,p,u,n[m+9],21,-343485551),u=u+h>>>0,l=l+w>>>0,d=d+y>>>0,p=p+T>>>0}return r.endian([u,l,d,p])})._ff=function(e,t,n,r,i,a,o){var s=e+(t&n|~t&r)+(i>>>0)+o;return(s<<a|s>>>32-a)+t},s._gg=function(e,t,n,r,i,a,o){var s=e+(t&r|n&~r)+(i>>>0)+o;return(s<<a|s>>>32-a)+t},s._hh=function(e,t,n,r,i,a,o){var s=e+(t^n^r)+(i>>>0)+o;return(s<<a|s>>>32-a)+t},s._ii=function(e,t,n,r,i,a,o){var s=e+(n^(t|~r))+(i>>>0)+o;return(s<<a|s>>>32-a)+t},s._blocksize=16,s._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var n=r.wordsToBytes(s(e,t));return t&&t.asBytes?n:t&&t.asString?o.bytesToString(n):r.bytesToHex(n)}},2:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Perfume:()=>ze,incrementUjNavigation:()=>Le,markStep:()=>Re,markStepOnce:()=>qe});var r,i,a={isResourceTiming:!1,isElementTiming:!1,maxTime:3e4,reportOptions:{},enableNavigationTracking:!0},o=window,s=o.console,c=o.navigator,u=o.performance,l=function(){return c.deviceMemory},d=function(){return c.hardwareConcurrency},p="mark.",m=function(){return u&&!!u.getEntriesByType&&!!u.now&&!!u.mark},f="4g",v=!1,g={},b={value:0},h={value:{beacon:0,css:0,fetch:0,img:0,other:0,script:0,total:0,xmlhttprequest:0}},w={value:0},y={value:0},T={},k={isHidden:!1,didChange:!1},_=function(){k.isHidden=!1,document.hidden&&(k.isHidden=document.hidden,k.didChange=!0)},S=function(e,t){try{var n=new PerformanceObserver((function(e){t(e.getEntries())}));return n.observe({type:e,buffered:!0}),n}catch(e){s.warn("Perfume.js:",e)}return null},E=function(){return!!(d()&&d()<=4)||!!(l()&&l()<=4)},x=function(e,t){switch(e){case"slow-2g":case"2g":case"3g":return!0;default:return E()||t}},O=function(e){return parseFloat(e.toFixed(4))},j=function(e){return"number"!=typeof e?null:O(e/Math.pow(1024,2))},N=function(e,t,n,r,i){var s,u=function(){a.analyticsTracker&&(k.isHidden&&!["CLS","INP"].includes(e)||a.analyticsTracker({attribution:r,metricName:e,data:t,navigatorInformation:c?{deviceMemory:l()||0,hardwareConcurrency:d()||0,serviceWorkerStatus:"serviceWorker"in c?c.serviceWorker.controller?"controlled":"supported":"unsupported",isLowEndDevice:E(),isLowEndExperience:x(f,v)}:{},rating:n,navigationType:i}))};["CLS","INP"].includes(e)?u():(s=u,"requestIdleCallback"in o?o.requestIdleCallback(s,{timeout:3e3}):s())},I=function(e){e.forEach((function(e){if(!("self"!==e.name||e.startTime<b.value)){var t=e.duration-50;t>0&&(w.value+=t,y.value+=t)}}))};!function(e){e.instant="instant",e.quick="quick",e.moderate="moderate",e.slow="slow",e.unavoidable="unavoidable"}(r||(r={}));var P,M,B,C,D,A=((i={})[r.instant]={vitalsThresholds:[100,200],maxOutlierThreshold:1e4},i[r.quick]={vitalsThresholds:[200,500],maxOutlierThreshold:1e4},i[r.moderate]={vitalsThresholds:[500,1e3],maxOutlierThreshold:1e4},i[r.slow]={vitalsThresholds:[1e3,2e3],maxOutlierThreshold:1e4},i[r.unavoidable]={vitalsThresholds:[2e3,5e3],maxOutlierThreshold:2e4},i),L={RT:[100,200],TBT:[200,600],NTBT:[200,600]},U=function(e,t){return L[e]?t<=L[e][0]?"good":t<=L[e][1]?"needsImprovement":"poor":null},R=function(e,t,n){Object.keys(t).forEach((function(e){"number"==typeof t[e]&&(t[e]=O(t[e]))})),N(e,t,null,n||{})},q=function(e){var t=e.attribution,n=e.name,r=e.rating,i=e.value,o=e.navigationType;"FCP"===n&&(b.value=i),["FCP","LCP"].includes(n)&&!T[0]&&(T[0]=S("longtask",I)),"FID"===n&&setTimeout((function(){k.didChange||(q({attribution:t,name:"TBT",rating:U("TBT",w.value),value:w.value,navigationType:o}),R("dataConsumption",h.value))}),1e4);var s=O(i);s<=a.maxTime&&s>=0&&N(n,s,r,t,o)},F=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},z=function(e){if("loading"===document.readyState)return"loading";var t=F();if(t){if(e<t.domInteractive)return"loading";if(0===t.domContentLoadedEventStart||e<t.domContentLoadedEventStart)return"dom-interactive";if(0===t.domComplete||e<t.domComplete)return"dom-content-loaded"}return"complete"},K=function(e){var t=e.nodeName;return 1===e.nodeType?t.toLowerCase():t.toUpperCase().replace(/^#/,"")},$=function(e,t){var n="";try{for(;e&&9!==e.nodeType;){var r=e,i=r.id?"#"+r.id:K(r)+(r.className&&r.className.length?"."+r.className.replace(/\\s+/g,"."):"");if(n.length+i.length>(t||100)-1)return n||i;if(n=n?i+">"+n:i,r.id)break;e=r.parentNode}}catch(e){}return n},Q=-1,W=function(){return Q},H=function(e){addEventListener("pageshow",(function(t){t.persisted&&(Q=t.timeStamp,e(t))}),!0)},V=function(){var e=F();return e&&e.activationStart||0},J=function(e,t){var n=F(),r="navigate";return W()>=0?r="back-forward-cache":n&&(r=document.prerendering||V()>0?"prerender":document.wasDiscarded?"restore":n.type.replace(/_/g,"-")),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},X=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var r=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch(e){}},G=function(e,t){var n=function n(r){"pagehide"!==r.type&&"hidden"!==document.visibilityState||(e(r),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},Z=function(e,t,n,r){var i,a;return function(o){t.value>=0&&(o||r)&&((a=t.value-(i||0))||void 0===i)&&(i=t.value,t.delta=a,t.rating=function(e,t){return e>t[1]?"poor":e>t[0]?"needs-improvement":"good"}(t.value,n),e(t))}},Y=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},ee=function(e){document.prerendering?addEventListener("prerenderingchange",(function(){return e()}),!0):e()},te=-1,ne=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},re=function(e){"hidden"===document.visibilityState&&te>-1&&(te="visibilitychange"===e.type?e.timeStamp:0,ae())},ie=function(){addEventListener("visibilitychange",re,!0),addEventListener("prerenderingchange",re,!0)},ae=function(){removeEventListener("visibilitychange",re,!0),removeEventListener("prerenderingchange",re,!0)},oe=function(){return te<0&&(te=ne(),ie(),H((function(){setTimeout((function(){te=ne(),ie()}),0)}))),{get firstHiddenTime(){return te}}},se=function(e,t){t=t||{},ee((function(){var n,r=[1800,3e3],i=oe(),a=J("FCP"),o=X("paint",(function(e){e.forEach((function(e){"first-contentful-paint"===e.name&&(o.disconnect(),e.startTime<i.firstHiddenTime&&(a.value=Math.max(e.startTime-V(),0),a.entries.push(e),n(!0)))}))}));o&&(n=Z(e,a,r,t.reportAllChanges),H((function(i){a=J("FCP"),n=Z(e,a,r,t.reportAllChanges),Y((function(){a.value=performance.now()-i.timeStamp,n(!0)}))})))}))},ce={passive:!0,capture:!0},ue=new Date,le=function(e,t){P||(P=t,M=e,B=new Date,me(removeEventListener),de())},de=function(){if(M>=0&&M<B-ue){var e={entryType:"first-input",name:P.type,target:P.target,cancelable:P.cancelable,startTime:P.timeStamp,processingStart:P.timeStamp+M};C.forEach((function(t){t(e)})),C=[]}},pe=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,t){var n=function(){le(e,t),i()},r=function(){i()},i=function(){removeEventListener("pointerup",n,ce),removeEventListener("pointercancel",r,ce)};addEventListener("pointerup",n,ce),addEventListener("pointercancel",r,ce)}(t,e):le(t,e)}},me=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,pe,ce)}))},fe=0,ve=1/0,ge=0,be=function(e){e.forEach((function(e){e.interactionId&&(ve=Math.min(ve,e.interactionId),ge=Math.max(ge,e.interactionId),fe=ge?(ge-ve)/7+1:0)}))},he=function(){return D?fe:performance.interactionCount||0},we=0,ye=function(){return he()-we},Te=[],ke={},_e=function(e){var t=Te[Te.length-1],n=ke[e.interactionId];if(n||Te.length<10||e.duration>t.latency){if(n)n.entries.push(e),n.latency=Math.max(n.latency,e.duration);else{var r={id:e.interactionId,latency:e.duration,entries:[e]};ke[r.id]=r,Te.push(r)}Te.sort((function(e,t){return t.latency-e.latency})),Te.splice(10).forEach((function(e){delete ke[e.id]}))}},Se={},Ee=function e(t){document.prerendering?ee((function(){return e(t)})):"complete"!==document.readyState?addEventListener("load",(function(){return e(t)}),!0):setTimeout(t,0)},xe=function(e,t){t=t||{};var n=[800,1800],r=J("TTFB"),i=Z(e,r,n,t.reportAllChanges);Ee((function(){var a=F();if(a){var o=a.responseStart;if(o<=0||o>performance.now())return;r.value=Math.max(o-V(),0),r.entries=[a],i(!0),H((function(){r=J("TTFB",0),(i=Z(e,r,n,t.reportAllChanges))(!0)}))}}))},Oe=function(e){e.forEach((function(e){e.identifier&&q({attribution:{identifier:e.identifier},name:"ET",rating:null,value:e.startTime})}))},je=function(e){e.forEach((function(e){if(a.isResourceTiming&&R("resourceTiming",e),e.decodedBodySize&&e.initiatorType){var t=e.decodedBodySize/1e3;h.value[e.initiatorType]+=t,h.value.total+=t}}))},Ne=function(){!function(e,t){xe((function(e){!function(e){if(e.entries.length){var t=e.entries[0],n=t.activationStart||0,r=Math.max(t.domainLookupStart-n,0),i=Math.max(t.connectStart-n,0),a=Math.max(t.requestStart-n,0);e.attribution={waitingTime:r,dnsTime:i-r,connectionTime:a-i,requestTime:e.value-a,navigationEntry:t}}else e.attribution={waitingTime:0,dnsTime:0,connectionTime:0,requestTime:0}}(e),function(e){e.value>0&&q(e)}(e)}),t)}(0,a.reportOptions.ttfb),function(e,t){!function(e,t){t=t||{},ee((function(){var e,n=[.1,.25],r=J("CLS"),i=-1,a=0,o=[],s=function(e){i>-1&&function(e){!function(e){if(e.entries.length){var t=e.entries.reduce((function(e,t){return e&&e.value>t.value?e:t}));if(t&&t.sources&&t.sources.length){var n=(r=t.sources).find((function(e){return e.node&&1===e.node.nodeType}))||r[0];if(n)return void(e.attribution={largestShiftTarget:$(n.node),largestShiftTime:t.startTime,largestShiftValue:t.value,largestShiftSource:n,largestShiftEntry:t,loadState:z(t.startTime)})}}var r;e.attribution={}}(e),function(e){q(e)}(e)}(e)},c=function(t){t.forEach((function(t){if(!t.hadRecentInput){var n=o[0],i=o[o.length-1];a&&t.startTime-i.startTime<1e3&&t.startTime-n.startTime<5e3?(a+=t.value,o.push(t)):(a=t.value,o=[t]),a>r.value&&(r.value=a,r.entries=o,e())}}))},u=X("layout-shift",c);u&&(e=Z(s,r,n,t.reportAllChanges),se((function(t){i=t.value,r.value<0&&(r.value=0,e())})),G((function(){c(u.takeRecords()),e(!0)})),H((function(){a=0,i=-1,r=J("CLS",0),e=Z(s,r,n,t.reportAllChanges),Y((function(){return e()}))})))}))}(0,t)}(0,a.reportOptions.cls),function(e,t){se((function(e){!function(e){if(e.entries.length){var t=F(),n=e.entries[e.entries.length-1];if(t){var r=t.activationStart||0,i=Math.max(0,t.responseStart-r);return void(e.attribution={timeToFirstByte:i,firstByteToFCP:e.value-i,loadState:z(e.entries[0].startTime),navigationEntry:t,fcpEntry:n})}}e.attribution={timeToFirstByte:0,firstByteToFCP:e.value,loadState:z(W())}}(e),function(e){q(e)}(e)}),t)}(0,a.reportOptions.fcp),function(e,t){!function(e,t){t=t||{},ee((function(){var n,r=[100,300],i=oe(),a=J("FID"),o=function(e){e.startTime<i.firstHiddenTime&&(a.value=e.processingStart-e.startTime,a.entries.push(e),n(!0))},s=function(e){e.forEach(o)},c=X("first-input",s);n=Z(e,a,r,t.reportAllChanges),c&&G((function(){s(c.takeRecords()),c.disconnect()}),!0),c&&H((function(){var i;a=J("FID"),n=Z(e,a,r,t.reportAllChanges),C=[],M=-1,P=null,me(addEventListener),i=o,C.push(i),de()}))}))}((function(e){!function(e){var t=e.entries[0];e.attribution={eventTarget:$(t.target),eventType:t.name,eventTime:t.startTime,eventEntry:t,loadState:z(t.startTime)}}(e),function(e){q(e)}(e)}),t)}(0,a.reportOptions.fid),function(e,t){!function(e,t){t=t||{},ee((function(){var n,r=[2500,4e3],i=oe(),a=J("LCP"),o=function(e){var t=e[e.length-1];if(t){var r=Math.max(t.startTime-V(),0);r<i.firstHiddenTime&&(a.value=r,a.entries=[t],n())}},s=X("largest-contentful-paint",o);if(s){n=Z(e,a,r,t.reportAllChanges);var c=function(){Se[a.id]||(o(s.takeRecords()),s.disconnect(),Se[a.id]=!0,n(!0))};["keydown","click"].forEach((function(e){addEventListener(e,c,{once:!0,capture:!0})})),G(c,!0),H((function(i){a=J("LCP"),n=Z(e,a,r,t.reportAllChanges),Y((function(){a.value=performance.now()-i.timeStamp,Se[a.id]=!0,n(!0)}))}))}}))}((function(e){!function(e){if(e.entries.length){var t=F();if(t){var n=t.activationStart||0,r=e.entries[e.entries.length-1],i=r.url&&performance.getEntriesByType("resource").filter((function(e){return e.name===r.url}))[0],a=Math.max(0,t.responseStart-n),o=Math.max(a,i?(i.requestStart||i.startTime)-n:0),s=Math.max(o,i?i.responseEnd-n:0),c=Math.max(s,r?r.startTime-n:0),u={element:$(r.element),timeToFirstByte:a,resourceLoadDelay:o-a,resourceLoadTime:s-o,elementRenderDelay:c-s,navigationEntry:t,lcpEntry:r};return r.url&&(u.url=r.url),i&&(u.lcpResourceEntry=i),void(e.attribution=u)}}e.attribution={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadTime:0,elementRenderDelay:e.value}}(e),function(e){q(e)}(e)}),t)}(0,a.reportOptions.lcp),function(e,t){!function(e,t){t=t||{},ee((function(){var n=[200,500];"interactionCount"in performance||D||(D=X("event",be,{type:"event",buffered:!0,durationThreshold:0}));var r,i=J("INP"),a=function(e){e.forEach((function(e){e.interactionId&&_e(e),"first-input"===e.entryType&&!Te.some((function(t){return t.entries.some((function(t){return e.duration===t.duration&&e.startTime===t.startTime}))}))&&_e(e)}));var t,n=(t=Math.min(Te.length-1,Math.floor(ye()/50)),Te[t]);n&&n.latency!==i.value&&(i.value=n.latency,i.entries=n.entries,r())},o=X("event",a,{durationThreshold:t.durationThreshold||40});r=Z(e,i,n,t.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),G((function(){a(o.takeRecords()),i.value<0&&ye()>0&&(i.value=0,i.entries=[]),r(!0)})),H((function(){Te=[],we=he(),i=J("INP"),r=Z(e,i,n,t.reportAllChanges)})))}))}((function(t){!function(e){if(e.entries.length){var t=e.entries.sort((function(e,t){return t.duration-e.duration||t.processingEnd-t.processingStart-(e.processingEnd-e.processingStart)}))[0];e.attribution={eventTarget:$(t.target),eventType:t.name,eventTime:t.startTime,eventEntry:t,loadState:z(t.startTime)}}else e.attribution={}}(t),e(t)}),t)}((function(e){return q(e)}),a.reportOptions.inp),a.isResourceTiming&&S("resource",je),a.isElementTiming&&S("element",Oe)},Ie=function(e){var t="usageDetails"in e?e.usageDetails:{};R("storageEstimate",{quota:j(e.quota),usage:j(e.usage),caches:j(t.caches),indexedDB:j(t.indexedDB),serviceWorker:j(t.serviceWorkerRegistrations)})},Pe={finalMarkToStepsMap:{},startMarkToStepsMap:{},active:{},navigationSteps:{}},Me=function(e){delete Pe.active[e]},Be=function(){return Pe.navigationSteps},Ce=function(e){var t;return null!==(t=Be()[e])&&void 0!==t?t:{}},De=function(e,t,n){var r="step."+e,i=u.getEntriesByName(p+t).length>0;if(u.getEntriesByName(p+n).length>0&&a.steps){var o=A[a.steps[e].threshold],s=o.maxOutlierThreshold,c=o.vitalsThresholds;if(i){var l=u.measure(r,p+t,p+n),d=l.duration;if(d<=s){var m=function(e,t){return e<=t[0]?"good":e<=t[1]?"needsImprovement":"poor"}(d,c);d>=0&&(N("userJourneyStep",d,m,{stepName:e},void 0),u.measure("step.".concat(e,"_vitals_").concat(m),{start:l.startTime+l.duration,end:l.startTime+l.duration,detail:{type:"stepVital",duration:d}}))}}}},Ae=function(){var e=Be(),t=Pe.startMarkToStepsMap,n=Object.keys(e).length;if(0===n)return{};var r={},i=n-1,a=Ce(i);if(Object.keys(a).forEach((function(e){var n,i=null!==(n=t[e])&&void 0!==n?n:[];Object.keys(i).forEach((function(e){r[e]=!0}))})),n>1){var o=Ce(i-1);Object.keys(o).forEach((function(e){var n,i=null!==(n=t[e])&&void 0!==n?n:[];Object.keys(i).forEach((function(e){r[e]=!0}))}))}return r},Le=function(){var e,t=Object.keys(Pe.navigationSteps).length;Pe.navigationSteps[t]={};var n=Ae();null===(e=a.onMarkStep)||void 0===e||e.call(a,"",Object.keys(n))},Ue=function(e){var t,n,r,i,o,s,c;if(Pe.finalMarkToStepsMap[e]){!function(e){var t=Pe.navigationSteps,n=Pe.finalMarkToStepsMap,r=Object.keys(t).length;if(0!==r){var i=r-1,a=Ce(i);if(a&&n[e]){var o=n[e];o&&Object.keys(o).forEach((function(e){if(a[e]){var n=Ce(i)||{};n[e]=!1,t[i]=n}if(r>1){var o=i-1,s=Ce(o);s[e]&&(s[e]=!1,t[o]=s)}}))}}}(e);var u=Pe.finalMarkToStepsMap[e];Object.keys(u).forEach((function(t){var n=u[t];n.forEach(Me),Promise.all(n.map((function(n){return function(e,t,n,r){return new(n||(n=Promise))((function(e,t){function i(e){try{o(r.next(e))}catch(e){t(e)}}function a(e){try{o(r.throw(e))}catch(e){t(e)}}function o(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(i,a)}o((r=r.apply(undefined,[])).next())}))}(0,0,void 0,(function(){return function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}(this,(function(r){switch(r.label){case 0:return[4,De(n,t,e)];case 1:return r.sent(),[2]}}))}))}))).catch((function(){}))}))}else r=e,i=Pe.navigationSteps,o=Object.keys(i).length,(c=Ce(s=(o>0?o:1)-1)||[])[r]=!0,i[s]=c,function(e){var t,n=null!==(t=Pe.startMarkToStepsMap[e])&&void 0!==t?t:[];Object.keys(n).forEach((function(e){Pe.active[e]||(Pe.active[e]=!0)}))}(e);if(a.enableNavigationTracking){var l=Ae();null===(t=a.onMarkStep)||void 0===t||t.call(a,e,Object.keys(l))}else null===(n=a.onMarkStep)||void 0===n||n.call(a,e,Object.keys(Pe.active))},Re=function(e){u.mark(p+e),Ue(e)},qe=function(e){0===u.getEntriesByName(p+e).length&&(u.mark(p+e),Ue(e))},Fe=0,ze=function(){function e(e){if(void 0===e&&(e={}),this.v="9.0.0-rc.3",a.analyticsTracker=e.analyticsTracker,a.isResourceTiming=!!e.resourceTiming,a.isElementTiming=!!e.elementTiming,a.maxTime=e.maxMeasureTime||a.maxTime,a.reportOptions=e.reportOptions||a.reportOptions,a.steps=e.steps,a.onMarkStep=e.onMarkStep,a.enableNavigationTracking=e.enableNavigationTracking,m()){"PerformanceObserver"in o&&Ne(),void 0!==document.hidden&&document.addEventListener("visibilitychange",_);var t=function(){if(!m())return{};var e=u.getEntriesByType("navigation")[0];if(!e)return{};var t=e.responseStart,n=e.responseEnd;return{fetchTime:n-e.fetchStart,workerTime:e.workerStart>0?n-e.workerStart:0,totalTime:n-e.requestStart,downloadTime:n-t,timeToFirstByte:t-e.requestStart,headerSize:e.transferSize-e.encodedBodySize||0,dnsLookupTime:e.domainLookupEnd-e.domainLookupStart,redirectTime:e.redirectEnd-e.redirectStart}}();R("navigationTiming",t),t.redirectTime&&q({attribution:{},name:"RT",rating:U("RT",t.redirectTime),value:t.redirectTime}),R("networkInformation",function(){if("connection"in c){var e=c.connection;return"object"!=typeof e?{}:(f=e.effectiveType,v=!!e.saveData,{downlink:e.downlink,effectiveType:e.effectiveType,rtt:e.rtt,saveData:!!e.saveData})}return{}}()),c&&c.storage&&"function"==typeof c.storage.estimate&&c.storage.estimate().then(Ie),a.steps&&a.steps&&(Pe.startMarkToStepsMap={},Pe.finalMarkToStepsMap={},Pe.active={},Pe.navigationSteps={},Object.entries(a.steps).forEach((function(e){var t,n,r=e[0],i=e[1].marks,a=i[0],o=i[1],s=null!==(n=Pe.startMarkToStepsMap[a])&&void 0!==n?n:{};if(s[r]=!0,Pe.startMarkToStepsMap[a]=s,Pe.finalMarkToStepsMap[o]){var c=Pe.finalMarkToStepsMap[o][a]||[];c.push(r),Pe.finalMarkToStepsMap[o][a]=c}else Pe.finalMarkToStepsMap[o]=((t={})[a]=[r],t)})))}}return e.prototype.start=function(e){m()&&!g[e]&&(g[e]=!0,u.mark("mark_".concat(e,"_start")))},e.prototype.end=function(e,t,n){if(void 0===t&&(t={}),void 0===n&&(n=!0),m()&&g[e]){u.mark("mark_".concat(e,"_end")),delete g[e];var r=function(e){u.measure(e,"mark_".concat(e,"_start"),"mark_".concat(e,"_end"));var t=u.getEntriesByName(e).pop();return t&&"measure"===t.entryType?t.duration:-1}(e);n&&R(e,O(r),t)}},e.prototype.endPaint=function(e,t){var n=this;setTimeout((function(){n.end(e,t)}))},e.prototype.clear=function(e){delete g[e],u.clearMarks&&(u.clearMarks("mark_".concat(e,"_start")),u.clearMarks("mark_".concat(e,"_end")))},e.prototype.markNTBT=function(){var e=this;this.start("ntbt"),y.value=0,clearTimeout(Fe),Fe=setTimeout((function(){e.end("ntbt",{},!1),q({attribution:{},name:"NTBT",rating:U("NTBT",y.value),value:y.value}),y.value=0}),2e3)},e}()},426:(e,t)=>{"use strict";Symbol.for("react.element"),Symbol.for("react.portal"),Symbol.for("react.fragment"),Symbol.for("react.strict_mode"),Symbol.for("react.profiler"),Symbol.for("react.provider"),Symbol.for("react.context"),Symbol.for("react.forward_ref"),Symbol.for("react.suspense"),Symbol.for("react.memo"),Symbol.for("react.lazy"),Symbol.iterator;var n={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},r=Object.assign,i={};function a(e,t,r){this.props=e,this.context=t,this.refs=i,this.updater=r||n}function o(){}function s(e,t,r){this.props=e,this.context=t,this.refs=i,this.updater=r||n}a.prototype.isReactComponent={},a.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},a.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},o.prototype=a.prototype;var c=s.prototype=new o;c.constructor=s,r(c,a.prototype),c.isPureReactComponent=!0;Array.isArray,Object.prototype.hasOwnProperty;var u={current:null};t.useCallback=function(e,t){return u.current.useCallback(e,t)},t.useEffect=function(e,t){return u.current.useEffect(e,t)},t.useRef=function(e){return u.current.useRef(e)}},784:(e,t,n)=>{"use strict";e.exports=n(426)},353:function(e,t,n){var r;!function(i,a){"use strict";var o="function",s="undefined",c="object",u="string",l="major",d="model",p="name",m="type",f="vendor",v="version",g="architecture",b="console",h="mobile",w="tablet",y="smarttv",T="wearable",k="embedded",_="Amazon",S="Apple",E="ASUS",x="BlackBerry",O="Browser",j="Chrome",N="Firefox",I="Google",P="Huawei",M="LG",B="Microsoft",C="Motorola",D="Opera",A="Samsung",L="Sharp",U="Sony",R="Xiaomi",q="Zebra",F="Facebook",z="Chromium OS",K="Mac OS",$=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},Q=function(e,t){return typeof e===u&&-1!==W(t).indexOf(W(e))},W=function(e){return e.toLowerCase()},H=function(e,t){if(typeof e===u)return e=e.replace(/^\\s\\s*/,""),typeof t===s?e:e.substring(0,350)},V=function(e,t){for(var n,r,i,s,u,l,d=0;d<t.length&&!u;){var p=t[d],m=t[d+1];for(n=r=0;n<p.length&&!u&&p[n];)if(u=p[n++].exec(e))for(i=0;i<m.length;i++)l=u[++r],typeof(s=m[i])===c&&s.length>0?2===s.length?typeof s[1]==o?this[s[0]]=s[1].call(this,l):this[s[0]]=s[1]:3===s.length?typeof s[1]!==o||s[1].exec&&s[1].test?this[s[0]]=l?l.replace(s[1],s[2]):a:this[s[0]]=l?s[1].call(this,l,s[2]):a:4===s.length&&(this[s[0]]=l?s[3].call(this,l.replace(s[1],s[2])):a):this[s]=l||a;d+=2}},J=function(e,t){for(var n in t)if(typeof t[n]===c&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(Q(t[n][r],e))return"?"===n?a:n}else if(Q(t[n],e))return"?"===n?a:n;return e},X={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},G={browser:[[/\\b(?:crmo|crios)\\/([\\w\\.]+)/i],[v,[p,"Chrome"]],[/edg(?:e|ios|a)?\\/([\\w\\.]+)/i],[v,[p,"Edge"]],[/(opera mini)\\/([-\\w\\.]+)/i,/(opera [mobiletab]{3,6})\\b.+version\\/([-\\w\\.]+)/i,/(opera)(?:.+version\\/|[\\/ ]+)([\\w\\.]+)/i],[p,v],[/opios[\\/ ]+([\\w\\.]+)/i],[v,[p,D+" Mini"]],[/\\bopr\\/([\\w\\.]+)/i],[v,[p,D]],[/(kindle)\\/([\\w\\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\\/ ]?([\\w\\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\\/ ]?([\\w\\.]*)/i,/(ba?idubrowser)[\\/ ]?([\\w\\.]+)/i,/(?:ms|\\()(ie) ([\\w\\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\\/([-\\w\\.]+)/i,/(heytap|ovi)browser\\/([\\d\\.]+)/i,/(weibo)__([\\d\\.]+)/i],[p,v],[/(?:\\buc? ?browser|(?:juc.+)ucweb)[\\/ ]?([\\w\\.]+)/i],[v,[p,"UC"+O]],[/microm.+\\bqbcore\\/([\\w\\.]+)/i,/\\bqbcore\\/([\\w\\.]+).+microm/i],[v,[p,"WeChat(Win) Desktop"]],[/micromessenger\\/([\\w\\.]+)/i],[v,[p,"WeChat"]],[/konqueror\\/([\\w\\.]+)/i],[v,[p,"Konqueror"]],[/trident.+rv[: ]([\\w\\.]{1,9})\\b.+like gecko/i],[v,[p,"IE"]],[/ya(?:search)?browser\\/([\\w\\.]+)/i],[v,[p,"Yandex"]],[/(avast|avg)\\/([\\w\\.]+)/i],[[p,/(.+)/,"$1 Secure "+O],v],[/\\bfocus\\/([\\w\\.]+)/i],[v,[p,N+" Focus"]],[/\\bopt\\/([\\w\\.]+)/i],[v,[p,D+" Touch"]],[/coc_coc\\w+\\/([\\w\\.]+)/i],[v,[p,"Coc Coc"]],[/dolfin\\/([\\w\\.]+)/i],[v,[p,"Dolphin"]],[/coast\\/([\\w\\.]+)/i],[v,[p,D+" Coast"]],[/miuibrowser\\/([\\w\\.]+)/i],[v,[p,"MIUI "+O]],[/fxios\\/([-\\w\\.]+)/i],[v,[p,N]],[/\\bqihu|(qi?ho?o?|360)browser/i],[[p,"360 "+O]],[/(oculus|samsung|sailfish|huawei)browser\\/([\\w\\.]+)/i],[[p,/(.+)/,"$1 "+O],v],[/(comodo_dragon)\\/([\\w\\.]+)/i],[[p,/_/g," "],v],[/(electron)\\/([\\w\\.]+) safari/i,/(tesla)(?: qtcarbrowser|\\/(20\\d\\d\\.[-\\w\\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\\/ ]?([\\w\\.]+)/i],[p,v],[/(metasr)[\\/ ]?([\\w\\.]+)/i,/(lbbrowser)/i,/\\[(linkedin)app\\]/i],[p],[/((?:fban\\/fbios|fb_iab\\/fb4a)(?!.+fbav)|;fbav\\/([\\w\\.]+);)/i],[[p,F],v],[/(kakao(?:talk|story))[\\/ ]([\\w\\.]+)/i,/(naver)\\(.*?(\\d+\\.[\\w\\.]+).*\\)/i,/safari (line)\\/([\\w\\.]+)/i,/\\b(line)\\/([\\w\\.]+)\\/iab/i,/(chromium|instagram)[\\/ ]([-\\w\\.]+)/i],[p,v],[/\\bgsa\\/([\\w\\.]+) .*safari\\//i],[v,[p,"GSA"]],[/musical_ly(?:.+app_?version\\/|_)([\\w\\.]+)/i],[v,[p,"TikTok"]],[/headlesschrome(?:\\/([\\w\\.]+)| )/i],[v,[p,j+" Headless"]],[/ wv\\).+(chrome)\\/([\\w\\.]+)/i],[[p,j+" WebView"],v],[/droid.+ version\\/([\\w\\.]+)\\b.+(?:mobile safari|safari)/i],[v,[p,"Android "+O]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\\/v?([\\w\\.]+)/i],[p,v],[/version\\/([\\w\\.\\,]+) .*mobile\\/\\w+ (safari)/i],[v,[p,"Mobile Safari"]],[/version\\/([\\w(\\.|\\,)]+) .*(mobile ?safari|safari)/i],[v,p],[/webkit.+?(mobile ?safari|safari)(\\/[\\w\\.]+)/i],[p,[v,J,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\\/([\\w\\.]+)/i],[p,v],[/(navigator|netscape\\d?)\\/([-\\w\\.]+)/i],[[p,"Netscape"],v],[/mobile vr; rv:([\\w\\.]+)\\).+firefox/i],[v,[p,N+" Reality"]],[/ekiohf.+(flow)\\/([\\w\\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\\/ ]?([\\w\\.\\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\\/([-\\w\\.]+)$/i,/(firefox)\\/([\\w\\.]+)/i,/(mozilla)\\/([\\w\\.]+) .+rv\\:.+gecko\\/\\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\\. ]?browser)[-\\/ ]?v?([\\w\\.]+)/i,/(links) \\(([\\w\\.]+)/i,/panasonic;(viera)/i],[p,v],[/(cobalt)\\/([\\w\\.]+)/i],[p,[v,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\\)]/i],[[g,"amd64"]],[/(ia32(?=;))/i],[[g,W]],[/((?:i[346]|x)86)[;\\)]/i],[[g,"ia32"]],[/\\b(aarch64|arm(v?8e?l?|_?64))\\b/i],[[g,"arm64"]],[/\\b(arm(?:v[67])?ht?n?[fl]p?)\\b/i],[[g,"armhf"]],[/windows (ce|mobile); ppc;/i],[[g,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\\))/i],[[g,/ower/,"",W]],[/(sun4\\w)[;\\)]/i],[[g,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\\))|\\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\\b|pa-risc)/i],[[g,W]]],device:[[/\\b(sch-i[89]0\\d|shw-m380s|sm-[ptx]\\w{2,4}|gt-[pn]\\d{2,4}|sgh-t8[56]9|nexus 10)/i],[d,[f,A],[m,w]],[/\\b((?:s[cgp]h|gt|sm)-\\w+|sc[g-]?[\\d]+a?|galaxy nexus)/i,/samsung[- ]([-\\w]+)/i,/sec-(sgh\\w+)/i],[d,[f,A],[m,h]],[/(?:\\/|\\()(ip(?:hone|od)[\\w, ]*)(?:\\/|;)/i],[d,[f,S],[m,h]],[/\\((ipad);[-\\w\\),; ]+apple/i,/applecoremedia\\/[\\w\\.]+ \\((ipad)/i,/\\b(ipad)\\d\\d?,\\d\\d?[;\\]].+ios/i],[d,[f,S],[m,w]],[/(macintosh);/i],[d,[f,S]],[/\\b(sh-?[altvz]?\\d\\d[a-ekm]?)/i],[d,[f,L],[m,h]],[/\\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\\d{2})\\b(?!.+d\\/s)/i],[d,[f,P],[m,w]],[/(?:huawei|honor)([-\\w ]+)[;\\)]/i,/\\b(nexus 6p|\\w{2,4}e?-[atu]?[ln][\\dx][012359c][adn]?)\\b(?!.+d\\/s)/i],[d,[f,P],[m,h]],[/\\b(poco[\\w ]+)(?: bui|\\))/i,/\\b; (\\w+) build\\/hm\\1/i,/\\b(hm[-_ ]?note?[_ ]?(?:\\d\\w)?) bui/i,/\\b(redmi[\\-_ ]?(?:note|k)?[\\w_ ]+)(?: bui|\\))/i,/\\b(mi[-_ ]?(?:a\\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\\d?\\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\\))/i],[[d,/_/g," "],[f,R],[m,h]],[/\\b(mi[-_ ]?(?:pad)(?:[\\w_ ]+))(?: bui|\\))/i],[[d,/_/g," "],[f,R],[m,w]],[/; (\\w+) bui.+ oppo/i,/\\b(cph[12]\\d{3}|p(?:af|c[al]|d\\w|e[ar])[mt]\\d0|x9007|a101op)\\b/i],[d,[f,"OPPO"],[m,h]],[/vivo (\\w+)(?: bui|\\))/i,/\\b(v[12]\\d{3}\\w?[at])(?: bui|;)/i],[d,[f,"Vivo"],[m,h]],[/\\b(rmx[12]\\d{3})(?: bui|;|\\))/i],[d,[f,"Realme"],[m,h]],[/\\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\\b[\\w ]+build\\//i,/\\bmot(?:orola)?[- ](\\w*)/i,/((?:moto[\\w\\(\\) ]+|xt\\d{3,4}|nexus 6)(?= bui|\\)))/i],[d,[f,C],[m,h]],[/\\b(mz60\\d|xoom[2 ]{0,2}) build\\//i],[d,[f,C],[m,w]],[/((?=lg)?[vl]k\\-?\\d{3}) bui| 3\\.[-\\w; ]{10}lg?-([06cv9]{3,4})/i],[d,[f,M],[m,w]],[/(lm(?:-?f100[nv]?|-[\\w\\.]+)(?= bui|\\))|nexus [45])/i,/\\blg[-e;\\/ ]+((?!browser|netcast|android tv)\\w+)/i,/\\blg-?([\\d\\w]+) bui/i],[d,[f,M],[m,h]],[/(ideatab[-\\w ]+)/i,/lenovo ?(s[56]000[-\\w]+|tab(?:[\\w ]+)|yt[-\\d\\w]{6}|tb[-\\d\\w]{6})/i],[d,[f,"Lenovo"],[m,w]],[/(?:maemo|nokia).*(n900|lumia \\d+)/i,/nokia[-_ ]?([-\\w\\.]*)/i],[[d,/_/g," "],[f,"Nokia"],[m,h]],[/(pixel c)\\b/i],[d,[f,I],[m,w]],[/droid.+; (pixel[\\daxl ]{0,6})(?: bui|\\))/i],[d,[f,I],[m,h]],[/droid.+ (a?\\d[0-2]{2}so|[c-g]\\d{4}|so[-gl]\\w+|xq-a\\w[4-7][12])(?= bui|\\).+chrome\\/(?![1-6]{0,1}\\d\\.))/i],[d,[f,U],[m,h]],[/sony tablet [ps]/i,/\\b(?:sony)?sgp\\w+(?: bui|\\))/i],[[d,"Xperia Tablet"],[f,U],[m,w]],[/ (kb2005|in20[12]5|be20[12][59])\\b/i,/(?:one)?(?:plus)? (a\\d0\\d\\d)(?: b|\\))/i],[d,[f,"OnePlus"],[m,h]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\\))/i,/(kf[a-z]+)( bui|\\)).+silk\\//i],[d,[f,_],[m,w]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\\)).+silk\\//i],[[d,/(.+)/g,"Fire Phone $1"],[f,_],[m,h]],[/(playbook);[-\\w\\),; ]+(rim)/i],[d,f,[m,w]],[/\\b((?:bb[a-f]|st[hv])100-\\d)/i,/\\(bb10; (\\w+)/i],[d,[f,x],[m,h]],[/(?:\\b|asus_)(transfo[prime ]{4,10} \\w+|eeepc|slider \\w+|nexus 7|padfone|p00[cj])/i],[d,[f,E],[m,w]],[/ (z[bes]6[027][012][km][ls]|zenfone \\d\\w?)\\b/i],[d,[f,E],[m,h]],[/(nexus 9)/i],[d,[f,"HTC"],[m,w]],[/(htc)[-;_ ]{1,2}([\\w ]+(?=\\)| bui)|\\w+)/i,/(zte)[- ]([\\w ]+?)(?: bui|\\/|\\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\\.))|sony(?!-bra))[-_ ]?([-\\w]*)/i],[f,[d,/_/g," "],[m,h]],[/droid.+; ([ab][1-7]-?[0178a]\\d\\d?)/i],[d,[f,"Acer"],[m,w]],[/droid.+; (m[1-5] note) bui/i,/\\bmz-([-\\w]{2,})/i],[d,[f,"Meizu"],[m,h]],[/(blackberry|benq|palm(?=\\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\\w]*)/i,/(hp) ([\\w ]+\\w)/i,/(asus)-?(\\w+)/i,/(microsoft); (lumia[\\w ]+)/i,/(lenovo)[-_ ]?([-\\w]+)/i,/(jolla)/i,/(oppo) ?([\\w ]+) bui/i],[f,d,[m,h]],[/(kobo)\\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\\/([\\w\\.]+)/i,/(nook)[\\w ]+build\\/(\\w+)/i,/(dell) (strea[kpr\\d ]*[\\dko])/i,/(le[- ]+pan)[- ]+(\\w{1,9}) bui/i,/(trinity)[- ]*(t\\d{3}) bui/i,/(gigaset)[- ]+(q\\w{1,9}) bui/i,/(vodafone) ([\\w ]+)(?:\\)| bui)/i],[f,d,[m,w]],[/(surface duo)/i],[d,[f,B],[m,w]],[/droid [\\d\\.]+; (fp\\du?)(?: b|\\))/i],[d,[f,"Fairphone"],[m,h]],[/(u304aa)/i],[d,[f,"AT&T"],[m,h]],[/\\bsie-(\\w*)/i],[d,[f,"Siemens"],[m,h]],[/\\b(rct\\w+) b/i],[d,[f,"RCA"],[m,w]],[/\\b(venue[\\d ]{2,7}) b/i],[d,[f,"Dell"],[m,w]],[/\\b(q(?:mv|ta)\\w+) b/i],[d,[f,"Verizon"],[m,w]],[/\\b(?:barnes[& ]+noble |bn[rt])([\\w\\+ ]*) b/i],[d,[f,"Barnes & Noble"],[m,w]],[/\\b(tm\\d{3}\\w+) b/i],[d,[f,"NuVision"],[m,w]],[/\\b(k88) b/i],[d,[f,"ZTE"],[m,w]],[/\\b(nx\\d{3}j) b/i],[d,[f,"ZTE"],[m,h]],[/\\b(gen\\d{3}) b.+49h/i],[d,[f,"Swiss"],[m,h]],[/\\b(zur\\d{3}) b/i],[d,[f,"Swiss"],[m,w]],[/\\b((zeki)?tb.*\\b) b/i],[d,[f,"Zeki"],[m,w]],[/\\b([yr]\\d{2}) b/i,/\\b(dragon[- ]+touch |dt)(\\w{5}) b/i],[[f,"Dragon Touch"],d,[m,w]],[/\\b(ns-?\\w{0,9}) b/i],[d,[f,"Insignia"],[m,w]],[/\\b((nxa|next)-?\\w{0,9}) b/i],[d,[f,"NextBook"],[m,w]],[/\\b(xtreme\\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[f,"Voice"],d,[m,h]],[/\\b(lvtel\\-)?(v1[12]) b/i],[[f,"LvTel"],d,[m,h]],[/\\b(ph-1) /i],[d,[f,"Essential"],[m,h]],[/\\b(v(100md|700na|7011|917g).*\\b) b/i],[d,[f,"Envizen"],[m,w]],[/\\b(trio[-\\w\\. ]+) b/i],[d,[f,"MachSpeed"],[m,w]],[/\\btu_(1491) b/i],[d,[f,"Rotor"],[m,w]],[/(shield[\\w ]+) b/i],[d,[f,"Nvidia"],[m,w]],[/(sprint) (\\w+)/i],[f,d,[m,h]],[/(kin\\.[onetw]{3})/i],[[d,/\\./g," "],[f,B],[m,h]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\\)/i],[d,[f,q],[m,w]],[/droid.+; (ec30|ps20|tc[2-8]\\d[kx])\\)/i],[d,[f,q],[m,h]],[/smart-tv.+(samsung)/i],[f,[m,y]],[/hbbtv.+maple;(\\d+)/i],[[d,/^/,"SmartTV"],[f,A],[m,y]],[/(nux; netcast.+smarttv|lg (netcast\\.tv-201\\d|android tv))/i],[[f,M],[m,y]],[/(apple) ?tv/i],[f,[d,S+" TV"],[m,y]],[/crkey/i],[[d,j+"cast"],[f,I],[m,y]],[/droid.+aft(\\w)( bui|\\))/i],[d,[f,_],[m,y]],[/\\(dtv[\\);].+(aquos)/i,/(aquos-tv[\\w ]+)\\)/i],[d,[f,L],[m,y]],[/(bravia[\\w ]+)( bui|\\))/i],[d,[f,U],[m,y]],[/(mitv-\\w{5}) bui/i],[d,[f,R],[m,y]],[/Hbbtv.*(technisat) (.*);/i],[f,d,[m,y]],[/\\b(roku)[\\dx]*[\\)\\/]((?:dvp-)?[\\d\\.]*)/i,/hbbtv\\/\\d+\\.\\d+\\.\\d+ +\\([\\w\\+ ]*; *([\\w\\d][^;]*);([^;]*)/i],[[f,H],[d,H],[m,y]],[/\\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\\b/i],[[m,y]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[f,d,[m,b]],[/droid.+; (shield) bui/i],[d,[f,"Nvidia"],[m,b]],[/(playstation [345portablevi]+)/i],[d,[f,U],[m,b]],[/\\b(xbox(?: one)?(?!; xbox))[\\); ]/i],[d,[f,B],[m,b]],[/((pebble))app/i],[f,d,[m,T]],[/(watch)(?: ?os[,\\/]|\\d,\\d\\/)[\\d\\.]+/i],[d,[f,S],[m,T]],[/droid.+; (glass) \\d/i],[d,[f,I],[m,T]],[/droid.+; (wt63?0{2,3})\\)/i],[d,[f,q],[m,T]],[/(quest( 2| pro)?)/i],[d,[f,F],[m,T]],[/(tesla)(?: qtcarbrowser|\\/[-\\w\\.]+)/i],[f,[m,k]],[/(aeobc)\\b/i],[d,[f,_],[m,k]],[/droid .+?; ([^;]+?)(?: bui|\\) applew).+? mobile safari/i],[d,[m,h]],[/droid .+?; ([^;]+?)(?: bui|\\) applew).+?(?! mobile) safari/i],[d,[m,w]],[/\\b((tablet|tab)[;\\/]|focus\\/\\d(?!.+mobile))/i],[[m,w]],[/(phone|mobile(?:[;\\/]| [ \\w\\/\\.]*safari)|pda(?=.+windows ce))/i],[[m,h]],[/(android[-\\w\\. ]{0,9});.+buil/i],[d,[f,"Generic"]]],engine:[[/windows.+ edge\\/([\\w\\.]+)/i],[v,[p,"EdgeHTML"]],[/webkit\\/537\\.36.+chrome\\/(?!27)([\\w\\.]+)/i],[v,[p,"Blink"]],[/(presto)\\/([\\w\\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\\/([\\w\\.]+)/i,/ekioh(flow)\\/([\\w\\.]+)/i,/(khtml|tasman|links)[\\/ ]\\(?([\\w\\.]+)/i,/(icab)[\\/ ]([23]\\.[\\d\\.]+)/i,/\\b(libweb)/i],[p,v],[/rv\\:([\\w\\.]{1,9})\\b.+(gecko)/i],[v,p]],os:[[/microsoft (windows) (vista|xp)/i],[p,v],[/(windows) nt 6\\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\\/ ]?([\\d\\.\\w ]*)/i,/(windows)[\\/ ]?([ntce\\d\\. ]+\\w)(?!.+xbox)/i],[p,[v,J,X]],[/(win(?=3|9|n)|win 9x )([nt\\d\\.]+)/i],[[p,"Windows"],[v,J,X]],[/ip[honead]{2,4}\\b(?:.*os ([\\w]+) like mac|; opera)/i,/ios;fbsv\\/([\\d\\.]+)/i,/cfnetwork\\/.+darwin/i],[[v,/_/g,"."],[p,"iOS"]],[/(mac os x) ?([\\w\\. ]*)/i,/(macintosh|mac_powerpc\\b)(?!.+haiku)/i],[[p,K],[v,/_/g,"."]],[/droid ([\\w\\.]+)\\b.+(android[- ]x86|harmonyos)/i],[v,p],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\\/ ]?([\\w\\.]*)/i,/(blackberry)\\w*\\/([\\w\\.]*)/i,/(tizen|kaios)[\\/ ]([\\w\\.]+)/i,/\\((series40);/i],[p,v],[/\\(bb(10);/i],[v,[p,x]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\\/ ]?([\\w\\.]*)/i],[v,[p,"Symbian"]],[/mozilla\\/[\\d\\.]+ \\((?:mobile|tablet|tv|mobile; [\\w ]+); rv:.+ gecko\\/([\\w\\.]+)/i],[v,[p,N+" OS"]],[/web0s;.+rt(tv)/i,/\\b(?:hp)?wos(?:browser)?\\/([\\w\\.]+)/i],[v,[p,"webOS"]],[/watch(?: ?os[,\\/]|\\d,\\d\\/)([\\d\\.]+)/i],[v,[p,"watchOS"]],[/crkey\\/([\\d\\.]+)/i],[v,[p,j+"cast"]],[/(cros) [\\w]+(?:\\)| ([\\w\\.]+)\\b)/i],[[p,z],v],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\\/(\\d+\\.[\\w\\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\\);]+)/i,/\\b(joli|palm)\\b ?(?:os)?\\/?([\\w\\.]*)/i,/(mint)[\\/\\(\\) ]?(\\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\\/ ]?(?!chrom|package)([-\\w\\.]*)/i,/(hurd|linux) ?([\\w\\.]*)/i,/(gnu) ?([\\w\\.]*)/i,/\\b([-frentopcghs]{0,5}bsd|dragonfly)[\\/ ]?(?!amd|[ix346]{1,2}86)([\\w\\.]*)/i,/(haiku) (\\w+)/i],[p,v],[/(sunos) ?([\\w\\.\\d]*)/i],[[p,"Solaris"],v],[/((?:open)?solaris)[-\\/ ]?([\\w\\.]*)/i,/(aix) ((\\d)(?=\\.|\\)| )[\\w\\.])*/i,/\\b(beos|os\\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\\w\\.]*)/i],[p,v]]},Z=function(e,t){if(typeof e===c&&(t=e,e=a),!(this instanceof Z))return new Z(e,t).getResult();var n=typeof i!==s&&i.navigator?i.navigator:a,r=e||(n&&n.userAgent?n.userAgent:""),b=n&&n.userAgentData?n.userAgentData:a,y=t?function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n}(G,t):G,T=n&&n.userAgent==r;return this.getBrowser=function(){var e,t={};return t[p]=a,t[v]=a,V.call(t,r,y.browser),t[l]=typeof(e=t[v])===u?e.replace(/[^\\d\\.]/g,"").split(".")[0]:a,T&&n&&n.brave&&typeof n.brave.isBrave==o&&(t[p]="Brave"),t},this.getCPU=function(){var e={};return e[g]=a,V.call(e,r,y.cpu),e},this.getDevice=function(){var e={};return e[f]=a,e[d]=a,e[m]=a,V.call(e,r,y.device),T&&!e[m]&&b&&b.mobile&&(e[m]=h),T&&"Macintosh"==e[d]&&n&&typeof n.standalone!==s&&n.maxTouchPoints&&n.maxTouchPoints>2&&(e[d]="iPad",e[m]=w),e},this.getEngine=function(){var e={};return e[p]=a,e[v]=a,V.call(e,r,y.engine),e},this.getOS=function(){var e={};return e[p]=a,e[v]=a,V.call(e,r,y.os),T&&!e[p]&&b&&"Unknown"!=b.platform&&(e[p]=b.platform.replace(/chrome os/i,z).replace(/macos/i,K)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=typeof e===u&&e.length>350?H(e,350):e,this},this.setUA(r),this};Z.VERSION="1.0.35",Z.BROWSER=$([p,v,l]),Z.CPU=$([g]),Z.DEVICE=$([d,f,m,b,h,y,w,T,k]),Z.ENGINE=Z.OS=$([p,v]),typeof t!==s?(e.exports&&(t=e.exports=Z),t.UAParser=Z):n.amdO?(r=function(){return Z}.call(t,n,t,e))===a||(e.exports=r):typeof i!==s&&(i.UAParser=Z);var Y=typeof i!==s&&(i.jQuery||i.Zepto);if(Y&&!Y.ua){var ee=new Z;Y.ua=ee.getResult(),Y.ua.get=function(){return ee.getUA()},Y.ua.set=function(e){ee.setUA(e);var t=ee.getResult();for(var n in t)Y.ua[n]=t[n]}}}("object"==typeof window?window:this)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.amdO={},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return(()=>{"use strict";n.r(r),n.d(r,{ActionType:()=>f,AmplitudePlatformName:()=>g,AnalyticsEventImportance:()=>l,AnalyticsQueries:()=>e,AuthStatus:()=>b,ComponentType:()=>m,IThresholdTier:()=>Jt,MetricType:()=>d,PlatformName:()=>v,SessionActions:()=>h,SessionAutomatedEvents:()=>w,SessionRank:()=>y,SubjectType:()=>p,UserTypeCommerce:()=>c,UserTypeInsto:()=>i,UserTypeRetail:()=>t,UserTypeRetailBusinessBanking:()=>s,UserTypeRetailEmployeeInternal:()=>a,UserTypeRetailEmployeePersonal:()=>o,UserTypeWallet:()=>u,automatedEvents:()=>xn,automatedMappingConfig:()=>In,clearMarkEntry:()=>Vn,clearPerformanceMarkEntries:()=>Xn,config:()=>A,createEventConfig:()=>On,createNewSpan:()=>Ln,createNewTrace:()=>Un,device:()=>W,endPerfMark:()=>Jn,exposeExperiment:()=>wn,flushQueue:()=>or,generateUUID:()=>V,getAnalyticsHeaders:()=>sr,getReferrerData:()=>le,getTracingHeaders:()=>An,getTracingId:()=>Dn,getUrlHostname:()=>pe,getUrlParams:()=>me,getUrlPathname:()=>fe,getUserContext:()=>ar,identify:()=>Tn,identifyFlow:()=>xe,identity:()=>H,identityFlow:()=>Se,incrementUjNavigation:()=>an,init:()=>yn,initNextJsTrackPageview:()=>_n,initTrackPageview:()=>kn,isEventKeyFormatValid:()=>we,isSessionEnded:()=>pt,location:()=>re,logEvent:()=>$t,logMetric:()=>Ht,logPageView:()=>on,logTrace:()=>Rn,markNTBT:()=>tn,markStep:()=>nn,markStepOnce:()=>rn,onVisibilityChange:()=>ln,optIn:()=>En,optOut:()=>Sn,perfMark:()=>Wn,persistentData:()=>oe,postMessage:()=>K,recordSessionDuration:()=>pn,removeFromIdentifyFlow:()=>Ee,savePersistentData:()=>st,sendScheduledEvents:()=>Bt,setBreadcrumbs:()=>ie,setConfig:()=>U,setLocation:()=>ae,setPagePath:()=>ve,setPageview:()=>Kt,setPersistentData:()=>se,setSessionStart:()=>dt,setTime:()=>Ue,startPerfMark:()=>Hn,timeStone:()=>Le,useEventLogger:()=>Yn,useLogEventOnMount:()=>tr,usePerformanceMarks:()=>rr});let e=function(e){return e.fbclid="fbclid",e.gclid="gclid",e.msclkid="msclkid",e.ptclid="ptclid",e.ttclid="ttclid",e.utm_source="utm_source",e.utm_medium="utm_medium",e.utm_campaign="utm_campaign",e.utm_term="utm_term",e.utm_content="utm_content",e}({});const t=0,i=1,a=2,o=3,s=4,c=5,u=6;let l=function(e){return e.low="low",e.high="high",e}({}),d=function(e){return e.count="count",e.rate="rate",e.gauge="gauge",e.distribution="distribution",e.histogram="histogram",e}({}),p=function(e){return e.commerce_merchant="commerce_merchant",e.device="device",e.edp_fingerprint_id="edp_fingerprint_id",e.nft_user="nft_user",e.user="user",e.wallet_user="wallet_user",e.uuid="user_uuid",e}({}),m=function(e){return e.unknown="unknown",e.banner="banner",e.button="button",e.card="card",e.chart="chart",e.content_script="content_script",e.dropdown="dropdown",e.link="link",e.page="page",e.modal="modal",e.table="table",e.search_bar="search_bar",e.service_worker="service_worker",e.text="text",e.text_input="text_input",e.tray="tray",e.checkbox="checkbox",e.icon="icon",e}({}),f=function(e){return e.unknown="unknown",e.blur="blur",e.click="click",e.change="change",e.dismiss="dismiss",e.focus="focus",e.hover="hover",e.select="select",e.measurement="measurement",e.move="move",e.process="process",e.render="render",e.scroll="scroll",e.view="view",e.search="search",e.keyPress="keyPress",e}({}),v=function(e){return e.unknown="unknown",e.web="web",e.android="android",e.ios="ios",e.mobile_web="mobile_web",e.tablet_web="tablet_web",e.server="server",e.windows="windows",e.macos="macos",e.extension="extension",e}({}),g=function(e){return e.web="Web",e.ios="iOS",e.android="Android",e}({}),b=function(e){return e[e.notLoggedIn=0]="notLoggedIn",e[e.loggedIn=1]="loggedIn",e}({}),h=function(e){return e.ac="ac",e.af="af",e.ah="ah",e.al="al",e.am="am",e.ar="ar",e.as="as",e}({}),w=function(e){return e.pv="pv",e}({}),y=function(e){return e.xs="xs",e.s="s",e.m="m",e.l="l",e.xl="xl",e.xxl="xxl",e}({});const T="https://analytics-service-dev.cbhq.net",k=3e5,_=5e3,S="analytics-db",E="experiment-exposure-db",x="Analytics SDK:",O=Object.values(e),j="pageview",N="session_duration",I={navigationTiming:{eventName:"perf_navigation_timing"},redirectTime:{eventName:"perf_redirect_time"},RT:{eventName:"perf_redirect_time"},TTFB:{eventName:"perf_time_to_first_byte"},networkInformation:{eventName:"perf_network_information"},storageEstimate:{eventName:"perf_storage_estimate"},FCP:{eventName:"perf_first_contentful_paint"},FID:{eventName:"perf_first_input_delay"},LCP:{eventName:"perf_largest_contentful_paint"},CLS:{eventName:"perf_cumulative_layout_shift"},TBT:{eventName:"perf_total_blocking_time"},NTBT:{eventName:"perf_navigation_total_blocking_time"},INP:{eventName:"perf_interact_to_next_paint"},ET:{eventName:"perf_element_timing"},userJourneyStep:{eventName:"perf_user_journey_step"}},P="1",M="web";function B(){return B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},B.apply(this,arguments)}const C=/^(https?:\\/\\/)/;function D(e){return{eventsEndpoint:e+"/amp",metricsEndPoint:e+"/metrics",exposureEndpoint:e+"/track-exposures",tracesEndpoint:e+"/traces"}}const A=B({authCookie:"logged_in",amplitudeApiKey:"",batchEventsPeriod:_,batchEventsThreshold:30,batchMetricsPeriod:_,batchMetricsThreshold:30,batchTracesPeriod:_,batchTracesThreshold:30,headers:{},interactionManager:null,isAlwaysAuthed:!1,isProd:!1,isInternalApplication:!1,onError:(e,t)=>{console.error(x,e,t)},platform:v.unknown,projectName:"",ricTimeoutScheduleEvent:1e3,ricTimeoutSetDevice:500,showDebugLogging:!1,trackUserId:!1,version:null,apiEndpoint:T},D(T),{steps:{}}),L=[].reduce(((e,t)=>n=>e(t(n))),(e=>{if(!e.isProd)return e.isInternalApplication?(e.apiEndpoint="https://analytics-service-internal-dev.cbhq.net",B({},e,D(e.apiEndpoint))):e;const t=(e=>e.apiEndpoint?C.test(e.apiEndpoint)?e.apiEndpoint:`https://${e.apiEndpoint}`:e.isInternalApplication?"https://analytics-service-internal.cbhq.net":"https://as.coinbase.com")(e);return B({},e,{apiEndpoint:t},D(t))})),U=e=>{const{batchEventsThreshold:t,batchMetricsThreshold:n,batchTracesThreshold:r}=e,i=[t,n,r];for(const e of i)if((e||0)>30){console.warn("You are setting the threshhold for the batch limit to be greater than 30. This may cause request overload.");break}Object.assign(A,L(e))},R=[v.web,v.mobile_web,v.tablet_web];function q(){return"android"===A.platform}function F(){return"ios"===A.platform}function z(){return R.includes(A.platform)}function K(e){if(z()&&navigator&&"serviceWorker"in navigator&&navigator.serviceWorker.controller)try{navigator.serviceWorker.controller.postMessage(e)}catch(e){e instanceof Error&&A.onError(e)}}var $=n(353),Q=n.n($);const W={amplitudeOSName:null,amplitudeOSVersion:null,amplitudeDeviceModel:null,amplitudePlatform:null,browserName:null,browserMajor:null,osName:null,userAgent:null,width:null,height:null},H={countryCode:null,deviceId:null,device_os:null,isOptOut:!1,languageCode:null,locale:null,jwt:null,session_lcc_id:null,userAgent:null,userId:null},V=e=>e?(e^16*Math.random()>>e/4).toString(16):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,V),J=()=>A.isAlwaysAuthed||!!H.userId,X=()=>{const e={};return H.countryCode&&(e.country_code=H.countryCode),e},G=()=>{const{platform:e}=A;if(e===v.web)switch(!0){case window.matchMedia("(max-width: 560px)").matches:return v.mobile_web;case window.matchMedia("(max-width: 1024px, min-width: 561px)").matches:return v.tablet_web}return e},Z=()=>{var e,t,n,r,i;z()?("requestIdleCallback"in window?window.requestIdleCallback(ne,{timeout:A.ricTimeoutSetDevice}):ne(),W.amplitudePlatform=g.web,W.userAgent=(null==(e=window)||null==(e=e.navigator)?void 0:e.userAgent)||null,ee({height:null!=(t=null==(n=window)?void 0:n.innerHeight)?t:null,width:null!=(r=null==(i=window)?void 0:i.innerWidth)?r:null})):F()?(W.amplitudePlatform=g.ios,W.userAgent=H.userAgent,W.userAgent&&ne()):q()&&(W.userAgent=H.userAgent,W.amplitudePlatform=g.android,W.userAgent&&ne())},Y=e=>{Object.assign(H,e),z()&&K({identity:{isAuthed:!!H.userId,locale:H.locale||null}})},ee=e=>{W.height=e.height,W.width=e.width},te=()=>{U({platform:G()}),z()&&K({config:{platform:A.platform}})},ne=()=>{var e;performance.mark&&performance.mark("ua_parser_start");const t=new(Q())(null!=(e=W.userAgent)?e:"").getResult();W.browserName=t.browser.name||null,W.browserMajor=t.browser.major||null,W.osName=t.os.name||null,W.amplitudeOSName=W.browserName,W.amplitudeOSVersion=W.browserMajor,W.amplitudeDeviceModel=W.osName,K({device:{browserName:W.browserName,osName:W.osName}}),performance.mark&&(performance.mark("ua_parser_end"),performance.measure("ua_parser","ua_parser_start","ua_parser_end"))},re={breadcrumbs:[],initialUAAData:{},pageKey:"",pageKeyRegex:{},pagePath:"",prevPageKey:"",prevPagePath:""};function ie(e){Object.assign(re,{breadcrumbs:e})}function ae(e){Object.assign(re,e)}const oe={eventId:0,sequenceNumber:0,sessionId:0,lastEventTime:0,sessionStart:0,sessionUUID:null,userId:null,ac:0,af:0,ah:0,al:0,am:0,ar:0,as:0,pv:0};function se(e){Object.assign(oe,e)}function ce(){var e,t;return null!=(e=null==(t=document)?void 0:t.referrer)?e:""}function ue(){return ue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ue.apply(this,arguments)}const le=()=>{const e=ce();if(!e)return{};const t=new URL(e);return t.hostname===pe()?{}:{referrer:e,referring_domain:t.hostname}},de=()=>{const e=new URLSearchParams(me()),t={};return O.forEach((n=>{e.has(n)&&(t[n]=(e.get(n)||"").toLowerCase())})),t},pe=()=>{var e;return(null==(e=window)||null==(e=e.location)?void 0:e.hostname)||""},me=()=>{var e;return(null==(e=window)||null==(e=e.location)?void 0:e.search)||""},fe=()=>{var e;return(null==(e=window)||null==(e=e.location)?void 0:e.pathname)||""},ve=()=>{const e=A.overrideWindowLocation?re.pagePath:fe()+me();e&&e!==re.pagePath&&(e!==re.pagePath&&ge(),re.pagePath=e,re.pageKeyRegex&&Object.keys(re.pageKeyRegex).some((e=>{if(re.pageKeyRegex[e].test(re.pagePath))return re.pageKey=e,!0})))},ge=()=>{if(z()){const e=ce();if(!re.prevPagePath&&e){const t=new URL(e);if(t.hostname===pe())return void(re.prevPagePath=t.pathname)}}re.prevPagePath=re.pagePath,re.prevPageKey=re.pageKey},be=e=>{z()&&Object.assign(e,z()?(Object.keys(re.initialUAAData).length>0||(new URLSearchParams(me()),re.initialUAAData=ue({},(()=>{const e={};return O.forEach((t=>{oe[t]&&(e[t]=oe[t])})),e})(),de(),le())),re.initialUAAData):re.initialUAAData)},he=/^[a-zd]+(_[a-zd]+)*$/;function we(e){return he.test(e)}function ye(){return ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ye.apply(this,arguments)}const Te=["action","component_type","component_name","context","logging_id"],ke=["num_non_hardware_accounts","ujs"],_e="ujs_",Se={};function Ee(e){e.forEach((e=>{ke.includes(e)&&delete Se[e]}))}function xe(e){var t;const n=Object.entries(e).reduce(((e,t)=>{const[n,r]=t;return!Te.includes(n)&&ke.includes(n)?we(n)?ye({},e,{[n]:r}):(A.onError(new Error("IdentityFlow property names must have snake case format"),{[n]:r}),e):e}),{});null!=(t=n.ujs)&&t.length&&(n.ujs=n.ujs.map((e=>`${_e}${e}`))),Object.assign(Se,n)}function Oe(){return A.platform!==v.unknown||(A.onError(new Error("SDK platform not initialized")),!1)}const je={eventsQueue:[],eventsScheduled:!1,metricsQueue:[],metricsScheduled:!1,tracesQueue:[],tracesScheduled:!1};function Ne(e){Object.assign(je,e)}const Ie={ac:0,af:0,ah:0,al:0,am:0,ar:0,as:0,pv:0,sqs:0},Pe={ac:20,af:5,ah:1,al:1,am:0,ar:10,as:20},Me={pv:25},Be={xs:0,s:1,m:1,l:2,xl:2,xxl:2},Ce=e=>e<15?y.xs:e<60?y.s:e<240?y.m:e<960?y.l:e<3840?y.xl:y.xxl,De=e=>{Object.assign(Ie,e)};function Ae(){return(new Date).getTime()}const Le={timeStart:Ae(),timeOnPagePath:0,timeOnPageKey:0,prevTimeOnPagePath:0,prevTimeOnPageKey:0,sessionDuration:0,sessionEnd:0,sessionStart:0,prevSessionDuration:0};function Ue(e){Object.assign(Le,e)}const Re=(e,t)=>t.some((t=>e instanceof t));let qe,Fe;const ze=new WeakMap,Ke=new WeakMap,$e=new WeakMap,Qe=new WeakMap,We=new WeakMap;let He={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Ke.get(e);if("objectStoreNames"===t)return e.objectStoreNames||$e.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Je(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Ve(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Fe||(Fe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(Xe(this),e),Je(ze.get(this))}:function(...e){return Je(t.apply(Xe(this),e))}:function(e,...n){const r=t.call(Xe(this),e,...n);return $e.set(r,e.sort?e.sort():[e]),Je(r)}:(e instanceof IDBTransaction&&function(e){if(Ke.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=()=>{t(),r()},a=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Ke.set(e,t)}(e),Re(e,qe||(qe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,He):e);var t}function Je(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",a)},i=()=>{t(Je(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((t=>{t instanceof IDBCursor&&ze.set(t,e)})).catch((()=>{})),We.set(t,e),t}(e);if(Qe.has(e))return Qe.get(e);const t=Ve(e);return t!==e&&(Qe.set(e,t),We.set(t,e)),t}const Xe=e=>We.get(e),Ge=["get","getKey","getAll","getAllKeys","count"],Ze=["put","add","delete","clear"],Ye=new Map;function et(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(Ye.get(t))return Ye.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Ze.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Ge.includes(n))return;const a=async function(e,...t){const a=this.transaction(e,i?"readwrite":"readonly");let o=a.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),i&&a.done]))[0]};return Ye.set(t,a),a}var tt;tt=He,He={...tt,get:(e,t,n)=>et(e,t)||tt.get(e,t,n),has:(e,t)=>!!et(e,t)||tt.has(e,t)};const nt={isReady:!1,idbKeyval:null};function rt(e){Object.assign(nt,e)}const it={},at=async e=>{if(!nt.idbKeyval)return Promise.resolve(null);try{return await nt.idbKeyval.get(e)}catch(e){return A.onError(new Error("IndexedDB:Get:InternalError")),Promise.resolve(null)}},ot=async(e,t)=>{if(nt.idbKeyval)try{await nt.idbKeyval.set(e,t)}catch(e){A.onError(new Error("IndexedDB:Set:InternalError"))}},st=()=>{"server"!==A.platform&&(se({sessionStart:Le.sessionStart,ac:Ie.ac,af:Ie.af,ah:Ie.ah,al:Ie.al,am:Ie.am,ar:Ie.ar,as:Ie.as,pv:Ie.pv}),H.userId&&se({userId:H.userId}),ot(S,oe))},ct="rgb(5,177,105)",ut=e=>{const{metricName:t,data:n}=e,r=e.importance||l.low;if(!A.showDebugLogging||!console)return;const i=`%c ${x}`,a=`color:${ct};font-size:11px;`,o=`Importance: ${r}`;console.group(i,a,t,o),n.forEach((e=>{e.event_type?console.log(e.event_type,e):console.log(e)})),console.groupEnd()},lt=e=>{const{metricName:t,data:n}=e,r=e.importance||l.low;if(!A.showDebugLogging||!console)return;const i=`color:${ct};font-size:11px;`,a=`%c ${x}`,o=`Importance: ${r}`;console.log(a,i,t,n,o)},dt=()=>{const e=Ae();oe.sessionId&&oe.lastEventTime&&oe.sessionUUID&&!pt(e)||(oe.sessionId=e,oe.sessionUUID=V(),Ue({sessionStart:e}),lt({metricName:"Started new session:",data:{persistentData:oe,timeStone:Le}})),oe.lastEventTime=e},pt=e=>e-oe.lastEventTime>18e5;function mt(){return mt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mt.apply(this,arguments)}const ft=e=>{var t;(e=>{switch(e.action){case f.click:Ie.ac+=1;break;case f.focus:Ie.af+=1;break;case f.hover:Ie.ah+=1;break;case f.move:Ie.am+=1;break;case f.scroll:Ie.al+=1;break;case f.search:Ie.ar+=1;break;case f.select:Ie.as+=1}})(t=e),t.event_type!==j?t.event_type===N&&((e=>{if(!e.session_rank)return;const t=e.session_rank;Object.values(h).forEach((e=>{Ie.sqs+=Ie[e]*Pe[e]})),Object.values(w).forEach((e=>{Ie.sqs+=Ie[e]*Me[e]})),Ie.sqs*=Be[t]})(t),Object.assign(t,Ie),De({ac:0,af:0,ah:0,al:0,am:0,ar:0,as:0,pv:0,sqs:0})):Ie.pv+=1;const n=e.event_type;delete e.event_type;const r=e.deviceId?e.deviceId:null,i=e.timestamp;return delete e.timestamp,se({eventId:oe.eventId+1}),se({sequenceNumber:oe.sequenceNumber+1}),dt(),st(),{device_id:H.deviceId||r||null,user_id:H.userId,timestamp:i,event_id:oe.eventId,session_id:oe.sessionId||-1,event_type:n,version_name:A.version||null,platform:W.amplitudePlatform,os_name:W.amplitudeOSName,os_version:W.amplitudeOSVersion,device_model:W.amplitudeDeviceModel,language:H.languageCode,event_properties:mt({},e,{session_uuid:oe.sessionUUID,height:W.height,width:W.width}),user_properties:X(),uuid:V(),library:{name:"@cbhq/client-analytics",version:"10.6.0"},sequence_number:oe.sequenceNumber,user_agent:W.userAgent||H.userAgent}},vt=e=>e.map((e=>ft(e)));function gt(){return gt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gt.apply(this,arguments)}const bt=e=>e.map((e=>(e=>{const t=e.tags||{},n=gt({authed:J()?"true":"false",platform:A.platform},t,{project_name:A.projectName,version_name:A.version||null});return{metric_name:e.metricName,page_path:e.pagePath||null,value:e.value,tags:n,type:e.metricType}})(e))),ht=e=>0!==je.metricsQueue.length&&(je.metricsQueue.length>=A.batchMetricsThreshold||(je.metricsScheduled||(je.metricsScheduled=!0,setTimeout((()=>{je.metricsScheduled=!1,e(bt(je.metricsQueue)),je.metricsQueue=[]}),A.batchMetricsPeriod)),!1)),wt=e=>0!==je.tracesQueue.length&&(je.tracesQueue.length>=A.batchTracesThreshold||(je.tracesScheduled||(je.tracesScheduled=!0,setTimeout((()=>{je.tracesScheduled=!1,e(je.tracesQueue),je.tracesQueue=[]}),A.batchTracesPeriod)),!1)),yt=e=>{var t;z()&&null!=(t=window)&&t.requestIdleCallback?window.requestIdleCallback(e,{timeout:A.ricTimeoutScheduleEvent}):(q()||F())&&A.interactionManager?A.interactionManager.runAfterInteractions(e):e()};function Tt(){return Tt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tt.apply(this,arguments)}const kt="application/x-www-form-urlencoded; charset=UTF-8",_t=e=>{const{data:t,importance:n,isJSON:r,onError:i,url:a}=e,o=r?"application/json":kt,s=n||l.low,c=r?JSON.stringify(t):new URLSearchParams(t).toString();function u(){const e=new XMLHttpRequest;e.open("POST",a,!0),Object.keys(A.headers||{}).forEach((t=>{e.setRequestHeader(t,A.headers[t])})),e.setRequestHeader("Content-Type",kt),H.jwt&&e.setRequestHeader("authorization",`Bearer ${H.jwt}`),e.send(c)}if(!z()||r||!("sendBeacon"in navigator)||s!==l.low||A.headers&&0!==Object.keys(A.headers).length)if(z()&&!r)u();else{const e=Tt({},A.headers,{"Content-Type":o});H.jwt&&(e.Authorization=`Bearer ${H.jwt}`),fetch(a,{method:"POST",mode:"no-cors",headers:e,body:c}).catch((e=>{i(e,{context:"AnalyticsSDKApiError"})}))}else{const e=new Blob([c],{type:kt});try{navigator.sendBeacon.bind(navigator)(a,e)||u()}catch(e){console.error(e),u()}}};var St=n(762),Et=n.n(St);const xt=(e,t,n)=>{const r=e||"";return Et()("2"+r+t+n)};function Ot(){return Ot=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ot.apply(this,arguments)}class jt extends Error{constructor(e){super(e),this.name="CircularJsonReference",this.message=e,"function"==typeof Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error(e).stack}}class Nt extends jt{constructor(...e){super(...e),this.name="DomReferenceInAnalyticsEvent"}}function It(){return It=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},It.apply(this,arguments)}const Pt=(e,t=l.low)=>{var n;e&&je.eventsQueue.push(e),nt.isReady&&(!A.trackUserId||H.userId?(t===l.high||(n=Mt,0!==je.eventsQueue.length&&(je.eventsQueue.length>=A.batchEventsThreshold||(je.eventsScheduled||(je.eventsScheduled=!0,setTimeout((()=>{je.eventsScheduled=!1,n(vt(je.eventsQueue)),je.eventsQueue=[]}),A.batchEventsPeriod)),0))))&&Bt():je.eventsQueue.length>10&&(A.trackUserId=!1,A.onError(new Error("userId not set in Logged-in"))))},Mt=(e,t=l.low)=>{if(H.isOptOut||0===e.length)return;let n;try{n=JSON.stringify(e)}catch(t){const r=e.map((e=>e.event_type)).join(", "),[i,a]=(e=>{try{const n=[];for(const r of e){const e=Ot({},r);r.event_properties&&(e.event_properties=Ot({},e.event_properties,{currentTarget:null,target:null,relatedTarget:null,_dispatchInstances:null,_targetInst:null,view:(t=r.event_properties.view,["string","number","boolean"].includes(typeof t)?r.event_properties.view:null)})),n.push(e)}return[!0,JSON.stringify(n)]}catch(e){return[!1,""]}var t})(e);if(!i)return void A.onError(new jt(t instanceof Error?t.message:"unknown"),{listEventType:r});n=a,A.onError(new Nt("Found DOM element reference"),{listEventType:r,stringifiedEventData:n})}const r=Ae().toString(),i=It({},{e:n,v:"2",upload_time:r},{client:A.amplitudeApiKey,checksum:xt(A.amplitudeApiKey,n,r)});_t({url:A.eventsEndpoint,data:i,importance:t,onError:A.onError}),ut({metricName:"Batch Events",data:e,importance:t})},Bt=()=>{Mt(vt(je.eventsQueue)),Ne({eventsQueue:[]})};function Ct(){return Ct=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ct.apply(this,arguments)}const Dt=Object.values(f),At=Object.values(m),Lt=e=>Dt.includes(e)?e:f.unknown,Ut=e=>At.includes(e)?e:m.unknown,Rt=(e,t,n)=>{const r={auth:J()?b.loggedIn:b.notLoggedIn,action:Lt(e),component_type:Ut(t),logging_id:n,platform:A.platform,project_name:A.projectName};return"number"==typeof H.userTypeEnum&&(r.user_type_enum=H.userTypeEnum),r},qt=e=>{const t=Ae();if(!e)return A.onError(new Error("missing logData")),Ct({},Rt(f.unknown,m.unknown),{locale:H.locale,session_lcc_id:H.session_lcc_id,timestamp:t,time_start:Le.timeStart});const n=Ct({},e,Rt(e.action,e.componentType,e.loggingId),{locale:H.locale,session_lcc_id:H.session_lcc_id,timestamp:t,time_start:Le.timeStart});return delete n.componentType,delete n.loggingId,n},Ft={blacklistRegex:[],isEnabled:!1};function zt(){return{page_key:re.pageKey,page_path:re.pagePath,prev_page_key:re.prevPageKey,prev_page_path:re.prevPagePath}}function Kt(e){Object.assign(Ft,e)}function $t(e,t,n=l.low){if(H.isOptOut)return;if(!Oe())return;const r=qt(t);!function(e){Ft.isEnabled&&(ve(),Object.assign(e,zt()))}(r),be(r),function(e){Object.keys(Se).length>0&&Object.assign(e,Se)}(r),r.has_double_fired=!1,r.event_type=e,n===l.high?Pt(r,n):yt((()=>{Pt(r)}))}function Qt(e,t=!1){t?_t({url:A.metricsEndPoint,data:{metrics:e},isJSON:!0,onError:A.onError}):yt((()=>{_t({url:A.metricsEndPoint,data:{metrics:e},isJSON:!0,onError:A.onError})})),ut({metricName:"Batch Metrics",data:e})}function Wt(){return Wt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wt.apply(this,arguments)}function Ht(e){if(!Oe())return;v.server!==A.platform&&!e.pagePath&&re.pagePath&&(e.pagePath=re.pagePath);const t=Object.keys(Se).length?Wt({},e.tags,Se):e.tags;t&&Object.assign(e,{tags:t}),je.metricsQueue.push(e),ht(Qt)&&(Qt(bt(je.metricsQueue)),je.metricsQueue=[])}function Vt(){return Vt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vt.apply(this,arguments)}let Jt=function(e){return e.instant="instant",e.quick="quick",e.moderate="moderate",e.slow="slow",e.unavoidable="unavoidable",e}({});function Xt(e){return e.toLowerCase()}let Gt={};const Zt=(e,t)=>{null!=A&&A.onMarkStep&&A.onMarkStep(e,t),xe({ujs:t})};let Yt;const en={Perfume:()=>{},markStep:e=>{},markStepOnce:e=>{},incrementUjNavigation:()=>{}},tn=()=>{z()&&Yt&&Yt.markNTBT&&Yt.markNTBT()},nn=e=>{z()&&Yt&&en.markStep&&en.markStep(e)},rn=e=>{z()&&Yt&&en.markStepOnce&&en.markStepOnce(e)},an=()=>{z()&&Yt&&en.incrementUjNavigation&&en.incrementUjNavigation()};function on(e={callMarkNTBT:!0}){"unknown"!==A.platform&&(Ft.blacklistRegex.some((e=>e.test(fe())))||($t(j,{action:f.render,componentType:m.page}),e.callMarkNTBT&&tn()))}let sn=!1,cn=!1;const un=e=>{sn=!e.persisted},ln=(e,t="hidden",n=!1)=>{cn||(addEventListener("pagehide",un),addEventListener("beforeunload",(()=>{})),cn=!0),addEventListener("visibilitychange",(({timeStamp:n})=>{document.visibilityState===t&&e({timeStamp:n,isUnloading:sn})}),{capture:!0,once:n})},dn=36e3;function pn(){const e=pt(Ae());if(e&&(O.forEach((e=>{oe[e]&&delete oe[e]})),st()),!oe.lastEventTime||!Le.sessionStart||!e)return;const t=Math.round((oe.lastEventTime-Le.sessionStart)/1e3);if(t<1||t>dn)return;const n=Ce(t);$t(N,{action:f.measurement,componentType:m.page,session_duration:t,session_end:oe.lastEventTime,session_start:Le.sessionStart,session_rank:n})}function mn(){return mn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mn.apply(this,arguments)}const fn=[],vn=[],gn=()=>{const e=fn.shift();e&&e()},bn=()=>{const e=vn.shift();e&&e()};let hn={};function wn(e){const t=function(e){return{test_name:e.testName,group_name:e.group,subject_id:e.subjectId,exposed_at:Ae(),subject_type:e.subjectType,platform:A.platform}}(e);hn[e.testName]=hn[e.testName]||0,hn[e.testName]+k>Ae()?lt({metricName:`Event: exposeExperiment ${e.testName} not sent`,data:t}):(hn[e.testName]=Ae(),ot(E,hn),lt({metricName:`Event: exposeExperiment ${e.testName} sent`,data:t}),_t({url:A.exposureEndpoint,data:[t],onError:(t,n)=>{hn[e.testName]=0,ot(E,hn),A.onError(t,n)},isJSON:!0,importance:l.high}))}const yn=e=>{var t,r,i;U(e),z()&&(H.languageCode=(null==(t=navigator)?void 0:t.languages[0])||(null==(r=navigator)?void 0:r.language)||""),te(),(()=>{var e;if(z()&&null!=(e=window)&&e.indexedDB){const e=function(e,t,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const o=indexedDB.open(e,t),s=Je(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(Je(o.result),e.oldVersion,e.newVersion,Je(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),s.then((e=>{a&&e.addEventListener("close",(()=>a())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),s}("keyval-store",1,{upgrade(e){e.createObjectStore("keyval")}});rt({idbKeyval:{get:async t=>(await e).get("keyval",t),set:async(t,n)=>(await e).put("keyval",n,t),delete:async t=>(await e).delete("keyval",t),keys:async()=>(await e).getAllKeys("keyval")}})}else rt({idbKeyval:{get:async e=>new Promise((t=>{t(it[e])})),set:async(e,t)=>new Promise((n=>{it[e]=t,n(e)})),delete:async e=>new Promise((()=>{delete it[e]})),keys:async()=>new Promise((e=>{e(Object.keys(it))}))}})})(),lt({metricName:"Initialized Analytics:",data:{deviceId:H.deviceId}}),fn.push((()=>{Pt()})),(async()=>{const e=await at(S);rt({isReady:!0}),gn(),e&&(bn(),se({eventId:e.eventId||oe.eventId,sequenceNumber:e.sequenceNumber||oe.sequenceNumber,sessionId:e.sessionId||oe.sessionId,lastEventTime:e.lastEventTime||oe.lastEventTime,sessionUUID:e.sessionUUID||oe.sessionUUID}),function(e){se(mn({},function(e){const t={};return O.forEach((n=>{e[n]&&(t[n]=e[n])})),t}(e),de()))}(e),Ue({sessionStart:e.sessionStart||oe.sessionStart}),De({ac:e.ac||Ie.ac,af:e.af||Ie.af,ah:e.ah||Ie.ah,al:e.al||Ie.al,am:e.am||Ie.am,ar:e.ar||Ie.ar,as:e.as||Ie.as,pv:e.pv||Ie.pv}),A.trackUserId&&Y({userId:e.userId||H.userId}),pn(),lt({metricName:"Initialized Analytics IndexedDB:",data:e}))})(),async function(){at(E).then((e=>{hn=null!=e?e:{}})).catch((e=>{e instanceof Error&&A.onError(e)}))}(),Z(),z()&&(ln((()=>{se({lastEventTime:Ae()}),st(),Bt()}),"hidden"),ln((()=>{pn()}),"visible")),z()&&(i=()=>{var e,t,n,r;te(),ee({width:null!=(e=null==(t=window)?void 0:t.innerWidth)?e:null,height:null!=(n=null==(r=window)?void 0:r.innerHeight)?n:null})},addEventListener("resize",(()=>{requestAnimationFrame((()=>{i()}))}))),(()=>{if(z())try{const e=n(2);en.markStep=e.markStep,en.markStepOnce=e.markStepOnce,en.incrementUjNavigation=e.incrementUjNavigation,Yt=new e.Perfume({analyticsTracker:e=>{const{data:t,attribution:n,metricName:r,navigatorInformation:i,rating:a}=e,o=I[r],s=(null==n?void 0:n.category)||null;if(!o&&!s)return;const c=(null==i?void 0:i.deviceMemory)||0,u=(null==i?void 0:i.hardwareConcurrency)||0,l=(null==i?void 0:i.isLowEndDevice)||!1,p=(null==i?void 0:i.isLowEndExperience)||!1,v=(null==i?void 0:i.serviceWorkerStatus)||"unsupported",g=Vt({deviceMemory:c,hardwareConcurrency:u,isLowEndDevice:l,isLowEndExperience:p,serviceWorkerStatus:v},Gt),b={is_low_end_device:l,is_low_end_experience:p,page_key:re.pageKey||"",save_data:t.saveData||!1,service_worker:v,is_perf_metric:!0};if("navigationTiming"===r)t&&"number"==typeof t.redirectTime&&Ht({metricName:I.redirectTime.eventName,metricType:d.histogram,tags:b,value:t.redirectTime||0});else if("TTFB"===r)$t(o.eventName,Vt({action:f.measurement,componentType:m.page,duration:t||null,vitalsScore:a||null},g)),Ht({metricName:I.TTFB.eventName,metricType:d.histogram,tags:Vt({},b),value:t}),a&&Ht({metricName:`perf_web_vitals_ttfb_${a}`,metricType:d.count,tags:b,value:1});else if("networkInformation"===r)null!=t&&t.effectiveType&&(Gt=t,$t(o.eventName,{action:f.measurement,componentType:m.page,networkInformationDownlink:t.downlink,networkInformationEffectiveType:t.effectiveType,networkInformationRtt:t.rtt,networkInformationSaveData:t.saveData,navigatorDeviceMemory:c,navigatorHardwareConcurrency:u}));else if("storageEstimate"===r)$t(o.eventName,Vt({action:f.measurement,componentType:m.page},t,g)),Ht({metricName:"perf_storage_estimate_caches",metricType:d.histogram,tags:b,value:t.caches}),Ht({metricName:"perf_storage_estimate_indexed_db",metricType:d.histogram,tags:b,value:t.indexedDB});else if("CLS"===r)$t(o.eventName,Vt({action:f.measurement,componentType:m.page,score:100*t||null,vitalsScore:a||null},g)),a&&Ht({metricName:`perf_web_vitals_cls_${a}`,metricType:d.count,tags:b,value:1});else if("FID"===r){const e=(null==n?void 0:n.performanceEntry)||null,r=parseInt((null==e?void 0:e.processingStart)||"");$t(o.eventName,Vt({action:f.measurement,componentType:m.page,duration:t||null,processingStart:null!=e&&e.processingStart?r:null,startTime:null!=e&&e.startTime?parseInt(e.startTime):null,vitalsScore:a||null},g)),a&&Ht({metricName:`perf_web_vitals_fidVitals_${a}`,metricType:d.count,tags:b,value:1})}else"userJourneyStep"===r?($t("perf_user_journey_step",Vt({action:f.measurement,componentType:m.page,duration:t||null,rating:null!=a?a:null,step_name:(null==n?void 0:n.stepName)||""},g)),Ht({metricName:`user_journey_step.${A.projectName}.${A.platform}.${(null==n?void 0:n.stepName)||""}_vitals_${a}`,metricType:d.count,tags:b,value:1}),Ht({metricName:`user_journey_step.${A.projectName}.${A.platform}.${(null==n?void 0:n.stepName)||""}`,metricType:d.distribution,tags:b,value:t||null})):I[r]&&t&&($t(o.eventName,Vt({action:f.measurement,componentType:m.page,duration:t||null,vitalsScore:a||null},g)),a&&(Ht({metricName:`perf_web_vitals_${Xt(r)}_${a}`,metricType:d.count,tags:b,value:1}),"LCP"===r&&Ht({metricName:`perf_web_vitals_${Xt(r)}`,metricType:d.distribution,tags:b,value:t})))},maxMeasureTime:3e4,steps:A.steps,onMarkStep:Zt})}catch(e){e instanceof Error&&A.onError(e)}})()},Tn=e=>{Y(e),e.userAgent&&Z(),lt({metricName:"Identify:",data:{countryCode:H.countryCode,deviceId:H.deviceId,userId:H.userId}})},kn=({blacklistRegex:e,pageKeyRegex:t,browserHistory:n})=>{Kt({blacklistRegex:e||[],isEnabled:!0}),ae({pageKeyRegex:t}),on({callMarkNTBT:!1}),n.listen((()=>{on()}))},_n=({blacklistRegex:e,pageKeyRegex:t,nextJsRouter:n})=>{Kt({blacklistRegex:e||[],isEnabled:!0}),ae({pageKeyRegex:t}),on({callMarkNTBT:!1}),n.events.on("routeChangeComplete",(()=>{on()}))},Sn=()=>{Y({isOptOut:!0}),ot(S,{})},En=()=>{Y({isOptOut:!1})},xn={Button:{label:"cb_button",uuid:"e921a074-40e6-4371-8700-134d5cd633e6",componentType:m.button}};function On(e,t,n){return{componentName:e,actions:t,data:n}}function jn(){return jn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jn.apply(this,arguments)}function Nn(e,t,n){const{componentName:r,data:i}=n;$t(e.label,jn({componentType:e.componentType,action:t,loggingId:e.uuid,component_name:r},i))}const In={actionMapping:{onPress:f.click,onHover:f.hover},handlers:{Button:{[f.click]:e=>Nn(xn.Button,f.click,e),[f.hover]:e=>Nn(xn.Button,f.hover,e)}}};function Pn(e,t=!1){t?_t({url:A.tracesEndpoint,data:{traces:e},isJSON:!0,onError:A.onError}):yt((()=>{_t({url:A.tracesEndpoint,data:{traces:e},isJSON:!0,onError:A.onError})})),ut({metricName:"Batch Traces",data:e})}function Mn(){return Mn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mn.apply(this,arguments)}const Bn=1e6;function Cn(e){return e*Bn}function Dn(e=function(){var e;return null==(e=window)?void 0:e.crypto}()){const t=new Uint32Array(2);return null==e||e.getRandomValues(t),((BigInt(t[0])<<BigInt(32))+BigInt(t[1])).toString()}function An(e,t){return{"x-datadog-origin":"rum","x-datadog-parent-id":t,"x-datadog-sampling-priority":"1","x-datadog-trace-id":e}}function Ln(e){var t;const{name:n,traceId:r,spanId:i,start:a,duration:o,resource:s,meta:c}=e;return{duration:o?Cn(o):0,name:n,resource:s,service:A.projectName,span_id:null!=i?i:Dn(),start:a?Cn(a):0,trace_id:null!=r?r:Dn(),parent_id:P,type:M,meta:Mn({platform:A.platform},re.pageKey?{page_key:re.pageKey}:{},null!=(t=Se.ujs)&&t.length?{last_ujs:Se.ujs[Se.ujs.length-1]}:{},null!=c?c:{})}}function Un(e){return[Ln(e)]}function Rn(e,t){Oe()&&function(e){return e.length>0}(e)&&(t&&function(e,t){e.forEach((e=>function(e,t){const n=Mn({},e.meta,t.meta),r={start:t.start?Cn(t.start):e.start,duration:t.duration?Cn(t.duration):e.duration};Object.assign(e,t,Mn({meta:n},r))}(e,t)))}(e,t),je.tracesQueue.push(e),wt(Pn)&&(Pn(je.tracesQueue),je.tracesQueue=[]))}function qn(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}function Fn(){return Fn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fn.apply(this,arguments)}function zn(){return void 0!==typeof window&&"performance"in window&&"mark"in performance&&"getEntriesByName"in performance}function Kn(e,t){return`perf_${e}${null!=t&&t.label?`_${t.label}`:""}`}function $n(e,t,n){return`${Kn(e,n)}__${t}`}let Qn={};function Wn(e,t,n){if(!zn())return;const r=$n(e,t,n);if(performance.mark(r),"end"===t){const t=Kn(e,n);!function(e,t,n){try{performance.measure(e,t,n)}catch(e){A.onError(e)}}(t,$n(e,"start",n),r);const i=performance.getEntriesByName(t).pop();i&&Ht(Fn({metricName:e,metricType:d.distribution,value:i.duration},null!=n&&n.tags?{tags:n.tags}:{}))}}function Hn(e,t){if(!zn())return;const n=$n(e,"start",t);Qn[n]||(Wn(e,"start",t),Qn[n]=!0)}function Vn(e,t){const n=$n(e,"start",t),r=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(Qn,[n].map(qn));Qn=r}function Jn(e,t){if(!zn())return;const n=$n(e,"start",t);Qn[n]&&(Wn(e,"end",t),Vn(e,t))}function Xn(){zn()&&(performance.clearMarks(),Qn={})}var Gn=n(784);function Zn(){return Zn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zn.apply(this,arguments)}function Yn(e,t,n=l.low){const r=(0,Gn.useRef)(t);return(0,Gn.useEffect)((()=>{r.current=t}),[t]),(0,Gn.useCallback)((t=>{$t(e,Zn({},r.current,t),n)}),[e,n])}function er(){return er=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},er.apply(this,arguments)}function tr(e,t,n=l.low){(0,Gn.useEffect)((()=>{const r=er({},t,{action:f.render});$t(e,r,n)}),[])}function nr(){return nr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nr.apply(this,arguments)}const rr=function(e,t){return{markStartPerf:(0,Gn.useCallback)((()=>Hn(e,t)),[e,t]),markEndPerf:(0,Gn.useCallback)((n=>Jn(e,nr({},t,n))),[e,t])}};function ir(){return ir=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ir.apply(this,arguments)}function ar(){return Object.entries(ir({},Se,zt(),{sessionUUID:oe.sessionUUID,userId:oe.userId})).reduce(((e,t)=>{return null!=(n=t[1])&&""!==n?ir({},e,{[t[0]]:t[1]}):e;var n}),{})}async function or(){return new Promise((e=>{Mt(vt(je.eventsQueue)),Qt(bt(je.metricsQueue),!0),Pn(je.tracesQueue,!0),Ne({eventsQueue:[],metricsQueue:[],tracesQueue:[]}),e()}))}function sr(){return{"X-CB-Device-ID":H.deviceId||"unknown","X-CB-Is-Logged-In":H.userId?"true":"false","X-CB-Pagekey":re.pageKey||"unknown","X-CB-UJS":(e=Se.ujs,void 0===e||0===e.length?"":e.join(",")),"X-CB-Platform":A.platform||"unknown","X-CB-Project-Name":A.projectName||"unknown","X-CB-Session-UUID":oe.sessionUUID||"unknown","X-CB-Version-Name":A.version?String(A.version):"unknown"};var e}})(),r})()}));',b.type="text/javascript",document.head.appendChild(b),k(),document.head.removeChild(b),a()}catch(a){console.error("Failed to execute inlined telemetry script"),b()}}),k=()=>{},l=-32004,m=-32602,n=-32603,o=4001,p=4100,q=4200,r=4900,s={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."},4902:{standard:"EIP-3085",message:"Unrecognized chain ID."}},t="Unspecified error message.";function u(a,b=t){if(a&&Number.isInteger(a)){var c;let b=a.toString();if(w(s,b))return s[b].message;if((c=a)>=-32099&&c<=-32e3)return"Unspecified server error."}return b}function v(a){return a&&"object"==typeof a&&!Array.isArray(a)?Object.assign({},a):a}function w(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function x(a,b){return"object"==typeof a&&null!==a&&b in a&&"string"==typeof a[b]}let y=a=>G(m,a),z=a=>G(n,a),A=a=>G(l,a),B=a=>H(o,a),C=a=>H(p,a),D=a=>H(q,a),E=a=>H(r,a),F=a=>{if(!a||"object"!=typeof a||Array.isArray(a))throw Error("Ethereum Provider custom errors must provide single object argument.");let{code:b,message:c,data:d}=a;if(!c||"string"!=typeof c)throw Error('"message" must be a nonempty string');return new K(b,c,d)};function G(a,b){let[c,d]=I(b);return new J(a,c||u(a),d)}function H(a,b){let[c,d]=I(b);return new K(a,c||u(a),d)}function I(a){if(a){if("string"==typeof a)return[a];if("object"==typeof a&&!Array.isArray(a)){let{message:b,data:c}=a;if(b&&"string"!=typeof b)throw Error("Must specify string message.");return[b||void 0,c]}}return[]}class J extends Error{constructor(a,b,c){if(!Number.isInteger(a))throw Error('"code" must be an integer.');if(!b||"string"!=typeof b)throw Error('"message" must be a nonempty string.');super(b),this.code=a,void 0!==c&&(this.data=c)}}class K extends J{constructor(a,b,c){if(!function(a){return Number.isInteger(a)&&a>=1e3&&a<=4999}(a))throw Error('"code" must be an integer such that: 1000 <= code <= 4999');super(a,b,c)}}function L(a){return"object"==typeof a&&null!==a&&"code"in a&&"data"in a&&-32090===a.code&&"object"==typeof a.data&&null!==a.data&&"type"in a.data&&"INSUFFICIENT_FUNDS"===a.data.type}function M(a){return"object"==typeof a&&null!==a&&"details"in a}function N(a){return Math.floor(a)}let O=/^[0-9]*$/,P=/^[a-f0-9]*$/;function Q(a){return R(crypto.getRandomValues(new Uint8Array(a)))}function R(a){return[...a].map(a=>a.toString(16).padStart(2,"0")).join("")}function S(a){return new Uint8Array(a.match(/.{1,2}/g).map(a=>Number.parseInt(a,16)))}function T(a,b=!1){let c=a.toString("hex");return b?`0x${c}`:c}function U(a){return T(ac(a),!0)}function V(a){return a.toString(10)}function W(a){return`0x${BigInt(a).toString(16)}`}function X(a){return a.startsWith("0x")||a.startsWith("0X")}function Y(a){return X(a)?a.slice(2):a}function Z(a){return X(a)?`0x${a.slice(2)}`:`0x${a}`}function $(a){if("string"!=typeof a)return!1;let b=Y(a).toLowerCase();return P.test(b)}function _(a,b=!1){if("string"==typeof a){let c=Y(a).toLowerCase();if(P.test(c))return b?`0x${c}`:c}throw y(`"${String(a)}" is not a hexadecimal string`)}function aa(a,b=!1){let c=_(a,!1);return c.length%2==1&&(c=`0${c}`),b?`0x${c}`:c}function ab(a){if("string"==typeof a){let b=Y(a).toLowerCase();if($(b)&&40===b.length)return Z(b)}throw y(`Invalid Ethereum address: ${String(a)}`)}function ac(a){if(Buffer.isBuffer(a))return a;if("string"==typeof a){if($(a)){let b=aa(a,!1);return Buffer.from(b,"hex")}return Buffer.from(a,"utf8")}throw y(`Not binary data: ${String(a)}`)}function ad(a){if("number"==typeof a&&Number.isInteger(a))return N(a);if("string"==typeof a){if(O.test(a))return N(Number(a));if($(a))return N(Number(BigInt(aa(a,!0))))}throw y(`Not an integer: ${String(a)}`)}function ae(a){if(null!==a&&("bigint"==typeof a||function(a){if(null==a||"function"!=typeof a.constructor)return!1;let{constructor:b}=a;return"function"==typeof b.config&&"number"==typeof b.EUCLID}(a)))return BigInt(a.toString(10));if("number"==typeof a)return BigInt(ad(a));if("string"==typeof a){if(O.test(a))return BigInt(a);if($(a))return BigInt(aa(a,!0))}throw y(`Not an integer: ${String(a)}`)}function af(a,b){let c;try{c=a()}catch(a){return}return{getItem:a=>{var d;let e=a=>null===a?null:JSON.parse(a,null==b?void 0:b.reviver),f=null!=(d=c.getItem(a))?d:null;return f instanceof Promise?f.then(e):e(f)},setItem:(a,d)=>c.setItem(a,JSON.stringify(d,null==b?void 0:b.replacer)),removeItem:a=>c.removeItem(a)}}let ag=a=>b=>{try{let c=a(b);if(c instanceof Promise)return c;return{then:a=>ag(a)(c),catch(a){return this}}}catch(a){return{then(a){return this},catch:b=>ag(b)(a)}}},ah=a=>{let b,c=new Set,d=(a,d)=>{let e="function"==typeof a?a(b):a;if(!Object.is(e,b)){let a=b;b=(null!=d?d:"object"!=typeof e||null===e)?e:Object.assign({},b,e),c.forEach(c=>c(b,a))}},e=()=>b,f={setState:d,getState:e,getInitialState:()=>g,subscribe:a=>(c.add(a),()=>c.delete(a))},g=b=a(d,e,f);return f},ai=a=>a?ah(a):ah,aj="4.3.6",ak="@coinbase/wallet-sdk",al=ai((b=(...a)=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(()=>({chains:[]}))(...a)),(()=>({keys:{}}))(...a)),(()=>({account:{}}))(...a)),(()=>({subAccount:void 0}))(...a)),(()=>({spendPermissions:[]}))(...a)),(()=>({config:{version:aj}}))(...a)),(()=>({subAccountConfig:{}}))(...a)),c={name:"cbwsdk.store",storage:af(()=>localStorage),partialize:a=>({chains:a.chains,keys:a.keys,account:a.account,subAccount:a.subAccount,spendPermissions:a.spendPermissions,config:a.config})},(a,d,e)=>{let f,g={storage:af(()=>localStorage),partialize:a=>a,version:0,merge:(a,b)=>({...b,...a}),...c},h=!1,i=new Set,j=new Set,k=g.storage;if(!k)return b((...b)=>{console.warn(`[zustand persist middleware] Unable to update item '${g.name}', the given storage is currently unavailable.`),a(...b)},d,e);let l=()=>{let a=g.partialize({...d()});return k.setItem(g.name,{state:a,version:g.version})},m=e.setState;e.setState=(a,b)=>{m(a,b),l()};let n=b((...b)=>{a(...b),l()},d,e);e.getInitialState=()=>n;let o=()=>{var b,c;if(!k)return;h=!1,i.forEach(a=>{var b;return a(null!=(b=d())?b:n)});let e=(null==(c=g.onRehydrateStorage)?void 0:c.call(g,null!=(b=d())?b:n))||void 0;return ag(k.getItem.bind(k))(g.name).then(a=>{if(a)if("number"!=typeof a.version||a.version===g.version)return[!1,a.state];else{if(g.migrate){let b=g.migrate(a.state,a.version);return b instanceof Promise?b.then(a=>[!0,a]):[!0,b]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(b=>{var c;let[e,h]=b;if(a(f=g.merge(h,null!=(c=d())?c:n),!0),e)return l()}).then(()=>{null==e||e(f,void 0),f=d(),h=!0,j.forEach(a=>a(f))}).catch(a=>{null==e||e(void 0,a)})};return e.persist={setOptions:a=>{g={...g,...a},a.storage&&(k=a.storage)},clearStorage:()=>{null==k||k.removeItem(g.name)},getOptions:()=>g,rehydrate:()=>o(),hasHydrated:()=>h,onHydrate:a=>(i.add(a),()=>{i.delete(a)}),onFinishHydration:a=>(j.add(a),()=>{j.delete(a)})},g.skipHydration||o(),f||n})),am={get:()=>al.getState().config,set:a=>{al.setState(b=>({config:Object.assign(Object.assign({},b.config),a)}))}},an=Object.assign(Object.assign({},al),{subAccounts:{get:()=>al.getState().subAccount,set:a=>{al.setState(b=>({subAccount:b.subAccount?Object.assign(Object.assign({},b.subAccount),a):Object.assign({address:a.address},a)}))},clear:()=>{al.setState({subAccount:void 0})}},subAccountsConfig:{get:()=>al.getState().subAccountConfig,set:a=>{al.setState(b=>({subAccountConfig:Object.assign(Object.assign({},b.subAccountConfig),a)}))},clear:()=>{al.setState({subAccountConfig:{}})}},spendPermissions:{get:()=>al.getState().spendPermissions,set:a=>{al.setState({spendPermissions:a})},clear:()=>{al.setState({spendPermissions:[]})}},account:{get:()=>al.getState().account,set:a=>{al.setState(b=>({account:Object.assign(Object.assign({},b.account),a)}))},clear:()=>{al.setState({account:{}})}},chains:{get:()=>al.getState().chains,set:a=>{al.setState({chains:a})},clear:()=>{al.setState({chains:[]})}},keys:{get:a=>al.getState().keys[a],set:(a,b)=>{al.setState(c=>({keys:Object.assign(Object.assign({},c.keys),{[a]:b})}))},clear:()=>{al.setState({keys:{}})}},config:am}),{checkCrossOriginOpenerPolicy:ao,getCrossOriginOpenerPolicy:ap}={getCrossOriginOpenerPolicy:()=>void 0===d?"undefined":d,checkCrossOriginOpenerPolicy:async()=>{d="non-browser-env"}};async function aq(a,b){let c=Object.assign(Object.assign({},a),{jsonrpc:"2.0",id:crypto.randomUUID()}),d=await window.fetch(b,{method:"POST",body:JSON.stringify(c),mode:"cors",headers:{"Content-Type":"application/json","X-Cbw-Sdk-Version":aj,"X-Cbw-Sdk-Platform":ak}}),{result:e,error:f}=await d.json();if(f)throw f;return e}function ar({metadata:a,preference:b}){var c,d;let{appName:e,appLogoUrl:f,appChainIds:g}=a;if("smartWalletOnly"!==b.options){let a=globalThis.coinbaseWalletExtension;if(a)return null==(c=a.setAppInfo)||c.call(a,e,f,g,b),a}let h=function(){var a,b;try{let c=globalThis;return null!=(a=c.ethereum)?a:null==(b=c.top)?void 0:b.ethereum}catch(a){return}}();if(null==h?void 0:h.isCoinbaseBrowser)return null==(d=h.setAppInfo)||d.call(h,e,f,g,b),h}function as(a){if(a){if(!["all","smartWalletOnly","eoaOnly"].includes(a.options))throw Error(`Invalid options: ${a.options}`);if(a.attribution&&void 0!==a.attribution.auto&&void 0!==a.attribution.dataSuffix)throw Error("Attribution cannot contain both auto and dataSuffix properties");if(a.telemetry&&"boolean"!=typeof a.telemetry)throw Error("Telemetry must be a boolean")}}function at(a){if("function"!=typeof a)throw Error("toAccount is not a function")}let au="https://rpc.wallet.coinbase.com",av="https://www.walletlink.org";function aw(a,b,c){var d,e,f,g;window.ClientAnalytics&&(null==(d=window.ClientAnalytics)||d.logEvent(a,Object.assign(Object.assign({},b),{sdkVersion:aj,appName:null!=(f=null==(e=an.config.get().metadata)?void 0:e.appName)?f:"",appOrigin:window.location.origin,appPreferredSigner:null==(g=an.config.get().preference)?void 0:g.options}),c))}(aE=aI||(aI={})).unknown="unknown",aE.banner="banner",aE.button="button",aE.card="card",aE.chart="chart",aE.content_script="content_script",aE.dropdown="dropdown",aE.link="link",aE.page="page",aE.modal="modal",aE.table="table",aE.search_bar="search_bar",aE.service_worker="service_worker",aE.text="text",aE.text_input="text_input",aE.tray="tray",aE.checkbox="checkbox",aE.icon="icon",(aF=aJ||(aJ={})).unknown="unknown",aF.blur="blur",aF.click="click",aF.change="change",aF.dismiss="dismiss",aF.focus="focus",aF.hover="hover",aF.select="select",aF.measurement="measurement",aF.move="move",aF.process="process",aF.render="render",aF.scroll="scroll",aF.view="view",aF.search="search",aF.keyPress="keyPress",aF.error="error",(aG=aK||(aK={})).low="low",aG.high="high";let ax=({snackbarContext:a})=>{aw(`snackbar.${a}.shown`,{action:aJ.render,componentType:aI.modal,snackbarContext:a},aK.high)},ay=({snackbarContext:a,snackbarAction:b})=>{aw(`snackbar.${a}.action_clicked`,{action:aJ.click,componentType:aI.button,snackbarContext:a,snackbarAction:b},aK.high)};function az(){let a=document.createElement("style");a.type="text/css",a.appendChild(document.createTextNode('@namespace svg "http://www.w3.org/2000/svg";.-cbwsdk-css-reset,.-cbwsdk-css-reset *{animation:none;animation-delay:0;animation-direction:normal;animation-duration:0;animation-fill-mode:none;animation-iteration-count:1;animation-name:none;animation-play-state:running;animation-timing-function:ease;backface-visibility:visible;background:0;background-attachment:scroll;background-clip:border-box;background-color:rgba(0,0,0,0);background-image:none;background-origin:padding-box;background-position:0 0;background-position-x:0;background-position-y:0;background-repeat:repeat;background-size:auto auto;border:0;border-style:none;border-width:medium;border-color:inherit;border-bottom:0;border-bottom-color:inherit;border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-style:none;border-bottom-width:medium;border-collapse:separate;border-image:none;border-left:0;border-left-color:inherit;border-left-style:none;border-left-width:medium;border-radius:0;border-right:0;border-right-color:inherit;border-right-style:none;border-right-width:medium;border-spacing:0;border-top:0;border-top-color:inherit;border-top-left-radius:0;border-top-right-radius:0;border-top-style:none;border-top-width:medium;box-shadow:none;box-sizing:border-box;caption-side:top;clear:none;clip:auto;color:inherit;columns:auto;column-count:auto;column-fill:balance;column-gap:normal;column-rule:medium none currentColor;column-rule-color:currentColor;column-rule-style:none;column-rule-width:none;column-span:1;column-width:auto;counter-increment:none;counter-reset:none;direction:ltr;empty-cells:show;float:none;font:normal;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;font-size:medium;font-style:normal;font-variant:normal;font-weight:normal;height:auto;hyphens:none;letter-spacing:normal;line-height:normal;list-style:none;list-style-image:none;list-style-position:outside;list-style-type:disc;margin:0;margin-bottom:0;margin-left:0;margin-right:0;margin-top:0;opacity:1;orphans:0;outline:0;outline-color:invert;outline-style:none;outline-width:medium;overflow:visible;overflow-x:visible;overflow-y:visible;padding:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;page-break-after:auto;page-break-before:auto;page-break-inside:auto;perspective:none;perspective-origin:50% 50%;pointer-events:auto;position:static;quotes:"\\201C" "\\201D" "\\2018" "\\2019";tab-size:8;table-layout:auto;text-align:inherit;text-align-last:auto;text-decoration:none;text-decoration-color:inherit;text-decoration-line:none;text-decoration-style:solid;text-indent:0;text-shadow:none;text-transform:none;transform:none;transform-style:flat;transition:none;transition-delay:0s;transition-duration:0s;transition-property:none;transition-timing-function:ease;unicode-bidi:normal;vertical-align:baseline;visibility:visible;white-space:normal;widows:0;word-spacing:normal;z-index:auto}.-cbwsdk-css-reset strong{font-weight:bold}.-cbwsdk-css-reset *{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;line-height:1}.-cbwsdk-css-reset [class*=container]{margin:0;padding:0}.-cbwsdk-css-reset style{display:none}')),document.documentElement.appendChild(a)}var aA,aB,aC,aD,aE,aF,aG,aH,aI,aJ,aK,aL,aM,aN,aO,aP,aQ,aR,aS,aT,aU,aV=a.i(820785),aW={},aX=[],aY=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,aZ=Array.isArray;function a$(a,b){for(var c in b)a[c]=b[c];return a}function a_(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function a0(a,b,c){var d,e,f,g={};for(f in b)"key"==f?d=b[f]:"ref"==f?e=b[f]:g[f]=b[f];if(arguments.length>2&&(g.children=arguments.length>3?aL.call(arguments,2):c),"function"==typeof a&&null!=a.defaultProps)for(f in a.defaultProps)void 0===g[f]&&(g[f]=a.defaultProps[f]);return a1(a,g,d,e,null)}function a1(a,b,c,d,e){var f={type:a,props:b,key:c,ref:d,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==e?++aN:e,__i:-1,__u:0};return null==e&&null!=aM.vnode&&aM.vnode(f),f}function a2(a){return a.children}function a3(a,b){this.props=a,this.context=b}function a4(a,b){if(null==b)return a.__?a4(a.__,a.__i+1):null;for(var c;b<a.__k.length;b++)if(null!=(c=a.__k[b])&&null!=c.__e)return c.__e;return"function"==typeof a.type?a4(a):null}function a5(a){(!a.__d&&(a.__d=!0)&&aO.push(a)&&!a6.__r++||aP!==aM.debounceRendering)&&((aP=aM.debounceRendering)||aQ)(a6)}function a6(){var a,b,c,d,e,f,g,h;for(aO.sort(aR);a=aO.shift();)a.__d&&(b=aO.length,d=void 0,f=(e=(c=a).__v).__e,g=[],h=[],c.__P&&((d=a$({},e)).__v=e.__v+1,aM.vnode&&aM.vnode(d),bb(c.__P,d,e,c.__n,c.__P.namespaceURI,32&e.__u?[f]:null,g,null==f?a4(e):f,!!(32&e.__u),h),d.__v=e.__v,d.__.__k[d.__i]=d,bc(g,d,h),d.__e!=f&&function a(b){var c,d;if(null!=(b=b.__)&&null!=b.__c){for(b.__e=b.__c.base=null,c=0;c<b.__k.length;c++)if(null!=(d=b.__k[c])&&null!=d.__e){b.__e=b.__c.base=d.__e;break}return a(b)}}(d)),aO.length>b&&aO.sort(aR));a6.__r=0}function a7(a,b,c,d,e,f,g,h,i,j,k){var l,m,n,o,p,q=d&&d.__k||aX,r=b.length;for(c.__d=i,function(a,b,c){var d,e,f,g,h,i=b.length,j=c.length,k=j,l=0;for(a.__k=[],d=0;d<i;d++)null!=(e=b[d])&&"boolean"!=typeof e&&"function"!=typeof e?(g=d+l,(e=a.__k[d]="string"==typeof e||"number"==typeof e||"bigint"==typeof e||e.constructor==String?a1(null,e,null,null,null):aZ(e)?a1(a2,{children:e},null,null,null):void 0===e.constructor&&e.__b>0?a1(e.type,e.props,e.key,e.ref?e.ref:null,e.__v):e).__=a,e.__b=a.__b+1,f=null,-1!==(h=e.__i=function(a,b,c,d){var e=a.key,f=a.type,g=c-1,h=c+1,i=b[c];if(null===i||i&&e==i.key&&f===i.type&&0==(131072&i.__u))return c;if(d>+(null!=i&&0==(131072&i.__u)))for(;g>=0||h<b.length;){if(g>=0){if((i=b[g])&&0==(131072&i.__u)&&e==i.key&&f===i.type)return g;g--}if(h<b.length){if((i=b[h])&&0==(131072&i.__u)&&e==i.key&&f===i.type)return h;h++}}return -1}(e,c,g,k))&&(k--,(f=c[h])&&(f.__u|=131072)),null==f||null===f.__v?(-1==h&&l--,"function"!=typeof e.type&&(e.__u|=65536)):h!==g&&(h==g-1?l--:h==g+1?l++:(h>g?l--:l++,e.__u|=65536))):e=a.__k[d]=null;if(k)for(d=0;d<j;d++)null!=(f=c[d])&&0==(131072&f.__u)&&(f.__e==a.__d&&(a.__d=a4(f)),function a(b,c,d){var e,f;if(aM.unmount&&aM.unmount(b),(e=b.ref)&&(e.current&&e.current!==b.__e||bd(e,null,c)),null!=(e=b.__c)){if(e.componentWillUnmount)try{e.componentWillUnmount()}catch(a){aM.__e(a,c)}e.base=e.__P=null}if(e=b.__k)for(f=0;f<e.length;f++)e[f]&&a(e[f],c,d||"function"!=typeof b.type);d||a_(b.__e),b.__c=b.__=b.__e=b.__d=void 0}(f,f))}(c,b,q),i=c.__d,l=0;l<r;l++)null!=(n=c.__k[l])&&(m=-1===n.__i?aW:q[n.__i]||aW,n.__i=l,bb(a,n,m,e,f,g,h,i,j,k),o=n.__e,n.ref&&m.ref!=n.ref&&(m.ref&&bd(m.ref,null,n),k.push(n.ref,n.__c||o,n)),null==p&&null!=o&&(p=o),65536&n.__u||m.__k===n.__k?i=function a(b,c,d){var e,f;if("function"==typeof b.type){for(e=b.__k,f=0;e&&f<e.length;f++)e[f]&&(e[f].__=b,c=a(e[f],c,d));return c}b.__e!=c&&(c&&b.type&&!d.contains(c)&&(c=a4(b)),d.insertBefore(b.__e,c||null),c=b.__e);do c=c&&c.nextSibling;while(null!=c&&8===c.nodeType)return c}(n,i,a):"function"==typeof n.type&&void 0!==n.__d?i=n.__d:o&&(i=o.nextSibling),n.__d=void 0,n.__u&=-196609);c.__d=i,c.__e=p}function a8(a,b,c){"-"===b[0]?a.setProperty(b,null==c?"":c):a[b]=null==c?"":"number"!=typeof c||aY.test(b)?c:c+"px"}function a9(a,b,c,d,e){var f;a:if("style"===b)if("string"==typeof c)a.style.cssText=c;else{if("string"==typeof d&&(a.style.cssText=d=""),d)for(b in d)c&&b in c||a8(a.style,b,"");if(c)for(b in c)d&&c[b]===d[b]||a8(a.style,b,c[b])}else if("o"===b[0]&&"n"===b[1])f=b!==(b=b.replace(/(PointerCapture)$|Capture$/i,"$1")),b=b.toLowerCase()in a||"onFocusOut"===b||"onFocusIn"===b?b.toLowerCase().slice(2):b.slice(2),a.l||(a.l={}),a.l[b+f]=c,c?d?c.u=d.u:(c.u=aS,a.addEventListener(b,f?aU:aT,f)):a.removeEventListener(b,f?aU:aT,f);else{if("http://www.w3.org/2000/svg"==e)b=b.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=b&&"height"!=b&&"href"!=b&&"list"!=b&&"form"!=b&&"tabIndex"!=b&&"download"!=b&&"rowSpan"!=b&&"colSpan"!=b&&"role"!=b&&"popover"!=b&&b in a)try{a[b]=null==c?"":c;break a}catch(a){}"function"==typeof c||(null==c||!1===c&&"-"!==b[4]?a.removeAttribute(b):a.setAttribute(b,"popover"==b&&1==c?"":c))}}function ba(a){return function(b){if(this.l){var c=this.l[b.type+a];if(null==b.t)b.t=aS++;else if(b.t<c.u)return;return c(aM.event?aM.event(b):b)}}}function bb(a,b,c,d,e,f,g,h,i,j){var k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A=b.type;if(void 0!==b.constructor)return null;128&c.__u&&(i=!!(32&c.__u),f=[h=b.__e=c.__e]),(k=aM.__b)&&k(b);a:if("function"==typeof A)try{if(r=b.props,s="prototype"in A&&A.prototype.render,t=(k=A.contextType)&&d[k.__c],u=k?t?t.props.value:k.__:d,c.__c?q=(l=b.__c=c.__c).__=l.__E:(s?b.__c=l=new A(r,u):(b.__c=l=new a3(r,u),l.constructor=A,l.render=be),t&&t.sub(l),l.props=r,l.state||(l.state={}),l.context=u,l.__n=d,m=l.__d=!0,l.__h=[],l._sb=[]),s&&null==l.__s&&(l.__s=l.state),s&&null!=A.getDerivedStateFromProps&&(l.__s==l.state&&(l.__s=a$({},l.__s)),a$(l.__s,A.getDerivedStateFromProps(r,l.__s))),n=l.props,o=l.state,l.__v=b,m)s&&null==A.getDerivedStateFromProps&&null!=l.componentWillMount&&l.componentWillMount(),s&&null!=l.componentDidMount&&l.__h.push(l.componentDidMount);else{if(s&&null==A.getDerivedStateFromProps&&r!==n&&null!=l.componentWillReceiveProps&&l.componentWillReceiveProps(r,u),!l.__e&&(null!=l.shouldComponentUpdate&&!1===l.shouldComponentUpdate(r,l.__s,u)||b.__v===c.__v)){for(b.__v!==c.__v&&(l.props=r,l.state=l.__s,l.__d=!1),b.__e=c.__e,b.__k=c.__k,b.__k.some(function(a){a&&(a.__=b)}),v=0;v<l._sb.length;v++)l.__h.push(l._sb[v]);l._sb=[],l.__h.length&&g.push(l);break a}null!=l.componentWillUpdate&&l.componentWillUpdate(r,l.__s,u),s&&null!=l.componentDidUpdate&&l.__h.push(function(){l.componentDidUpdate(n,o,p)})}if(l.context=u,l.props=r,l.__P=a,l.__e=!1,w=aM.__r,x=0,s){for(l.state=l.__s,l.__d=!1,w&&w(b),k=l.render(l.props,l.state,l.context),y=0;y<l._sb.length;y++)l.__h.push(l._sb[y]);l._sb=[]}else do l.__d=!1,w&&w(b),k=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++x<25)l.state=l.__s,null!=l.getChildContext&&(d=a$(a$({},d),l.getChildContext())),s&&!m&&null!=l.getSnapshotBeforeUpdate&&(p=l.getSnapshotBeforeUpdate(n,o)),a7(a,aZ(z=null!=k&&k.type===a2&&null==k.key?k.props.children:k)?z:[z],b,c,d,e,f,g,h,i,j),l.base=b.__e,b.__u&=-161,l.__h.length&&g.push(l),q&&(l.__E=l.__=null)}catch(a){if(b.__v=null,i||null!=f){for(b.__u|=i?160:32;h&&8===h.nodeType&&h.nextSibling;)h=h.nextSibling;f[f.indexOf(h)]=null,b.__e=h}else b.__e=c.__e,b.__k=c.__k;aM.__e(a,b,c)}else null==f&&b.__v===c.__v?(b.__k=c.__k,b.__e=c.__e):b.__e=function(a,b,c,d,e,f,g,h,i){var j,k,l,m,n,o,p,q=c.props,r=b.props,s=b.type;if("svg"===s?e="http://www.w3.org/2000/svg":"math"===s?e="http://www.w3.org/1998/Math/MathML":e||(e="http://www.w3.org/1999/xhtml"),null!=f){for(j=0;j<f.length;j++)if((n=f[j])&&"setAttribute"in n==!!s&&(s?n.localName===s:3===n.nodeType)){a=n,f[j]=null;break}}if(null==a){if(null===s)return document.createTextNode(r);a=document.createElementNS(e,s,r.is&&r),h&&(aM.__m&&aM.__m(b,f),h=!1),f=null}if(null===s)q===r||h&&a.data===r||(a.data=r);else{if(f=f&&aL.call(a.childNodes),q=c.props||aW,!h&&null!=f)for(q={},j=0;j<a.attributes.length;j++)q[(n=a.attributes[j]).name]=n.value;for(j in q)if(n=q[j],"children"==j);else if("dangerouslySetInnerHTML"==j)l=n;else if(!(j in r)){if("value"==j&&"defaultValue"in r||"checked"==j&&"defaultChecked"in r)continue;a9(a,j,null,n,e)}for(j in r)n=r[j],"children"==j?m=n:"dangerouslySetInnerHTML"==j?k=n:"value"==j?o=n:"checked"==j?p=n:h&&"function"!=typeof n||q[j]===n||a9(a,j,n,q[j],e);if(k)h||l&&(k.__html===l.__html||k.__html===a.innerHTML)||(a.innerHTML=k.__html),b.__k=[];else if(l&&(a.innerHTML=""),a7(a,aZ(m)?m:[m],b,c,d,"foreignObject"===s?"http://www.w3.org/1999/xhtml":e,f,g,f?f[0]:c.__k&&a4(c,0),h,i),null!=f)for(j=f.length;j--;)a_(f[j]);h||(j="value","progress"===s&&null==o?a.removeAttribute("value"):void 0===o||o===a[j]&&("progress"!==s||o)&&("option"!==s||o===q[j])||a9(a,j,o,q[j],e),j="checked",void 0!==p&&p!==a[j]&&a9(a,j,p,q[j],e))}return a}(c.__e,b,c,d,e,f,g,i,j);(k=aM.diffed)&&k(b)}function bc(a,b,c){b.__d=void 0;for(var d=0;d<c.length;d++)bd(c[d],c[++d],c[++d]);aM.__c&&aM.__c(b,a),a.some(function(b){try{a=b.__h,b.__h=[],a.some(function(a){a.call(b)})}catch(a){aM.__e(a,b.__v)}})}function bd(a,b,c){try{if("function"==typeof a){var d="function"==typeof a.__u;d&&a.__u(),d&&null==b||(a.__u=a(b))}else a.current=b}catch(a){aM.__e(a,c)}}function be(a,b,c){return this.constructor(a,c)}function bf(a,b,c){var d,e,f,g;aM.__&&aM.__(a,b),e=(d="function"==typeof c)?null:c&&c.__k||b.__k,f=[],g=[],bb(b,a=(!d&&c||b).__k=a0(a2,null,[a]),e||aW,aW,b.namespaceURI,!d&&c?[c]:e?null:b.firstChild?aL.call(b.childNodes):null,f,!d&&c?c:e?e.__e:b.firstChild,d,g),bc(f,a,g)}aL=aX.slice,aM={__e:function(a,b,c,d){for(var e,f,g;b=b.__;)if((e=b.__c)&&!e.__)try{if((f=e.constructor)&&null!=f.getDerivedStateFromError&&(e.setState(f.getDerivedStateFromError(a)),g=e.__d),null!=e.componentDidCatch&&(e.componentDidCatch(a,d||{}),g=e.__d),g)return e.__E=e}catch(b){a=b}throw a}},aN=0,a3.prototype.setState=function(a,b){var c;c=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=a$({},this.state),"function"==typeof a&&(a=a(a$({},c),this.props)),a&&a$(c,a),null!=a&&this.__v&&(b&&this._sb.push(b),a5(this))},a3.prototype.forceUpdate=function(a){this.__v&&(this.__e=!0,a&&this.__h.push(a),a5(this))},a3.prototype.render=a2,aO=[],aQ="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,aR=function(a,b){return a.__v.__b-b.__v.__b},a6.__r=0,aS=0,aT=ba(!1),aU=ba(!0);var bg,bh,bi,bj,bk=0,bl=[],bm=aM,bn=bm.__b,bo=bm.__r,bp=bm.diffed,bq=bm.__c,br=bm.unmount,bs=bm.__;function bt(a,b){bm.__h&&bm.__h(bh,a,bk||b),bk=0;var c=bh.__H||(bh.__H={__:[],__h:[]});return a>=c.__.length&&c.__.push({}),c.__[a]}function bu(a,b,c){var d=bt(bg++,2);if(d.t=a,!d.__c&&(d.__=[c?c(b):bz(void 0,b),function(a){var b=d.__N?d.__N[0]:d.__[0],c=d.t(b,a);b!==c&&(d.__N=[c,d.__[1]],d.__c.setState({}))}],d.__c=bh,!bh.u)){var e=function(a,b,c){if(!d.__c.__H)return!0;var e=d.__c.__H.__.filter(function(a){return!!a.__c});if(e.every(function(a){return!a.__N}))return!f||f.call(this,a,b,c);var g=!1;return e.forEach(function(a){if(a.__N){var b=a.__[0];a.__=a.__N,a.__N=void 0,b!==a.__[0]&&(g=!0)}}),!(!g&&d.__c.props===a)&&(!f||f.call(this,a,b,c))};bh.u=!0;var f=bh.shouldComponentUpdate,g=bh.componentWillUpdate;bh.componentWillUpdate=function(a,b,c){if(this.__e){var d=f;f=void 0,e(a,b,c),f=d}g&&g.call(this,a,b,c)},bh.shouldComponentUpdate=e}return d.__N||d.__}function bv(){for(var a;a=bl.shift();)if(a.__P&&a.__H)try{a.__H.__h.forEach(bx),a.__H.__h.forEach(by),a.__H.__h=[]}catch(b){a.__H.__h=[],bm.__e(b,a.__v)}}bm.__b=function(a){bh=null,bn&&bn(a)},bm.__=function(a,b){a&&b.__k&&b.__k.__m&&(a.__m=b.__k.__m),bs&&bs(a,b)},bm.__r=function(a){bo&&bo(a),bg=0;var b=(bh=a.__c).__H;b&&(bi===bh?(b.__h=[],bh.__h=[],b.__.forEach(function(a){a.__N&&(a.__=a.__N),a.i=a.__N=void 0})):(b.__h.forEach(bx),b.__h.forEach(by),b.__h=[],bg=0)),bi=bh},bm.diffed=function(a){bp&&bp(a);var b=a.__c;b&&b.__H&&(b.__H.__h.length&&(1!==bl.push(b)&&bj===bm.requestAnimationFrame||((bj=bm.requestAnimationFrame)||function(a){var b,c=function(){clearTimeout(d),bw&&cancelAnimationFrame(b),setTimeout(a)},d=setTimeout(c,100);bw&&(b=requestAnimationFrame(c))})(bv)),b.__H.__.forEach(function(a){a.i&&(a.__H=a.i),a.i=void 0})),bi=bh=null},bm.__c=function(a,b){b.some(function(a){try{a.__h.forEach(bx),a.__h=a.__h.filter(function(a){return!a.__||by(a)})}catch(c){b.some(function(a){a.__h&&(a.__h=[])}),b=[],bm.__e(c,a.__v)}}),bq&&bq(a,b)},bm.unmount=function(a){br&&br(a);var b,c=a.__c;c&&c.__H&&(c.__H.__.forEach(function(a){try{bx(a)}catch(a){b=a}}),c.__H=void 0,b&&bm.__e(b,c.__v))};var bw="function"==typeof requestAnimationFrame;function bx(a){var b=bh,c=a.__c;"function"==typeof c&&(a.__c=void 0,c()),bh=b}function by(a){var b=bh;a.__c=a.__(),bh=b}function bz(a,b){return"function"==typeof b?b(a):b}function bA(){var a,b;return null!=(b=null==(a=null==window?void 0:window.matchMedia)?void 0:a.call(window,"(prefers-color-scheme: dark)").matches)&&b}class bB{constructor(){this.items=new Map,this.nextItemKey=0,this.root=null,this.darkMode=bA()}attach(a){this.root=document.createElement("div"),this.root.className="-cbwsdk-snackbar-root",a.appendChild(this.root),this.render()}presentItem(a){let b=this.nextItemKey++;return this.items.set(b,a),this.render(),()=>{this.items.delete(b),this.render()}}clear(){this.items.clear(),this.render()}render(){this.root&&bf(a0("div",null,a0(bC,{darkMode:this.darkMode},Array.from(this.items.entries()).map(([a,b])=>a0(bD,Object.assign({},b,{key:a}))))),this.root)}}let bC=a=>a0("div",{class:(0,aV.clsx)("-cbwsdk-snackbar-container")},a0("style",null,".-cbwsdk-css-reset .-gear-container{margin-left:16px !important;margin-right:9px !important;display:flex;align-items:center;justify-content:center;width:24px;height:24px;transition:opacity .25s}.-cbwsdk-css-reset .-gear-container *{user-select:none}.-cbwsdk-css-reset .-gear-container svg{opacity:0;position:absolute}.-cbwsdk-css-reset .-gear-icon{height:12px;width:12px;z-index:10000}.-cbwsdk-css-reset .-cbwsdk-snackbar{align-items:flex-end;display:flex;flex-direction:column;position:fixed;right:0;top:0;z-index:2147483647}.-cbwsdk-css-reset .-cbwsdk-snackbar *{user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance{display:flex;flex-direction:column;margin:8px 16px 0 16px;overflow:visible;text-align:left;transform:translateX(0);transition:opacity .25s,transform .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header:hover .-gear-container svg{opacity:1}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header{display:flex;align-items:center;background:#fff;overflow:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-cblogo{margin:8px 8px 8px 8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-message{color:#000;font-size:13px;line-height:1.5;user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu{background:#fff;transition:opacity .25s ease-in-out,transform .25s linear,visibility 0s;visibility:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;opacity:0;flex-direction:column;padding-left:8px;padding-right:8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:last-child{margin-bottom:8px !important}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover{background:#f5f7f8;border-radius:6px;transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover span{color:#050f19;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover svg path{fill:#000;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item{visibility:inherit;height:35px;margin-top:8px;margin-bottom:0;display:flex;flex-direction:row;align-items:center;padding:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item *{visibility:inherit;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover{background:rgba(223,95,103,.2);transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover svg path{fill:#df5f67;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover span{color:#df5f67;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-info{color:#aaa;font-size:13px;margin:0 8px 0 32px;position:absolute}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-hidden{opacity:0;text-align:left;transform:translateX(25%);transition:opacity .5s linear}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-expanded .-cbwsdk-snackbar-instance-menu{opacity:1;display:flex;transform:translateY(8px);visibility:visible}"),a0("div",{class:"-cbwsdk-snackbar"},a.children)),bD=({autoExpand:a,message:b,menuItems:c})=>{var d,e,f,g;let[h,i]=(bk=1,bu(bz,!0)),[j,k]=(bk=1,bu(bz,null!=a&&a));return d=()=>{let a=[window.setTimeout(()=>{i(!1)},1),window.setTimeout(()=>{k(!0)},1e4)];return()=>{a.forEach(window.clearTimeout)}},e=bt(bg++,3),!bm.__s&&(f=e.__H,g=void 0,!f||f.length!==g.length||g.some(function(a,b){return a!==f[b]}))&&(e.__=d,e.i=void 0,bh.__H.__h.push(e)),a0("div",{class:(0,aV.clsx)("-cbwsdk-snackbar-instance",h&&"-cbwsdk-snackbar-instance-hidden",j&&"-cbwsdk-snackbar-instance-expanded")},a0("div",{class:"-cbwsdk-snackbar-instance-header",onClick:()=>{k(!j)}},a0("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEuNDkyIDEwLjQxOWE4LjkzIDguOTMgMCAwMTguOTMtOC45M2gxMS4xNjNhOC45MyA4LjkzIDAgMDE4LjkzIDguOTN2MTEuMTYzYTguOTMgOC45MyAwIDAxLTguOTMgOC45M0gxMC40MjJhOC45MyA4LjkzIDAgMDEtOC45My04LjkzVjEwLjQxOXoiIGZpbGw9IiMxNjUyRjAiLz48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEwLjQxOSAwSDIxLjU4QzI3LjMzNSAwIDMyIDQuNjY1IDMyIDEwLjQxOVYyMS41OEMzMiAyNy4zMzUgMjcuMzM1IDMyIDIxLjU4MSAzMkgxMC40MkM0LjY2NSAzMiAwIDI3LjMzNSAwIDIxLjU4MVYxMC40MkMwIDQuNjY1IDQuNjY1IDAgMTAuNDE5IDB6bTAgMS40ODhhOC45MyA4LjkzIDAgMDAtOC45MyA4LjkzdjExLjE2M2E4LjkzIDguOTMgMCAwMDguOTMgOC45M0gyMS41OGE4LjkzIDguOTMgMCAwMDguOTMtOC45M1YxMC40MmE4LjkzIDguOTMgMCAwMC04LjkzLTguOTNIMTAuNDJ6IiBmaWxsPSIjZmZmIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNS45OTggMjYuMDQ5Yy01LjU0OSAwLTEwLjA0Ny00LjQ5OC0xMC4wNDctMTAuMDQ3IDAtNS41NDggNC40OTgtMTAuMDQ2IDEwLjA0Ny0xMC4wNDYgNS41NDggMCAxMC4wNDYgNC40OTggMTAuMDQ2IDEwLjA0NiAwIDUuNTQ5LTQuNDk4IDEwLjA0Ny0xMC4wNDYgMTAuMDQ3eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Ik0xMi43NjIgMTQuMjU0YzAtLjgyMi42NjctMS40ODkgMS40ODktMS40ODloMy40OTdjLjgyMiAwIDEuNDg4LjY2NiAxLjQ4OCAxLjQ4OXYzLjQ5N2MwIC44MjItLjY2NiAxLjQ4OC0xLjQ4OCAxLjQ4OGgtMy40OTdhMS40ODggMS40ODggMCAwMS0xLjQ4OS0xLjQ4OHYtMy40OTh6IiBmaWxsPSIjMTY1MkYwIi8+PC9zdmc+",class:"-cbwsdk-snackbar-instance-header-cblogo"})," ",a0("div",{class:"-cbwsdk-snackbar-instance-header-message"},b),a0("div",{class:"-gear-container"},!j&&a0("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a0("circle",{cx:"12",cy:"12",r:"12",fill:"#F5F7F8"})),a0("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEyIDYuNzV2LTEuNWwtMS43Mi0uNTdjLS4wOC0uMjctLjE5LS41Mi0uMzItLjc3bC44MS0xLjYyLTEuMDYtMS4wNi0xLjYyLjgxYy0uMjQtLjEzLS41LS4yNC0uNzctLjMyTDYuNzUgMGgtMS41bC0uNTcgMS43MmMtLjI3LjA4LS41My4xOS0uNzcuMzJsLTEuNjItLjgxLTEuMDYgMS4wNi44MSAxLjYyYy0uMTMuMjQtLjI0LjUtLjMyLjc3TDAgNS4yNXYxLjVsMS43Mi41N2MuMDguMjcuMTkuNTMuMzIuNzdsLS44MSAxLjYyIDEuMDYgMS4wNiAxLjYyLS44MWMuMjQuMTMuNS4yMy43Ny4zMkw1LjI1IDEyaDEuNWwuNTctMS43MmMuMjctLjA4LjUyLS4xOS43Ny0uMzJsMS42Mi44MSAxLjA2LTEuMDYtLjgxLTEuNjJjLjEzLS4yNC4yMy0uNS4zMi0uNzdMMTIgNi43NXpNNiA4LjVhMi41IDIuNSAwIDAxMC01IDIuNSAyLjUgMCAwMTAgNXoiIGZpbGw9IiMwNTBGMTkiLz48L3N2Zz4=",class:"-gear-icon",title:"Expand"}))),c&&c.length>0&&a0("div",{class:"-cbwsdk-snackbar-instance-menu"},c.map((a,b)=>a0("div",{class:(0,aV.clsx)("-cbwsdk-snackbar-instance-menu-item",a.isRed&&"-cbwsdk-snackbar-instance-menu-item-is-red"),onClick:a.onClick,key:b},a0("svg",{width:a.svgWidth,height:a.svgHeight,viewBox:"0 0 10 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a0("path",{"fill-rule":a.defaultFillRule,"clip-rule":a.defaultClipRule,d:a.path,fill:"#AAAAAA"})),a0("span",{class:(0,aV.clsx)("-cbwsdk-snackbar-instance-menu-item-info",a.isRed&&"-cbwsdk-snackbar-instance-menu-item-info-is-red")},a.info)))))},bE="M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z";class bF{constructor(){this.attached=!1,this.snackbar=new bB}attach(){if(this.attached)throw Error("Coinbase Wallet SDK UI is already attached");let a=document.documentElement,b=document.createElement("div");b.className="-cbwsdk-css-reset",a.appendChild(b),this.snackbar.attach(b),this.attached=!0,az()}showConnecting(a){let b;return b=a.isUnlinkedErrorState?{autoExpand:!0,message:"Connection lost",menuItems:[{isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:"M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:a.onResetConnection}]}:{message:"Confirm on phone",menuItems:[{isRed:!0,info:"Cancel transaction",svgWidth:"11",svgHeight:"11",path:"M10.3711 1.52346L9.21775 0.370117L5.37109 4.21022L1.52444 0.370117L0.371094 1.52346L4.2112 5.37012L0.371094 9.21677L1.52444 10.3701L5.37109 6.53001L9.21775 10.3701L10.3711 9.21677L6.53099 5.37012L10.3711 1.52346Z",defaultFillRule:"inherit",defaultClipRule:"inherit",onClick:a.onCancel},{isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:bE,defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:a.onResetConnection}]},this.snackbar.presentItem(b)}}let bG={isRed:!1,info:"Retry",svgWidth:"10",svgHeight:"11",path:bE,defaultFillRule:"evenodd",defaultClipRule:"evenodd"},bH=null;function bI(){if(!bH){let a=document.createElement("div");a.className="-cbwsdk-css-reset",document.body.appendChild(a),(bH=new bB).attach(a)}return bH}class bJ{constructor({url:a="https://keys.coinbase.com/connect",metadata:b,preference:c}){this.popup=null,this.listeners=new Map,this.postMessage=async a=>{(await this.waitForPopupLoaded()).postMessage(a,this.url.origin)},this.postRequestAndWaitForResponse=async a=>{let b=this.onMessage(({requestId:b})=>b===a.id);return this.postMessage(a),await b},this.onMessage=async a=>new Promise((b,c)=>{let d=c=>{if(c.origin!==this.url.origin)return;let e=c.data;a(e)&&(b(e),window.removeEventListener("message",d),this.listeners.delete(d))};window.addEventListener("message",d),this.listeners.set(d,{reject:c})}),this.disconnect=()=>{var a;(a=this.popup)&&!a.closed&&a.close(),this.popup=null,this.listeners.forEach(({reject:a},b)=>{a(B("Request rejected")),window.removeEventListener("message",b)}),this.listeners.clear()},this.waitForPopupLoaded=async()=>this.popup&&!this.popup.closed?(this.popup.focus(),this.popup):(aw("communicator.popup_setup.started",{action:aJ.unknown,componentType:aI.unknown},aK.high),this.popup=await function(a){let b=(window.innerWidth-420)/2+window.screenX,c=(window.innerHeight-700)/2+window.screenY;function d(){let d=`wallet_${crypto.randomUUID()}`,e=window.open(a,d,`width=420, height=700, left=${b}, top=${c}`);return(null==e||e.focus(),e)?e:null}var e=a;for(let[a,b]of Object.entries({sdkName:ak,sdkVersion:aj,origin:window.location.origin,coop:ap()}))e.searchParams.has(a)||e.searchParams.append(a,b.toString());let f=d();if(!f){let a=bI();return new Promise((b,c)=>{ax({snackbarContext:"popup_blocked"}),a.presentItem({autoExpand:!0,message:"Popup was blocked. Try again.",menuItems:[Object.assign(Object.assign({},bG),{onClick:()=>{ay({snackbarContext:"popup_blocked",snackbarAction:"confirm"}),(f=d())?b(f):c(z("Popup window was blocked")),a.clear()}})]})})}return Promise.resolve(f)}(this.url),this.onMessage(({event:a})=>"PopupUnload"===a).then(()=>{this.disconnect(),aw("communicator.popup_unload.received",{action:aJ.unknown,componentType:aI.unknown},aK.high)}).catch(()=>{}),this.onMessage(({event:a})=>"PopupLoaded"===a).then(a=>{this.postMessage({requestId:a.id,data:{version:aj,metadata:this.metadata,preference:this.preference,location:window.location.toString()}})}).then(()=>{if(!this.popup)throw z();return aw("communicator.popup_setup.completed",{action:aJ.unknown,componentType:aI.unknown},aK.high),this.popup})),this.url=new URL(a),this.metadata=b,this.preference=c}}function bK(a){return void 0!==a.errorMessage}a.i(598620);var bL=a.i(931007);class bM extends bL.EventEmitter{}class bN{constructor(a,b){this.scope=a,this.module=b}storeObject(a,b){this.setItem(a,JSON.stringify(b))}loadObject(a){let b=this.getItem(a);return b?JSON.parse(b):void 0}setItem(a,b){localStorage.setItem(this.scopedKey(a),b)}getItem(a){return localStorage.getItem(this.scopedKey(a))}removeItem(a){localStorage.removeItem(this.scopedKey(a))}clear(){let a=this.scopedKey(""),b=[];for(let c=0;c<localStorage.length;c++){let d=localStorage.key(c);"string"==typeof d&&d.startsWith(a)&&b.push(d)}b.forEach(a=>localStorage.removeItem(a))}scopedKey(a){return`-${this.scope}${this.module?`:${this.module}`:""}:${a}`}static clearAll(){new bN("CBWSDK").clear(),new bN("walletlink").clear()}}let bO=ai(()=>({correlationIds:new Map})),bP=a=>bO.getState().correlationIds.get(a);var bQ=a.i(943409),bR=a.i(831149),bS=a.i(236013);let bT=a=>"message"in a&&"string"==typeof a.message?a.message:"";var bU=a.i(431287),bV=a.i(915822),bW=a.i(100216),bX=a.i(380931),bY=a.i(695090),bZ=a.i(922220),b$=a.i(976920),b_=a.i(85241),b0=a.i(57320),b1=a.i(353880),b2=a.i(589201),b3=a.i(226444),b4=b1;class b5 extends b4.BaseError{constructor({cause:a}){super("Smart Account is not deployed.",{cause:a,metaMessages:["This could arise when:","- No `factory`/`factoryData` or `initCode` properties are provided for Smart Account deployment.","- An incorrect `sender` address is provided."],name:"AccountNotDeployedError"})}}Object.defineProperty(b5,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa20/});class b6 extends b4.BaseError{constructor({cause:a,data:b,message:c}={}){const d=c?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${d?`with reason: ${d}`:"for an unknown reason"}.`,{cause:a,name:"ExecutionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=b}}Object.defineProperty(b6,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32521}),Object.defineProperty(b6,"message",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class b7 extends b4.BaseError{constructor({cause:a}){super("Failed to send funds to beneficiary.",{cause:a,name:"FailedToSendToBeneficiaryError"})}}Object.defineProperty(b7,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa91/});class b8 extends b4.BaseError{constructor({cause:a}){super("Gas value overflowed.",{cause:a,metaMessages:["This could arise when:","- one of the gas values exceeded 2**120 (uint120)"].filter(Boolean),name:"GasValuesOverflowError"})}}Object.defineProperty(b8,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa94/});class b9 extends b4.BaseError{constructor({cause:a}){super("The `handleOps` function was called by the Bundler with a gas limit too low.",{cause:a,name:"HandleOpsOutOfGasError"})}}Object.defineProperty(b9,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa95/});class ca extends b4.BaseError{constructor({cause:a,factory:b,factoryData:c,initCode:d}){super("Failed to simulate deployment for Smart Account.",{cause:a,metaMessages:["This could arise when:","- Invalid `factory`/`factoryData` or `initCode` properties are present","- Smart Account deployment execution ran out of gas (low `verificationGasLimit` value)","- Smart Account deployment execution reverted with an error\n",b&&`factory: ${b}`,c&&`factoryData: ${c}`,d&&`initCode: ${d}`].filter(Boolean),name:"InitCodeFailedError"})}}Object.defineProperty(ca,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa13/});class cb extends b4.BaseError{constructor({cause:a,factory:b,factoryData:c,initCode:d}){super("Smart Account initialization implementation did not create an account.",{cause:a,metaMessages:["This could arise when:","- `factory`/`factoryData` or `initCode` properties are invalid","- Smart Account initialization implementation is incorrect\n",b&&`factory: ${b}`,c&&`factoryData: ${c}`,d&&`initCode: ${d}`].filter(Boolean),name:"InitCodeMustCreateSenderError"})}}Object.defineProperty(cb,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa15/});class cc extends b4.BaseError{constructor({cause:a,factory:b,factoryData:c,initCode:d,sender:e}){super("Smart Account initialization implementation does not return the expected sender.",{cause:a,metaMessages:["This could arise when:","Smart Account initialization implementation does not return a sender address\n",b&&`factory: ${b}`,c&&`factoryData: ${c}`,d&&`initCode: ${d}`,e&&`sender: ${e}`].filter(Boolean),name:"InitCodeMustReturnSenderError"})}}Object.defineProperty(cc,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa14/});class cd extends b4.BaseError{constructor({cause:a}){super("Smart Account does not have sufficient funds to execute the User Operation.",{cause:a,metaMessages:["This could arise when:","- the Smart Account does not have sufficient funds to cover the required prefund, or","- a Paymaster was not provided"].filter(Boolean),name:"InsufficientPrefundError"})}}Object.defineProperty(cd,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa21/});class ce extends b4.BaseError{constructor({cause:a}){super("Bundler attempted to call an invalid function on the EntryPoint.",{cause:a,name:"InternalCallOnlyError"})}}Object.defineProperty(ce,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa92/});class cf extends b4.BaseError{constructor({cause:a}){super("Bundler used an invalid aggregator for handling aggregated User Operations.",{cause:a,name:"InvalidAggregatorError"})}}Object.defineProperty(cf,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa96/});class cg extends b4.BaseError{constructor({cause:a,nonce:b}){super("Invalid Smart Account nonce used for User Operation.",{cause:a,metaMessages:[b&&`nonce: ${b}`].filter(Boolean),name:"InvalidAccountNonceError"})}}Object.defineProperty(cg,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa25/});class ch extends b4.BaseError{constructor({cause:a}){super("Bundler has not set a beneficiary address.",{cause:a,name:"InvalidBeneficiaryError"})}}Object.defineProperty(ch,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa90/});class ci extends b4.BaseError{constructor({cause:a}){super("Invalid fields set on User Operation.",{cause:a,name:"InvalidFieldsError"})}}Object.defineProperty(ci,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class cj extends b4.BaseError{constructor({cause:a,paymasterAndData:b}){super("Paymaster properties provided are invalid.",{cause:a,metaMessages:["This could arise when:","- the `paymasterAndData` property is of an incorrect length\n",b&&`paymasterAndData: ${b}`].filter(Boolean),name:"InvalidPaymasterAndDataError"})}}Object.defineProperty(cj,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa93/});class ck extends b4.BaseError{constructor({cause:a}){super("Paymaster deposit for the User Operation is too low.",{cause:a,metaMessages:["This could arise when:","- the Paymaster has deposited less than the expected amount via the `deposit` function"].filter(Boolean),name:"PaymasterDepositTooLowError"})}}Object.defineProperty(ck,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32508}),Object.defineProperty(ck,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa31/});class cl extends b4.BaseError{constructor({cause:a}){super("The `validatePaymasterUserOp` function on the Paymaster reverted.",{cause:a,name:"PaymasterFunctionRevertedError"})}}Object.defineProperty(cl,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa33/});class cm extends b4.BaseError{constructor({cause:a}){super("The Paymaster contract has not been deployed.",{cause:a,name:"PaymasterNotDeployedError"})}}Object.defineProperty(cm,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa30/});class cn extends b4.BaseError{constructor({cause:a}){super("UserOperation rejected because paymaster (or signature aggregator) is throttled/banned.",{cause:a,name:"PaymasterRateLimitError"})}}Object.defineProperty(cn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32504});class co extends b4.BaseError{constructor({cause:a}){super("UserOperation rejected because paymaster (or signature aggregator) is throttled/banned.",{cause:a,name:"PaymasterStakeTooLowError"})}}Object.defineProperty(co,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32505});class cp extends b4.BaseError{constructor({cause:a}){super("Paymaster `postOp` function reverted.",{cause:a,name:"PaymasterPostOpFunctionRevertedError"})}}Object.defineProperty(cp,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa50/});class cq extends b4.BaseError{constructor({cause:a,factory:b,factoryData:c,initCode:d}){super("Smart Account has already been deployed.",{cause:a,metaMessages:["Remove the following properties and try again:",b&&"`factory`",c&&"`factoryData`",d&&"`initCode`"].filter(Boolean),name:"SenderAlreadyConstructedError"})}}Object.defineProperty(cq,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa10/});class cr extends b4.BaseError{constructor({cause:a}){super("UserOperation rejected because account signature check failed (or paymaster signature, if the paymaster uses its data as signature).",{cause:a,name:"SignatureCheckFailedError"})}}Object.defineProperty(cr,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32507});class cs extends b4.BaseError{constructor({cause:a}){super("The `validateUserOp` function on the Smart Account reverted.",{cause:a,name:"SmartAccountFunctionRevertedError"})}}Object.defineProperty(cs,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa23/});class ct extends b4.BaseError{constructor({cause:a}){super("UserOperation rejected because account specified unsupported signature aggregator.",{cause:a,name:"UnsupportedSignatureAggregatorError"})}}Object.defineProperty(ct,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32506});class cu extends b4.BaseError{constructor({cause:a}){super("User Operation expired.",{cause:a,metaMessages:["This could arise when:","- the `validAfter` or `validUntil` values returned from `validateUserOp` on the Smart Account are not satisfied"].filter(Boolean),name:"UserOperationExpiredError"})}}Object.defineProperty(cu,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa22/});class cv extends b4.BaseError{constructor({cause:a}){super("Paymaster for User Operation expired.",{cause:a,metaMessages:["This could arise when:","- the `validAfter` or `validUntil` values returned from `validatePaymasterUserOp` on the Paymaster are not satisfied"].filter(Boolean),name:"UserOperationPaymasterExpiredError"})}}Object.defineProperty(cv,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa32/});class cw extends b4.BaseError{constructor({cause:a}){super("Signature provided for the User Operation is invalid.",{cause:a,metaMessages:["This could arise when:","- the `signature` for the User Operation is incorrectly computed, and unable to be verified by the Smart Account"].filter(Boolean),name:"UserOperationSignatureError"})}}Object.defineProperty(cw,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa24/});class cx extends b4.BaseError{constructor({cause:a}){super("Signature provided for the User Operation is invalid.",{cause:a,metaMessages:["This could arise when:","- the `signature` for the User Operation is incorrectly computed, and unable to be verified by the Paymaster"].filter(Boolean),name:"UserOperationPaymasterSignatureError"})}}Object.defineProperty(cx,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa34/});class cy extends b4.BaseError{constructor({cause:a}){super("User Operation rejected by EntryPoint's `simulateValidation` during account creation or validation.",{cause:a,name:"UserOperationRejectedByEntryPointError"})}}Object.defineProperty(cy,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32500});class cz extends b4.BaseError{constructor({cause:a}){super("User Operation rejected by Paymaster's `validatePaymasterUserOp`.",{cause:a,name:"UserOperationRejectedByPaymasterError"})}}Object.defineProperty(cz,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32501});class cA extends b4.BaseError{constructor({cause:a}){super("User Operation rejected with op code validation error.",{cause:a,name:"UserOperationRejectedByOpCodeError"})}}Object.defineProperty(cA,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32502});class cB extends b4.BaseError{constructor({cause:a}){super("UserOperation out of time-range: either wallet or paymaster returned a time-range, and it is already expired (or will expire soon).",{cause:a,name:"UserOperationOutOfTimeRangeError"})}}Object.defineProperty(cB,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32503});class cC extends b4.BaseError{constructor({cause:a}){super(`An error occurred while executing user operation: ${a?.shortMessage}`,{cause:a,name:"UnknownBundlerError"})}}class cD extends b4.BaseError{constructor({cause:a}){super("User Operation verification gas limit exceeded.",{cause:a,metaMessages:["This could arise when:","- the gas used for verification exceeded the `verificationGasLimit`"].filter(Boolean),name:"VerificationGasLimitExceededError"})}}Object.defineProperty(cD,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa40/});class cE extends b4.BaseError{constructor({cause:a}){super("User Operation verification gas limit is too low.",{cause:a,metaMessages:["This could arise when:","- the `verificationGasLimit` is too low to verify the User Operation"].filter(Boolean),name:"VerificationGasLimitTooLowError"})}}Object.defineProperty(cE,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa41/});var cF=b1,cG=a.i(22981),cH=a.i(796343);class cI extends cF.BaseError{constructor(a,{callData:b,callGasLimit:c,docsPath:d,factory:e,factoryData:f,initCode:g,maxFeePerGas:h,maxPriorityFeePerGas:i,nonce:j,paymaster:k,paymasterAndData:l,paymasterData:m,paymasterPostOpGasLimit:n,paymasterVerificationGasLimit:o,preVerificationGas:p,sender:q,signature:r,verificationGasLimit:s}){super(a.shortMessage,{cause:a,docsPath:d,metaMessages:[...a.metaMessages?[...a.metaMessages," "]:[],"Request Arguments:",(0,cG.prettyPrint)({callData:b,callGasLimit:c,factory:e,factoryData:f,initCode:g,maxFeePerGas:void 0!==h&&`${(0,cH.formatGwei)(h)} gwei`,maxPriorityFeePerGas:void 0!==i&&`${(0,cH.formatGwei)(i)} gwei`,nonce:j,paymaster:k,paymasterAndData:l,paymasterData:m,paymasterPostOpGasLimit:n,paymasterVerificationGasLimit:o,preVerificationGas:p,sender:q,signature:r,verificationGasLimit:s})].filter(Boolean),name:"UserOperationExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=a}}class cJ extends cF.BaseError{constructor({hash:a}){super(`User Operation receipt with hash "${a}" could not be found. The User Operation may not have been processed yet.`,{name:"UserOperationReceiptNotFoundError"})}}class cK extends cF.BaseError{constructor({hash:a}){super(`User Operation with hash "${a}" could not be found.`,{name:"UserOperationNotFoundError"})}}class cL extends cF.BaseError{constructor({hash:a}){super(`Timed out while waiting for User Operation with hash "${a}" to be confirmed.`,{name:"WaitForUserOperationReceiptTimeoutError"})}}let cM=[b6,ci,ck,cn,co,cr,ct,cB,cy,cz,cA];function cN(a,{calls:b,docsPath:c,...d}){return new cI((()=>{let c=function(a,b){let c=(a.details||"").toLowerCase();if(b5.message.test(c))return new b5({cause:a});if(b7.message.test(c))return new b7({cause:a});if(b8.message.test(c))return new b8({cause:a});if(b9.message.test(c))return new b9({cause:a});if(ca.message.test(c))return new ca({cause:a,factory:b.factory,factoryData:b.factoryData,initCode:b.initCode});if(cb.message.test(c))return new cb({cause:a,factory:b.factory,factoryData:b.factoryData,initCode:b.initCode});if(cc.message.test(c))return new cc({cause:a,factory:b.factory,factoryData:b.factoryData,initCode:b.initCode,sender:b.sender});if(cd.message.test(c))return new cd({cause:a});if(ce.message.test(c))return new ce({cause:a});if(cg.message.test(c))return new cg({cause:a,nonce:b.nonce});if(cf.message.test(c))return new cf({cause:a});if(ch.message.test(c))return new ch({cause:a});if(cj.message.test(c))return new cj({cause:a});if(ck.message.test(c))return new ck({cause:a});if(cl.message.test(c))return new cl({cause:a});if(cm.message.test(c))return new cm({cause:a});if(cp.message.test(c))return new cp({cause:a});if(cs.message.test(c))return new cs({cause:a});if(cq.message.test(c))return new cq({cause:a,factory:b.factory,factoryData:b.factoryData,initCode:b.initCode});if(cu.message.test(c))return new cu({cause:a});if(cv.message.test(c))return new cv({cause:a});if(cx.message.test(c))return new cx({cause:a});if(cw.message.test(c))return new cw({cause:a});if(cD.message.test(c))return new cD({cause:a});if(cE.message.test(c))return new cE({cause:a});let d=a.walk(a=>cM.some(b=>b.code===a.code));if(d){if(d.code===b6.code)return new b6({cause:a,data:d.data,message:d.details});if(d.code===ci.code)return new ci({cause:a});if(d.code===ck.code)return new ck({cause:a});if(d.code===cn.code)return new cn({cause:a});if(d.code===co.code)return new co({cause:a});if(d.code===cr.code)return new cr({cause:a});if(d.code===ct.code)return new ct({cause:a});if(d.code===cB.code)return new cB({cause:a});if(d.code===cy.code)return new cy({cause:a});if(d.code===cz.code)return new cz({cause:a});if(d.code===cA.code)return new cA({cause:a})}return new cC({cause:a})}(a,d);if(b&&c instanceof b6){let a,d=(c.walk(b=>{if("string"==typeof b.data||"string"==typeof b.data?.revertData||!(b instanceof b1.BaseError)&&"string"==typeof b.message){let c=(b.data?.revertData||b.data||b.message).match?.(/(0x[A-Za-z0-9]*)/);if(c)return a=c[1],!0}return!1}),a),e=b?.filter(a=>a.abi);if(d&&e.length>0)return function(a){let{calls:b,revertData:c}=a,{abi:d,functionName:e,args:f,to:g}=(()=>{let a=b?.filter(a=>!!a.abi);if(1===a.length)return a[0];let d=a.filter(a=>{try{return!!(0,b3.decodeErrorResult)({abi:a.abi,data:c})}catch{return!1}});return 1===d.length?d[0]:{abi:[],functionName:a.reduce((a,b)=>`${a?`${a} | `:""}${b.functionName}`,""),args:void 0,to:void 0}})(),h="0x"===c?new b2.ContractFunctionZeroDataError({functionName:e}):new b2.ContractFunctionRevertedError({abi:d,data:c,functionName:e});return new b2.ContractFunctionExecutionError(h,{abi:d,args:f,contractAddress:g,functionName:e})}({calls:e,revertData:d})}return c})(),{docsPath:c,...d})}var cO=a.i(845088);function cP(a){var b;let c={};return void 0!==a.callData&&(c.callData=a.callData),void 0!==a.callGasLimit&&(c.callGasLimit=(0,bS.numberToHex)(a.callGasLimit)),void 0!==a.factory&&(c.factory=a.factory),void 0!==a.factoryData&&(c.factoryData=a.factoryData),void 0!==a.initCode&&(c.initCode=a.initCode),void 0!==a.maxFeePerGas&&(c.maxFeePerGas=(0,bS.numberToHex)(a.maxFeePerGas)),void 0!==a.maxPriorityFeePerGas&&(c.maxPriorityFeePerGas=(0,bS.numberToHex)(a.maxPriorityFeePerGas)),void 0!==a.nonce&&(c.nonce=(0,bS.numberToHex)(a.nonce)),void 0!==a.paymaster&&(c.paymaster=a.paymaster),void 0!==a.paymasterAndData&&(c.paymasterAndData=a.paymasterAndData||"0x"),void 0!==a.paymasterData&&(c.paymasterData=a.paymasterData),void 0!==a.paymasterPostOpGasLimit&&(c.paymasterPostOpGasLimit=(0,bS.numberToHex)(a.paymasterPostOpGasLimit)),void 0!==a.paymasterSignature&&(c.paymasterSignature=a.paymasterSignature),void 0!==a.paymasterVerificationGasLimit&&(c.paymasterVerificationGasLimit=(0,bS.numberToHex)(a.paymasterVerificationGasLimit)),void 0!==a.preVerificationGas&&(c.preVerificationGas=(0,bS.numberToHex)(a.preVerificationGas)),void 0!==a.sender&&(c.sender=a.sender),void 0!==a.signature&&(c.signature=a.signature),void 0!==a.verificationGasLimit&&(c.verificationGasLimit=(0,bS.numberToHex)(a.verificationGasLimit)),void 0!==a.authorization&&(c.eip7702Auth={address:(b=a.authorization).address,chainId:(0,bS.numberToHex)(b.chainId),nonce:(0,bS.numberToHex)(b.nonce),r:b.r?(0,bS.numberToHex)(BigInt(b.r),{size:32}):(0,cO.pad)("0x",{size:32}),s:b.s?(0,bS.numberToHex)(BigInt(b.s),{size:32}):(0,cO.pad)("0x",{size:32}),yParity:b.yParity?(0,bS.numberToHex)(b.yParity,{size:1}):(0,cO.pad)("0x",{size:32})}),c}var cQ=a.i(734244);async function cR(a,b){let{account:c=a.account,chainId:d,nonce:e}=b;if(!c)throw new b$.AccountNotFoundError({docsPath:"/docs/eip7702/prepareAuthorization"});let f=(0,bZ.parseAccount)(c),g=(()=>{if(b.executor)return"self"===b.executor?b.executor:(0,bZ.parseAccount)(b.executor)})(),h={address:b.contractAddress??b.address,chainId:d,nonce:e};return void 0===h.chainId&&(h.chainId=a.chain?.id??await (0,b_.getAction)(a,bY.getChainId,"getChainId")({})),void 0===h.nonce&&(h.nonce=await (0,b_.getAction)(a,cQ.getTransactionCount,"getTransactionCount")({address:f.address,blockTag:"pending"}),("self"===g||g?.address&&(0,bR.isAddressEqual)(g.address,f.address))&&(h.nonce+=1)),h}var cS=a.i(701844),cT=a.i(745235),cU=a.i(952899);async function cV(a,b){let{chainId:c,entryPointAddress:d,context:e,...f}=b,g=cP(f),{paymasterPostOpGasLimit:h,paymasterVerificationGasLimit:i,...j}=await a.request({method:"pm_getPaymasterData",params:[{...g,callGasLimit:g.callGasLimit??"0x0",verificationGasLimit:g.verificationGasLimit??"0x0",preVerificationGas:g.preVerificationGas??"0x0"},d,(0,bS.numberToHex)(c),e]});return{...j,...h&&{paymasterPostOpGasLimit:(0,bQ.hexToBigInt)(h)},...i&&{paymasterVerificationGasLimit:(0,bQ.hexToBigInt)(i)}}}async function cW(a,b){let{chainId:c,entryPointAddress:d,context:e,...f}=b,g=cP(f),{paymasterPostOpGasLimit:h,paymasterVerificationGasLimit:i,...j}=await a.request({method:"pm_getPaymasterStubData",params:[{...g,callGasLimit:g.callGasLimit??"0x0",verificationGasLimit:g.verificationGasLimit??"0x0",preVerificationGas:g.preVerificationGas??"0x0"},d,(0,bS.numberToHex)(c),e]});return{...j,...h&&{paymasterPostOpGasLimit:(0,bQ.hexToBigInt)(h)},...i&&{paymasterVerificationGasLimit:(0,bQ.hexToBigInt)(i)}}}let cX=["factory","fees","gas","paymaster","nonce","signature","authorization"];async function cY(a,b){let c,{account:d=a.account,parameters:e=cX,stateOverride:f}=b;if(!d)throw new b$.AccountNotFoundError;let g=(0,bZ.parseAccount)(d),h=b.paymaster??a?.paymaster,i="string"==typeof h?h:void 0,{getPaymasterStubData:j,getPaymasterData:k}=(()=>{if(!0===h)return{getPaymasterStubData:b=>(0,b_.getAction)(a,cW,"getPaymasterStubData")(b),getPaymasterData:b=>(0,b_.getAction)(a,cV,"getPaymasterData")(b)};if("object"==typeof h){let{getPaymasterStubData:a,getPaymasterData:b}=h;return{getPaymasterStubData:b&&a?a:b,getPaymasterData:b&&a?b:void 0}}return{getPaymasterStubData:void 0,getPaymasterData:void 0}})(),l=b.paymasterContext?b.paymasterContext:a?.paymasterContext,m={...b,paymaster:i,sender:g.address},[n,o,p,q,r]=await Promise.all([(async()=>b.calls?g.encodeCalls(b.calls.map(a=>a.abi?{data:(0,cT.encodeFunctionData)(a),to:a.to,value:a.value}:a)):b.callData)(),(async()=>{if(!e.includes("factory"))return;if(b.initCode)return{initCode:b.initCode};if(b.factory&&b.factoryData)return{factory:b.factory,factoryData:b.factoryData};let{factory:a,factoryData:c}=await g.getFactoryArgs();return"0.6"===g.entryPoint.version?{initCode:a&&c?(0,cU.concat)([a,c]):void 0}:{factory:a,factoryData:c}})(),(async()=>{if(e.includes("fees")){if("bigint"==typeof b.maxFeePerGas&&"bigint"==typeof b.maxPriorityFeePerGas)return m;if(a?.userOperation?.estimateFeesPerGas){let b=await a.userOperation.estimateFeesPerGas({account:g,bundlerClient:a,userOperation:m});return{...m,...b}}try{let c=a.client??a,d=await (0,b_.getAction)(c,cS.estimateFeesPerGas,"estimateFeesPerGas")({chain:c.chain,type:"eip1559"});return{maxFeePerGas:"bigint"==typeof b.maxFeePerGas?b.maxFeePerGas:BigInt(2n*d.maxFeePerGas),maxPriorityFeePerGas:"bigint"==typeof b.maxPriorityFeePerGas?b.maxPriorityFeePerGas:BigInt(2n*d.maxPriorityFeePerGas)}}catch{return}}})(),(async()=>{if(e.includes("nonce"))return"bigint"==typeof b.nonce?b.nonce:g.getNonce()})(),(async()=>{if(e.includes("authorization")){if("object"==typeof b.authorization)return b.authorization;if(g.authorization&&!await g.isDeployed())return{...await cR(g.client,g.authorization),r:"0xfffffffffffffffffffffffffffffff000000000000000000000000000000000",s:"0x7aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa",yParity:1}}})()]);async function s(){return c||(a.chain?a.chain.id:c=await (0,b_.getAction)(a,bY.getChainId,"getChainId")({}))}void 0!==n&&(m.callData=n),void 0!==o&&(m={...m,...o}),void 0!==p&&(m={...m,...p}),void 0!==q&&(m.nonce=q),void 0!==r&&(m.authorization=r),e.includes("signature")&&(void 0!==b.signature?m.signature=b.signature:m.signature=await g.getStubSignature(m)),"0.6"!==g.entryPoint.version||m.initCode||(m.initCode="0x");let t=!1;if(e.includes("paymaster")&&j&&!i&&!b.paymasterAndData){let{isFinal:a=!1,sponsor:b,...c}=await j({chainId:await s(),entryPointAddress:g.entryPoint.address,context:l,...m});t=a,m={...m,...c}}if("0.6"!==g.entryPoint.version||m.paymasterAndData||(m.paymasterAndData="0x"),e.includes("gas")){if(g.userOperation?.estimateGas){let a=await g.userOperation.estimateGas(m);m={...m,...a}}if(void 0===m.callGasLimit||void 0===m.preVerificationGas||void 0===m.verificationGasLimit||m.paymaster&&void 0===m.paymasterPostOpGasLimit||m.paymaster&&void 0===m.paymasterVerificationGasLimit){let b=await (0,b_.getAction)(a,cZ,"estimateUserOperationGas")({account:g,callGasLimit:0n,preVerificationGas:0n,verificationGasLimit:0n,stateOverride:f,...m.paymaster?{paymasterPostOpGasLimit:0n,paymasterVerificationGasLimit:0n}:{},...m});m={...m,callGasLimit:m.callGasLimit??b.callGasLimit,preVerificationGas:m.preVerificationGas??b.preVerificationGas,verificationGasLimit:m.verificationGasLimit??b.verificationGasLimit,paymasterPostOpGasLimit:m.paymasterPostOpGasLimit??b.paymasterPostOpGasLimit,paymasterVerificationGasLimit:m.paymasterVerificationGasLimit??b.paymasterVerificationGasLimit}}}if(e.includes("paymaster")&&k&&!i&&!b.paymasterAndData&&!t){let a=await k({chainId:await s(),entryPointAddress:g.entryPoint.address,context:l,...m});m={...m,...a}}return delete m.calls,delete m.parameters,delete m.paymasterContext,"string"!=typeof m.paymaster&&delete m.paymaster,m}async function cZ(a,b){let{account:c=a.account,entryPointAddress:d,stateOverride:e}=b;if(!c&&!b.sender)throw new b$.AccountNotFoundError;let f=c?(0,bZ.parseAccount)(c):void 0,g=(0,b0.serializeStateOverride)(e),h=f?await (0,b_.getAction)(a,cY,"prepareUserOperation")({...b,parameters:["authorization","factory","nonce","paymaster","signature"]}):b;try{var i;let b,c=[cP(h),d??f?.entryPoint?.address];return i=await a.request({method:"eth_estimateUserOperationGas",params:g?[...c,g]:[...c]}),b={},i.callGasLimit&&(b.callGasLimit=BigInt(i.callGasLimit)),i.preVerificationGas&&(b.preVerificationGas=BigInt(i.preVerificationGas)),i.verificationGasLimit&&(b.verificationGasLimit=BigInt(i.verificationGasLimit)),i.paymasterPostOpGasLimit&&(b.paymasterPostOpGasLimit=BigInt(i.paymasterPostOpGasLimit)),i.paymasterVerificationGasLimit&&(b.paymasterVerificationGasLimit=BigInt(i.paymasterVerificationGasLimit)),b}catch(c){let a=b.calls;throw cN(c,{...h,...a?{calls:a}:{}})}}async function c$(a,{hash:b}){let c,d=await a.request({method:"eth_getUserOperationByHash",params:[b]},{dedupe:!0});if(!d)throw new cK({hash:b});let{blockHash:e,blockNumber:f,entryPoint:g,transactionHash:h,userOperation:i}=d;return{blockHash:e,blockNumber:BigInt(f),entryPoint:g,transactionHash:h,userOperation:(c={...i},i.callGasLimit&&(c.callGasLimit=BigInt(i.callGasLimit)),i.maxFeePerGas&&(c.maxFeePerGas=BigInt(i.maxFeePerGas)),i.maxPriorityFeePerGas&&(c.maxPriorityFeePerGas=BigInt(i.maxPriorityFeePerGas)),i.nonce&&(c.nonce=BigInt(i.nonce)),i.paymasterPostOpGasLimit&&(c.paymasterPostOpGasLimit=BigInt(i.paymasterPostOpGasLimit)),i.paymasterVerificationGasLimit&&(c.paymasterVerificationGasLimit=BigInt(i.paymasterVerificationGasLimit)),i.preVerificationGas&&(c.preVerificationGas=BigInt(i.preVerificationGas)),i.verificationGasLimit&&(c.verificationGasLimit=BigInt(i.verificationGasLimit)),c)}}var c_=a.i(318139),c0=a.i(415168);async function c1(a,{hash:b}){let c,d=await a.request({method:"eth_getUserOperationReceipt",params:[b]},{dedupe:!0});if(!d)throw new cJ({hash:b});return c={...d},d.actualGasCost&&(c.actualGasCost=BigInt(d.actualGasCost)),d.actualGasUsed&&(c.actualGasUsed=BigInt(d.actualGasUsed)),d.logs&&(c.logs=d.logs.map(a=>(0,c_.formatLog)(a))),d.receipt&&(c.receipt=(0,c0.formatTransactionReceipt)(c.receipt)),c}async function c2(a,b){let{account:c=a.account,entryPointAddress:d}=b;if(!c&&!b.sender)throw new b$.AccountNotFoundError;let e=c?(0,bZ.parseAccount)(c):void 0,f=e?await (0,b_.getAction)(a,cY,"prepareUserOperation")(b):b,g=b.signature||await e?.signUserOperation?.(f),h=cP({...f,signature:g});try{return await a.request({method:"eth_sendUserOperation",params:[h,d??e?.entryPoint?.address]},{retryCount:0})}catch(c){let a=b.calls;throw cN(c,{...f,...a?{calls:a}:{},signature:g})}}var c3=a.i(73213),c4=a.i(200977),c5=a.i(836459);function c6(a){return{estimateUserOperationGas:b=>cZ(a,b),getChainId:()=>(0,bY.getChainId)(a),getSupportedEntryPoints:()=>a.request({method:"eth_supportedEntryPoints"}),getUserOperation:b=>c$(a,b),getUserOperationReceipt:b=>c1(a,b),prepareUserOperation:b=>cY(a,b),sendUserOperation:b=>c2(a,b),waitForUserOperationReceipt:b=>(function(a,b){let{hash:c,pollingInterval:d=a.pollingInterval,retryCount:e,timeout:f=12e4}=b,g=0,h=(0,c5.stringify)(["waitForUserOperationReceipt",a.uid,c]);return new Promise((b,i)=>{let j=(0,c3.observe)(h,{resolve:b,reject:i},b=>{let h=a=>{k(),a(),j()},i=f?setTimeout(()=>h(()=>b.reject(new cL({hash:c}))),f):void 0,k=(0,c4.poll)(async()=>{e&&g>=e&&(clearTimeout(i),h(()=>b.reject(new cL({hash:c}))));try{let d=await (0,b_.getAction)(a,c1,"getUserOperationReceipt")({hash:c});clearTimeout(i),h(()=>b.resolve(d))}catch(a){"UserOperationReceiptNotFoundError"!==a.name&&(clearTimeout(i),h(()=>b.reject(a)))}g++},{emitOnBegin:!0,interval:d});return k})})})(a,b)}}let c7=ai(()=>({}));function c8(a){a.forEach(a=>{var b,c,d,e,f,g,h,i;if(!a.rpcUrl)return;let j=function(a){let{key:b="public",name:c="Public Client"}=a;return(0,bU.createClient)({...a,key:b,name:c,type:"publicClient"}).extend(bV.publicActions)}({chain:(0,bW.defineChain)({id:a.id,rpcUrls:{default:{http:[a.rpcUrl]}},name:null!=(c=null==(b=a.nativeCurrency)?void 0:b.name)?c:"",nativeCurrency:{name:null!=(e=null==(d=a.nativeCurrency)?void 0:d.name)?e:"",symbol:null!=(g=null==(f=a.nativeCurrency)?void 0:f.symbol)?g:"",decimals:null!=(i=null==(h=a.nativeCurrency)?void 0:h.decimal)?i:18}}),transport:(0,bX.http)(a.rpcUrl)}),k=function(a){let{client:b,key:c="bundler",name:d="Bundler Client",paymaster:e,paymasterContext:f,transport:g,userOperation:h}=a;return Object.assign((0,bU.createClient)({...a,chain:a.chain??b?.chain,key:c,name:d,transport:g,type:"bundlerClient"}),{client:b,paymaster:e,paymasterContext:f,userOperation:h}).extend(c6)}({client:j,transport:(0,bX.http)(a.rpcUrl)});c7.setState({[a.id]:{client:j,bundlerClient:k}})})}function c9(a){var b;return null==(b=c7.getState()[a])?void 0:b.client}function da(a,b,c){if(null==a)throw null!=b?b:y({message:null!=c?c:"value must be present",data:a})}function db(a,b){if(!Array.isArray(a))throw y({message:null!=b?b:"value must be an array",data:a})}var dc=a.i(618099),dd=a.i(586494);function de(a){if("object"!=typeof a||null===a)throw z("sub account info is not an object");if(!("address"in a))throw z("sub account is invalid");if("address"in a&&"string"==typeof a.address&&!(0,dc.isAddress)(a.address))throw z("sub account address is invalid");if("factory"in a&&"string"==typeof a.factory&&!(0,dc.isAddress)(a.factory))throw z("sub account factory address is invalid");if("factoryData"in a&&"string"==typeof a.factoryData&&!(0,dd.isHex)(a.factoryData))throw z("sub account factory data is invalid")}async function df(){return crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!0,["deriveKey"])}async function dg(a,b){return crypto.subtle.deriveKey({name:"ECDH",public:b},a,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}async function dh(a,b){let c=crypto.getRandomValues(new Uint8Array(12)),d=await crypto.subtle.encrypt({name:"AES-GCM",iv:c},a,new TextEncoder().encode(b));return{iv:c,cipherText:d}}async function di(a,{iv:b,cipherText:c}){let d=await crypto.subtle.decrypt({name:"AES-GCM",iv:b},a,c);return new TextDecoder().decode(d)}function dj(a){switch(a){case"public":return"spki";case"private":return"pkcs8"}}async function dk(a,b){let c=dj(a);return R(new Uint8Array(await crypto.subtle.exportKey(c,b)))}async function dl(a,b){let c=dj(a),d=S(b).buffer;return await crypto.subtle.importKey(c,new Uint8Array(d),{name:"ECDH",namedCurve:"P-256"},!0,"private"===a?["deriveKey"]:[])}async function dm(a,b){return dh(b,JSON.stringify(a,(a,b)=>b instanceof Error?Object.assign(Object.assign({},b.code?{code:b.code}:{}),{message:b.message}):b))}async function dn(a,b){return JSON.parse(await di(b,a))}a.s(["IntegerOutOfRangeError",()=>eG,"InvalidHexBooleanError",()=>eH,"InvalidHexTypeError",()=>eI,"InvalidHexValueError",()=>eJ,"InvalidLengthError",()=>eK,"SizeExceedsPaddingSizeError",()=>eN,"SizeOverflowError",()=>eL,"SliceOffsetOutOfBoundsError",()=>eM,"assert",()=>el,"concat",()=>em,"from",()=>en,"fromBoolean",()=>eo,"fromBytes",()=>ep,"fromNumber",()=>eq,"fromString",()=>er,"isEqual",()=>es,"padLeft",()=>et,"padRight",()=>eu,"random",()=>ev,"size",()=>ex,"slice",()=>ew,"toBigInt",()=>eA,"toBoolean",()=>eB,"toBytes",()=>eC,"toNumber",()=>eD,"toString",()=>eE,"trimLeft",()=>ey,"trimRight",()=>ez,"validate",()=>eF],931169);var dp=a.i(666680);let dq=dp&&"object"==typeof dp&&"webcrypto"in dp?dp.webcrypto:dp&&"object"==typeof dp&&"randomBytes"in dp?dp:void 0;function dr(a){return a instanceof Uint8Array||ArrayBuffer.isView(a)&&"Uint8Array"===a.constructor.name}function ds(a){if(!Number.isSafeInteger(a)||a<0)throw Error("positive integer expected, got "+a)}function dt(a,...b){if(!dr(a))throw Error("Uint8Array expected");if(b.length>0&&!b.includes(a.length))throw Error("Uint8Array expected of length "+b+", got length="+a.length)}function du(a){if("function"!=typeof a||"function"!=typeof a.create)throw Error("Hash should be wrapped by utils.createHasher");ds(a.outputLen),ds(a.blockLen)}function dv(a,b=!0){if(a.destroyed)throw Error("Hash instance has been destroyed");if(b&&a.finished)throw Error("Hash#digest() has already been called")}function dw(...a){for(let b=0;b<a.length;b++)a[b].fill(0)}function dx(a){return new DataView(a.buffer,a.byteOffset,a.byteLength)}function dy(a,b){return a<<32-b|a>>>b}let dz="function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex,dA=Array.from({length:256},(a,b)=>b.toString(16).padStart(2,"0"));function dB(a){if(dt(a),dz)return a.toHex();let b="";for(let c=0;c<a.length;c++)b+=dA[a[c]];return b}function dC(a){return a>=48&&a<=57?a-48:a>=65&&a<=70?a-55:a>=97&&a<=102?a-87:void 0}function dD(a){if("string"!=typeof a)throw Error("hex string expected, got "+typeof a);if(dz)return Uint8Array.fromHex(a);let b=a.length,c=b/2;if(b%2)throw Error("hex string expected, got unpadded hex of length "+b);let d=new Uint8Array(c);for(let b=0,e=0;b<c;b++,e+=2){let c=dC(a.charCodeAt(e)),f=dC(a.charCodeAt(e+1));if(void 0===c||void 0===f)throw Error('hex string expected, got non-hex character "'+(a[e]+a[e+1])+'" at index '+e);d[b]=16*c+f}return d}function dE(a){if("string"!=typeof a)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(a))}function dF(a){return"string"==typeof a&&(a=dE(a)),dt(a),a}function dG(...a){let b=0;for(let c=0;c<a.length;c++){let d=a[c];dt(d),b+=d.length}let c=new Uint8Array(b);for(let b=0,d=0;b<a.length;b++){let e=a[b];c.set(e,d),d+=e.length}return c}class dH{}function dI(a){let b=b=>a().update(dF(b)).digest(),c=a();return b.outputLen=c.outputLen,b.blockLen=c.blockLen,b.create=()=>a(),b}function dJ(a=32){if(dq&&"function"==typeof dq.getRandomValues)return dq.getRandomValues(new Uint8Array(a));if(dq&&"function"==typeof dq.randomBytes)return Uint8Array.from(dq.randomBytes(a));throw Error("crypto.getRandomValues must be defined")}let dK=BigInt(0),dL=BigInt(1);function dM(a,b=""){if("boolean"!=typeof a)throw Error((b&&`"${b}"`)+"expected boolean, got type="+typeof a);return a}function dN(a,b,c=""){let d=dr(a),e=a?.length,f=void 0!==b;if(!d||f&&e!==b)throw Error((c&&`"${c}" `)+"expected Uint8Array"+(f?` of length ${b}`:"")+", got "+(d?`length=${e}`:`type=${typeof a}`));return a}function dO(a){let b=a.toString(16);return 1&b.length?"0"+b:b}function dP(a){if("string"!=typeof a)throw Error("hex string expected, got "+typeof a);return""===a?dK:BigInt("0x"+a)}function dQ(a){return dP(dB(a))}function dR(a){return dt(a),dP(dB(Uint8Array.from(a).reverse()))}function dS(a,b){return dD(a.toString(16).padStart(2*b,"0"))}function dT(a,b){return dS(a,b).reverse()}function dU(a,b,c){let d;if("string"==typeof b)try{d=dD(b)}catch(b){throw Error(a+" must be hex string or Uint8Array, cause: "+b)}else if(dr(b))d=Uint8Array.from(b);else throw Error(a+" must be hex string or Uint8Array");let e=d.length;if("number"==typeof c&&e!==c)throw Error(a+" of length "+c+" expected, got "+e);return d}let dV=a=>"bigint"==typeof a&&dK<=a;function dW(a){let b;for(b=0;a>dK;a>>=dL,b+=1);return b}let dX=a=>(dL<<BigInt(a))-dL;function dY(a,b,c={}){if(!a||"object"!=typeof a)throw Error("expected valid options object");function d(b,c,d){let e=a[b];if(d&&void 0===e)return;let f=typeof e;if(f!==c||null===e)throw Error(`param "${b}" is invalid: expected ${c}, got ${f}`)}Object.entries(b).forEach(([a,b])=>d(a,b,!1)),Object.entries(c).forEach(([a,b])=>d(a,b,!0))}function dZ(a){let b=new WeakMap;return(c,...d)=>{let e=b.get(c);if(void 0!==e)return e;let f=a(c,...d);return b.set(c,f),f}}let d$=function(a,b){if(a.length!==b.length)return!1;let c=0;for(let d=0;d<a.length;d++)c|=a[d]^b[d];return 0===c};class d_ extends Error{constructor(a,b={}){const c=(()=>{if(b.cause instanceof d_){if(b.cause.details)return b.cause.details;if(b.cause.shortMessage)return b.cause.shortMessage}return b.cause?.message?b.cause.message:b.details})(),d=b.cause instanceof d_&&b.cause.docsPath||b.docsPath,e=`https://oxlib.sh${d??""}`;super([a||"An error occurred.",...b.metaMessages?["",...b.metaMessages]:[],...c||d?["",c?`Details: ${c}`:void 0,d?`See: ${e}`:void 0]:[]].filter(a=>"string"==typeof a).join("\n"),b.cause?{cause:b.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:"ox@0.1.1"}),this.cause=b.cause,this.details=c,this.docs=e,this.docsPath=d,this.shortMessage=a}walk(a){return function a(b,c){return c?.(b)?b:b&&"object"==typeof b&&"cause"in b&&b.cause?a(b.cause,c):c?null:b}(this,a)}}function d0(a,b,c){return JSON.stringify(a,(a,c)=>"function"==typeof b?b(a,c):"bigint"==typeof c?c.toString()+"#__bigint":c,c)}function d1(a,b){if(ec(a)>b)throw new eg({givenSize:ec(a),maxSize:b})}function d2(a){return a>=48&&a<=57?a-48:a>=65&&a<=70?a-55:a>=97&&a<=102?a-87:void 0}function d3(a,b){if(ex(a)>b)throw new eL({givenSize:ex(a),maxSize:b})}function d4(a,b={}){let{dir:c,size:d=32}=b;if(0===d)return a;let e=a.replace("0x","");if(e.length>2*d)throw new eN({size:Math.ceil(e.length/2),targetSize:d,type:"Hex"});return`0x${e["right"===c?"padEnd":"padStart"](2*d,"0")}`}function d5(a,b={}){let{dir:c="left"}=b,d=a.replace("0x",""),e=0;for(let a=0;a<d.length-1;a++)if("0"===d["left"===c?a:d.length-a-1].toString())e++;else break;return"0"===(d="left"===c?d.slice(e):d.slice(0,d.length-e))?"0x":"right"===c&&d.length%2==1?`0x${d}0`:`0x${d}`}let d6=new TextEncoder;function d7(...a){let b=0;for(let c of a)b+=c.length;let c=new Uint8Array(b);for(let b=0,d=0;b<a.length;b++){let e=a[b];c.set(e,d),d+=e.length}return c}function d8(a){return a instanceof Uint8Array?a:"string"==typeof a?ea(a):d9(a)}function d9(a){return a instanceof Uint8Array?a:new Uint8Array(a)}function ea(a,b={}){let{size:c}=b,d=a;c&&(d3(a,c),d=eu(a,c));let e=d.slice(2);e.length%2&&(e=`0${e}`);let f=e.length/2,g=new Uint8Array(f);for(let a=0,b=0;a<f;a++){let c=d2(e.charCodeAt(b++)),d=d2(e.charCodeAt(b++));if(void 0===c||void 0===d)throw new d_(`Invalid byte sequence ("${e[b-2]}${e[b-1]}" in "${e}").`);g[a]=16*c+d}return g}function eb(a,b={}){let{size:c}=b,d=d6.encode(a);return"number"==typeof c?(d1(d,c),function(a,b={}){let{dir:c,size:d=32}=b;if(0===d)return a;if(a.length>d)throw new ei({size:a.length,targetSize:d,type:"Bytes"});let e=new Uint8Array(d);for(let b=0;b<d;b++){let f="right"===c;e[f?b:d-b-1]=a[f?b:a.length-b-1]}return e}(d,{dir:"right",size:c})):d}function ec(a){return a.length}function ed(a,b,c,d={}){let{strict:e}=d;if("number"==typeof b&&b>0&&b>ec(a)-1)throw new eh({offset:b,position:"start",size:ec(a)});let f=a.slice(b,c);return e&&function(a,b,c){if("number"==typeof b&&"number"==typeof c&&ec(a)!==c-b)throw new eh({offset:c,position:"end",size:ec(a)})}(f,b,c),f}function ee(a,b={}){let{size:c}=b;return void 0!==c&&d1(a,c),eA(ep(a,b),b)}class ef extends d_{constructor(a){super(`Value \`${"object"==typeof a?d0(a):a}\` of type \`${typeof a}\` is an invalid Bytes value.`,{metaMessages:["Bytes values must be of type `Bytes`."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesTypeError"})}}class eg extends d_{constructor({givenSize:a,maxSize:b}){super(`Size cannot exceed \`${b}\` bytes. Given size: \`${a}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}}class eh extends d_{constructor({offset:a,position:b,size:c}){super(`Slice ${"start"===b?"starting":"ending"} at offset \`${a}\` is out-of-bounds (size: \`${c}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SliceOffsetOutOfBoundsError"})}}class ei extends d_{constructor({size:a,targetSize:b,type:c}){super(`${c.charAt(0).toUpperCase()}${c.slice(1).toLowerCase()} size (\`${a}\`) exceeds padding size (\`${b}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}}let ej=new TextEncoder,ek=Array.from({length:256},(a,b)=>b.toString(16).padStart(2,"0"));function el(a,b={}){let{strict:c=!1}=b;if(!a||"string"!=typeof a)throw new eI(a);if(c&&!/^0x[0-9a-fA-F]*$/.test(a)||!a.startsWith("0x"))throw new eJ(a)}function em(...a){return`0x${a.reduce((a,b)=>a+b.replace("0x",""),"")}`}function en(a){return a instanceof Uint8Array?ep(a):Array.isArray(a)?ep(new Uint8Array(a)):a}function eo(a,b={}){let c=`0x${Number(a)}`;return"number"==typeof b.size?(d3(c,b.size),et(c,b.size)):c}function ep(a,b={}){let c="";for(let b=0;b<a.length;b++)c+=ek[a[b]];let d=`0x${c}`;return"number"==typeof b.size?(d3(d,b.size),eu(d,b.size)):d}function eq(a,b={}){let c,{signed:d,size:e}=b,f=BigInt(a);e?c=d?(1n<<8n*BigInt(e)-1n)-1n:2n**(8n*BigInt(e))-1n:"number"==typeof a&&(c=BigInt(Number.MAX_SAFE_INTEGER));let g="bigint"==typeof c&&d?-c-1n:0;if(c&&f>c||f<g){let b="bigint"==typeof a?"n":"";throw new eG({max:c?`${c}${b}`:void 0,min:`${g}${b}`,signed:d,size:e,value:`${a}${b}`})}let h=(d&&f<0?(1n<<BigInt(8*e))+BigInt(f):f).toString(16),i=`0x${h}`;return e?et(i,e):i}function er(a,b={}){return ep(ej.encode(a),b)}function es(a,b){return d$(ea(a),ea(b))}function et(a,b){return d4(a,{dir:"left",size:b})}function eu(a,b){return d4(a,{dir:"right",size:b})}function ev(a){return ep(crypto.getRandomValues(new Uint8Array(a)))}function ew(a,b,c,d={}){let{strict:e}=d;if("number"==typeof b&&b>0&&b>ex(a)-1)throw new eM({offset:b,position:"start",size:ex(a)});let f=`0x${a.replace("0x","").slice((b??0)*2,(c??a.length)*2)}`;return e&&function(a,b,c){if("number"==typeof b&&"number"==typeof c&&ex(a)!==c-b)throw new eM({offset:c,position:"end",size:ex(a)})}(f,b,c),f}function ex(a){return Math.ceil((a.length-2)/2)}function ey(a){return d5(a,{dir:"left"})}function ez(a){return d5(a,{dir:"right"})}function eA(a,b={}){let{signed:c}=b;b.size&&d3(a,b.size);let d=BigInt(a);if(!c)return d;let e=(1n<<8n*BigInt((a.length-2)/2))-1n;return d<=e>>1n?d:d-e-1n}function eB(a,b={}){b.size&&d3(a,b.size);let c=ey(a);if("0x"===c)return!1;if("0x1"===c)return!0;throw new eH(a)}function eC(a,b={}){return ea(a,b)}function eD(a,b={}){let{signed:c,size:d}=b;return c||d?Number(eA(a,b)):Number(a)}function eE(a,b={}){let{size:c}=b,d=ea(a);return c&&(d1(d,c),d=function(a,b={}){let{dir:c="left"}=b,d=a,e=0;for(let a=0;a<d.length-1;a++)if("0"===d["left"===c?a:d.length-a-1].toString())e++;else break;return"left"===c?d.slice(e):d.slice(0,d.length-e)}(d,{dir:"right"})),new TextDecoder().decode(d)}function eF(a,b={}){let{strict:c=!1}=b;try{return el(a,{strict:c}),!0}catch{return!1}}class eG extends d_{constructor({max:a,min:b,signed:c,size:d,value:e}){super(`Number \`${e}\` is not in safe${d?` ${8*d}-bit`:""}${c?" signed":" unsigned"} integer range ${a?`(\`${b}\` to \`${a}\`)`:`(above \`${b}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class eH extends d_{constructor(a){super(`Hex value \`"${a}"\` is not a valid boolean.`,{metaMessages:['The hex value must be `"0x0"` (false) or `"0x1"` (true).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexBooleanError"})}}class eI extends d_{constructor(a){super(`Value \`${"object"==typeof a?d0(a):a}\` of type \`${typeof a}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class eJ extends d_{constructor(a){super(`Value \`${a}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}class eK extends d_{constructor(a){super(`Hex value \`"${a}"\` is an odd length (${a.length-2} nibbles).`,{metaMessages:["It must be an even length."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidLengthError"})}}class eL extends d_{constructor({givenSize:a,maxSize:b}){super(`Size cannot exceed \`${b}\` bytes. Given size: \`${a}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}}class eM extends d_{constructor({offset:a,position:b,size:c}){super(`Slice ${"start"===b?"starting":"ending"} at offset \`${a}\` is out-of-bounds (size: \`${c}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}class eN extends d_{constructor({size:a,targetSize:b,type:c}){super(`${c.charAt(0).toUpperCase()}${c.slice(1).toLowerCase()} size (\`${a}\`) exceeds padding size (\`${b}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}}var eO=a.i(931169),eO=eO;function eP(a,b={}){let{compressed:c}=b,{prefix:d,x:e,y:f}=a;if(!1===c||"bigint"==typeof e&&"bigint"==typeof f){if(4!==d)throw new eY({prefix:d,cause:new e$});return}if(!0===c||"bigint"==typeof e&&void 0===f){if(3!==d&&2!==d)throw new eY({prefix:d,cause:new eZ});return}throw new eX({publicKey:a})}function eQ(a){let{x:b,y:c}=a;return{prefix:c%2n===0n?2:3,x:b}}function eR(a){let b=(()=>{if(eF(a))return eT(a);if(function(a){try{if(!(a instanceof Uint8Array)&&(!a||"object"!=typeof a||!("BYTES_PER_ELEMENT"in a)||1!==a.BYTES_PER_ELEMENT||"Uint8Array"!==a.constructor.name))throw new ef(a);return!0}catch{return!1}}(a))return eS(a);let{prefix:b,x:c,y:d}=a;return"bigint"==typeof c&&"bigint"==typeof d?{prefix:b??4,x:c,y:d}:{prefix:b,x:c}})();return eP(b),b}function eS(a){return eT(ep(a))}function eT(a){if(132!==a.length&&130!==a.length&&68!==a.length)throw new e_({publicKey:a});if(130===a.length)return{prefix:4,x:BigInt(ew(a,0,32)),y:BigInt(ew(a,32,64))};if(132===a.length){let b=Number(ew(a,0,1));return{prefix:b,x:BigInt(ew(a,1,33)),y:BigInt(ew(a,33,65))}}return{prefix:Number(ew(a,0,1)),x:BigInt(ew(a,1,33))}}function eU(a,b={}){return ea(eV(a,b))}function eV(a,b={}){eP(a);let{prefix:c,x:d,y:e}=a,{includePrefix:f=!0}=b;return em(f?eq(c,{size:1}):"0x",eq(d,{size:32}),"bigint"==typeof e?eq(e,{size:32}):"0x")}function eW(a,b={}){try{return eP(a,b),!0}catch(a){return!1}}class eX extends d_{constructor({publicKey:a}){super(`Value \`${d0(a)}\` is not a valid public key.`,{metaMessages:["Public key must contain:","- an `x` and `prefix` value (compressed)","- an `x`, `y`, and `prefix` value (uncompressed)"]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidError"})}}class eY extends d_{constructor({prefix:a,cause:b}){super(`Prefix "${a}" is invalid.`,{cause:b}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidPrefixError"})}}class eZ extends d_{constructor(){super("Prefix must be 2 or 3 for compressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidCompressedPrefixError"})}}class e$ extends d_{constructor(){super("Prefix must be 4 for uncompressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidUncompressedPrefixError"})}}class e_ extends d_{constructor({publicKey:a}){super(`Value \`${a}\` is an invalid public key size.`,{metaMessages:["Expected: 33 bytes (compressed + prefix), 64 bytes (uncompressed) or 65 bytes (uncompressed + prefix).",`Received ${ex(en(a))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidSerializedSizeError"})}}a.s(["InvalidCompressedPrefixError",()=>eZ,"InvalidError",()=>eX,"InvalidPrefixError",()=>eY,"InvalidSerializedSizeError",()=>e_,"InvalidUncompressedPrefixError",()=>e$,"assert",()=>eP,"compress",()=>eQ,"from",()=>eR,"fromBytes",()=>eS,"fromHex",()=>eT,"toBytes",()=>eU,"toHex",()=>eV,"validate",()=>eW],367568);var e0=a.i(367568),e0=e0;class e1 extends dH{constructor(a,b,c,d){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=a,this.outputLen=b,this.padOffset=c,this.isLE=d,this.buffer=new Uint8Array(a),this.view=dx(this.buffer)}update(a){dv(this),dt(a=dF(a));let{view:b,buffer:c,blockLen:d}=this,e=a.length;for(let f=0;f<e;){let g=Math.min(d-this.pos,e-f);if(g===d){let b=dx(a);for(;d<=e-f;f+=d)this.process(b,f);continue}c.set(a.subarray(f,f+g),this.pos),this.pos+=g,f+=g,this.pos===d&&(this.process(b,0),this.pos=0)}return this.length+=a.length,this.roundClean(),this}digestInto(a){dv(this);dt(a);let b=this.outputLen;if(a.length<b)throw Error("digestInto() expects output buffer of length at least "+b);this.finished=!0;let{buffer:c,view:d,blockLen:e,isLE:f}=this,{pos:g}=this;c[g++]=128,dw(this.buffer.subarray(g)),this.padOffset>e-g&&(this.process(d,0),g=0);for(let a=g;a<e;a++)c[a]=0;!function(a,b,c,d){if("function"==typeof a.setBigUint64)return a.setBigUint64(b,c,d);let e=BigInt(32),f=BigInt(0xffffffff),g=Number(c>>e&f),h=Number(c&f),i=4*!!d,j=4*!d;a.setUint32(b+i,g,d),a.setUint32(b+j,h,d)}(d,e-8,BigInt(8*this.length),f),this.process(d,0);let h=dx(a),i=this.outputLen;if(i%4)throw Error("_sha2: outputLen should be aligned to 32bit");let j=i/4,k=this.get();if(j>k.length)throw Error("_sha2: outputLen bigger than state");for(let a=0;a<j;a++)h.setUint32(4*a,k[a],f)}digest(){let{buffer:a,outputLen:b}=this;this.digestInto(a);let c=a.slice(0,b);return this.destroy(),c}_cloneInto(a){a||(a=new this.constructor),a.set(...this.get());let{blockLen:b,buffer:c,length:d,finished:e,destroyed:f,pos:g}=this;return a.destroyed=f,a.finished=e,a.length=d,a.pos=g,d%b&&a.buffer.set(c),a}clone(){return this._cloneInto()}}let e2=Uint32Array.from([0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19]),e3=Uint32Array.from([0xc1059ed8,0x367cd507,0x3070dd17,0xf70e5939,0xffc00b31,0x68581511,0x64f98fa7,0xbefa4fa4]),e4=Uint32Array.from([0xcbbb9d5d,0xc1059ed8,0x629a292a,0x367cd507,0x9159015a,0x3070dd17,0x152fecd8,0xf70e5939,0x67332667,0xffc00b31,0x8eb44a87,0x68581511,0xdb0c2e0d,0x64f98fa7,0x47b5481d,0xbefa4fa4]),e5=Uint32Array.from([0x6a09e667,0xf3bcc908,0xbb67ae85,0x84caa73b,0x3c6ef372,0xfe94f82b,0xa54ff53a,0x5f1d36f1,0x510e527f,0xade682d1,0x9b05688c,0x2b3e6c1f,0x1f83d9ab,0xfb41bd6b,0x5be0cd19,0x137e2179]),e6=BigInt(0x100000000-1),e7=BigInt(32),e8=(a,b,c)=>a>>>c,e9=(a,b,c)=>a<<32-c|b>>>c,fa=(a,b,c)=>a>>>c|b<<32-c,fb=(a,b,c)=>a<<32-c|b>>>c,fc=(a,b,c)=>a<<64-c|b>>>c-32,fd=(a,b,c)=>a>>>c-32|b<<64-c;function fe(a,b,c,d){let e=(b>>>0)+(d>>>0);return{h:a+c+(e/0x100000000|0)|0,l:0|e}}let ff=(a,b,c)=>(a>>>0)+(b>>>0)+(c>>>0),fg=(a,b,c,d)=>b+c+d+(a/0x100000000|0)|0,fh=(a,b,c,d)=>(a>>>0)+(b>>>0)+(c>>>0)+(d>>>0),fi=(a,b,c,d,e)=>b+c+d+e+(a/0x100000000|0)|0,fj=(a,b,c,d,e)=>(a>>>0)+(b>>>0)+(c>>>0)+(d>>>0)+(e>>>0),fk=(a,b,c,d,e,f)=>b+c+d+e+f+(a/0x100000000|0)|0,fl=Uint32Array.from([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2]),fm=new Uint32Array(64);class fn extends e1{constructor(a=32){super(64,a,8,!1),this.A=0|e2[0],this.B=0|e2[1],this.C=0|e2[2],this.D=0|e2[3],this.E=0|e2[4],this.F=0|e2[5],this.G=0|e2[6],this.H=0|e2[7]}get(){let{A:a,B:b,C:c,D:d,E:e,F:f,G:g,H:h}=this;return[a,b,c,d,e,f,g,h]}set(a,b,c,d,e,f,g,h){this.A=0|a,this.B=0|b,this.C=0|c,this.D=0|d,this.E=0|e,this.F=0|f,this.G=0|g,this.H=0|h}process(a,b){for(let c=0;c<16;c++,b+=4)fm[c]=a.getUint32(b,!1);for(let a=16;a<64;a++){let b=fm[a-15],c=fm[a-2],d=dy(b,7)^dy(b,18)^b>>>3,e=dy(c,17)^dy(c,19)^c>>>10;fm[a]=e+fm[a-7]+d+fm[a-16]|0}let{A:c,B:d,C:e,D:f,E:g,F:h,G:i,H:j}=this;for(let a=0;a<64;a++){var k,l,m,n;let b=j+(dy(g,6)^dy(g,11)^dy(g,25))+((k=g)&h^~k&i)+fl[a]+fm[a]|0,o=(dy(c,2)^dy(c,13)^dy(c,22))+((l=c)&(m=d)^l&(n=e)^m&n)|0;j=i,i=h,h=g,g=f+b|0,f=e,e=d,d=c,c=b+o|0}c=c+this.A|0,d=d+this.B|0,e=e+this.C|0,f=f+this.D|0,g=g+this.E|0,h=h+this.F|0,i=i+this.G|0,j=j+this.H|0,this.set(c,d,e,f,g,h,i,j)}roundClean(){dw(fm)}destroy(){this.set(0,0,0,0,0,0,0,0),dw(this.buffer)}}let fo=function(a,b=!1){let c=a.length,d=new Uint32Array(c),e=new Uint32Array(c);for(let f=0;f<c;f++){let{h:c,l:g}=function(a,b=!1){return b?{h:Number(a&e6),l:Number(a>>e7&e6)}:{h:0|Number(a>>e7&e6),l:0|Number(a&e6)}}(a[f],b);[d[f],e[f]]=[c,g]}return[d,e]}(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(a=>BigInt(a))),fp=fo[0],fq=fo[1],fr=new Uint32Array(80),fs=new Uint32Array(80);class ft extends e1{constructor(a=64){super(128,a,16,!1),this.Ah=0|e5[0],this.Al=0|e5[1],this.Bh=0|e5[2],this.Bl=0|e5[3],this.Ch=0|e5[4],this.Cl=0|e5[5],this.Dh=0|e5[6],this.Dl=0|e5[7],this.Eh=0|e5[8],this.El=0|e5[9],this.Fh=0|e5[10],this.Fl=0|e5[11],this.Gh=0|e5[12],this.Gl=0|e5[13],this.Hh=0|e5[14],this.Hl=0|e5[15]}get(){let{Ah:a,Al:b,Bh:c,Bl:d,Ch:e,Cl:f,Dh:g,Dl:h,Eh:i,El:j,Fh:k,Fl:l,Gh:m,Gl:n,Hh:o,Hl:p}=this;return[a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p]}set(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){this.Ah=0|a,this.Al=0|b,this.Bh=0|c,this.Bl=0|d,this.Ch=0|e,this.Cl=0|f,this.Dh=0|g,this.Dl=0|h,this.Eh=0|i,this.El=0|j,this.Fh=0|k,this.Fl=0|l,this.Gh=0|m,this.Gl=0|n,this.Hh=0|o,this.Hl=0|p}process(a,b){for(let c=0;c<16;c++,b+=4)fr[c]=a.getUint32(b),fs[c]=a.getUint32(b+=4);for(let a=16;a<80;a++){let b=0|fr[a-15],c=0|fs[a-15],d=fa(b,c,1)^fa(b,c,8)^e8(b,c,7),e=fb(b,c,1)^fb(b,c,8)^e9(b,c,7),f=0|fr[a-2],g=0|fs[a-2],h=fa(f,g,19)^fc(f,g,61)^e8(f,g,6),i=fh(e,fb(f,g,19)^fd(f,g,61)^e9(f,g,6),fs[a-7],fs[a-16]),j=fi(i,d,h,fr[a-7],fr[a-16]);fr[a]=0|j,fs[a]=0|i}let{Ah:c,Al:d,Bh:e,Bl:f,Ch:g,Cl:h,Dh:i,Dl:j,Eh:k,El:l,Fh:m,Fl:n,Gh:o,Gl:p,Hh:q,Hl:r}=this;for(let a=0;a<80;a++){let b=fa(k,l,14)^fa(k,l,18)^fc(k,l,41),s=fb(k,l,14)^fb(k,l,18)^fd(k,l,41),t=k&m^~k&o,u=fj(r,s,l&n^~l&p,fq[a],fs[a]),v=fk(u,q,b,t,fp[a],fr[a]),w=0|u,x=fa(c,d,28)^fc(c,d,34)^fc(c,d,39),y=fb(c,d,28)^fd(c,d,34)^fd(c,d,39),z=c&e^c&g^e&g,A=d&f^d&h^f&h;q=0|o,r=0|p,o=0|m,p=0|n,m=0|k,n=0|l,({h:k,l:l}=fe(0|i,0|j,0|v,0|w)),i=0|g,j=0|h,g=0|e,h=0|f,e=0|c,f=0|d;let B=ff(w,y,A);c=fg(B,v,x,z),d=0|B}({h:c,l:d}=fe(0|this.Ah,0|this.Al,0|c,0|d)),({h:e,l:f}=fe(0|this.Bh,0|this.Bl,0|e,0|f)),({h:g,l:h}=fe(0|this.Ch,0|this.Cl,0|g,0|h)),({h:i,l:j}=fe(0|this.Dh,0|this.Dl,0|i,0|j)),({h:k,l:l}=fe(0|this.Eh,0|this.El,0|k,0|l)),({h:m,l:n}=fe(0|this.Fh,0|this.Fl,0|m,0|n)),({h:o,l:p}=fe(0|this.Gh,0|this.Gl,0|o,0|p)),({h:q,l:r}=fe(0|this.Hh,0|this.Hl,0|q,0|r)),this.set(c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r)}roundClean(){dw(fr,fs)}destroy(){dw(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class fu extends ft{constructor(){super(48),this.Ah=0|e4[0],this.Al=0|e4[1],this.Bh=0|e4[2],this.Bl=0|e4[3],this.Ch=0|e4[4],this.Cl=0|e4[5],this.Dh=0|e4[6],this.Dl=0|e4[7],this.Eh=0|e4[8],this.El=0|e4[9],this.Fh=0|e4[10],this.Fl=0|e4[11],this.Gh=0|e4[12],this.Gl=0|e4[13],this.Hh=0|e4[14],this.Hl=0|e4[15]}}let fv=dI(()=>new fn),fw=dI(()=>new ft),fx=dI(()=>new fu);class fy extends dH{constructor(a,b){super(),this.finished=!1,this.destroyed=!1,du(a);const c=dF(b);if(this.iHash=a.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const d=this.blockLen,e=new Uint8Array(d);e.set(c.length>d?a.create().update(c).digest():c);for(let a=0;a<e.length;a++)e[a]^=54;this.iHash.update(e),this.oHash=a.create();for(let a=0;a<e.length;a++)e[a]^=106;this.oHash.update(e),dw(e)}update(a){return dv(this),this.iHash.update(a),this}digestInto(a){dv(this),dt(a,this.outputLen),this.finished=!0,this.iHash.digestInto(a),this.oHash.update(a),this.oHash.digestInto(a),this.destroy()}digest(){let a=new Uint8Array(this.oHash.outputLen);return this.digestInto(a),a}_cloneInto(a){a||(a=Object.create(Object.getPrototypeOf(this),{}));let{oHash:b,iHash:c,finished:d,destroyed:e,blockLen:f,outputLen:g}=this;return a.finished=d,a.destroyed=e,a.blockLen=f,a.outputLen=g,a.oHash=b._cloneInto(a.oHash),a.iHash=c._cloneInto(a.iHash),a}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}let fz=(a,b,c)=>new fy(a,b).update(c).digest();fz.create=(a,b)=>new fy(a,b);let fA=BigInt(0),fB=BigInt(1),fC=BigInt(2),fD=BigInt(3),fE=BigInt(4),fF=BigInt(5),fG=BigInt(7),fH=BigInt(8),fI=BigInt(9),fJ=BigInt(16);function fK(a,b){let c=a%b;return c>=fA?c:b+c}function fL(a,b,c){let d=a;for(;b-- >fA;)d*=d,d%=c;return d}function fM(a,b){if(a===fA)throw Error("invert: expected non-zero number");if(b<=fA)throw Error("invert: expected positive modulus, got "+b);let c=fK(a,b),d=b,e=fA,f=fB,g=fB,h=fA;for(;c!==fA;){let a=d/c,b=d%c,i=e-g*a,j=f-h*a;d=c,c=b,e=g,f=h,g=i,h=j}if(d!==fB)throw Error("invert: does not exist");return fK(e,b)}function fN(a,b,c){if(!a.eql(a.sqr(b),c))throw Error("Cannot find square root")}function fO(a,b){let c=(a.ORDER+fB)/fE,d=a.pow(b,c);return fN(a,d,b),d}function fP(a,b){let c=(a.ORDER-fF)/fH,d=a.mul(b,fC),e=a.pow(d,c),f=a.mul(b,e),g=a.mul(a.mul(f,fC),e),h=a.mul(f,a.sub(g,a.ONE));return fN(a,h,b),h}function fQ(a){if(a<fD)throw Error("sqrt is not defined for small field");let b=a-fB,c=0;for(;b%fC===fA;)b/=fC,c++;let d=fC,e=fW(a);for(;1===fU(e,d);)if(d++>1e3)throw Error("Cannot find square root: probably non-prime P");if(1===c)return fO;let f=e.pow(d,b),g=(b+fB)/fC;return function(a,d){if(a.is0(d))return d;if(1!==fU(a,d))throw Error("Cannot find square root");let e=c,h=a.mul(a.ONE,f),i=a.pow(d,b),j=a.pow(d,g);for(;!a.eql(i,a.ONE);){if(a.is0(i))return a.ZERO;let b=1,c=a.sqr(i);for(;!a.eql(c,a.ONE);)if(b++,c=a.sqr(c),b===e)throw Error("Cannot find square root");let d=fB<<BigInt(e-b-1),f=a.pow(h,d);e=b,h=a.sqr(f),i=a.mul(i,h),j=a.mul(j,f)}return j}}let fR=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function fS(a){return dY(a,fR.reduce((a,b)=>(a[b]="function",a),{ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"})),a}function fT(a,b,c=!1){let d=Array(b.length).fill(c?a.ZERO:void 0),e=b.reduce((b,c,e)=>a.is0(c)?b:(d[e]=b,a.mul(b,c)),a.ONE),f=a.inv(e);return b.reduceRight((b,c,e)=>a.is0(c)?b:(d[e]=a.mul(b,d[e]),a.mul(b,c)),f),d}function fU(a,b){let c=(a.ORDER-fB)/fC,d=a.pow(b,c),e=a.eql(d,a.ONE),f=a.eql(d,a.ZERO),g=a.eql(d,a.neg(a.ONE));if(!e&&!f&&!g)throw Error("invalid Legendre symbol result");return e?1:f?0:-1}function fV(a,b){void 0!==b&&ds(b);let c=void 0!==b?b:a.toString(2).length,d=Math.ceil(c/8);return{nBitLength:c,nByteLength:d}}function fW(a,b,c=!1,d={}){let e,f,g,h;if(a<=fA)throw Error("invalid field: expected ORDER > 0, got "+a);let i=!1;if("object"==typeof b&&null!=b){if(d.sqrt||c)throw Error("cannot specify opts in two arguments");b.BITS&&(f=b.BITS),b.sqrt&&(g=b.sqrt),"boolean"==typeof b.isLE&&(c=b.isLE),"boolean"==typeof b.modFromBytes&&(i=b.modFromBytes),h=b.allowedLengths}else"number"==typeof b&&(f=b),d.sqrt&&(g=d.sqrt);let{nBitLength:j,nByteLength:k}=fV(a,f);if(k>2048)throw Error("invalid field: expected ORDER of <= 2048 bytes");let l=Object.freeze({ORDER:a,isLE:c,BITS:j,BYTES:k,MASK:dX(j),ZERO:fA,ONE:fB,allowedLengths:h,create:b=>fK(b,a),isValid:b=>{if("bigint"!=typeof b)throw Error("invalid field element: expected bigint, got "+typeof b);return fA<=b&&b<a},is0:a=>a===fA,isValidNot0:a=>!l.is0(a)&&l.isValid(a),isOdd:a=>(a&fB)===fB,neg:b=>fK(-b,a),eql:(a,b)=>a===b,sqr:b=>fK(b*b,a),add:(b,c)=>fK(b+c,a),sub:(b,c)=>fK(b-c,a),mul:(b,c)=>fK(b*c,a),pow:(a,b)=>(function(a,b,c){if(c<fA)throw Error("invalid exponent, negatives unsupported");if(c===fA)return a.ONE;if(c===fB)return b;let d=a.ONE,e=b;for(;c>fA;)c&fB&&(d=a.mul(d,e)),e=a.sqr(e),c>>=fB;return d})(l,a,b),div:(b,c)=>fK(b*fM(c,a),a),sqrN:a=>a*a,addN:(a,b)=>a+b,subN:(a,b)=>a-b,mulN:(a,b)=>a*b,inv:b=>fM(b,a),sqrt:g||(b=>(e||(e=function(a){if(a%fE===fD)return fO;if(a%fH===fF)return fP;if(a%fJ===fI){let b,c,d,e,f,g;return b=fW(a),d=(c=fQ(a))(b,b.neg(b.ONE)),e=c(b,d),f=c(b,b.neg(d)),g=(a+fG)/fJ,(a,b)=>{let c=a.pow(b,g),h=a.mul(c,d),i=a.mul(c,e),j=a.mul(c,f),k=a.eql(a.sqr(h),b),l=a.eql(a.sqr(i),b);c=a.cmov(c,h,k),h=a.cmov(j,i,l);let m=a.eql(a.sqr(h),b),n=a.cmov(c,h,m);return fN(a,n,b),n}}return fQ(a)}(a)),e(l,b))),toBytes:a=>c?dT(a,k):dS(a,k),fromBytes:(b,d=!0)=>{if(h){if(!h.includes(b.length)||b.length>k)throw Error("Field.fromBytes: expected "+h+" bytes, got "+b.length);let a=new Uint8Array(k);a.set(b,c?0:a.length-b.length),b=a}if(b.length!==k)throw Error("Field.fromBytes: expected "+k+" bytes, got "+b.length);let e=c?dR(b):dQ(b);if(i&&(e=fK(e,a)),!d&&!l.isValid(e))throw Error("invalid field element: outside of range 0..ORDER");return e},invertBatch:a=>fT(l,a),cmov:(a,b,c)=>c?b:a});return Object.freeze(l)}function fX(a){if("bigint"!=typeof a)throw Error("field order must be bigint");return Math.ceil(a.toString(2).length/8)}function fY(a){let b=fX(a);return b+Math.ceil(b/2)}let fZ=BigInt(0),f$=BigInt(1);function f_(a,b){let c=b.negate();return a?c:b}function f0(a,b){let c=fT(a.Fp,b.map(a=>a.Z));return b.map((b,d)=>a.fromAffine(b.toAffine(c[d])))}function f1(a,b){if(!Number.isSafeInteger(a)||a<=0||a>b)throw Error("invalid window size, expected [1.."+b+"], got W="+a)}function f2(a,b){f1(a,b);let c=Math.ceil(b/a)+1,d=2**(a-1),e=2**a;return{windows:c,windowSize:d,mask:dX(a),maxNumber:e,shiftBy:BigInt(a)}}function f3(a,b,c){let{windowSize:d,mask:e,maxNumber:f,shiftBy:g}=c,h=Number(a&e),i=a>>g;h>d&&(h-=f,i+=f$);let j=b*d,k=j+Math.abs(h)-1,l=0===h;return{nextN:i,offset:k,isZero:l,isNeg:h<0,isNegF:b%2!=0,offsetF:j}}let f4=new WeakMap,f5=new WeakMap;function f6(a){return f5.get(a)||1}function f7(a){if(a!==fZ)throw Error("invalid wNAF")}class f8{constructor(a,b){this.BASE=a.BASE,this.ZERO=a.ZERO,this.Fn=a.Fn,this.bits=b}_unsafeLadder(a,b,c=this.ZERO){let d=a;for(;b>fZ;)b&f$&&(c=c.add(d)),d=d.double(),b>>=f$;return c}precomputeWindow(a,b){let{windows:c,windowSize:d}=f2(b,this.bits),e=[],f=a,g=f;for(let a=0;a<c;a++){g=f,e.push(g);for(let a=1;a<d;a++)g=g.add(f),e.push(g);f=g.double()}return e}wNAF(a,b,c){if(!this.Fn.isValid(c))throw Error("invalid scalar");let d=this.ZERO,e=this.BASE,f=f2(a,this.bits);for(let a=0;a<f.windows;a++){let{nextN:g,offset:h,isZero:i,isNeg:j,isNegF:k,offsetF:l}=f3(c,a,f);c=g,i?e=e.add(f_(k,b[l])):d=d.add(f_(j,b[h]))}return f7(c),{p:d,f:e}}wNAFUnsafe(a,b,c,d=this.ZERO){let e=f2(a,this.bits);for(let a=0;a<e.windows&&c!==fZ;a++){let{nextN:f,offset:g,isZero:h,isNeg:i}=f3(c,a,e);if(c=f,!h){let a=b[g];d=d.add(i?a.negate():a)}}return f7(c),d}getPrecomputes(a,b,c){let d=f4.get(b);return d||(d=this.precomputeWindow(b,a),1!==a&&("function"==typeof c&&(d=c(d)),f4.set(b,d))),d}cached(a,b,c){let d=f6(a);return this.wNAF(d,this.getPrecomputes(d,a,c),b)}unsafe(a,b,c,d){let e=f6(a);return 1===e?this._unsafeLadder(a,b,d):this.wNAFUnsafe(e,this.getPrecomputes(e,a,c),b,d)}createCache(a,b){f1(b,this.bits),f5.set(a,b),f4.delete(a)}hasCache(a){return 1!==f6(a)}}function f9(a,b,c){if(!b)return fW(a,{isLE:c});if(b.ORDER!==a)throw Error("Field.ORDER must match order: Fp == p, Fn == n");return fS(b),b}let ga=(a,b)=>(a+(a>=0?b:-b)/gg)/b;function gb(a){if(!["compact","recovered","der"].includes(a))throw Error('Signature format must be "compact", "recovered", or "der"');return a}function gc(a,b){let c={};for(let d of Object.keys(b))c[d]=void 0===a[d]?b[d]:a[d];return dM(c.lowS,"lowS"),dM(c.prehash,"prehash"),void 0!==c.format&&gb(c.format),c}let gd={Err:class extends Error{constructor(a=""){super(a)}},_tlv:{encode:(a,b)=>{let{Err:c}=gd;if(a<0||a>256)throw new c("tlv.encode: wrong tag");if(1&b.length)throw new c("tlv.encode: unpadded data");let d=b.length/2,e=dO(d);if(e.length/2&128)throw new c("tlv.encode: long form length too big");let f=d>127?dO(e.length/2|128):"";return dO(a)+f+e+b},decode(a,b){let{Err:c}=gd,d=0;if(a<0||a>256)throw new c("tlv.encode: wrong tag");if(b.length<2||b[d++]!==a)throw new c("tlv.decode: wrong tlv");let e=b[d++],f=0;if(128&e){let a=127&e;if(!a)throw new c("tlv.decode(long): indefinite length not supported");if(a>4)throw new c("tlv.decode(long): byte length is too big");let g=b.subarray(d,d+a);if(g.length!==a)throw new c("tlv.decode: length bytes not complete");if(0===g[0])throw new c("tlv.decode(long): zero leftmost byte");for(let a of g)f=f<<8|a;if(d+=a,f<128)throw new c("tlv.decode(long): not minimal encoding")}else f=e;let g=b.subarray(d,d+f);if(g.length!==f)throw new c("tlv.decode: wrong value length");return{v:g,l:b.subarray(d+f)}}},_int:{encode(a){let{Err:b}=gd;if(a<ge)throw new b("integer: negative integers are not allowed");let c=dO(a);if(8&Number.parseInt(c[0],16)&&(c="00"+c),1&c.length)throw new b("unexpected DER parsing assertion: unpadded hex");return c},decode(a){let{Err:b}=gd;if(128&a[0])throw new b("invalid signature integer: negative");if(0===a[0]&&!(128&a[1]))throw new b("invalid signature integer: unnecessary leading zero");return dQ(a)}},toSig(a){let{Err:b,_int:c,_tlv:d}=gd,e=dU("signature",a),{v:f,l:g}=d.decode(48,e);if(g.length)throw new b("invalid signature: left bytes after parsing");let{v:h,l:i}=d.decode(2,f),{v:j,l:k}=d.decode(2,i);if(k.length)throw new b("invalid signature: left bytes after parsing");return{r:c.decode(h),s:c.decode(j)}},hexFromSig(a){let{_tlv:b,_int:c}=gd,d=b.encode(2,c.encode(a.r)),e=b.encode(2,c.encode(a.s));return b.encode(48,d+e)}},ge=BigInt(0),gf=BigInt(1),gg=BigInt(2),gh=BigInt(3),gi=BigInt(4);function gj(a,b){let c,{BYTES:d}=a;if("bigint"==typeof b)c=b;else{let e=dU("private key",b);try{c=a.fromBytes(e)}catch(a){throw Error(`invalid private key: expected ui8a of size ${d}, got ${typeof b}`)}}if(!a.isValidNot0(c))throw Error("invalid private key: out of range [1..N-1]");return c}function gk(a){return Uint8Array.of(a?2:3)}function gl(a,b){fS(a);let{A:c,B:d,Z:e}=b;if(!a.isValid(c)||!a.isValid(d)||!a.isValid(e))throw Error("mapToCurveSimpleSWU: invalid opts");let f=function(a,b){let c=a.ORDER,d=ge;for(let a=c-gf;a%gg===ge;a/=gg)d+=gf;let e=d,f=gg<<e-gf-gf,g=f*gg,h=(c-gf)/g,i=(h-gf)/gg,j=g-gf,k=a.pow(b,h),l=a.pow(b,(h+gf)/gg),m=(b,c)=>{let d=k,g=a.pow(c,j),h=a.sqr(g);h=a.mul(h,c);let m=a.mul(b,h);m=a.pow(m,i),m=a.mul(m,g),g=a.mul(m,c),h=a.mul(m,b);let n=a.mul(h,g);m=a.pow(n,f);let o=a.eql(m,a.ONE);g=a.mul(h,l),m=a.mul(n,d),h=a.cmov(g,h,o),n=a.cmov(m,n,o);for(let b=e;b>gf;b--){let c=b-gg;c=gg<<c-gf;let e=a.pow(n,c),f=a.eql(e,a.ONE);g=a.mul(h,d),d=a.mul(d,d),e=a.mul(n,d),h=a.cmov(g,h,f),n=a.cmov(e,n,f)}return{isValid:o,value:h}};if(a.ORDER%gi===gh){let c=(a.ORDER-gh)/gi,d=a.sqrt(a.neg(b));m=(b,e)=>{let f=a.sqr(e),g=a.mul(b,e);f=a.mul(f,g);let h=a.pow(f,c);h=a.mul(h,g);let i=a.mul(h,d),j=a.mul(a.sqr(h),e),k=a.eql(j,b),l=a.cmov(i,h,k);return{isValid:k,value:l}}}return m}(a,e);if(!a.isOdd)throw Error("Field does not have .isOdd()");return b=>{let g,h,i,j,k,l,m,n;g=a.sqr(b),g=a.mul(g,e),h=a.sqr(g),h=a.add(h,g),i=a.add(h,a.ONE),i=a.mul(i,d),j=a.cmov(e,a.neg(h),!a.eql(h,a.ZERO)),j=a.mul(j,c),h=a.sqr(i),l=a.sqr(j),k=a.mul(l,c),h=a.add(h,k),h=a.mul(h,i),l=a.mul(l,j),k=a.mul(l,d),h=a.add(h,k),m=a.mul(g,i);let{isValid:o,value:p}=f(h,l);n=a.mul(g,b),n=a.mul(n,p),m=a.cmov(m,i,o),n=a.cmov(n,p,o);let q=a.isOdd(b)===a.isOdd(n);n=a.cmov(a.neg(n),n,q);let r=fT(a,[j],!0)[0];return{x:m=a.mul(m,r),y:n}}}function gm(a,b){return{secretKey:b.BYTES,publicKey:1+a.BYTES,publicKeyUncompressed:1+2*a.BYTES,publicKeyHasPrefix:!0,signature:2*b.BYTES}}function gn(a,b){let c=b=>(function(a){let b,{CURVE:c,curveOpts:d,hash:e,ecdsaOpts:f}=function(a){let b,c,d,e,{CURVE:f,curveOpts:g}=(b={a:a.a,b:a.b,p:a.Fp.ORDER,n:a.n,h:a.h,Gx:a.Gx,Gy:a.Gy},c=a.Fp,d=a.allowedPrivateKeyLengths?Array.from(new Set(a.allowedPrivateKeyLengths.map(a=>Math.ceil(a/2)))):void 0,e={Fp:c,Fn:fW(b.n,{BITS:a.nBitLength,allowedLengths:d,modFromBytes:a.wrapPrivateKey}),allowInfinityPoint:a.allowInfinityPoint,endo:a.endo,isTorsionFree:a.isTorsionFree,clearCofactor:a.clearCofactor,fromBytes:a.fromBytes,toBytes:a.toBytes},{CURVE:b,curveOpts:e}),h={hmac:a.hmac,randomBytes:a.randomBytes,lowS:a.lowS,bits2int:a.bits2int,bits2int_modN:a.bits2int_modN};return{CURVE:f,curveOpts:g,hash:a.hash,ecdsaOpts:h}}(a),g=function(a,b,c={}){du(b),dY(c,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});let d=c.randomBytes||dJ,e=c.hmac||((a,...c)=>fz(b,a,dG(...c))),{Fp:f,Fn:g}=a,{ORDER:h,BITS:i}=g,{keygen:j,getPublicKey:k,getSharedSecret:l,utils:m,lengths:n}=function(a,b={}){let{Fn:c}=a,d=b.randomBytes||dJ,e=Object.assign(gm(a.Fp,c),{seed:fY(c.ORDER)});function f(a){try{return!!gj(c,a)}catch(a){return!1}}function g(a=d(e.seed)){return function(a,b,c=!1){let d=a.length,e=fX(b),f=fY(b);if(d<16||d<f||d>1024)throw Error("expected "+f+"-1024 bytes of input, got "+d);let g=fK(c?dR(a):dQ(a),b-fB)+fB;return c?dT(g,e):dS(g,e)}(dN(a,e.seed,"seed"),c.ORDER)}function h(b,d=!0){return a.BASE.multiply(gj(c,b)).toBytes(d)}function i(b){if("bigint"==typeof b)return!1;if(b instanceof a)return!0;let{secretKey:d,publicKey:f,publicKeyUncompressed:g}=e;if(c.allowedLengths||d===f)return;let h=dU("key",b).length;return h===f||h===g}return Object.freeze({getPublicKey:h,getSharedSecret:function(b,d,e=!0){if(!0===i(b))throw Error("first arg must be private key");if(!1===i(d))throw Error("second arg must be public key");let f=gj(c,b);return a.fromHex(d).multiply(f).toBytes(e)},keygen:function(a){let b=g(a);return{secretKey:b,publicKey:h(b)}},Point:a,utils:{isValidSecretKey:f,isValidPublicKey:function(b,c){let{publicKey:d,publicKeyUncompressed:f}=e;try{let e=b.length;if(!0===c&&e!==d||!1===c&&e!==f)return!1;return!!a.fromBytes(b)}catch(a){return!1}},randomSecretKey:g,isValidPrivateKey:f,randomPrivateKey:g,normPrivateKeyToScalar:a=>gj(c,a),precompute:(b=8,c=a.BASE)=>c.precompute(b,!1)},lengths:e})}(a,c),o={prehash:!1,lowS:"boolean"==typeof c.lowS&&c.lowS,format:void 0,extraEntropy:!1},p="compact";function q(a,b){if(!g.isValidNot0(b))throw Error(`invalid signature ${a}: out of range 1..Point.Fn.ORDER`);return b}class r{constructor(a,b,c){this.r=q("r",a),this.s=q("s",b),null!=c&&(this.recovery=c),Object.freeze(this)}static fromBytes(a,b=p){var c,d;let e,f;if(c=a,gb(d=b),f=n.signature,dN(c,"compact"===d?f:"recovered"===d?f+1:void 0,`${d} signature`),"der"===b){let{r:b,s:c}=gd.toSig(dN(a));return new r(b,c)}"recovered"===b&&(e=a[0],b="compact",a=a.subarray(1));let h=g.BYTES,i=a.subarray(0,h),j=a.subarray(h,2*h);return new r(g.fromBytes(i),g.fromBytes(j),e)}static fromHex(a,b){return this.fromBytes(dD(a),b)}addRecoveryBit(a){return new r(this.r,this.s,a)}recoverPublicKey(b){let c=f.ORDER,{r:d,s:e,recovery:i}=this;if(null==i||![0,1,2,3].includes(i))throw Error("recovery id invalid");if(h*gg<c&&i>1)throw Error("recovery id is ambiguous for h>1 curve");let j=2===i||3===i?d+h:d;if(!f.isValid(j))throw Error("recovery id 2 or 3 invalid");let k=f.toBytes(j),l=a.fromBytes(dG(gk((1&i)==0),k)),m=g.inv(j),n=t(dU("msgHash",b)),o=g.create(-n*m),p=g.create(e*m),q=a.BASE.multiplyUnsafe(o).add(l.multiplyUnsafe(p));if(q.is0())throw Error("point at infinify");return q.assertValidity(),q}hasHighS(){return this.s>h>>gf}toBytes(a=p){if(gb(a),"der"===a)return dD(gd.hexFromSig(this));let b=g.toBytes(this.r),c=g.toBytes(this.s);if("recovered"===a){if(null==this.recovery)throw Error("recovery bit must be present");return dG(Uint8Array.of(this.recovery),b,c)}return dG(b,c)}toHex(a){return dB(this.toBytes(a))}assertValidity(){}static fromCompact(a){return r.fromBytes(dU("sig",a),"compact")}static fromDER(a){return r.fromBytes(dU("sig",a),"der")}normalizeS(){return this.hasHighS()?new r(this.r,g.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return dB(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return dB(this.toBytes("compact"))}}let s=c.bits2int||function(a){if(a.length>8192)throw Error("input is too large");let b=dQ(a),c=8*a.length-i;return c>0?b>>BigInt(c):b},t=c.bits2int_modN||function(a){return g.create(s(a))},u=dX(i);function v(a){var b,c,d,e="num < 2^"+i;if(b=a,c=ge,d=u,!(dV(b)&&dV(c)&&dV(d))||!(c<=b)||!(b<d))throw Error("expected valid "+e+": "+ge+" <= n < "+u+", got "+a);return g.toBytes(a)}function w(a,c){return dN(a,void 0,"message"),c?dN(b(a),void 0,"prehashed message"):a}return Object.freeze({keygen:j,getPublicKey:k,getSharedSecret:l,utils:m,lengths:n,Point:a,sign:function(c,f,i={}){let{seed:j,k2sig:k}=function(b,c,e){if(["recovered","canonical"].some(a=>a in e))throw Error("sign() legacy options not supported");let{lowS:f,prehash:i,extraEntropy:j}=gc(e,o),k=t(b=w(b,i)),l=gj(g,c),m=[v(l),v(k)];if(null!=j&&!1!==j){let a=!0===j?d(n.secretKey):j;m.push(dU("extraEntropy",a))}return{seed:dG(...m),k2sig:function(b){let c=s(b);if(!g.isValidNot0(c))return;let d=g.inv(c),e=a.BASE.multiply(c).toAffine(),i=g.create(e.x);if(i===ge)return;let j=g.create(d*g.create(k+i*l));if(j===ge)return;let m=2*(e.x!==i)|Number(e.y&gf),n=j;return f&&j>h>>gf&&(n=g.neg(j),m^=1),new r(i,n,m)}}}(c=dU("message",c),f,i);return(function(a,b,c){if("number"!=typeof a||a<2)throw Error("hashLen must be a number");if("number"!=typeof b||b<2)throw Error("qByteLen must be a number");if("function"!=typeof c)throw Error("hmacFn must be a function");let d=a=>new Uint8Array(a),e=d(a),f=d(a),g=0,h=()=>{e.fill(1),f.fill(0),g=0},i=(...a)=>c(f,e,...a),j=(a=d(0))=>{(f=i(Uint8Array.of(0),a),e=i(),0!==a.length)&&(f=i(Uint8Array.of(1),a),e=i())},k=()=>{if(g++>=1e3)throw Error("drbg: tried 1000 values");let a=0,c=[];for(;a<b;){let b=(e=i()).slice();c.push(b),a+=e.length}return dG(...c)};return(a,b)=>{let c;for(h(),j(a);!(c=b(k()));)j();return h(),c}})(b.outputLen,g.BYTES,e)(j,k)},verify:function(b,c,d,e={}){let{lowS:f,prehash:h,format:i}=gc(e,o);if(d=dU("publicKey",d),c=w(dU("message",c),h),"strict"in e)throw Error("options.strict was renamed to lowS");let j=void 0===i?function(a){let b,c="string"==typeof a||dr(a),d=!c&&null!==a&&"object"==typeof a&&"bigint"==typeof a.r&&"bigint"==typeof a.s;if(!c&&!d)throw Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(d)b=new r(a.r,a.s);else if(c){try{b=r.fromBytes(dU("sig",a),"der")}catch(a){if(!(a instanceof gd.Err))throw a}if(!b)try{b=r.fromBytes(dU("sig",a),"compact")}catch(a){return!1}}return!!b&&b}(b):r.fromBytes(dU("sig",b),i);if(!1===j)return!1;try{let b=a.fromBytes(d);if(f&&j.hasHighS())return!1;let{r:e,s:h}=j,i=t(c),k=g.inv(h),l=g.create(i*k),m=g.create(e*k),n=a.BASE.multiplyUnsafe(l).add(b.multiplyUnsafe(m));if(n.is0())return!1;return g.create(n.x)===e}catch(a){return!1}},recoverPublicKey:function(a,b,c={}){let{prehash:d}=gc(c,o);return b=w(b,d),r.fromBytes(a,"recovered").recoverPublicKey(b).toBytes()},Signature:r,hash:b})}(function(a,b={}){let c=function(a,b,c={},d){if(void 0===d&&(d="edwards"===a),!b||"object"!=typeof b)throw Error(`expected valid ${a} CURVE object`);for(let a of["p","n","h"]){let c=b[a];if(!("bigint"==typeof c&&c>fZ))throw Error(`CURVE.${a} must be positive bigint`)}let e=f9(b.p,c.Fp,d),f=f9(b.n,c.Fn,d);for(let c of["Gx","Gy","a","weierstrass"===a?"b":"d"])if(!e.isValid(b[c]))throw Error(`CURVE.${c} must be valid field element of CURVE.Fp`);return{CURVE:b=Object.freeze(Object.assign({},b)),Fp:e,Fn:f}}("weierstrass",a,b),{Fp:d,Fn:e}=c,f=c.CURVE,{h:g,n:h}=f;dY(b,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});let{endo:i}=b;if(i&&(!d.is0(f.a)||"bigint"!=typeof i.beta||!Array.isArray(i.basises)))throw Error('invalid endo: expected "beta": bigint and "basises": array');let j=gm(d,e);function k(){if(!d.isOdd)throw Error("compression is not supported: Field does not have .isOdd()")}let l=b.toBytes||function(a,b,c){let{x:e,y:f}=b.toAffine(),g=d.toBytes(e);return(dM(c,"isCompressed"),c)?(k(),dG(gk(!d.isOdd(f)),g)):dG(Uint8Array.of(4),g,d.toBytes(f))},m=b.fromBytes||function(a){dN(a,void 0,"Point");let{publicKey:b,publicKeyUncompressed:c}=j,e=a.length,f=a[0],g=a.subarray(1);if(e===b&&(2===f||3===f)){let a,b=d.fromBytes(g);if(!d.isValid(b))throw Error("bad point: is not on curve, wrong x");let c=n(b);try{a=d.sqrt(c)}catch(a){throw Error("bad point: is not on curve, sqrt error"+(a instanceof Error?": "+a.message:""))}return k(),(1&f)==1!==d.isOdd(a)&&(a=d.neg(a)),{x:b,y:a}}if(e===c&&4===f){let a=d.BYTES,b=d.fromBytes(g.subarray(0,a)),c=d.fromBytes(g.subarray(a,2*a));if(!o(b,c))throw Error("bad point: is not on curve");return{x:b,y:c}}throw Error(`bad point: got length ${e}, expected compressed=${b} or uncompressed=${c}`)};function n(a){let b=d.sqr(a),c=d.mul(b,a);return d.add(d.add(c,d.mul(a,f.a)),f.b)}function o(a,b){let c=d.sqr(b),e=n(a);return d.eql(c,e)}if(!o(f.Gx,f.Gy))throw Error("bad curve params: generator point");let p=d.mul(d.pow(f.a,gh),gi),q=d.mul(d.sqr(f.b),BigInt(27));if(d.is0(d.add(p,q)))throw Error("bad curve params: a or b");function r(a,b,c=!1){if(!d.isValid(b)||c&&d.is0(b))throw Error(`bad point coordinate ${a}`);return b}function s(a){if(!(a instanceof x))throw Error("ProjectivePoint expected")}function t(a){if(!i||!i.basises)throw Error("no endo");return function(a,b,c){let[[d,e],[f,g]]=b,h=ga(g*a,c),i=ga(-e*a,c),j=a-h*d-i*f,k=-h*e-i*g,l=j<ge,m=k<ge;l&&(j=-j),m&&(k=-k);let n=dX(Math.ceil(dW(c)/2))+gf;if(j<ge||j>=n||k<ge||k>=n)throw Error("splitScalar (endomorphism): failed, k="+a);return{k1neg:l,k1:j,k2neg:m,k2:k}}(a,i.basises,e.ORDER)}let u=dZ((a,b)=>{let{X:c,Y:e,Z:f}=a;if(d.eql(f,d.ONE))return{x:c,y:e};let g=a.is0();null==b&&(b=g?d.ONE:d.inv(f));let h=d.mul(c,b),i=d.mul(e,b),j=d.mul(f,b);if(g)return{x:d.ZERO,y:d.ZERO};if(!d.eql(j,d.ONE))throw Error("invZ was invalid");return{x:h,y:i}}),v=dZ(a=>{if(a.is0()){if(b.allowInfinityPoint&&!d.is0(a.Y))return;throw Error("bad point: ZERO")}let{x:c,y:e}=a.toAffine();if(!d.isValid(c)||!d.isValid(e))throw Error("bad point: x or y not field elements");if(!o(c,e))throw Error("bad point: equation left != right");if(!a.isTorsionFree())throw Error("bad point: not in prime-order subgroup");return!0});function w(a,b,c,e,f){return c=new x(d.mul(c.X,a),c.Y,c.Z),b=f_(e,b),c=f_(f,c),b.add(c)}class x{constructor(a,b,c){this.X=r("x",a),this.Y=r("y",b,!0),this.Z=r("z",c),Object.freeze(this)}static CURVE(){return f}static fromAffine(a){let{x:b,y:c}=a||{};if(!a||!d.isValid(b)||!d.isValid(c))throw Error("invalid affine point");if(a instanceof x)throw Error("projective point not allowed");return d.is0(b)&&d.is0(c)?x.ZERO:new x(b,c,d.ONE)}static fromBytes(a){let b=x.fromAffine(m(dN(a,void 0,"point")));return b.assertValidity(),b}static fromHex(a){return x.fromBytes(dU("pointHex",a))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(a=8,b=!0){return z.createCache(this,a),b||this.multiply(gh),this}assertValidity(){v(this)}hasEvenY(){let{y:a}=this.toAffine();if(!d.isOdd)throw Error("Field doesn't support isOdd");return!d.isOdd(a)}equals(a){s(a);let{X:b,Y:c,Z:e}=this,{X:f,Y:g,Z:h}=a,i=d.eql(d.mul(b,h),d.mul(f,e)),j=d.eql(d.mul(c,h),d.mul(g,e));return i&&j}negate(){return new x(this.X,d.neg(this.Y),this.Z)}double(){let{a,b}=f,c=d.mul(b,gh),{X:e,Y:g,Z:h}=this,i=d.ZERO,j=d.ZERO,k=d.ZERO,l=d.mul(e,e),m=d.mul(g,g),n=d.mul(h,h),o=d.mul(e,g);return o=d.add(o,o),k=d.mul(e,h),k=d.add(k,k),i=d.mul(a,k),j=d.mul(c,n),j=d.add(i,j),i=d.sub(m,j),j=d.add(m,j),j=d.mul(i,j),i=d.mul(o,i),k=d.mul(c,k),n=d.mul(a,n),o=d.sub(l,n),o=d.mul(a,o),o=d.add(o,k),k=d.add(l,l),l=d.add(k,l),l=d.add(l,n),l=d.mul(l,o),j=d.add(j,l),n=d.mul(g,h),n=d.add(n,n),l=d.mul(n,o),i=d.sub(i,l),k=d.mul(n,m),k=d.add(k,k),new x(i,j,k=d.add(k,k))}add(a){s(a);let{X:b,Y:c,Z:e}=this,{X:g,Y:h,Z:i}=a,j=d.ZERO,k=d.ZERO,l=d.ZERO,m=f.a,n=d.mul(f.b,gh),o=d.mul(b,g),p=d.mul(c,h),q=d.mul(e,i),r=d.add(b,c),t=d.add(g,h);r=d.mul(r,t),t=d.add(o,p),r=d.sub(r,t),t=d.add(b,e);let u=d.add(g,i);return t=d.mul(t,u),u=d.add(o,q),t=d.sub(t,u),u=d.add(c,e),j=d.add(h,i),u=d.mul(u,j),j=d.add(p,q),u=d.sub(u,j),l=d.mul(m,t),j=d.mul(n,q),l=d.add(j,l),j=d.sub(p,l),l=d.add(p,l),k=d.mul(j,l),p=d.add(o,o),p=d.add(p,o),q=d.mul(m,q),t=d.mul(n,t),p=d.add(p,q),q=d.sub(o,q),q=d.mul(m,q),t=d.add(t,q),o=d.mul(p,t),k=d.add(k,o),o=d.mul(u,t),j=d.mul(r,j),j=d.sub(j,o),o=d.mul(r,p),l=d.mul(u,l),new x(j,k,l=d.add(l,o))}subtract(a){return this.add(a.negate())}is0(){return this.equals(x.ZERO)}multiply(a){let c,d,{endo:f}=b;if(!e.isValidNot0(a))throw Error("invalid scalar: out of range");let g=a=>z.cached(this,a,a=>f0(x,a));if(f){let{k1neg:b,k1:e,k2neg:h,k2:i}=t(a),{p:j,f:k}=g(e),{p:l,f:m}=g(i);d=k.add(m),c=w(f.beta,j,l,b,h)}else{let{p:b,f:e}=g(a);c=b,d=e}return f0(x,[c,d])[0]}multiplyUnsafe(a){let{endo:c}=b;if(!e.isValid(a))throw Error("invalid scalar: out of range");if(a===ge||this.is0())return x.ZERO;if(a===gf)return this;if(z.hasCache(this))return this.multiply(a);if(!c)return z.unsafe(this,a);{let{k1neg:b,k1:d,k2neg:e,k2:f}=t(a),{p1:g,p2:h}=function(a,b,c,d){let e=b,f=a.ZERO,g=a.ZERO;for(;c>fZ||d>fZ;)c&f$&&(f=f.add(e)),d&f$&&(g=g.add(e)),e=e.double(),c>>=f$,d>>=f$;return{p1:f,p2:g}}(x,this,d,f);return w(c.beta,g,h,b,e)}}multiplyAndAddUnsafe(a,b,c){let d=this.multiplyUnsafe(b).add(a.multiplyUnsafe(c));return d.is0()?void 0:d}toAffine(a){return u(this,a)}isTorsionFree(){let{isTorsionFree:a}=b;return g===gf||(a?a(x,this):z.unsafe(this,h).is0())}clearCofactor(){let{clearCofactor:a}=b;return g===gf?this:a?a(x,this):this.multiplyUnsafe(g)}isSmallOrder(){return this.multiplyUnsafe(g).is0()}toBytes(a=!0){return dM(a,"isCompressed"),this.assertValidity(),l(x,this,a)}toHex(a=!0){return dB(this.toBytes(a))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(a=!0){return this.toBytes(a)}_setWindowSize(a){this.precompute(a)}static normalizeZ(a){return f0(x,a)}static msm(a,b){return function(a,b,c,d){if(!Array.isArray(c))throw Error("array expected");c.forEach((b,c)=>{if(!(b instanceof a))throw Error("invalid point at index "+c)});if(!Array.isArray(d))throw Error("array of scalars expected");d.forEach((a,c)=>{if(!b.isValid(a))throw Error("invalid scalar at index "+c)});let e=c.length,f=d.length;if(e!==f)throw Error("arrays of points and scalars must have equal length");let g=a.ZERO,h=dW(BigInt(e)),i=1;h>12?i=h-3:h>4?i=h-2:h>0&&(i=2);let j=dX(i),k=Array(Number(j)+1).fill(g),l=Math.floor((b.BITS-1)/i)*i,m=g;for(let a=l;a>=0;a-=i){k.fill(g);for(let b=0;b<f;b++){let e=Number(d[b]>>BigInt(a)&j);k[e]=k[e].add(c[b])}let b=g;for(let a=k.length-1,c=g;a>0;a--)c=c.add(k[a]),b=b.add(c);if(m=m.add(b),0!==a)for(let a=0;a<i;a++)m=m.double()}return m}(x,e,a,b)}static fromPrivateKey(a){return x.BASE.multiply(gj(e,a))}}x.BASE=new x(f.Gx,f.Gy,d.ONE),x.ZERO=new x(d.ZERO,d.ONE,d.ZERO),x.Fp=d,x.Fn=e;let y=e.BITS,z=new f8(x,b.endo?Math.ceil(y/2):y);return x.BASE.precompute(8),x}(c,d),e,f);return b=g.Point,Object.assign({},g,{ProjectivePoint:b,CURVE:Object.assign({},a,fV(b.Fn.ORDER,b.Fn.BITS))})})({...a,hash:b});return{...c(b),create:c}}function go(a,b){if(gp(a),gp(b),a<0||a>=1<<8*b)throw Error("invalid I2OSP input: "+a);let c=Array.from({length:b}).fill(0);for(let d=b-1;d>=0;d--)c[d]=255&a,a>>>=8;return new Uint8Array(c)}function gp(a){if(!Number.isSafeInteger(a))throw Error("number expected")}function gq(a){if(!dr(a)&&"string"!=typeof a)throw Error("DST must be Uint8Array or string");return"string"==typeof a?dE(a):a}function gr(a,b,c){var d;let e;dY(c,{p:"bigint",m:"number",k:"number",hash:"function"});let{p:f,k:g,m:h,hash:i,expand:j,DST:k}=c;if(!("function"==typeof(d=c.hash)&&Number.isSafeInteger(d.outputLen)))throw Error("expected valid hash");dt(a),gp(b);let l=Math.ceil((f.toString(2).length+g)/8),m=b*h*l;if("xmd"===j)e=function(a,b,c,d){dt(a),gp(c),(b=gq(b)).length>255&&(b=d(dG(dE("H2C-OVERSIZE-DST-"),b)));let{outputLen:e,blockLen:f}=d,g=Math.ceil(c/e);if(c>65535||g>255)throw Error("expand_message_xmd: invalid lenInBytes");let h=dG(b,go(b.length,1)),i=go(0,f),j=go(c,2),k=Array(g),l=d(dG(i,a,j,go(0,1),h));k[0]=d(dG(l,go(1,1),h));for(let a=1;a<=g;a++){let b=[function(a,b){let c=new Uint8Array(a.length);for(let d=0;d<a.length;d++)c[d]=a[d]^b[d];return c}(l,k[a-1]),go(a+1,1),h];k[a]=d(dG(...b))}return dG(...k).slice(0,c)}(a,k,m,i);else if("xof"===j)e=function(a,b,c,d,e){if(dt(a),gp(c),(b=gq(b)).length>255){let a=Math.ceil(2*d/8);b=e.create({dkLen:a}).update(dE("H2C-OVERSIZE-DST-")).update(b).digest()}if(c>65535||b.length>255)throw Error("expand_message_xof: invalid lenInBytes");return e.create({dkLen:c}).update(a).update(go(c,2)).update(b).update(go(b.length,1)).digest()}(a,k,m,g,i);else if("_internal_pass"===j)e=a;else throw Error('expand must be "xmd" or "xof"');let n=Array(b);for(let a=0;a<b;a++){let b=Array(h);for(let c=0;c<h;c++){let d=l*(c+a*h),g=e.subarray(d,d+l);b[c]=fK(dQ(g),f)}n[a]=b}return n}let gs=dE("HashToScalar-");function gt(a,b,c){if("function"!=typeof b)throw Error("mapToCurve() must be defined");function d(c){return a.fromAffine(b(c))}function e(b){let c=b.clearCofactor();return c.equals(a.ZERO)?a.ZERO:(c.assertValidity(),c)}return{defaults:c,hashToCurve(a,b){let f=gr(a,2,Object.assign({},c,b)),g=d(f[0]),h=d(f[1]);return e(g.add(h))},encodeToCurve(a,b){let f=c.encodeDST?{DST:c.encodeDST}:{};return e(d(gr(a,1,Object.assign({},c,f,b))[0]))},mapToCurve(a){if(!Array.isArray(a))throw Error("expected array of bigints");for(let b of a)if("bigint"!=typeof b)throw Error("expected array of bigints");return e(d(a))},hashToScalar:(b,d)=>gr(b,1,Object.assign({},c,{p:a.Fn.ORDER,m:1,DST:gs},d))[0][0]}}let gu={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},gv={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},gw=BigInt(0),gx=BigInt(2),gy=fW(gu.p,{sqrt:function(a){let b=gu.p,c=BigInt(3),d=BigInt(6),e=BigInt(11),f=BigInt(22),g=BigInt(23),h=BigInt(44),i=BigInt(88),j=a*a*a%b,k=j*j*a%b,l=fL(k,c,b)*k%b,m=fL(l,c,b)*k%b,n=fL(m,gx,b)*j%b,o=fL(n,e,b)*n%b,p=fL(o,f,b)*o%b,q=fL(p,h,b)*p%b,r=fL(q,i,b)*q%b,s=fL(r,h,b)*p%b,t=fL(s,c,b)*k%b,u=fL(t,g,b)*o%b,v=fL(u,d,b)*j%b,w=fL(v,gx,b);if(!gy.eql(gy.sqr(w),a))throw Error("Cannot find square root");return w}}),gz=gn({...gu,Fp:gy,lowS:!0,endo:gv},fv);gz.Point;let gA=(e=[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(a=>a.map(a=>BigInt(a))).map(a=>Array.from(a).reverse()),(a,b)=>{let[c,d,f,g]=e.map(b=>b.reduce((b,c)=>gy.add(gy.mul(b,a),c))),[h,i]=fT(gy,[d,g],!0);return a=gy.mul(c,h),b=gy.mul(b,gy.mul(f,i)),{x:a,y:b}}),gB=gl(gy,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:gy.create(BigInt("-11"))});gt(gz.Point,a=>{let{x:b,y:c}=gB(gy.create(a[0]));return gA(b,c)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:gy.ORDER,m:1,k:128,expand:"xmd",hash:fv});let gC=2n**256n-1n;function gD(a,b={}){let{recovered:c}=b;if(void 0===a.r||void 0===a.s||c&&void 0===a.yParity)throw new gY({signature:a});if(a.r<0n||a.r>gC)throw new gZ({value:a.r});if(a.s<0n||a.s>gC)throw new g$({value:a.s});if("number"==typeof a.yParity&&0!==a.yParity&&1!==a.yParity)throw new g_({value:a.yParity})}function gE(a){return gF(ep(a))}function gF(a){if(130!==a.length&&132!==a.length)throw new gX({signature:a});let b=BigInt(ew(a,0,32)),c=BigInt(ew(a,32,64)),d=(()=>{let b=Number(`0x${a.slice(130)}`);if(!Number.isNaN(b))try{return gV(b)}catch{throw new g_({value:b})}})();return void 0===d?{r:b,s:c}:{r:b,s:c,yParity:d}}function gG(a){if(void 0!==a.r&&void 0!==a.s)return gH(a)}function gH(a){let b="string"==typeof a?gF(a):a instanceof Uint8Array?gE(a):"string"==typeof a.r?gL(a):a.v?gK(a):{r:a.r,s:a.s,...void 0!==a.yParity?{yParity:a.yParity}:{}};return gD(b),b}function gI(a){return gJ(ep(a))}function gJ(a){let{r:b,s:c}=gz.Signature.fromDER(en(a).slice(2));return{r:b,s:c}}function gK(a){return{r:a.r,s:a.s,yParity:gV(a.v)}}function gL(a){let b=(()=>{let b=a.v?Number(a.v):void 0,c=a.yParity?Number(a.yParity):void 0;if("number"==typeof b&&"number"!=typeof c&&(c=gV(b)),"number"!=typeof c)throw new g_({value:a.yParity});return c})();return{r:BigInt(a.r),s:BigInt(a.s),yParity:b}}function gM(a){let[b,c,d]=a;return gH({r:"0x"===c?0n:BigInt(c),s:"0x"===d?0n:BigInt(d),yParity:"0x"===b?0:Number(b)})}function gN(a){return ea(gO(a))}function gO(a){gD(a);let b=a.r,c=a.s;return em(eq(b,{size:32}),eq(c,{size:32}),"number"==typeof a.yParity?eq(gW(a.yParity),{size:1}):"0x")}function gP(a){return new gz.Signature(a.r,a.s).toDERRawBytes()}function gQ(a){let b=new gz.Signature(a.r,a.s);return`0x${b.toDERHex()}`}function gR(a){return{r:a.r,s:a.s,v:gW(a.yParity)}}function gS(a){let{r:b,s:c,yParity:d}=a;return{r:eq(b,{size:32}),s:eq(c,{size:32}),yParity:0===d?"0x0":"0x1"}}function gT(a){let{r:b,s:c,yParity:d}=a;return[d?"0x01":"0x",0n===b?"0x":ey(eq(b)),0n===c?"0x":ey(eq(c))]}function gU(a,b={}){try{return gD(a,b),!0}catch{return!1}}function gV(a){if(0===a||27===a)return 0;if(1===a||28===a)return 1;if(a>=35)return+(a%2==0);throw new g0({value:a})}function gW(a){if(0===a)return 27;if(1===a)return 28;throw new g_({value:a})}class gX extends d_{constructor({signature:a}){super(`Value \`${a}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${ex(en(a))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}}class gY extends d_{constructor({signature:a}){super(`Signature \`${d0(a)}\` is missing either an \`r\`, \`s\`, or \`yParity\` property.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.MissingPropertiesError"})}}class gZ extends d_{constructor({value:a}){super(`Value \`${a}\` is an invalid r value. r must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidRError"})}}class g$ extends d_{constructor({value:a}){super(`Value \`${a}\` is an invalid s value. s must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSError"})}}class g_ extends d_{constructor({value:a}){super(`Value \`${a}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}}class g0 extends d_{constructor({value:a}){super(`Value \`${a}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}}a.s(["InvalidRError",()=>gZ,"InvalidSError",()=>g$,"InvalidSerializedSizeError",()=>gX,"InvalidVError",()=>g0,"InvalidYParityError",()=>g_,"MissingPropertiesError",()=>gY,"assert",()=>gD,"extract",()=>gG,"from",()=>gH,"fromBytes",()=>gE,"fromDerBytes",()=>gI,"fromDerHex",()=>gJ,"fromHex",()=>gF,"fromLegacy",()=>gK,"fromRpc",()=>gL,"fromTuple",()=>gM,"toBytes",()=>gN,"toDerBytes",()=>gP,"toDerHex",()=>gQ,"toHex",()=>gO,"toLegacy",()=>gR,"toRpc",()=>gS,"toTuple",()=>gT,"vToYParity",()=>gV,"validate",()=>gU,"yParityToV",()=>gW],397619);var g1=a.i(397619),g1=g1;a.s(["CredentialCreationFailedError",()=>h5,"CredentialRequestFailedError",()=>h6,"createChallenge",()=>hY,"createCredential",()=>hZ,"getAuthenticatorData",()=>h$,"getClientDataJSON",()=>h_,"getCredentialCreationOptions",()=>h0,"getCredentialRequestOptions",()=>h1,"getSignPayload",()=>h2,"sign",()=>h3,"verify",()=>h4],876061);let g2=new TextEncoder,g3=new TextDecoder,g4=Object.fromEntries(Array.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/").map((a,b)=>[b,a.charCodeAt(0)])),g5={...Object.fromEntries(Array.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/").map((a,b)=>[a.charCodeAt(0),b])),61:0,45:62,95:63};function g6(a){let b=a.replace(/=+$/,""),c=b.length,d=new Uint8Array(c+3);g2.encodeInto(b+"===",d);for(let a=0,c=0;a<b.length;a+=4,c+=3){let b=(g5[d[a]]<<18)+(g5[d[a+1]]<<12)+(g5[d[a+2]]<<6)+g5[d[a+3]];d[c]=b>>16,d[c+1]=b>>8&255,d[c+2]=255&b}return new Uint8Array(d.buffer,0,(c>>2)*3+(c%4&&c%4-1))}let g7=BigInt(0x100000000-1),g8=BigInt(32);function g9(a,b=!1){let c=a.length,d=new Uint32Array(c),e=new Uint32Array(c);for(let f=0;f<c;f++){let{h:c,l:g}=function(a,b=!1){return b?{h:Number(a&g7),l:Number(a>>g8&g7)}:{h:0|Number(a>>g8&g7),l:0|Number(a&g7)}}(a[f],b);[d[f],e[f]]=[c,g]}return[d,e]}function ha(a){if(!Number.isSafeInteger(a)||a<0)throw Error("positive integer expected, got "+a)}function hb(a,...b){if(!(a instanceof Uint8Array||ArrayBuffer.isView(a)&&"Uint8Array"===a.constructor.name))throw Error("Uint8Array expected");if(b.length>0&&!b.includes(a.length))throw Error("Uint8Array expected of length "+b+", got length="+a.length)}function hc(a,b=!0){if(a.destroyed)throw Error("Hash instance has been destroyed");if(b&&a.finished)throw Error("Hash#digest() has already been called")}function hd(a,b){hb(a);let c=b.outputLen;if(a.length<c)throw Error("digestInto() expects output buffer of length at least "+c)}function he(...a){for(let b=0;b<a.length;b++)a[b].fill(0)}function hf(a){return new DataView(a.buffer,a.byteOffset,a.byteLength)}function hg(a,b){return a<<32-b|a>>>b}let hh=68===new Uint8Array(new Uint32Array([0x11223344]).buffer)[0]?a=>a:function(a){for(let c=0;c<a.length;c++){var b;a[c]=(b=a[c])<<24&0xff000000|b<<8&0xff0000|b>>>8&65280|b>>>24&255}return a};function hi(a){return"string"==typeof a&&(a=function(a){if("string"!=typeof a)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(a))}(a)),hb(a),a}class hj{}function hk(a){let b=b=>a().update(hi(b)).digest(),c=a();return b.outputLen=c.outputLen,b.blockLen=c.blockLen,b.create=()=>a(),b}let hl=BigInt(0),hm=BigInt(1),hn=BigInt(2),ho=BigInt(7),hp=BigInt(256),hq=BigInt(113),hr=[],hs=[],ht=[];for(let a=0,b=hm,c=1,d=0;a<24;a++){[c,d]=[d,(2*c+3*d)%5],hr.push(2*(5*d+c)),hs.push((a+1)*(a+2)/2%64);let e=hl;for(let a=0;a<7;a++)(b=(b<<hm^(b>>ho)*hq)%hp)&hn&&(e^=hm<<(hm<<BigInt(a))-hm);ht.push(e)}let hu=g9(ht,!0),hv=hu[0],hw=hu[1],hx=(a,b,c)=>c>32?b<<c-32|a>>>64-c:a<<c|b>>>32-c,hy=(a,b,c)=>c>32?a<<c-32|b>>>64-c:b<<c|a>>>32-c;class hz extends hj{constructor(a,b,c,d=!1,e=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=a,this.suffix=b,this.outputLen=c,this.enableXOF=d,this.rounds=e,ha(c),!(0<a&&a<200))throw Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=function(a){return new Uint32Array(a.buffer,a.byteOffset,Math.floor(a.byteLength/4))}(this.state)}clone(){return this._cloneInto()}keccak(){hh(this.state32),function(a,b=24){let c=new Uint32Array(10);for(let d=24-b;d<24;d++){for(let b=0;b<10;b++)c[b]=a[b]^a[b+10]^a[b+20]^a[b+30]^a[b+40];for(let b=0;b<10;b+=2){let d=(b+8)%10,e=(b+2)%10,f=c[e],g=c[e+1],h=hx(f,g,1)^c[d],i=hy(f,g,1)^c[d+1];for(let c=0;c<50;c+=10)a[b+c]^=h,a[b+c+1]^=i}let b=a[2],e=a[3];for(let c=0;c<24;c++){let d=hs[c],f=hx(b,e,d),g=hy(b,e,d),h=hr[c];b=a[h],e=a[h+1],a[h]=f,a[h+1]=g}for(let b=0;b<50;b+=10){for(let d=0;d<10;d++)c[d]=a[b+d];for(let d=0;d<10;d++)a[b+d]^=~c[(d+2)%10]&c[(d+4)%10]}a[0]^=hv[d],a[1]^=hw[d]}he(c)}(this.state32,this.rounds),hh(this.state32),this.posOut=0,this.pos=0}update(a){hc(this),hb(a=hi(a));let{blockLen:b,state:c}=this,d=a.length;for(let e=0;e<d;){let f=Math.min(b-this.pos,d-e);for(let b=0;b<f;b++)c[this.pos++]^=a[e++];this.pos===b&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:a,suffix:b,pos:c,blockLen:d}=this;a[c]^=b,(128&b)!=0&&c===d-1&&this.keccak(),a[d-1]^=128,this.keccak()}writeInto(a){hc(this,!1),hb(a),this.finish();let b=this.state,{blockLen:c}=this;for(let d=0,e=a.length;d<e;){this.posOut>=c&&this.keccak();let f=Math.min(c-this.posOut,e-d);a.set(b.subarray(this.posOut,this.posOut+f),d),this.posOut+=f,d+=f}return a}xofInto(a){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(a)}xof(a){return ha(a),this.xofInto(new Uint8Array(a))}digestInto(a){if(hd(a,this),this.finished)throw Error("digest() was already called");return this.writeInto(a),this.destroy(),a}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,he(this.state)}_cloneInto(a){let{blockLen:b,suffix:c,outputLen:d,rounds:e,enableXOF:f}=this;return a||(a=new hz(b,c,d,f,e)),a.state32.set(this.state32),a.pos=this.pos,a.posOut=this.posOut,a.finished=this.finished,a.rounds=e,a.suffix=c,a.outputLen=d,a.enableXOF=f,a.destroyed=this.destroyed,a}}let hA=hk(()=>new hz(136,1,32));class hB extends hj{constructor(a,b,c,d){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=a,this.outputLen=b,this.padOffset=c,this.isLE=d,this.buffer=new Uint8Array(a),this.view=hf(this.buffer)}update(a){hc(this),hb(a=hi(a));let{view:b,buffer:c,blockLen:d}=this,e=a.length;for(let f=0;f<e;){let g=Math.min(d-this.pos,e-f);if(g===d){let b=hf(a);for(;d<=e-f;f+=d)this.process(b,f);continue}c.set(a.subarray(f,f+g),this.pos),this.pos+=g,f+=g,this.pos===d&&(this.process(b,0),this.pos=0)}return this.length+=a.length,this.roundClean(),this}digestInto(a){hc(this),hd(a,this),this.finished=!0;let{buffer:b,view:c,blockLen:d,isLE:e}=this,{pos:f}=this;b[f++]=128,he(this.buffer.subarray(f)),this.padOffset>d-f&&(this.process(c,0),f=0);for(let a=f;a<d;a++)b[a]=0;!function(a,b,c,d){if("function"==typeof a.setBigUint64)return a.setBigUint64(b,c,d);let e=BigInt(32),f=BigInt(0xffffffff),g=Number(c>>e&f),h=Number(c&f),i=4*!!d,j=4*!d;a.setUint32(b+i,g,d),a.setUint32(b+j,h,d)}(c,d-8,BigInt(8*this.length),e),this.process(c,0);let g=hf(a),h=this.outputLen;if(h%4)throw Error("_sha2: outputLen should be aligned to 32bit");let i=h/4,j=this.get();if(i>j.length)throw Error("_sha2: outputLen bigger than state");for(let a=0;a<i;a++)g.setUint32(4*a,j[a],e)}digest(){let{buffer:a,outputLen:b}=this;this.digestInto(a);let c=a.slice(0,b);return this.destroy(),c}_cloneInto(a){a||(a=new this.constructor),a.set(...this.get());let{blockLen:b,buffer:c,length:d,finished:e,destroyed:f,pos:g}=this;return a.destroyed=f,a.finished=e,a.length=d,a.pos=g,d%b&&a.buffer.set(c),a}clone(){return this._cloneInto()}}let hC=Uint32Array.from([0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19]),hD=Uint32Array.from([0xc1059ed8,0x367cd507,0x3070dd17,0xf70e5939,0xffc00b31,0x68581511,0x64f98fa7,0xbefa4fa4]),hE=Uint32Array.from([0xcbbb9d5d,0xc1059ed8,0x629a292a,0x367cd507,0x9159015a,0x3070dd17,0x152fecd8,0xf70e5939,0x67332667,0xffc00b31,0x8eb44a87,0x68581511,0xdb0c2e0d,0x64f98fa7,0x47b5481d,0xbefa4fa4]),hF=Uint32Array.from([0x6a09e667,0xf3bcc908,0xbb67ae85,0x84caa73b,0x3c6ef372,0xfe94f82b,0xa54ff53a,0x5f1d36f1,0x510e527f,0xade682d1,0x9b05688c,0x2b3e6c1f,0x1f83d9ab,0xfb41bd6b,0x5be0cd19,0x137e2179]),hG=Uint32Array.from([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2]),hH=new Uint32Array(64);class hI extends hB{constructor(a=32){super(64,a,8,!1),this.A=0|hC[0],this.B=0|hC[1],this.C=0|hC[2],this.D=0|hC[3],this.E=0|hC[4],this.F=0|hC[5],this.G=0|hC[6],this.H=0|hC[7]}get(){let{A:a,B:b,C:c,D:d,E:e,F:f,G:g,H:h}=this;return[a,b,c,d,e,f,g,h]}set(a,b,c,d,e,f,g,h){this.A=0|a,this.B=0|b,this.C=0|c,this.D=0|d,this.E=0|e,this.F=0|f,this.G=0|g,this.H=0|h}process(a,b){for(let c=0;c<16;c++,b+=4)hH[c]=a.getUint32(b,!1);for(let a=16;a<64;a++){let b=hH[a-15],c=hH[a-2],d=hg(b,7)^hg(b,18)^b>>>3,e=hg(c,17)^hg(c,19)^c>>>10;hH[a]=e+hH[a-7]+d+hH[a-16]|0}let{A:c,B:d,C:e,D:f,E:g,F:h,G:i,H:j}=this;for(let a=0;a<64;a++){var k,l,m,n;let b=j+(hg(g,6)^hg(g,11)^hg(g,25))+((k=g)&h^~k&i)+hG[a]+hH[a]|0,o=(hg(c,2)^hg(c,13)^hg(c,22))+((l=c)&(m=d)^l&(n=e)^m&n)|0;j=i,i=h,h=g,g=f+b|0,f=e,e=d,d=c,c=b+o|0}c=c+this.A|0,d=d+this.B|0,e=e+this.C|0,f=f+this.D|0,g=g+this.E|0,h=h+this.F|0,i=i+this.G|0,j=j+this.H|0,this.set(c,d,e,f,g,h,i,j)}roundClean(){he(hH)}destroy(){this.set(0,0,0,0,0,0,0,0),he(this.buffer)}}let hJ=g9(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(a=>BigInt(a))),hK=hJ[0],hL=hJ[1],hM=new Uint32Array(80),hN=new Uint32Array(80),hO=hk(()=>new hI);function hP(a,b={}){let{as:c="string"==typeof a?"Hex":"Bytes"}=b,d=hO(d8(a));return"Bytes"===c?d:ep(d)}let hQ={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},hR={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},hS={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},hT=fW(hQ.p),hU=fW(hR.p),hV=fW(hS.p),hW=gn({...hQ,Fp:hT,lowS:!1},fv);async function hX(a){try{let b=a.getPublicKey();if(!b)throw new h5;let c=new Uint8Array(b),d=await crypto.subtle.importKey("spki",new Uint8Array(c),{name:"ECDSA",namedCurve:"P-256",hash:"SHA-256"},!0,["verify"]),e=new Uint8Array(await crypto.subtle.exportKey("raw",d));return eR(e)}catch(f){if("Permission denied to access object"!==f.message)throw f;let b=new Uint8Array(a.attestationObject),c=a=>{let c=new Uint8Array([a,88,32]);for(let a=0;a<b.length-c.length;a++)if(c.every((c,d)=>b[a+d]===c))return a+c.length;throw new h5},d=c(33),e=c(34);return eR(new Uint8Array([4,...b.slice(d,d+32),...b.slice(e,e+32)]))}}gt(hW.Point,(aA=hW.Point,aB={A:hQ.a,B:hQ.b,Z:hW.Point.Fp.create(BigInt("-10"))},f=gl(aA.Fp,aB),a=>f(a[0])),{DST:"P256_XMD:SHA-256_SSWU_RO_",encodeDST:"P256_XMD:SHA-256_SSWU_NU_",p:hQ.p,m:1,k:128,expand:"xmd",hash:fv}),gn({...hR,Fp:hU,lowS:!1},fx),gn({...hS,Fp:hV,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},fw);let hY=Uint8Array.from([105,171,180,181,160,222,75,198,42,42,32,31,141,37,186,233]);async function hZ(a){let{createFn:b=window.navigator.credentials.create.bind(window.navigator.credentials),...c}=a,d=h0(c);try{let a=await b(d);if(!a)throw new h5;let c=a.response,e=await hX(c);return{id:a.id,publicKey:e,raw:a}}catch(a){throw new h5({cause:a})}}function h$(a={}){let{flag:b=5,rpId:c=window.location.hostname,signCount:d=0}=a;return em(hP(er(c)),eq(b,{size:1}),eq(d,{size:4}))}function h_(a){let{challenge:b,crossOrigin:c=!1,extraClientData:d,origin:e=window.location.origin}=a;return JSON.stringify({type:"webauthn.get",challenge:function(a,b={}){return function(a,b={}){let{pad:c=!0,url:d=!1}=b,e=new Uint8Array(4*Math.ceil(a.length/3));for(let b=0,c=0;c<a.length;b+=4,c+=3){let d=(a[c]<<16)+(a[c+1]<<8)+(0|a[c+2]);e[b]=g4[d>>18],e[b+1]=g4[d>>12&63],e[b+2]=g4[d>>6&63],e[b+3]=g4[63&d]}let f=a.length%3,g=4*Math.floor(a.length/3)+(f&&f+1),h=g3.decode(new Uint8Array(e.buffer,0,g));return c&&1===f&&(h+="=="),c&&2===f&&(h+="="),d&&(h=h.replaceAll("+","-").replaceAll("/","_")),h}(ea(a),b)}(b,{url:!0,pad:!1}),origin:e,crossOrigin:c,...d})}function h0(a){let{attestation:b="none",authenticatorSelection:c={residentKey:"preferred",requireResidentKey:!1,userVerification:"required"},challenge:d=hY,excludeCredentialIds:e,name:f,rp:g={id:window.location.hostname,name:window.document.title},user:h,extensions:i}=a,j=h?.name??f;return{publicKey:{attestation:b,authenticatorSelection:c,challenge:d,...e?{excludeCredentials:e?.map(a=>({id:g6(a),type:"public-key"}))}:{},pubKeyCredParams:[{type:"public-key",alg:-7}],rp:g,user:{id:h?.id??function(a,b={}){let{as:c="string"==typeof a?"Hex":"Bytes"}=b,d=hA(d8(a));return"Bytes"===c?d:ep(d)}(eb(j),{as:"Bytes"}),name:j,displayName:h?.displayName??j},extensions:i}}}function h1(a){let{credentialId:b,challenge:c,rpId:d=window.location.hostname,userVerification:e="required"}=a;return{publicKey:{...b?{allowCredentials:[{id:g6(b),type:"public-key"}]}:{},challenge:ea(c),rpId:d,userVerification:e}}}function h2(a){let{challenge:b,crossOrigin:c,extraClientData:d,flag:e,origin:f,rpId:g,signCount:h,userVerification:i="required"}=a,j=h$({flag:e,rpId:g,signCount:h}),k=h_({challenge:b,crossOrigin:c,extraClientData:d,origin:f}),l=hP(er(k)),m=k.indexOf('"challenge"'),n=k.indexOf('"type"');return{metadata:{authenticatorData:j,clientDataJSON:k,challengeIndex:m,typeIndex:n,userVerificationRequired:"required"===i},payload:em(j,l)}}async function h3(a){let{getFn:b=window.navigator.credentials.get.bind(window.navigator.credentials),...c}=a,d=h1(c);try{var e;let a,c,f,g,h,i=await b(d);if(!i)throw new h6;let j=i.response,k=String.fromCharCode(...new Uint8Array(j.clientDataJSON)),l=k.indexOf('"challenge"'),m=k.indexOf('"type"'),n=(e=new Uint8Array(j.signature),c=(a=0===e[4]?5:4)+32,f=0===e[c+2]?c+3:c+2,g=BigInt(ep(e.slice(a,c))),h=BigInt(ep(e.slice(f))),{r:g,s:h>hW.CURVE.n/2n?hW.CURVE.n-h:h});return{metadata:{authenticatorData:ep(new Uint8Array(j.authenticatorData)),clientDataJSON:k,challengeIndex:l,typeIndex:m,userVerificationRequired:"required"===d.publicKey.userVerification},signature:n,raw:i}}catch(a){throw new h6({cause:a})}}function h4(a){let{challenge:b,hash:c=!0,metadata:d,publicKey:e,signature:f}=a,{authenticatorData:g,challengeIndex:h,clientDataJSON:i,typeIndex:j,userVerificationRequired:k}=d,l=ea(g);if(l.length<37)return!1;let m=l[32];if((1&m)!=1||k&&(4&m)!=4||(8&m)!=8&&(16&m)==16)return!1;let n='"type":"webauthn.get"';if(n!==i.slice(Number(j),n.length+1))return!1;let o=i.slice(Number(h)).match(/^"challenge":"(.*?)"/);if(!o)return!1;let[p,q]=o;return ep(g6(q))===b&&function(a){let{hash:b,payload:c,publicKey:d,signature:e}=a;return hW.verify(e,c instanceof Uint8Array?c:ea(c),eV(d).substring(2),...b?[{prehash:!0,lowS:!0}]:[])}({hash:c,payload:d7(l,hP(eb(i),{as:"Bytes"})),publicKey:e,signature:f})}class h5 extends d_{constructor({cause:a}={}){super("Failed to create credential.",{cause:a}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WebAuthnP256.CredentialCreationFailedError"})}}class h6 extends d_{constructor({cause:a}={}){super("Failed to request credential.",{cause:a}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WebAuthnP256.CredentialRequestFailedError"})}}var h7=a.i(876061),h7=h7;async function h8(a={}){let{extractable:b=!1}=a,c=await globalThis.crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},b,["sign","verify"]),d=eR(new Uint8Array(await globalThis.crypto.subtle.exportKey("raw",c.publicKey)));return{privateKey:c.privateKey,publicKey:d}}async function h9(a){let{payload:b,privateKey:c}=a,d=d9(new Uint8Array(await globalThis.crypto.subtle.sign({name:"ECDSA",hash:"SHA-256"},c,d8(b)))),e=ee(ed(d,0,32)),f=ee(ed(d,32,64));return f>hW.CURVE.n/2n&&(f=hW.CURVE.n-f),{r:e,s:f}}async function ia(a){let{payload:b,signature:c}=a,d=await globalThis.crypto.subtle.importKey("raw",eU(a.publicKey),{name:"ECDSA",namedCurve:"P-256"},!0,["verify"]);return await globalThis.crypto.subtle.verify({name:"ECDSA",hash:"SHA-256"},d,d7(ea(eq(c.r,void 0)),ea(eq(c.s,void 0))),d8(b))}a.s(["createKeyPair",()=>h8,"sign",()=>h9,"verify",()=>ia],444142);var ib=a.i(444142),ib=ib,ic=a.i(765238),id=a.i(226776),ie=a.i(796187);let ig="activeId",ih=(g="undefined"!=typeof indexedDB?(0,ie.createStore)("cbwsdk","keys"):void 0,{getItem:async a=>{let b=await (0,ie.get)(a,g);return b||null},removeItem:async a=>(0,ie.del)(a,g),setItem:async(a,b)=>(0,ie.set)(a,b,g)});async function ii(){let a=await ib.createKeyPair({extractable:!1}),b=eO.slice(e0.toHex(a.publicKey),1);return await ih.setItem(b,a),await ih.setItem(ig,b),a}async function ij(){let a=await ih.getItem(ig);if(!a)return null;let b=await ih.getItem(a);return b||null}async function ik(){let a=await ij();if(!a){let a=await ii(),b=eO.slice(e0.toHex(a.publicKey),1);return await ih.setItem(b,a),await ih.setItem(ig,b),a}return a}async function il(){let a=await ik(),b=eO.slice(e0.toHex(a.publicKey),1),c=async b=>{let{payload:c,metadata:d}=h7.getSignPayload({challenge:b,origin:"https://keys.coinbase.com",userVerification:"preferred"}),e=await ib.sign({payload:c,privateKey:a.privateKey});return{signature:g1.toHex(e),raw:{},webauthn:d}};return{id:b,publicKey:b,sign:async({hash:a})=>c(a),signMessage:async({message:a})=>c((0,ic.hashMessage)(a)),signTypedData:async a=>c((0,id.hashTypedData)(a)),type:"webAuthn"}}async function im(){return{account:await il()}}async function io(){let a=await ij();a&&(await ih.removeItem(eO.slice(e0.toHex(a.publicKey),1)),await ih.removeItem(ig))}let ip={storageKey:"ownPrivateKey",keyType:"private"},iq={storageKey:"ownPublicKey",keyType:"public"},ir={storageKey:"peerPublicKey",keyType:"public"};class is{constructor(){this.ownPrivateKey=null,this.ownPublicKey=null,this.peerPublicKey=null,this.sharedSecret=null}async getOwnPublicKey(){return await this.loadKeysIfNeeded(),this.ownPublicKey}async getSharedSecret(){return await this.loadKeysIfNeeded(),this.sharedSecret}async setPeerPublicKey(a){this.sharedSecret=null,this.peerPublicKey=a,await this.storeKey(ir,a),await this.loadKeysIfNeeded()}async clear(){this.ownPrivateKey=null,this.ownPublicKey=null,this.peerPublicKey=null,this.sharedSecret=null,an.keys.clear()}async generateKeyPair(){let a=await df();this.ownPrivateKey=a.privateKey,this.ownPublicKey=a.publicKey,await this.storeKey(ip,a.privateKey),await this.storeKey(iq,a.publicKey)}async loadKeysIfNeeded(){null===this.ownPrivateKey&&(this.ownPrivateKey=await this.loadKey(ip)),null===this.ownPublicKey&&(this.ownPublicKey=await this.loadKey(iq)),(null===this.ownPrivateKey||null===this.ownPublicKey)&&await this.generateKeyPair(),null===this.peerPublicKey&&(this.peerPublicKey=await this.loadKey(ir)),null===this.sharedSecret&&null!==this.ownPrivateKey&&null!==this.peerPublicKey&&(this.sharedSecret=await dg(this.ownPrivateKey,this.peerPublicKey))}async loadKey(a){let b=an.keys.get(a.storageKey);return b?dl(a.keyType,b):null}async storeKey(a,b){let c=await dk(a.keyType,b);an.keys.set(a.storageKey,c)}}var it=a.i(727495),iu=a.i(890813);function iv(a,b){if("object"==typeof a&&null!==a)return b.split(/[.[\]]+/).filter(Boolean).reduce((a,b)=>{if("object"==typeof a&&null!==a)return a[b]},a)}var iw=b1,ix=b1;class iy extends ix.BaseError{constructor(a){super(`Call bundle failed with status: ${a.statusCode}`,{name:"BundleFailedError"}),Object.defineProperty(this,"result",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.result=a}}var iz=a.i(811597),iA=a.i(451259),iB=a.i(893375);let iC=(0,bS.numberToHex)(0,{size:32});async function iD(a,b){let c;async function d(b){if(b.endsWith("0x5792579257925792579257925792579257925792579257925792579257925792".slice(2))){let c=(0,iB.trim)((0,iu.sliceHex)(b,-64,-32)),d=(0,iu.sliceHex)(b,0,-64).slice(2).match(/.{1,64}/g),e=await Promise.all(d.map(b=>iC.slice(2)!==b?a.request({method:"eth_getTransactionReceipt",params:[`0x${b}`]},{dedupe:!0}):void 0)),f=e.some(a=>null===a)?100:e.every(a=>a?.status==="0x1")?200:e.every(a=>a?.status==="0x0")?500:600;return{atomic:!1,chainId:(0,bQ.hexToNumber)(c),receipts:e.filter(Boolean),status:f,version:"2.0.0"}}return a.request({method:"wallet_getCallsStatus",params:[b]})}let{atomic:e=!1,chainId:f,receipts:g,version:h="2.0.0",...i}=await d(b.id),[j,k]=(c=i.status)>=100&&c<200?["pending",c]:c>=200&&c<300?["success",c]:c>=300&&c<700?["failure",c]:"CONFIRMED"===c?["success",200]:"PENDING"===c?["pending",100]:[void 0,c];return{...i,atomic:e,chainId:f?(0,bQ.hexToNumber)(f):void 0,receipts:g?.map(a=>({...a,blockNumber:(0,bQ.hexToBigInt)(a.blockNumber),gasUsed:(0,bQ.hexToBigInt)(a.gasUsed),status:c0.receiptStatuses[a.status]}))??[],statusCode:k,status:j,version:h}}async function iE(a,b){let c,{id:d,pollingInterval:e=a.pollingInterval,status:f=({statusCode:a})=>200===a||a>=300,retryCount:g=4,retryDelay:h=({count:a})=>200*~~(1<<a),timeout:i=6e4,throwOnFailure:j=!1}=b,k=(0,c5.stringify)(["waitForCallsStatus",a.uid,d]),{promise:l,resolve:m,reject:n}=(0,iz.withResolvers)(),o=(0,c3.observe)(k,{resolve:m,reject:n},b=>{let i=(0,c4.poll)(async()=>{let e=a=>{clearTimeout(c),i(),a(),o()};try{let c=await (0,iA.withRetry)(async()=>{let b=await (0,b_.getAction)(a,iD,"getCallsStatus")({id:d});if(j&&"failure"===b.status)throw new iy(b);return b},{retryCount:g,delay:h});if(!f(c))return;e(()=>b.resolve(c))}catch(a){e(()=>b.reject(a))}},{interval:e,emitOnBegin:!0});return i});return c=i?setTimeout(()=>{o(),clearTimeout(c),n(new iF({id:d}))},i):void 0,await l}class iF extends iw.BaseError{constructor({id:a}){super(`Timed out while waiting for call bundle with id "${a}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}let iG="0x0ba5ed0c6aa8c49038f819e587e2633c4a9f428a",iH="0xf85210B21cC50302F477BA56686d2019dC9b67Ad",iI=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"owner",type:"bytes"}],name:"AlreadyOwner",type:"error"},{inputs:[],name:"Initialized",type:"error"},{inputs:[{name:"owner",type:"bytes"}],name:"InvalidEthereumAddressOwner",type:"error"},{inputs:[{name:"key",type:"uint256"}],name:"InvalidNonceKey",type:"error"},{inputs:[{name:"owner",type:"bytes"}],name:"InvalidOwnerBytesLength",type:"error"},{inputs:[],name:"LastOwner",type:"error"},{inputs:[{name:"index",type:"uint256"}],name:"NoOwnerAtIndex",type:"error"},{inputs:[{name:"ownersRemaining",type:"uint256"}],name:"NotLastOwner",type:"error"},{inputs:[{name:"selector",type:"bytes4"}],name:"SelectorNotAllowed",type:"error"},{inputs:[],name:"Unauthorized",type:"error"},{inputs:[],name:"UnauthorizedCallContext",type:"error"},{inputs:[],name:"UpgradeFailed",type:"error"},{inputs:[{name:"index",type:"uint256"},{name:"expectedOwner",type:"bytes"},{name:"actualOwner",type:"bytes"}],name:"WrongOwnerAtIndex",type:"error"},{anonymous:!1,inputs:[{indexed:!0,name:"index",type:"uint256"},{indexed:!1,name:"owner",type:"bytes"}],name:"AddOwner",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"index",type:"uint256"},{indexed:!1,name:"owner",type:"bytes"}],name:"RemoveOwner",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"implementation",type:"address"}],name:"Upgraded",type:"event"},{stateMutability:"payable",type:"fallback"},{inputs:[],name:"REPLAYABLE_NONCE_KEY",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"owner",type:"address"}],name:"addOwnerAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"x",type:"bytes32"},{name:"y",type:"bytes32"}],name:"addOwnerPublicKey",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"functionSelector",type:"bytes4"}],name:"canSkipChainIdValidation",outputs:[{name:"",type:"bool"}],stateMutability:"pure",type:"function"},{inputs:[],name:"domainSeparator",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"entryPoint",outputs:[{name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{name:"target",type:"address"},{name:"value",type:"uint256"},{name:"data",type:"bytes"}],name:"execute",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{name:"target",type:"address"},{name:"value",type:"uint256"},{name:"data",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"executeBatch",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{name:"calls",type:"bytes[]"}],name:"executeWithoutChainIdValidation",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"}],name:"getUserOpHashWithoutChainId",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"implementation",outputs:[{name:"$",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{name:"owners",type:"bytes[]"}],name:"initialize",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{name:"account",type:"address"}],name:"isOwnerAddress",outputs:[{name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{name:"account",type:"bytes"}],name:"isOwnerBytes",outputs:[{name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{name:"x",type:"bytes32"},{name:"y",type:"bytes32"}],name:"isOwnerPublicKey",outputs:[{name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{name:"hash",type:"bytes32"},{name:"signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"result",type:"bytes4"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextOwnerIndex",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"index",type:"uint256"}],name:"ownerAtIndex",outputs:[{name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[],name:"ownerCount",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"proxiableUUID",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{name:"index",type:"uint256"},{name:"owner",type:"bytes"}],name:"removeLastOwner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"index",type:"uint256"},{name:"owner",type:"bytes"}],name:"removeOwnerAtIndex",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"removedOwnersCount",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"hash",type:"bytes32"}],name:"replaySafeHash",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{name:"newImplementation",type:"address"},{name:"data",type:"bytes"}],name:"upgradeToAndCall",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"},{name:"userOpHash",type:"bytes32"},{name:"missingAccountFunds",type:"uint256"}],name:"validateUserOp",outputs:[{name:"validationData",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}],iJ=[{inputs:[{name:"implementation_",type:"address"}],stateMutability:"payable",type:"constructor"},{inputs:[],name:"OwnerRequired",type:"error"},{inputs:[{name:"owners",type:"bytes[]"},{name:"nonce",type:"uint256"}],name:"createAccount",outputs:[{name:"account",type:"address"}],stateMutability:"payable",type:"function"},{inputs:[{name:"owners",type:"bytes[]"},{name:"nonce",type:"uint256"}],name:"getAddress",outputs:[{name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"implementation",outputs:[{name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"initCodeHash",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"}];function iK(a){var b;if(!Array.isArray(a.params))return null;switch(a.method){case"personal_sign":return a.params[1];case"eth_signTypedData_v4":return a.params[0];case"eth_signTransaction":case"eth_sendTransaction":case"wallet_sendCalls":return null==(b=a.params[0])?void 0:b.from;default:return null}}function iL(a){var b;if(!a||!Array.isArray(a)||!(null==(b=a[0])?void 0:b.chainId)||"string"!=typeof a[0].chainId&&"number"!=typeof a[0].chainId)throw y()}function iM(a,b){let c=Object.assign({},a);if(b&&a.method.startsWith("wallet_")){let a=iv(c,"params.0.capabilities");if(void 0===a&&(a={}),"object"!=typeof a)throw y();a=Object.assign(Object.assign({},b),a),c.params&&Array.isArray(c.params)&&(c.params[0]=Object.assign(Object.assign({},c.params[0]),{capabilities:a}))}return c}async function iN(){var a;let b=null!=(a=an.subAccountsConfig.get())?a:{},c={};if(b.enableAutoSubAccounts){let{account:a}=b.toOwnerAccount?await b.toOwnerAccount():await im();if(!a)throw C("No owner account found");c.addSubAccount={account:{type:"create",keys:[{type:a.address?"address":"webauthn-p256",publicKey:a.address||a.publicKey}]}}}an.subAccountsConfig.set({capabilities:c})}async function iO({client:a,id:b}){var c;let d=await iE(a,{id:b});if("success"===d.status)return null==(c=d.receipts)?void 0:c[0].transactionHash;throw z("failed to send transaction")}function iP({calls:a,from:b,chainId:c,capabilities:d}){let e=am.get().paymasterUrls,f={method:"wallet_sendCalls",params:[{version:"1.0",calls:a,chainId:(0,bS.numberToHex)(c),from:b,atomicRequired:!0,capabilities:d}]};return(null==e?void 0:e[c])&&(f=iM(f,{paymasterService:{url:null==e?void 0:e[c]}})),f}async function iQ(){let a=bI();return await new Promise(b=>{ax({snackbarContext:"sub_account_insufficient_balance"}),a.presentItem({autoExpand:!0,message:"Insufficient spend permission. Choose how to proceed:",menuItems:[{isRed:!1,info:"Create new Spend Permission",svgWidth:"10",svgHeight:"11",path:"",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:()=>{ay({snackbarContext:"sub_account_insufficient_balance",snackbarAction:"create_permission"}),a.clear(),b("update_permission")}},{isRed:!1,info:"Continue in Popup",svgWidth:"10",svgHeight:"11",path:"",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:()=>{ay({snackbarContext:"sub_account_insufficient_balance",snackbarAction:"continue_in_popup"}),a.clear(),b("continue_popup")}},{isRed:!0,info:"Cancel",svgWidth:"10",svgHeight:"11",path:"",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:()=>{ay({snackbarContext:"sub_account_insufficient_balance",snackbarAction:"cancel"}),a.clear(),b("cancel")}}]})})}function iR(a,b){let c=a.filter(a=>a!==b);return[b,...c]}function iS(a,b){return[...a.filter(a=>a!==b),b]}async function iT(){let a=an.spendPermissions.get(),b=an.subAccounts.get(),c=an.account.get().accounts;return c?{accounts:null==c?void 0:c.map(c=>({address:c,capabilities:{subAccounts:b?[b]:void 0,spendPermissions:a.length>0?{permissions:a}:void 0}}))}:null}var g1=g1,iU=a.i(916422);function iV(a){return btoa(String.fromCharCode(...new Uint8Array(a))).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}var iW=a.i(287339),iX=a.i(379256),iY=a.i(259118),iZ=a.i(199188),i$=a.i(891032),i_=a.i(512278),i0=a.i(227076);let i1=[{inputs:[{name:"preOpGas",type:"uint256"},{name:"paid",type:"uint256"},{name:"validAfter",type:"uint48"},{name:"validUntil",type:"uint48"},{name:"targetSuccess",type:"bool"},{name:"targetResult",type:"bytes"}],name:"ExecutionResult",type:"error"},{inputs:[{name:"opIndex",type:"uint256"},{name:"reason",type:"string"}],name:"FailedOp",type:"error"},{inputs:[{name:"sender",type:"address"}],name:"SenderAddressResult",type:"error"},{inputs:[{name:"aggregator",type:"address"}],name:"SignatureValidationFailed",type:"error"},{inputs:[{components:[{name:"preOpGas",type:"uint256"},{name:"prefund",type:"uint256"},{name:"sigFailed",type:"bool"},{name:"validAfter",type:"uint48"},{name:"validUntil",type:"uint48"},{name:"paymasterContext",type:"bytes"}],name:"returnInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"senderInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"factoryInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"paymasterInfo",type:"tuple"}],name:"ValidationResult",type:"error"},{inputs:[{components:[{name:"preOpGas",type:"uint256"},{name:"prefund",type:"uint256"},{name:"sigFailed",type:"bool"},{name:"validAfter",type:"uint48"},{name:"validUntil",type:"uint48"},{name:"paymasterContext",type:"bytes"}],name:"returnInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"senderInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"factoryInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"paymasterInfo",type:"tuple"},{components:[{name:"aggregator",type:"address"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"stakeInfo",type:"tuple"}],name:"aggregatorInfo",type:"tuple"}],name:"ValidationResultWithAggregation",type:"error"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!1,name:"factory",type:"address"},{indexed:!1,name:"paymaster",type:"address"}],name:"AccountDeployed",type:"event"},{anonymous:!1,inputs:[],name:"BeforeExecution",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"totalDeposit",type:"uint256"}],name:"Deposited",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"aggregator",type:"address"}],name:"SignatureAggregatorChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"totalStaked",type:"uint256"},{indexed:!1,name:"unstakeDelaySec",type:"uint256"}],name:"StakeLocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawTime",type:"uint256"}],name:"StakeUnlocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawAddress",type:"address"},{indexed:!1,name:"amount",type:"uint256"}],name:"StakeWithdrawn",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!0,name:"paymaster",type:"address"},{indexed:!1,name:"nonce",type:"uint256"},{indexed:!1,name:"success",type:"bool"},{indexed:!1,name:"actualGasCost",type:"uint256"},{indexed:!1,name:"actualGasUsed",type:"uint256"}],name:"UserOperationEvent",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!1,name:"nonce",type:"uint256"},{indexed:!1,name:"revertReason",type:"bytes"}],name:"UserOperationRevertReason",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawAddress",type:"address"},{indexed:!1,name:"amount",type:"uint256"}],name:"Withdrawn",type:"event"},{inputs:[],name:"SIG_VALIDATION_FAILED",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"initCode",type:"bytes"},{name:"sender",type:"address"},{name:"paymasterAndData",type:"bytes"}],name:"_validateSenderAndPaymaster",outputs:[],stateMutability:"view",type:"function"},{inputs:[{name:"unstakeDelaySec",type:"uint32"}],name:"addStake",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{name:"account",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"account",type:"address"}],name:"depositTo",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{name:"",type:"address"}],name:"deposits",outputs:[{name:"deposit",type:"uint112"},{name:"staked",type:"bool"},{name:"stake",type:"uint112"},{name:"unstakeDelaySec",type:"uint32"},{name:"withdrawTime",type:"uint48"}],stateMutability:"view",type:"function"},{inputs:[{name:"account",type:"address"}],name:"getDepositInfo",outputs:[{components:[{name:"deposit",type:"uint112"},{name:"staked",type:"bool"},{name:"stake",type:"uint112"},{name:"unstakeDelaySec",type:"uint32"},{name:"withdrawTime",type:"uint48"}],name:"info",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{name:"sender",type:"address"},{name:"key",type:"uint192"}],name:"getNonce",outputs:[{name:"nonce",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"initCode",type:"bytes"}],name:"getSenderAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"}],name:"getUserOpHash",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{components:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOps",type:"tuple[]"},{name:"aggregator",type:"address"},{name:"signature",type:"bytes"}],name:"opsPerAggregator",type:"tuple[]"},{name:"beneficiary",type:"address"}],name:"handleAggregatedOps",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"ops",type:"tuple[]"},{name:"beneficiary",type:"address"}],name:"handleOps",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"key",type:"uint192"}],name:"incrementNonce",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"callData",type:"bytes"},{components:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"paymaster",type:"address"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"}],name:"mUserOp",type:"tuple"},{name:"userOpHash",type:"bytes32"},{name:"prefund",type:"uint256"},{name:"contextOffset",type:"uint256"},{name:"preOpGas",type:"uint256"}],name:"opInfo",type:"tuple"},{name:"context",type:"bytes"}],name:"innerHandleOp",outputs:[{name:"actualGasCost",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"",type:"address"},{name:"",type:"uint192"}],name:"nonceSequenceNumber",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"op",type:"tuple"},{name:"target",type:"address"},{name:"targetCallData",type:"bytes"}],name:"simulateHandleOp",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"}],name:"simulateValidation",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"unlockStake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"withdrawAddress",type:"address"}],name:"withdrawStake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"withdrawAddress",type:"address"},{name:"withdrawAmount",type:"uint256"}],name:"withdrawTo",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}];function i2(a,b={}){let{forHash:c}=b,{authorization:d,factory:e,factoryData:f}=a;return c&&("0x7702"===e||"0x7702000000000000000000000000000000000000"===e)?d?(0,cU.concat)([d.address,f??"0x"]):"0x7702000000000000000000000000000000000000":e?(0,cU.concat)([e,f??"0x"]):"0x"}function i3(a,b={}){let{callGasLimit:c,callData:d,maxPriorityFeePerGas:e,maxFeePerGas:f,paymaster:g,paymasterData:h,paymasterPostOpGasLimit:i,paymasterSignature:j,paymasterVerificationGasLimit:k,sender:l,signature:m="0x",verificationGasLimit:n}=a,o=(0,cU.concat)([(0,cO.pad)((0,bS.numberToHex)(n||0n),{size:16}),(0,cO.pad)((0,bS.numberToHex)(c||0n),{size:16})]),p=i2(a,b),q=(0,cU.concat)([(0,cO.pad)((0,bS.numberToHex)(e||0n),{size:16}),(0,cO.pad)((0,bS.numberToHex)(f||0n),{size:16})]),r=a.nonce??0n;return{accountGasLimits:o,callData:d,initCode:p,gasFees:q,nonce:r,paymasterAndData:g?(0,cU.concat)([g,(0,cO.pad)((0,bS.numberToHex)(k||0n),{size:16}),(0,cO.pad)((0,bS.numberToHex)(i||0n),{size:16}),h||"0x",...j?[j]:[]]):"0x",preVerificationGas:a.preVerificationGas??0n,sender:l,signature:m}}let i4={PackedUserOperation:[{type:"address",name:"sender"},{type:"uint256",name:"nonce"},{type:"bytes",name:"initCode"},{type:"bytes",name:"callData"},{type:"bytes32",name:"accountGasLimits"},{type:"uint256",name:"preVerificationGas"},{type:"bytes32",name:"gasFees"},{type:"bytes",name:"paymasterAndData"}]};var i5=a.i(985349),i6=a.i(807574),i7=a.i(664818),i8=a.i(670524);function i9(a){let{address:b,data:c,signature:d,to:e="hex"}=a,f=(0,cU.concatHex)([(0,iX.encodeAbiParameters)([{type:"address"},{type:"bytes"},{type:"bytes"}],[b,c,d]),"0x6492649264926492649264926492649264926492649264926492649264926492"]);return"hex"===e?f:(0,iU.hexToBytes)(f)}async function ja(a){let{extend:b,nonceKeyManager:c=function(a){let{source:b}=a,c=new Map,d=new i8.LruMap(8192),e=new Map,f=({address:a,chainId:b})=>`${a}.${b}`;return{async consume({address:a,chainId:c,client:e}){let g=f({address:a,chainId:c}),h=this.get({address:a,chainId:c,client:e});this.increment({address:a,chainId:c});let i=await h;return await b.set({address:a,chainId:c},i),d.set(g,i),i},async increment({address:a,chainId:b}){let d=f({address:a,chainId:b}),e=c.get(d)??0;c.set(d,e+1)},async get({address:a,chainId:g,client:h}){let i=f({address:a,chainId:g}),j=e.get(i);return j||(j=(async()=>{try{let c=await b.get({address:a,chainId:g,client:h}),e=d.get(i)??0;if(e>0&&c<=e)return e+1;return d.delete(i),c}finally{this.reset({address:a,chainId:g})}})(),e.set(i,j)),(c.get(i)??0)+await j},reset({address:a,chainId:b}){let d=f({address:a,chainId:b});c.delete(d),e.delete(d)}}}({source:{get:()=>Date.now(),set(){}}}),...d}=a,e=!1,f=await a.getAddress();return{...b,...d,address:f,async getFactoryArgs(){return"isDeployed"in this&&await this.isDeployed()?{factory:void 0,factoryData:void 0}:a.getFactoryArgs()},async getNonce(b){let d=b?.key??BigInt(await c.consume({address:f,chainId:a.client.chain.id,client:a.client}));return a.getNonce?await a.getNonce({...b,key:d}):await (0,i7.readContract)(a.client,{abi:(0,i5.parseAbi)(["function getNonce(address, uint192) pure returns (uint256)"]),address:a.entryPoint.address,functionName:"getNonce",args:[f,d]})},isDeployed:async()=>!!e||(e=!!await (0,b_.getAction)(a.client,i6.getCode,"getCode")({address:f})),...a.sign?{async sign(b){let[{factory:c,factoryData:d},e]=await Promise.all([this.getFactoryArgs(),a.sign(b)]);return c&&d?i9({address:c,data:d,signature:e}):e}}:{},async signMessage(b){let[{factory:c,factoryData:d},e]=await Promise.all([this.getFactoryArgs(),a.signMessage(b)]);return c&&d&&"0x7702"!==c?i9({address:c,data:d,signature:e}):e},async signTypedData(b){let[{factory:c,factoryData:d},e]=await Promise.all([this.getFactoryArgs(),a.signTypedData(b)]);return c&&d&&"0x7702"!==c?i9({address:c,data:d,signature:e}):e},type:"smart"}}var jb=function(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c};async function jc(a){let{owner:b,ownerIndex:c,address:d,client:e,factoryData:f}=a,g={abi:i1,address:"0x5FF137D4b0FDCD49DcA30c7CF57E578a026d2789",version:"0.6"},h={abi:iJ,address:iG};return ja({client:e,entryPoint:g,extend:{abi:iI,factory:h},async decodeCalls(a){let b=(0,iW.decodeFunctionData)({abi:iI,data:a});if("execute"===b.functionName)return[{to:b.args[0],value:b.args[1],data:b.args[2]}];if("executeBatch"===b.functionName)return b.args[0].map(a=>({to:a.target,value:a.value,data:a.data}));throw new b1.BaseError(`unable to decode calls for "${b.functionName}"`)},async encodeCalls(a){var b,c;return 1===a.length?(0,cT.encodeFunctionData)({abi:iI,functionName:"execute",args:[a[0].to,null!=(b=a[0].value)?b:BigInt(0),null!=(c=a[0].data)?c:"0x"]}):(0,cT.encodeFunctionData)({abi:iI,functionName:"executeBatch",args:[a.map(a=>{var b,c;return{data:null!=(b=a.data)?b:"0x",target:a.to,value:null!=(c=a.value)?c:BigInt(0)}})]})},getAddress:async()=>d,getFactoryArgs:async()=>({factory:h.address,factoryData:f}),getStubSignature:async()=>"webAuthn"===b.type?"0x0000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000170000000000000000000000000000000000000000000000000000000000000001949fc7c88032b9fcb5f6efc7a7b8c63668eae9871b765e23123bb473ff57aa831a7c0d9276168ebcc29f2875a0239cffdf2a9cd1c2007c5c77c071db9264df1d000000000000000000000000000000000000000000000000000000000000002549960de5880e8c687434170f6476605b8fe4aeb9a28632c7995cf3ba831d97630500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008a7b2274797065223a22776562617574686e2e676574222c226368616c6c656e6765223a2273496a396e6164474850596759334b7156384f7a4a666c726275504b474f716d59576f4d57516869467773222c226f726967696e223a2268747470733a2f2f7369676e2e636f696e626173652e636f6d222c2263726f73734f726967696e223a66616c73657d00000000000000000000000000000000000000000000":jf({ownerIndex:c,signature:"0xfffffffffffffffffffffffffffffff0000000000000000000000000000000007aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa1c"}),async sign(a){let d=je({address:await this.getAddress(),chainId:e.chain.id,hash:a.hash});return jf({ownerIndex:c,signature:await jd({hash:d,owner:b})})},async signMessage(a){let{message:d}=a,f=je({address:await this.getAddress(),chainId:e.chain.id,hash:(0,ic.hashMessage)(d)});return jf({ownerIndex:c,signature:await jd({hash:f,owner:b})})},async signTypedData(a){let{domain:d,types:f,primaryType:g,message:h}=a,i=je({address:await this.getAddress(),chainId:e.chain.id,hash:(0,id.hashTypedData)({domain:d,message:h,primaryType:g,types:f})});return jf({ownerIndex:c,signature:await jd({hash:i,owner:b})})},async signUserOperation(a){let{chainId:d=e.chain.id}=a,f=jb(a,["chainId"]),h=await this.getAddress(),i=function(a){let{chainId:b,entryPointAddress:c,entryPointVersion:d}=a,e=a.userOperation,{authorization:f,callData:g="0x",callGasLimit:h,maxFeePerGas:i,maxPriorityFeePerGas:j,nonce:k,paymasterAndData:l="0x",preVerificationGas:m,sender:n,verificationGasLimit:o}=e;if("0.8"===d||"0.9"===d)return(0,id.hashTypedData)(function(a){let{chainId:b,entryPointAddress:c,userOperation:d}=a;return{types:i4,primaryType:"PackedUserOperation",domain:{name:"ERC4337",version:"1",chainId:b,verifyingContract:c},message:i3(d,{forHash:!0})}}({chainId:b,entryPointAddress:c,userOperation:e}));let p=(()=>{if("0.6"===d){let a=i2({authorization:f,factory:e.initCode?.slice(0,42),factoryData:e.initCode?.slice(42)},{forHash:!0});return(0,iX.encodeAbiParameters)([{type:"address"},{type:"uint256"},{type:"bytes32"},{type:"bytes32"},{type:"uint256"},{type:"uint256"},{type:"uint256"},{type:"uint256"},{type:"uint256"},{type:"bytes32"}],[n,k,(0,it.keccak256)(a),(0,it.keccak256)(g),h,o,m,i,j,(0,it.keccak256)(l)])}if("0.7"===d){let a=i3(e,{forHash:!0});return(0,iX.encodeAbiParameters)([{type:"address"},{type:"uint256"},{type:"bytes32"},{type:"bytes32"},{type:"bytes32"},{type:"uint256"},{type:"bytes32"},{type:"bytes32"}],[a.sender,a.nonce,(0,it.keccak256)(a.initCode),(0,it.keccak256)(a.callData),a.accountGasLimits,a.preVerificationGas,a.gasFees,(0,it.keccak256)(a.paymasterAndData)])}throw Error(`entryPointVersion "${d}" not supported.`)})();return(0,it.keccak256)((0,iX.encodeAbiParameters)([{type:"bytes32"},{type:"address"},{type:"uint256"}],[(0,it.keccak256)(p),c,BigInt(b)]))}({chainId:d,entryPointAddress:g.address,entryPointVersion:g.version,userOperation:Object.assign(Object.assign({},f),{sender:h})});return jf({ownerIndex:c,signature:await jd({hash:i,owner:b})})},userOperation:{async estimateGas(a){var c;if("webAuthn"===b.type)return{verificationGasLimit:BigInt(Math.max(Number(null!=(c=a.verificationGasLimit)?c:BigInt(0)),8e5))}}}})}async function jd({hash:a,owner:b}){if("webAuthn"===b.type){let{signature:c,webauthn:d}=await b.sign({hash:a});return function({webauthn:a,signature:b}){let{r:c,s:d}=gF(b);return(0,iX.encodeAbiParameters)([{components:[{name:"authenticatorData",type:"bytes"},{name:"clientDataJSON",type:"bytes"},{name:"challengeIndex",type:"uint256"},{name:"typeIndex",type:"uint256"},{name:"r",type:"uint256"},{name:"s",type:"uint256"}],type:"tuple"}],[{authenticatorData:a.authenticatorData,clientDataJSON:(0,bS.stringToHex)(a.clientDataJSON),challengeIndex:BigInt(a.challengeIndex),typeIndex:BigInt(a.typeIndex),r:c,s:d}])}({signature:c,webauthn:d})}if(b.sign)return b.sign({hash:a});throw new b1.BaseError("`owner` does not support raw sign.")}function je({address:a,chainId:b,hash:c}){return(0,id.hashTypedData)({domain:{chainId:b,name:"Coinbase Smart Wallet",verifyingContract:a,version:"1"},types:{CoinbaseSmartWalletMessage:[{name:"hash",type:"bytes32"}]},primaryType:"CoinbaseSmartWalletMessage",message:{hash:c}})}function jf(a){let{ownerIndex:b=0}=a,c=(()=>{if(65!==(0,i0.size)(a.signature))return a.signature;let b=function(a){let{r:b,s:c}=i_.secp256k1.Signature.fromCompact(a.slice(2,130)),d=Number(`0x${a.slice(130)}`),[e,f]=(()=>{if(0===d||1===d)return[void 0,d];if(27===d)return[BigInt(d),0];if(28===d)return[BigInt(d),1];throw Error("Invalid yParityOrV value")})();return void 0!==e?{r:(0,bS.numberToHex)(b,{size:32}),s:(0,bS.numberToHex)(c,{size:32}),v:e,yParity:f}:{r:(0,bS.numberToHex)(b,{size:32}),s:(0,bS.numberToHex)(c,{size:32}),yParity:f}}(a.signature);return function(a,b){if(a.length!==b.length)throw new iY.AbiEncodingLengthMismatchError({expectedLength:a.length,givenLength:b.length});let c=[];for(let d=0;d<a.length;d++){let e=a[d],f=b[d];c.push(function a(b,c,d=!1){if("address"===b){if(!(0,dc.isAddress)(c))throw new iZ.InvalidAddressError({address:c});return(0,cO.pad)(c.toLowerCase(),{size:d?32:null})}if("string"===b)return(0,bS.stringToHex)(c);if("bytes"===b)return c;if("bool"===b)return(0,cO.pad)((0,bS.boolToHex)(c),{size:d?32:1});let e=b.match(i$.integerRegex);if(e){let[a,b,f="256"]=e,g=Number.parseInt(f,10)/8;return(0,bS.numberToHex)(c,{size:d?32:g,signed:"int"===b})}let f=b.match(i$.bytesRegex);if(f){let[a,b]=f;if(Number.parseInt(b,10)!==(c.length-2)/2)throw new iY.BytesSizeMismatchError({expectedSize:Number.parseInt(b,10),givenSize:(c.length-2)/2});return(0,cO.pad)(c,{dir:"right",size:d?32:null})}let g=b.match(i$.arrayRegex);if(g&&Array.isArray(c)){let[b,d]=g,e=[];for(let b=0;b<c.length;b++)e.push(a(d,c[b],!0));return 0===e.length?"0x":(0,cU.concatHex)(e)}throw new iY.UnsupportedPackedAbiType(b)}(e,f))}return(0,cU.concatHex)(c)}(["bytes32","bytes32","uint8"],[b.r,b.s,0===b.yParity?27:28])})();return(0,iX.encodeAbiParameters)([{components:[{name:"ownerIndex",type:"uint8"},{name:"signatureData",type:"bytes"}],type:"tuple"}],[{ownerIndex:b,signatureData:c}])}async function jg({address:a,client:b,factory:c,factoryData:d,owner:e,ownerIndex:f,parentAddress:g,attribution:h}){var i;let j={address:a,factory:c,factoryData:d},k=null==(i=b.chain)?void 0:i.id;if(!k)throw z("chainId not found");let l=await jc({owner:e,ownerIndex:null!=f?f:1,address:a,client:b,factoryData:d}),m=async a=>{var c,d,f,i,n;try{switch(a.method){case"wallet_addSubAccount":return j;case"eth_accounts":return[j.address];case"eth_coinbase":return j.address;case"net_version":return k.toString();case"eth_chainId":return(0,bS.numberToHex)(k);case"eth_sendTransaction":{db(a.params);let e=a.params[0];da(e.to,y("to is required"));let g={to:e.to,data:_(null!=(c=e.data)?c:"0x",!0),value:_(null!=(d=e.value)?d:"0x",!0),from:null!=(f=e.from)?f:j.address},h=iP({calls:[g],chainId:k,from:g.from}),i=await m(h);return iO({client:b,id:i})}case"wallet_sendCalls":{let b;db(a.params);let c=iv(a.params[0],"chainId");if(!c)throw y("chainId is required");if(!(0,dd.isHex)(c))throw y("chainId must be a hex encoded integer");if(!a.params[0])throw y("params are required");if(!("calls"in a.params[0]))throw y("calls are required");let d={method:"wallet_prepareCalls",params:[{version:"1.0",calls:a.params[0].calls,chainId:c,from:j.address,capabilities:"capabilities"in a.params[0]?a.params[0].capabilities:{}}]};g&&(d=iM(d,{funding:[{type:"spendPermission",data:{autoApply:!0,sources:[g],preference:"PREFER_DIRECT_BALANCE"}}]}));let f=await m(d),h=await (null==(i=e.sign)?void 0:i.call(e,{hash:(0,bQ.hexToString)(f.signatureRequest.hash)}));if(!h)throw z("signature not found");return b=(0,dd.isHex)(h)?{type:"secp256k1",data:{address:e.address,signature:h}}:{type:"webauthn",data:{signature:JSON.stringify(function({webauthn:a,signature:b,id:c}){var d,e;let f,g,h,i,j,k,l=g1.fromHex(b);return{id:c,rawId:iV((0,iU.stringToBytes)(c)),response:{authenticatorData:iV((0,iU.hexToBytes)(a.authenticatorData)),clientDataJSON:iV((0,iU.stringToBytes)(a.clientDataJSON)),signature:iV((d=l.r,e=l.s,f=(0,iU.hexToBytes)((0,iB.trim)((0,bS.numberToHex)(d))),g=(0,iU.hexToBytes)((0,iB.trim)((0,bS.numberToHex)(e))),h=f.length,i=g.length,j=h+i+4,(k=new Uint8Array(j+2))[0]=48,k[1]=j,k[2]=2,k[3]=h,k.set(f,4),k[h+4]=2,k[h+5]=i,k.set(g,h+6),k))},type:JSON.parse(a.clientDataJSON).type}}(Object.assign({id:null!=(n=e.id)?n:"1"},h))),publicKey:e.publicKey}},(await m({method:"wallet_sendPreparedCalls",params:[{version:"1.0",type:f.type,data:f.userOp,chainId:f.chainId,signature:b}]}))[0]}case"wallet_sendPreparedCalls":{db(a.params);let c=iv(a.params[0],"chainId");if(!c)throw y("chainId is required");if(!(0,dd.isHex)(c))throw y("chainId must be a hex encoded integer");return await b.request({method:"wallet_sendPreparedCalls",params:a.params})}case"wallet_prepareCalls":{db(a.params);let c=iv(a.params[0],"chainId");if(!c)throw y("chainId is required");if(!(0,dd.isHex)(c))throw y("chainId must be a hex encoded integer");if(!a.params[0])throw y("params are required");if(!iv(a.params[0],"calls"))throw y("calls are required");let d=a.params[0];return!h||!d.capabilities||"attribution"in d.capabilities||(d.capabilities.attribution=h),await b.request({method:"wallet_prepareCalls",params:[Object.assign(Object.assign({},a.params[0]),{chainId:c})]})}case"personal_sign":{if(db(a.params),!(0,dd.isHex)(a.params[0]))throw y("message must be a hex encoded string");let b=(0,bQ.hexToString)(a.params[0]);return l.signMessage({message:b})}case"eth_signTypedData_v4":{db(a.params);let b="string"==typeof a.params[1]?JSON.parse(a.params[1]):a.params[1];return l.signTypedData(b)}default:throw A()}}catch(a){if(M(a)){let b=function(a){try{let b=JSON.parse(a.details);return new J(b.code,b.message,b.data)}catch(a){return null}}(a);if(b)throw b}throw a}};return{request:m}}var jh=a.i(135278);async function ji({address:a,client:b,publicKey:c,factory:d,factoryData:e}){if(!await (0,i6.getCode)(b,{address:a})&&d&&e){if((0,jh.getAddress)(d)!==(0,jh.getAddress)(iG))throw z("unknown factory address");let a=(0,iW.decodeFunctionData)({abi:iJ,data:e});if("createAccount"!==a.functionName)throw z("unknown factory function");let[b]=a.args;return b.findIndex(a=>a.toLowerCase()===jj(c).toLowerCase())}let f=await (0,i7.readContract)(b,{address:a,abi:iI,functionName:"ownerCount"});for(let d=Number(f)-1;d>=0;d--){let e=await (0,i7.readContract)(b,{address:a,abi:iI,functionName:"ownerAtIndex",args:[BigInt(d)]}),f=jj(c);if(e.toLowerCase()===f.toLowerCase())return d}return -1}function jj(a){return(0,dc.isAddress)(a)?(0,cO.pad)(a):a}var jk=a.i(860006);async function jl(){let a=bI();return new Promise(b=>{ax({snackbarContext:"sub_account_add_owner"}),a.presentItem({autoExpand:!0,message:"App requires a signer update",menuItems:[{isRed:!1,info:"Confirm",svgWidth:"10",svgHeight:"11",path:"",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:()=>{ay({snackbarContext:"sub_account_add_owner",snackbarAction:"confirm"}),a.clear(),b("authenticate")}},{isRed:!0,info:"Cancel",svgWidth:"10",svgHeight:"11",path:"",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:()=>{ay({snackbarContext:"sub_account_add_owner",snackbarAction:"cancel"}),a.clear(),b("cancel")}}]})})}async function jm({ownerAccount:a,globalAccountRequest:b}){var c,d;let e=an.account.get(),f=an.subAccounts.get(),g=null==(c=e.accounts)?void 0:c.find(a=>a.toLowerCase()!==(null==f?void 0:f.address.toLowerCase()));da(g,C("no global account")),da(null==(d=e.chain)?void 0:d.id,C("no chain id")),da(null==f?void 0:f.address,C("no sub account"));let h=[];if("local"===a.type&&a.address&&h.push({to:f.address,data:(0,cT.encodeFunctionData)({abi:iI,functionName:"addOwnerAddress",args:[a.address]}),value:(0,bS.toHex)(0)}),a.publicKey){let[b,c]=(0,jk.decodeAbiParameters)([{type:"bytes32"},{type:"bytes32"}],a.publicKey);h.push({to:f.address,data:(0,cT.encodeFunctionData)({abi:iI,functionName:"addOwnerPublicKey",args:[b,c]}),value:(0,bS.toHex)(0)})}let i={method:"wallet_sendCalls",params:[{version:"1",calls:h,chainId:(0,bS.numberToHex)(84532),from:g}]};if("cancel"===await jl())throw C("user cancelled");let j=await b(i),k=c9(e.chain.id);if(da(k,z(`client not found for chainId ${e.chain.id}`)),"success"!==(await iE(k,{id:j})).status)throw z("add owner call failed");let l=await ji({address:f.address,publicKey:"local"===a.type&&a.address?a.address:a.publicKey,client:k});if(-1===l)throw z("failed to find owner index");return l}var jn=a.i(476613);async function jo({errorData:a,globalAccountAddress:b,subAccountAddress:c,client:d,request:e,subAccountRequest:f,globalAccountRequest:g}){var h,i,j;let k,l,m=null==(h=d.chain)?void 0:h.id;da(m,z("invalid chainId"));let n=function({errorData:a,sourceAddress:b}){var c;let d=[];for(let[e,{amount:f,sources:g}]of Object.entries(null!=(c=null==a?void 0:a.required)?c:{})){if(0===g.filter(a=>(0,bQ.hexToBigInt)(a.balance)>=(0,bQ.hexToBigInt)(f)&&a.address.toLowerCase()===(null==b?void 0:b.toLowerCase())).length)throw Error("Source address has insufficient balance for a token");d.push({token:e,requiredAmount:(0,bQ.hexToBigInt)(f)})}return d}({errorData:a,sourceAddress:b}),o=await iQ();if("cancel"===o)throw Error("User cancelled funding");if("update_permission"===o){if(1===n.length){let a=n[0],d=function({spendPermission:a,chainId:b}){return{domain:{name:"Spend Permission Manager",version:"1",chainId:b,verifyingContract:iH},types:{SpendPermission:[{name:"account",type:"address"},{name:"spender",type:"address"},{name:"token",type:"address"},{name:"allowance",type:"uint160"},{name:"period",type:"uint48"},{name:"start",type:"uint48"},{name:"end",type:"uint48"},{name:"salt",type:"uint256"},{name:"extraData",type:"bytes"}]},primaryType:"SpendPermission",message:{account:a.account,spender:a.spender,token:a.token,allowance:a.allowance,period:a.period,start:a.start,end:a.end,salt:a.salt,extraData:a.extraData}}}({spendPermission:{token:a.token,allowance:(0,bS.numberToHex)(a.requiredAmount*BigInt(3)),period:86400,account:b,spender:c,start:0,end:0xffffffffffff,salt:(0,bS.numberToHex)(BigInt(Math.floor(Math.random()*Number.MAX_SAFE_INTEGER))),extraData:"0x"},chainId:m});k={method:"eth_signTypedData_v4",params:[b,d]}}else{let a=function({spendPermissionBatch:a,chainId:b}){return{domain:{name:"Spend Permission Manager",version:"1",chainId:b,verifyingContract:iH},types:{SpendPermissionBatch:[{name:"account",type:"address"},{name:"period",type:"uint48"},{name:"start",type:"uint48"},{name:"end",type:"uint48"},{name:"permissions",type:"PermissionDetails[]"}],PermissionDetails:[{name:"spender",type:"address"},{name:"token",type:"address"},{name:"allowance",type:"uint160"},{name:"salt",type:"uint256"},{name:"extraData",type:"bytes"}]},primaryType:"SpendPermissionBatch",message:{account:a.account,period:a.period,start:a.start,end:a.end,permissions:a.permissions.map(a=>({spender:a.spender,token:a.token,allowance:a.allowance,salt:a.salt,extraData:a.extraData}))}}}({spendPermissionBatch:{account:b,period:86400,start:0,end:0xffffffffffff,permissions:n.map(a=>({token:a.token,allowance:(0,bS.numberToHex)(a.requiredAmount*BigInt(3)),period:86400,account:b,spender:c,salt:"0x0",extraData:"0x"}))},chainId:m});k={method:"eth_signTypedData_v4",params:[b,a]}}try{await g(k)}catch(a){throw console.error(a),Error("User denied spend permission request")}return f(e)}let p=n.map(a=>"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee"===a.token.toLowerCase()?{to:c,value:(0,bS.numberToHex)(a.requiredAmount),data:"0x"}:{to:a.token,value:"0x0",data:(0,cT.encodeFunctionData)({abi:jn.erc20Abi,functionName:"transfer",args:[c,a.requiredAmount]})});if("wallet_sendCalls"===e.method&&"object"==typeof(i=e.params)&&null!==i&&"calls"in i)l=e.params[0];else if("eth_sendTransaction"===e.method&&Array.isArray(j=e.params)&&1===j.length&&"object"==typeof j[0]&&null!==j[0]&&"to"in j[0])l=iP({calls:[e.params[0]],chainId:m,from:e.params[0].from}).params[0];else throw Error("Could not get original call");let q=[...p,{data:(0,cT.encodeFunctionData)({abi:iI,functionName:"executeBatch",args:[l.calls.map(a=>{var b,c;return{target:a.to,value:(0,bQ.hexToBigInt)(null!=(b=a.value)?b:"0x0"),data:null!=(c=a.data)?c:"0x"}})]}),to:c,value:"0x0"}],r=await g({method:"wallet_sendCalls",params:[Object.assign(Object.assign({},l),{calls:q,from:b})]});return"eth_sendTransaction"===e.method?iO({client:d,id:r}):r}class jp{constructor(a){var b,c,d,e;this.communicator=a.communicator,this.callback=a.callback,this.keyManager=new is;const{account:f,chains:g}=an.getState();this.accounts=null!=(b=f.accounts)?b:[],this.chain=null!=(c=f.chain)?c:{id:null!=(e=null==(d=a.metadata.appChainIds)?void 0:d[0])?e:1},g&&c8(g)}async handshake(a){var b,c,d;let e=bP(a);(({method:a,correlationId:b})=>{var c;aw("scw_signer.handshake.started",{action:aJ.unknown,componentType:aI.unknown,method:a,correlationId:b,enableAutoSubAccounts:null==(c=an.subAccountsConfig.get())?void 0:c.enableAutoSubAccounts},aK.high)})({method:a.method,correlationId:e});try{await (null==(c=(b=this.communicator).waitForPopupLoaded)?void 0:c.call(b));let f=await this.createRequestMessage({handshake:{method:a.method,params:null!=(d=a.params)?d:[]}},e),g=await this.communicator.postRequestAndWaitForResponse(f);if("failure"in g.content)throw g.content.failure;let h=await dl("public",g.sender);await this.keyManager.setPeerPublicKey(h);let i=await this.decryptResponseMessage(g);this.handleResponse(a,i),(({method:a,correlationId:b})=>{var c;aw("scw_signer.handshake.completed",{action:aJ.unknown,componentType:aI.unknown,method:a,correlationId:b,enableAutoSubAccounts:null==(c=an.subAccountsConfig.get())?void 0:c.enableAutoSubAccounts},aK.high)})({method:a.method,correlationId:e})}catch(b){throw(({method:a,correlationId:b,errorMessage:c})=>{var d;aw("scw_signer.handshake.error",{action:aJ.error,componentType:aI.unknown,method:a,correlationId:b,errorMessage:c,enableAutoSubAccounts:null==(d=an.subAccountsConfig.get())?void 0:d.enableAutoSubAccounts},aK.high)})({method:a.method,correlationId:e,errorMessage:bT(b)}),b}}async request(a){let b=bP(a);(({method:a,correlationId:b})=>{var c;aw("scw_signer.request.started",{action:aJ.unknown,componentType:aI.unknown,method:a,correlationId:b,enableAutoSubAccounts:null==(c=an.subAccountsConfig.get())?void 0:c.enableAutoSubAccounts},aK.high)})({method:a.method,correlationId:b});try{let c=await this._request(a);return(({method:a,correlationId:b})=>{var c;aw("scw_signer.request.completed",{action:aJ.unknown,componentType:aI.unknown,method:a,correlationId:b,enableAutoSubAccounts:null==(c=an.subAccountsConfig.get())?void 0:c.enableAutoSubAccounts},aK.high)})({method:a.method,correlationId:b}),c}catch(c){throw(({method:a,correlationId:b,errorMessage:c})=>{var d;aw("scw_signer.request.error",{action:aJ.error,componentType:aI.unknown,method:a,correlationId:b,errorMessage:c,enableAutoSubAccounts:null==(d=an.subAccountsConfig.get())?void 0:d.enableAutoSubAccounts},aK.high)})({method:a.method,correlationId:b,errorMessage:bT(c)}),c}}async _request(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o;if(0===this.accounts.length)switch(a.method){case"eth_requestAccounts":return await (null==(c=(b=this.communicator).waitForPopupLoaded)?void 0:c.call(b)),await iN(),await this.request({method:"wallet_connect",params:[{version:"1",capabilities:Object.assign({},null!=(e=null==(d=an.subAccountsConfig.get())?void 0:d.capabilities)?e:{})}]}),this.accounts;case"wallet_switchEthereumChain":iL(a.params),this.chain.id=Number(a.params[0].chainId);return;case"wallet_connect":{await (null==(g=(f=this.communicator).waitForPopupLoaded)?void 0:g.call(f)),await iN();let b={};(function(a,b){var c;if(!Array.isArray(null==a?void 0:a.params))return!1;let d=null==(c=a.params[0])?void 0:c.capabilities;return!!d&&"object"==typeof d&&b in d})(a,"addSubAccount")&&(b=null!=(i=null==(h=an.subAccountsConfig.get())?void 0:h.capabilities)?i:{});let c=iM(a,b);return this.sendRequestToPopup(c)}case"wallet_sendCalls":case"wallet_sign":return this.sendRequestToPopup(a);default:throw C()}if(this.shouldRequestUseSubAccountSigner(a)){let b=bP(a);(({method:a,correlationId:b})=>{var c;aw("scw_sub_account.request.started",{action:aJ.unknown,componentType:aI.unknown,method:a,correlationId:b,enableAutoSubAccounts:null==(c=an.subAccountsConfig.get())?void 0:c.enableAutoSubAccounts},aK.high)})({method:a.method,correlationId:b});try{let c=await this.sendRequestToSubAccountSigner(a);return(({method:a,correlationId:b})=>{var c;aw("scw_sub_account.request.completed",{action:aJ.unknown,componentType:aI.unknown,method:a,correlationId:b,enableAutoSubAccounts:null==(c=an.subAccountsConfig.get())?void 0:c.enableAutoSubAccounts},aK.high)})({method:a.method,correlationId:b}),c}catch(c){throw(({method:a,correlationId:b,errorMessage:c})=>{var d;aw("scw_sub_account.request.error",{action:aJ.error,componentType:aI.unknown,method:a,correlationId:b,errorMessage:c,enableAutoSubAccounts:null==(d=an.subAccountsConfig.get())?void 0:d.enableAutoSubAccounts},aK.high)})({method:a.method,correlationId:b,errorMessage:bT(c)}),c}}switch(a.method){case"eth_requestAccounts":case"eth_accounts":{let a=an.subAccounts.get(),b=an.subAccountsConfig.get();return(null==a?void 0:a.address)&&(this.accounts=(null==b?void 0:b.enableAutoSubAccounts)?iR(this.accounts,a.address):iS(this.accounts,a.address)),null==(j=this.callback)||j.call(this,"connect",{chainId:(0,bS.numberToHex)(this.chain.id)}),this.accounts}case"eth_coinbase":return this.accounts[0];case"net_version":return this.chain.id;case"eth_chainId":return(0,bS.numberToHex)(this.chain.id);case"wallet_getCapabilities":return this.handleGetCapabilitiesRequest(a);case"wallet_switchEthereumChain":return this.handleSwitchChainRequest(a);case"eth_ecRecover":case"personal_sign":case"wallet_sign":case"personal_ecRecover":case"eth_signTransaction":case"eth_sendTransaction":case"eth_signTypedData_v1":case"eth_signTypedData_v3":case"eth_signTypedData_v4":case"eth_signTypedData":case"wallet_addEthereumChain":case"wallet_watchAsset":case"wallet_sendCalls":case"wallet_showCallsStatus":case"wallet_grantPermissions":return this.sendRequestToPopup(a);case"wallet_connect":{let b=await iT();if(b)return b;await (null==(l=(k=this.communicator).waitForPopupLoaded)?void 0:l.call(k)),await iN();let c=an.subAccountsConfig.get(),d=iM(a,null!=(m=null==c?void 0:c.capabilities)?m:{});return null==(n=this.callback)||n.call(this,"connect",{chainId:(0,bS.numberToHex)(this.chain.id)}),this.sendRequestToPopup(d)}case"wallet_getSubAccounts":{let b=an.subAccounts.get();if(null==b?void 0:b.address)return{subAccounts:[b]};if(!this.chain.rpcUrl)throw z("No RPC URL set for chain");let c=await aq(a,this.chain.rpcUrl);if(db(c.subAccounts,"subAccounts"),c.subAccounts.length>0){de(c.subAccounts[0]);let a=c.subAccounts[0];an.subAccounts.set({address:a.address,factory:a.factory,factoryData:a.factoryData})}return c}case"wallet_addSubAccount":return this.addSubAccount(a);case"coinbase_fetchPermissions":{!function(a){if("coinbase_fetchPermissions"!==a.method||void 0!==a.params){if("coinbase_fetchPermissions"===a.method&&Array.isArray(a.params)&&1===a.params.length&&"object"==typeof a.params[0]){if("string"!=typeof a.params[0].account||!a.params[0].chainId.startsWith("0x"))throw y("FetchPermissions - Invalid params: params[0].account must be a hex string");if("string"!=typeof a.params[0].chainId||!a.params[0].chainId.startsWith("0x"))throw y("FetchPermissions - Invalid params: params[0].chainId must be a hex string");if("string"!=typeof a.params[0].spender||!a.params[0].spender.startsWith("0x"))throw y("FetchPermissions - Invalid params: params[0].spender must be a hex string");return}throw y()}}(a);let b=function(a){var b,c,d;if(void 0!==a.params)return a;let e=null==(b=an.getState().account.accounts)?void 0:b[0],f=null==(c=an.getState().account.chain)?void 0:c.id,g=null==(d=an.getState().subAccount)?void 0:d.address;if(!e||!g||!f)throw y("FetchPermissions - one or more of account, sub account, or chain id is missing, connect to sub account via wallet_connect first");return{method:"coinbase_fetchPermissions",params:[{account:e,chainId:(0,bS.numberToHex)(f),spender:g}]}}(a),c=await aq(b,au),d=(0,bQ.hexToNumber)(null==(o=b.params)?void 0:o[0].chainId);return an.spendPermissions.set(c.permissions.map(a=>Object.assign(Object.assign({},a),{chainId:d}))),c}default:if(!this.chain.rpcUrl)throw z("No RPC URL set for chain");return aq(a,this.chain.rpcUrl)}}async sendRequestToPopup(a){var b,c;await (null==(c=(b=this.communicator).waitForPopupLoaded)?void 0:c.call(b));let d=await this.sendEncryptedRequest(a),e=await this.decryptResponseMessage(d);return this.handleResponse(a,e)}async handleResponse(a,b){var c,d,e,f,g;let h=b.result;if("error"in h)throw h.error;switch(a.method){case"eth_requestAccounts":{let a=h.value;this.accounts=a,an.account.set({accounts:a,chain:this.chain}),null==(c=this.callback)||c.call(this,"accountsChanged",a);break}case"wallet_connect":{let a=h.value,b=a.accounts.map(a=>a.address);this.accounts=b,an.account.set({accounts:b});let c=a.accounts.at(0),g=null==c?void 0:c.capabilities;if(null==g?void 0:g.subAccounts){let a=null==g?void 0:g.subAccounts;db(a,"subAccounts"),de(a[0]),an.subAccounts.set({address:a[0].address,factory:a[0].factory,factoryData:a[0].factoryData})}let i=[this.accounts[0]],j=an.subAccounts.get(),k=an.subAccountsConfig.get();(null==j?void 0:j.address)&&(this.accounts=(null==k?void 0:k.enableAutoSubAccounts)?iR(this.accounts,j.address):iS(this.accounts,j.address));let l=null==(e=null==(d=null==a?void 0:a.accounts)?void 0:d[0].capabilities)?void 0:e.spendPermissions;l&&"permissions"in l&&an.spendPermissions.set(null==l?void 0:l.permissions),null==(f=this.callback)||f.call(this,"accountsChanged",i);break}case"wallet_addSubAccount":{de(h.value);let a=h.value;an.subAccounts.set(a);let b=an.subAccountsConfig.get();this.accounts=(null==b?void 0:b.enableAutoSubAccounts)?iR(this.accounts,a.address):iS(this.accounts,a.address),null==(g=this.callback)||g.call(this,"accountsChanged",this.accounts)}}return h.value}async cleanup(){var a,b;let c=an.config.get().metadata;await this.keyManager.clear(),an.account.clear(),an.subAccounts.clear(),an.spendPermissions.clear(),an.chains.clear(),this.accounts=[],this.chain={id:null!=(b=null==(a=null==c?void 0:c.appChainIds)?void 0:a[0])?b:1}}async handleSwitchChainRequest(a){iL(a.params);let b=ad(a.params[0].chainId);if(this.updateChain(b))return null;let c=await this.sendRequestToPopup(a);return null===c&&this.updateChain(b),c}async handleGetCapabilitiesRequest(a){var b=a.params;if(!b||!Array.isArray(b)||1!==b.length&&2!==b.length||"string"!=typeof b[0]||!(0,dc.isAddress)(b[0]))throw y();if(2===b.length){if(!Array.isArray(b[1]))throw y();for(let a of b[1])if("string"!=typeof a||!a.startsWith("0x"))throw y()}let c=a.params[0],d=a.params[1];if(!this.accounts.some(a=>(0,bR.isAddressEqual)(a,c)))throw C("no active account found when getting capabilities");let e=an.getState().account.capabilities;if(!e)return{};if(!d||0===d.length)return e;let f=new Set(d.map(a=>(0,bQ.hexToNumber)(a)));return Object.fromEntries(Object.entries(e).filter(([a])=>{try{let b=(0,bQ.hexToNumber)(a);return f.has(b)}catch(a){return!1}}))}async sendEncryptedRequest(a){let b=await this.keyManager.getSharedSecret();if(!b)throw C("No shared secret found when encrypting request");let c=await dm({action:a,chainId:this.chain.id},b),d=bP(a),e=await this.createRequestMessage({encrypted:c},d);return this.communicator.postRequestAndWaitForResponse(e)}async createRequestMessage(a,b){let c=await dk("public",await this.keyManager.getOwnPublicKey());return{id:crypto.randomUUID(),correlationId:b,sender:c,content:a,timestamp:new Date}}async decryptResponseMessage(a){var b,c,d;let e=a.content;if("failure"in e)throw e.failure;let f=await this.keyManager.getSharedSecret();if(!f)throw C("Invalid session: no shared secret found when decrypting response");let g=await dn(e.encrypted,f),h=null==(b=g.data)?void 0:b.chains;if(h){let a=null==(c=g.data)?void 0:c.nativeCurrencies,b=Object.entries(h).map(([b,c])=>{let d=null==a?void 0:a[Number(b)];return Object.assign({id:Number(b),rpcUrl:c},d?{nativeCurrency:d}:{})});an.chains.set(b),this.updateChain(this.chain.id,b),c8(b)}let i=null==(d=g.data)?void 0:d.capabilities;return i&&an.account.set({capabilities:i}),g}updateChain(a,b){var c;let d=an.getState(),e=null!=b?b:d.chains,f=null==e?void 0:e.find(b=>b.id===a);return!!f&&(f!==this.chain&&(this.chain=f,an.account.set({chain:f}),null==(c=this.callback)||c.call(this,"chainChanged",W(f.id))),!0)}async addSubAccount(a){var b,c,d,e;let f=an.getState().subAccount,g=an.subAccountsConfig.get();if(null==f?void 0:f.address)return this.accounts=(null==g?void 0:g.enableAutoSubAccounts)?iR(this.accounts,f.address):iS(this.accounts,f.address),null==(b=this.callback)||b.call(this,"accountsChanged",this.accounts),f;if(await (null==(d=(c=this.communicator).waitForPopupLoaded)?void 0:d.call(c)),Array.isArray(a.params)&&a.params.length>0&&a.params[0].account&&"create"===a.params[0].account.type){let b;if(a.params[0].account.keys&&a.params[0].account.keys.length>0)b=a.params[0].account.keys;else{let a=null!=(e=an.subAccountsConfig.get())?e:{},{account:c}=a.toOwnerAccount?await a.toOwnerAccount():await im();if(!c)throw C("could not get subaccount owner account when adding sub account");b=[{type:c.address?"address":"webauthn-p256",publicKey:c.address||c.publicKey}]}a.params[0].account.keys=b}let h=await this.sendRequestToPopup(a);return de(h),h}shouldRequestUseSubAccountSigner(a){let b=iK(a),c=an.subAccounts.get();return!!b&&b.toLowerCase()===(null==c?void 0:c.address.toLowerCase())}async sendRequestToSubAccountSigner(a){var b;let c=an.subAccounts.get(),d=an.subAccountsConfig.get(),e=an.config.get();da(null==c?void 0:c.address,C("no active sub account when sending request to sub account signer"));let f=(null==d?void 0:d.toOwnerAccount)?await d.toOwnerAccount():await im();da(null==f?void 0:f.account,C("no active sub account owner when sending request to sub account signer")),void 0===iK(a)&&(a=function(a,b){if(!Array.isArray(a.params))throw y();let c=[...a.params];switch(a.method){case"eth_signTransaction":case"eth_sendTransaction":case"wallet_sendCalls":c[0].from=b;break;case"eth_signTypedData_v4":c[0]=b;break;case"personal_sign":c[1]=b}return Object.assign(Object.assign({},a),{params:c})}(a,c.address));let g=c9(this.chain.id);da(g,z(`client not found for chainId ${this.chain.id} when sending request to sub account signer`));let h=this.accounts.find(a=>a.toLowerCase()!==c.address.toLowerCase());da(h,C("no global account found when sending request to sub account signer"));let i=function({attribution:a,dappOrigin:b}){if(a){if("auto"in a&&a.auto&&b)return(0,iu.slice)((0,it.keccak256)((0,bS.toHex)(b)),0,16);if("dataSuffix"in a)return a.dataSuffix}}({attribution:null==(b=e.preference)?void 0:b.attribution,dappOrigin:window.location.origin}),j="local"===f.account.type?f.account.address:f.account.publicKey,k=await ji({address:c.address,factory:c.factory,factoryData:c.factoryData,publicKey:j,client:g});if(-1===k){let b=bP(a);(({method:a,correlationId:b})=>{var c;aw("scw_sub_account.add_owner.started",{action:aJ.unknown,componentType:aI.unknown,method:a,correlationId:b,enableAutoSubAccounts:null==(c=an.subAccountsConfig.get())?void 0:c.enableAutoSubAccounts},aK.high)})({method:a.method,correlationId:b});try{k=await jm({ownerAccount:f.account,globalAccountRequest:this.sendRequestToPopup.bind(this)}),(({method:a,correlationId:b})=>{var c;aw("scw_sub_account.add_owner.completed",{action:aJ.unknown,componentType:aI.unknown,method:a,correlationId:b,enableAutoSubAccounts:null==(c=an.subAccountsConfig.get())?void 0:c.enableAutoSubAccounts},aK.high)})({method:a.method,correlationId:b})}catch(c){return(({method:a,correlationId:b,errorMessage:c})=>{var d;aw("scw_sub_account.add_owner.error",{action:aJ.error,componentType:aI.unknown,method:a,correlationId:b,errorMessage:c,enableAutoSubAccounts:null==(d=an.subAccountsConfig.get())?void 0:d.enableAutoSubAccounts},aK.high)})({method:a.method,correlationId:b,errorMessage:bT(c)}),C("failed to add sub account owner when sending request to sub account signer")}}let{request:l}=await jg({address:c.address,owner:f.account,client:g,factory:c.factory,factoryData:c.factoryData,parentAddress:h,attribution:i?{suffix:i}:void 0,ownerIndex:k});try{return await l(a)}catch(e){let b;if(M(e))b=JSON.parse(e.details);else if(L(e))b=e;else throw e;if(!(L(b)&&b.data)||!b.data)throw e;let d=bP(a);(({method:a,correlationId:b})=>{var c;aw("scw_sub_account.insufficient_balance.error_handling.started",{action:aJ.unknown,componentType:aI.unknown,method:a,correlationId:b,enableAutoSubAccounts:null==(c=an.subAccountsConfig.get())?void 0:c.enableAutoSubAccounts},aK.high)})({method:a.method,correlationId:d});try{let e=await jo({errorData:b.data,globalAccountAddress:h,subAccountAddress:c.address,client:g,request:a,subAccountRequest:l,globalAccountRequest:this.request.bind(this)});return(({method:a,correlationId:b})=>{var c;aw("scw_sub_account.insufficient_balance.error_handling.completed",{action:aJ.unknown,componentType:aI.unknown,method:a,correlationId:b,enableAutoSubAccounts:null==(c=an.subAccountsConfig.get())?void 0:c.enableAutoSubAccounts},aK.high)})({method:a.method,correlationId:d}),e}catch(b){throw console.error(b),(({method:a,correlationId:b,errorMessage:c})=>{var d;aw("scw_sub_account.insufficient_balance.error_handling.error",{action:aJ.error,componentType:aI.unknown,method:a,correlationId:b,errorMessage:c,enableAutoSubAccounts:null==(d=an.subAccountsConfig.get())?void 0:d.enableAutoSubAccounts},aK.high)})({method:a.method,correlationId:d,errorMessage:bT(b)}),e}}}}let jq=()=>{aw("walletlink_signer.walletlink_connection.connection_failed",{action:aJ.measurement,componentType:aI.unknown},aK.high)};var jr=a.i(332603);let js="Addresses";class jt{constructor(a){this.secret=a}async encrypt(a){let b=this.secret;if(64!==b.length)throw Error("secret must be 256 bits");let c=crypto.getRandomValues(new Uint8Array(12)),d=await crypto.subtle.importKey("raw",S(b),{name:"aes-gcm"},!1,["encrypt","decrypt"]),e=new TextEncoder,f=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:c},d,e.encode(a)),g=f.slice(f.byteLength-16),h=f.slice(0,f.byteLength-16),i=new Uint8Array(g),j=new Uint8Array(h);return R(new Uint8Array([...c,...i,...j]))}async decrypt(a){let b=this.secret;if(64!==b.length)throw Error("secret must be 256 bits");return new Promise((c,d)=>{(async()=>{let e=await crypto.subtle.importKey("raw",S(b),{name:"aes-gcm"},!1,["encrypt","decrypt"]),f=S(a),g=f.slice(0,12),h=f.slice(12,28),i=new Uint8Array([...f.slice(28),...h]),j={name:"AES-GCM",iv:new Uint8Array(g)};try{let a=await window.crypto.subtle.decrypt(j,e,i),b=new TextDecoder;c(b.decode(a))}catch(a){d(a)}})()})}}class ju{constructor(a,b,c){this.linkAPIUrl=a,this.sessionId=b;const d=`${b}:${c}`;this.auth=`Basic ${btoa(d)}`}async markUnseenEventsAsSeen(a){return Promise.all(a.map(a=>fetch(`${this.linkAPIUrl}/events/${a.eventId}/seen`,{method:"POST",headers:{Authorization:this.auth}}))).catch(a=>console.error("Unable to mark events as seen:",a))}async fetchUnseenEvents(){var a;let b=await fetch(`${this.linkAPIUrl}/events?unseen=true`,{headers:{Authorization:this.auth}});if(b.ok){let{events:c,error:d}=await b.json();if(d)throw Error(`Check unseen events failed: ${d}`);let e=null!=(a=null==c?void 0:c.filter(a=>"Web3Response"===a.event).map(a=>({type:"Event",sessionId:this.sessionId,eventId:a.id,event:a.event,data:a.data})))?a:[];return this.markUnseenEventsAsSeen(e),e}throw Error(`Check unseen events failed: ${b.status}`)}}(aC=aH||(aH={}))[aC.DISCONNECTED=0]="DISCONNECTED",aC[aC.CONNECTING=1]="CONNECTING",aC[aC.CONNECTED=2]="CONNECTED";class jv{setConnectionStateListener(a){this.connectionStateListener=a}setIncomingDataListener(a){this.incomingDataListener=a}constructor(a,b=WebSocket){this.WebSocketClass=b,this.webSocket=null,this.isDisconnecting=!1,this.url=a.replace(/^http/,"ws"),this.instanceId=jv.instanceCounter++,jv.activeInstances.add(this.instanceId)}async connect(){if(this.webSocket)throw Error("webSocket object is not null");if(this.isDisconnecting)throw Error("WebSocket is disconnecting, cannot reconnect on same instance");return new Promise((a,b)=>{var c;let d;try{this.webSocket=d=new this.WebSocketClass(this.url)}catch(a){b(a);return}null==(c=this.connectionStateListener)||c.call(this,aH.CONNECTING),d.onclose=a=>{var c;this.clearWebSocket(),d.readyState!==WebSocket.OPEN&&b(Error(`websocket error ${a.code}: ${a.reason}`)),null==(c=this.connectionStateListener)||c.call(this,aH.DISCONNECTED)},d.onopen=b=>{var c;a(),null==(c=this.connectionStateListener)||c.call(this,aH.CONNECTED),jv.pendingData.length>0&&([...jv.pendingData].forEach(a=>this.sendData(a)),jv.pendingData=[])},d.onmessage=a=>{var b,c;if("h"===a.data)null==(b=this.incomingDataListener)||b.call(this,{type:"Heartbeat"});else try{let b=JSON.parse(a.data);null==(c=this.incomingDataListener)||c.call(this,b)}catch(a){}}})}disconnect(){var a;let{webSocket:b}=this;if(b){this.isDisconnecting=!0,this.clearWebSocket(),null==(a=this.connectionStateListener)||a.call(this,aH.DISCONNECTED),this.connectionStateListener=void 0,this.incomingDataListener=void 0;try{b.close()}catch(a){}}}sendData(a){let{webSocket:b}=this;if(!b){jv.pendingData.push(a),this.isDisconnecting||this.connect();return}b.readyState!==WebSocket.OPEN?jv.pendingData.push(a):b.send(a)}clearWebSocket(){let{webSocket:a}=this;a&&(this.webSocket=null,a.onclose=null,a.onerror=null,a.onmessage=null,a.onopen=null)}cleanup(){jv.activeInstances.delete(this.instanceId)}}jv.instanceCounter=0,jv.activeInstances=new Set,jv.pendingData=[];class jw{constructor({session:a,linkAPIUrl:b,listener:c}){this.destroyed=!1,this.lastHeartbeatResponse=0,this.nextReqId=N(1),this.reconnectAttempts=0,this.isReconnecting=!1,this._connected=!1,this._linked=!1,this.requestResolutions=new Map,this.handleSessionMetadataUpdated=a=>{a&&new Map([["__destroyed",this.handleDestroyed],["EthereumAddress",this.handleAccountUpdated],["WalletUsername",this.handleWalletUsernameUpdated],["AppVersion",this.handleAppVersionUpdated],["ChainId",b=>a.JsonRpcUrl&&this.handleChainUpdated(b,a.JsonRpcUrl)]]).forEach((b,c)=>{let d=a[c];void 0!==d&&b(d)})},this.handleDestroyed=a=>{var b;"1"===a&&(null==(b=this.listener)||b.resetAndReload())},this.handleAccountUpdated=async a=>{var b;try{let c=await this.cipher.decrypt(a);null==(b=this.listener)||b.accountUpdated(c)}catch(a){}},this.handleMetadataUpdated=async(a,b)=>{var c;try{let d=await this.cipher.decrypt(b);null==(c=this.listener)||c.metadataUpdated(a,d)}catch(a){}},this.handleWalletUsernameUpdated=async a=>{this.handleMetadataUpdated("walletUsername",a)},this.handleAppVersionUpdated=async a=>{this.handleMetadataUpdated("AppVersion",a)},this.handleChainUpdated=async(a,b)=>{var c;try{let d=await this.cipher.decrypt(a),e=await this.cipher.decrypt(b);null==(c=this.listener)||c.chainUpdated(d,e)}catch(a){}},this.session=a,this.cipher=new jt(a.secret),this.listener=c,this.linkAPIUrl=b,this.WebSocketClass=WebSocket;const d=this.createWebSocket();this.ws=d,this.http=new ju(b,a.id,a.key),this.setupVisibilityChangeHandler()}createWebSocket(){let a=new jv(`${this.linkAPIUrl}/rpc`,this.WebSocketClass);return this.activeWsInstance=a,a.setConnectionStateListener(async b=>{if(a!==this.activeWsInstance)return;let c=!1;switch(b){case aH.DISCONNECTED:this.heartbeatIntervalId&&(clearInterval(this.heartbeatIntervalId),this.heartbeatIntervalId=void 0),this.lastHeartbeatResponse=0,c=!1,this.destroyed||(async()=>{if(this.isReconnecting)return;this.isReconnecting=!0;let b=3e3*(0!==this.reconnectAttempts);await new Promise(a=>setTimeout(a,b)),this.destroyed||a!==this.activeWsInstance?this.isReconnecting=!1:(this.reconnectAttempts++,"cleanup"in this.ws&&"function"==typeof this.ws.cleanup&&this.ws.cleanup(),this.ws=this.createWebSocket(),this.ws.connect().catch(()=>{jq()}).finally(()=>{this.isReconnecting=!1}))})();break;case aH.CONNECTED:this.reconnectAttempts=0;try{c=await this.handleConnected(),this.fetchUnseenEventsAPI().catch(()=>{})}catch(a){break}this.connected=c,this.updateLastHeartbeat(),this.heartbeatIntervalId&&clearInterval(this.heartbeatIntervalId),this.heartbeatIntervalId=window.setInterval(()=>{this.heartbeat()},1e4),setTimeout(()=>{this.heartbeat()},100);case aH.CONNECTING:}b!==aH.CONNECTED&&(this.connected=c)}),a.setIncomingDataListener(a=>{var b;switch(a.type){case"Heartbeat":this.updateLastHeartbeat();return;case"IsLinkedOK":case"Linked":{let b="IsLinkedOK"===a.type?a.linked:void 0;this.linked=b||a.onlineGuests>0;break}case"GetSessionConfigOK":case"SessionConfigUpdated":this.handleSessionMetadataUpdated(a.metadata);break;case"Event":this.handleIncomingEvent(a)}void 0!==a.id&&(null==(b=this.requestResolutions.get(a.id))||b(a))}),a}setupVisibilityChangeHandler(){this.visibilityChangeHandler=()=>{document.hidden||this.destroyed||(this.connected?this.heartbeat():this.reconnectWithFreshWebSocket())},this.focusHandler=()=>{this.destroyed||this.connected||this.reconnectWithFreshWebSocket()},document.addEventListener("visibilitychange",this.visibilityChangeHandler),window.addEventListener("focus",this.focusHandler),window.addEventListener("pageshow",a=>{a.persisted&&this.focusHandler&&this.focusHandler()})}reconnectWithFreshWebSocket(){if(this.destroyed)return;let a=this.ws;this.activeWsInstance=void 0,a.disconnect(),"cleanup"in a&&"function"==typeof a.cleanup&&a.cleanup(),this.ws=this.createWebSocket(),this.ws.connect().catch(()=>{jq()})}connect(){if(this.destroyed)throw Error("instance is destroyed");this.ws.connect()}async destroy(){this.destroyed||(await this.makeRequest({type:"SetSessionConfig",id:N(this.nextReqId++),sessionId:this.session.id,metadata:{__destroyed:"1"}},{timeout:1e3}),this.destroyed=!0,this.activeWsInstance=void 0,this.heartbeatIntervalId&&(clearInterval(this.heartbeatIntervalId),this.heartbeatIntervalId=void 0),this.visibilityChangeHandler&&document.removeEventListener("visibilitychange",this.visibilityChangeHandler),this.focusHandler&&window.removeEventListener("focus",this.focusHandler),this.ws.disconnect(),"cleanup"in this.ws&&"function"==typeof this.ws.cleanup&&this.ws.cleanup(),this.listener=void 0)}get connected(){return this._connected}set connected(a){this._connected=a}get linked(){return this._linked}set linked(a){var b,c;this._linked=a,a&&(null==(b=this.onceLinked)||b.call(this)),null==(c=this.listener)||c.linkedUpdated(a)}setOnceLinked(a){return new Promise(b=>{this.linked?a().then(b):this.onceLinked=()=>{a().then(b),this.onceLinked=void 0}})}async handleIncomingEvent(a){var b;if("Event"===a.type&&"Web3Response"===a.event)try{let c=await this.cipher.decrypt(a.data),d=JSON.parse(c);if("WEB3_RESPONSE"!==d.type)return;null==(b=this.listener)||b.handleWeb3ResponseMessage(d.id,d.response)}catch(a){}}async checkUnseenEvents(){await new Promise(a=>setTimeout(a,250));try{await this.fetchUnseenEventsAPI()}catch(a){console.error("Unable to check for unseen events",a)}}async fetchUnseenEventsAPI(){try{(await this.http.fetchUnseenEvents()).forEach(a=>{this.handleIncomingEvent(a)})}catch(a){aw("walletlink_signer.walletlink_connection.fetch_unseen_events_failed",{action:aJ.measurement,componentType:aI.unknown},aK.high)}}async publishEvent(a,b,c=!1){let d=await this.cipher.encrypt(JSON.stringify(Object.assign(Object.assign({},b),{origin:location.origin,location:location.href,relaySource:"coinbaseWalletExtension"in window&&window.coinbaseWalletExtension?"injected_sdk":"sdk"}))),e={type:"PublishEvent",id:N(this.nextReqId++),sessionId:this.session.id,event:a,data:d,callWebhook:c};return this.setOnceLinked(async()=>{let a=await this.makeRequest(e);if("Fail"===a.type)throw Error(a.error||"failed to publish event");return a.eventId})}sendData(a){this.ws.sendData(JSON.stringify(a))}updateLastHeartbeat(){this.lastHeartbeatResponse=Date.now()}heartbeat(){if(Date.now()-this.lastHeartbeatResponse>2e4)return void this.ws.disconnect();if(this.connected)try{this.ws.sendData("h")}catch(a){}}async makeRequest(a,b={timeout:6e4}){let c,d=a.id;return this.sendData(a),Promise.race([new Promise((a,e)=>{c=window.setTimeout(()=>{e(Error(`request ${d} timed out`))},b.timeout)}),new Promise(a=>{this.requestResolutions.set(d,b=>{clearTimeout(c),a(b),this.requestResolutions.delete(d)})})])}async handleConnected(){return"Fail"!==(await this.makeRequest({type:"HostSession",id:N(this.nextReqId++),sessionId:this.session.id,sessionKey:this.session.key})).type&&(this.sendData({type:"IsLinked",id:N(this.nextReqId++),sessionId:this.session.id}),this.sendData({type:"GetSessionConfig",id:N(this.nextReqId++),sessionId:this.session.id}),!0)}}class jx{constructor(){this._nextRequestId=0,this.callbacks=new Map}makeRequestId(){this._nextRequestId=(this._nextRequestId+1)%0x7fffffff;let a=this._nextRequestId,b=Z(a.toString(16));return this.callbacks.get(b)&&this.callbacks.delete(b),a}}function jy(a,...b){if(!(a instanceof Uint8Array||null!=a&&"object"==typeof a&&"Uint8Array"===a.constructor.name))throw Error("Uint8Array expected");if(b.length>0&&!b.includes(a.length))throw Error(`Uint8Array expected of length ${b}, not of length=${a.length}`)}function jz(a,b=!0){if(a.destroyed)throw Error("Hash instance has been destroyed");if(b&&a.finished)throw Error("Hash#digest() has already been called")}let jA=a=>new DataView(a.buffer,a.byteOffset,a.byteLength),jB=(a,b)=>a<<32-b|a>>>b;new Uint8Array(new Uint32Array([0x11223344]).buffer)[0];let jC=Array.from({length:256},(a,b)=>b.toString(16).padStart(2,"0"));function jD(a){return"string"==typeof a&&(a=function(a){if("string"!=typeof a)throw Error(`utf8ToBytes expected string, got ${typeof a}`);return new Uint8Array(new TextEncoder().encode(a))}(a)),jy(a),a}class jE{clone(){return this._cloneInto()}}let jF=(a,b,c)=>a&b^~a&c,jG=(a,b,c)=>a&b^a&c^b&c;class jH extends jE{constructor(a,b,c,d){super(),this.blockLen=a,this.outputLen=b,this.padOffset=c,this.isLE=d,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(a),this.view=jA(this.buffer)}update(a){jz(this);let{view:b,buffer:c,blockLen:d}=this,e=(a=jD(a)).length;for(let f=0;f<e;){let g=Math.min(d-this.pos,e-f);if(g===d){let b=jA(a);for(;d<=e-f;f+=d)this.process(b,f);continue}c.set(a.subarray(f,f+g),this.pos),this.pos+=g,f+=g,this.pos===d&&(this.process(b,0),this.pos=0)}return this.length+=a.length,this.roundClean(),this}digestInto(a){jz(this);jy(a);let b=this.outputLen;if(a.length<b)throw Error(`digestInto() expects output buffer of length at least ${b}`);this.finished=!0;let{buffer:c,view:d,blockLen:e,isLE:f}=this,{pos:g}=this;c[g++]=128,this.buffer.subarray(g).fill(0),this.padOffset>e-g&&(this.process(d,0),g=0);for(let a=g;a<e;a++)c[a]=0;!function(a,b,c,d){if("function"==typeof a.setBigUint64)return a.setBigUint64(b,c,d);let e=BigInt(32),f=BigInt(0xffffffff),g=Number(c>>e&f),h=Number(c&f),i=4*!!d,j=4*!d;a.setUint32(b+i,g,d),a.setUint32(b+j,h,d)}(d,e-8,BigInt(8*this.length),f),this.process(d,0);let h=jA(a),i=this.outputLen;if(i%4)throw Error("_sha2: outputLen should be aligned to 32bit");let j=i/4,k=this.get();if(j>k.length)throw Error("_sha2: outputLen bigger than state");for(let a=0;a<j;a++)h.setUint32(4*a,k[a],f)}digest(){let{buffer:a,outputLen:b}=this;this.digestInto(a);let c=a.slice(0,b);return this.destroy(),c}_cloneInto(a){a||(a=new this.constructor),a.set(...this.get());let{blockLen:b,buffer:c,length:d,finished:e,destroyed:f,pos:g}=this;return a.length=d,a.pos=g,a.finished=e,a.destroyed=f,d%b&&a.buffer.set(c),a}}let jI=new Uint32Array([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2]),jJ=new Uint32Array([0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19]),jK=new Uint32Array(64);class jL extends jH{constructor(){super(64,32,8,!1),this.A=0|jJ[0],this.B=0|jJ[1],this.C=0|jJ[2],this.D=0|jJ[3],this.E=0|jJ[4],this.F=0|jJ[5],this.G=0|jJ[6],this.H=0|jJ[7]}get(){let{A:a,B:b,C:c,D:d,E:e,F:f,G:g,H:h}=this;return[a,b,c,d,e,f,g,h]}set(a,b,c,d,e,f,g,h){this.A=0|a,this.B=0|b,this.C=0|c,this.D=0|d,this.E=0|e,this.F=0|f,this.G=0|g,this.H=0|h}process(a,b){for(let c=0;c<16;c++,b+=4)jK[c]=a.getUint32(b,!1);for(let a=16;a<64;a++){let b=jK[a-15],c=jK[a-2],d=jB(b,7)^jB(b,18)^b>>>3,e=jB(c,17)^jB(c,19)^c>>>10;jK[a]=e+jK[a-7]+d+jK[a-16]|0}let{A:c,B:d,C:e,D:f,E:g,F:h,G:i,H:j}=this;for(let a=0;a<64;a++){let b=j+(jB(g,6)^jB(g,11)^jB(g,25))+jF(g,h,i)+jI[a]+jK[a]|0,k=(jB(c,2)^jB(c,13)^jB(c,22))+jG(c,d,e)|0;j=i,i=h,h=g,g=f+b|0,f=e,e=d,d=c,c=b+k|0}c=c+this.A|0,d=d+this.B|0,e=e+this.C|0,f=f+this.D|0,g=g+this.E|0,h=h+this.F|0,i=i+this.G|0,j=j+this.H|0,this.set(c,d,e,f,g,h,i,j)}roundClean(){jK.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}let jM=(aD=()=>new jL,(h=a=>aD().update(jD(a)).digest()).outputLen=(i=aD()).outputLen,h.blockLen=i.blockLen,h.create=()=>aD(),h),jN="session:id",jO="session:secret",jP="session:linked";class jQ{constructor(a,b,c,d=!1){this.storage=a,this.id=b,this.secret=c,this.key=function(a){jy(a);let b="";for(let c=0;c<a.length;c++)b+=jC[a[c]];return b}(jM(`${b}, ${c} WalletLink`)),this._linked=!!d}static create(a){return new jQ(a,Q(16),Q(32)).save()}static load(a){let b=a.getItem(jN),c=a.getItem(jP),d=a.getItem(jO);return b&&d?new jQ(a,b,d,"1"===c):null}get linked(){return this._linked}set linked(a){this._linked=a,this.persistLinked()}save(){return this.storage.setItem(jN,this.id),this.storage.setItem(jO,this.secret),this.persistLinked(),this}persistLinked(){this.storage.setItem(jP,this._linked?"1":"0")}}class jR{constructor(){this.root=null,this.darkMode=bA()}attach(){let a=document.documentElement;this.root=document.createElement("div"),this.root.className="-cbwsdk-css-reset",a.appendChild(this.root),az()}present(a){this.render(a)}clear(){this.render(null)}render(a){!this.root||(bf(null,this.root),a&&bf(a0(jS,Object.assign({},a,{onDismiss:()=>{this.clear()},darkMode:this.darkMode})),this.root))}}let jS=({title:a,buttonText:b,darkMode:c,onButtonClick:d,onDismiss:e})=>a0(bC,{darkMode:c},a0("div",{class:"-cbwsdk-redirect-dialog"},a0("style",null,".-cbwsdk-css-reset .-cbwsdk-redirect-dialog-backdrop{position:fixed;top:0;left:0;right:0;bottom:0;transition:opacity .25s;background-color:rgba(10,11,13,.5)}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-backdrop-hidden{opacity:0}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box{display:block;position:fixed;top:50%;left:50%;transform:translate(-50%, -50%);padding:20px;border-radius:8px;background-color:#fff;color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box p{display:block;font-weight:400;font-size:14px;line-height:20px;padding-bottom:12px;color:#5b636e}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box button{appearance:none;border:none;background:none;color:#0052ff;padding:0;text-decoration:none;display:block;font-weight:600;font-size:16px;line-height:24px}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.dark{background-color:#0a0b0d;color:#fff}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.dark button{color:#0052ff}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.light{background-color:#fff;color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.light button{color:#0052ff}"),a0("div",{class:"-cbwsdk-redirect-dialog-backdrop",onClick:e}),a0("div",{class:(0,aV.clsx)("-cbwsdk-redirect-dialog-box",c?"dark":"light")},a0("p",null,a),a0("button",{onClick:d},b))));class jT{constructor(){this.attached=!1,this.redirectDialog=new jR}attach(){if(this.attached)throw Error("Coinbase Wallet SDK UI is already attached");this.redirectDialog.attach(),this.attached=!0}redirectToCoinbaseWallet(a){let b=new URL("https://go.cb-w.com/walletlink");b.searchParams.append("redirect_url",function(){try{if(function(){try{return null!==window.frameElement}catch(a){return!1}}()&&window.top)return window.top.location;return window.location}catch(a){return window.location}}().href),a&&b.searchParams.append("wl_url",a);let c=document.createElement("a");c.target="cbw-opener",c.href=b.href,c.rel="noreferrer noopener",c.click()}openCoinbaseWalletDeeplink(a){this.redirectToCoinbaseWallet(a),setTimeout(()=>{this.redirectDialog.present({title:"Redirecting to Coinbase Wallet...",buttonText:"Open",onButtonClick:()=>{this.redirectToCoinbaseWallet(a)}})},99)}showConnecting(a){return()=>{this.redirectDialog.clear()}}}class jU{constructor(a){this.chainCallbackParams={chainId:"",jsonRpcUrl:""},this.isMobileWeb=function(){var a;return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(null==(a=null==window?void 0:window.navigator)?void 0:a.userAgent)}(),this.linkedUpdated=a=>{this.isLinked=a;let b=this.storage.getItem(js);if(a&&(this._session.linked=a),this.isUnlinkedErrorState=!1,b){let c=b.split(" "),d="true"===this.storage.getItem("IsStandaloneSigning");""===c[0]||a||!this._session.linked||d||(this.isUnlinkedErrorState=!0)}},this.metadataUpdated=(a,b)=>{this.storage.setItem(a,b)},this.chainUpdated=(a,b)=>{(this.chainCallbackParams.chainId!==a||this.chainCallbackParams.jsonRpcUrl!==b)&&(this.chainCallbackParams={chainId:a,jsonRpcUrl:b},this.chainCallback&&this.chainCallback(b,Number.parseInt(a,10)))},this.accountUpdated=a=>{this.accountsCallback&&this.accountsCallback([a]),jU.accountRequestCallbackIds.size>0&&(Array.from(jU.accountRequestCallbackIds.values()).forEach(b=>{this.invokeCallback(b,{method:"requestEthereumAccounts",result:[a]})}),jU.accountRequestCallbackIds.clear())},this.resetAndReload=this.resetAndReload.bind(this),this.linkAPIUrl=a.linkAPIUrl,this.storage=a.storage,this.metadata=a.metadata,this.accountsCallback=a.accountsCallback,this.chainCallback=a.chainCallback;const{session:b,ui:c,connection:d}=this.subscribe();this._session=b,this.connection=d,this.relayEventManager=new jx,this.ui=c,this.ui.attach()}subscribe(){let a=jQ.load(this.storage)||jQ.create(this.storage),{linkAPIUrl:b}=this,c=new jw({session:a,linkAPIUrl:b,listener:this}),d=this.isMobileWeb?new jT:new bF;return c.connect(),{session:a,ui:d,connection:c}}resetAndReload(){this.connection.destroy().then(()=>{let a=jQ.load(this.storage);(null==a?void 0:a.id)===this._session.id&&bN.clearAll(),document.location.reload()}).catch(a=>{})}signEthereumTransaction(a){return this.sendRequest({method:"signEthereumTransaction",params:{fromAddress:a.fromAddress,toAddress:a.toAddress,weiValue:V(a.weiValue),data:T(a.data,!0),nonce:a.nonce,gasPriceInWei:a.gasPriceInWei?V(a.gasPriceInWei):null,maxFeePerGas:a.gasPriceInWei?V(a.gasPriceInWei):null,maxPriorityFeePerGas:a.gasPriceInWei?V(a.gasPriceInWei):null,gasLimit:a.gasLimit?V(a.gasLimit):null,chainId:a.chainId,shouldSubmit:!1}})}signAndSubmitEthereumTransaction(a){return this.sendRequest({method:"signEthereumTransaction",params:{fromAddress:a.fromAddress,toAddress:a.toAddress,weiValue:V(a.weiValue),data:T(a.data,!0),nonce:a.nonce,gasPriceInWei:a.gasPriceInWei?V(a.gasPriceInWei):null,maxFeePerGas:a.maxFeePerGas?V(a.maxFeePerGas):null,maxPriorityFeePerGas:a.maxPriorityFeePerGas?V(a.maxPriorityFeePerGas):null,gasLimit:a.gasLimit?V(a.gasLimit):null,chainId:a.chainId,shouldSubmit:!0}})}submitEthereumTransaction(a,b){return this.sendRequest({method:"submitEthereumTransaction",params:{signedTransaction:T(a,!0),chainId:b}})}getWalletLinkSession(){return this._session}sendRequest(a){let b=null,c=Q(8),d=d=>{this.publishWeb3RequestCanceledEvent(c),this.handleErrorResponse(c,a.method,d),null==b||b()};return new Promise((e,f)=>{b=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:d,onResetConnection:this.resetAndReload}),this.relayEventManager.callbacks.set(c,a=>{if(null==b||b(),bK(a))return f(Error(a.errorMessage));e(a)}),this.publishWeb3RequestEvent(c,a)})}publishWeb3RequestEvent(a,b){let c={type:"WEB3_REQUEST",id:a,request:b};this.publishEvent("Web3Request",c,!0).then(a=>{}).catch(a=>{this.handleWeb3ResponseMessage(c.id,{method:b.method,errorMessage:a.message})}),this.isMobileWeb&&this.openCoinbaseWalletDeeplink(b.method)}openCoinbaseWalletDeeplink(a){if(this.ui instanceof jT)switch(a){case"requestEthereumAccounts":case"switchEthereumChain":return;default:window.addEventListener("blur",()=>{window.addEventListener("focus",()=>{this.connection.checkUnseenEvents()},{once:!0})},{once:!0}),this.ui.openCoinbaseWalletDeeplink()}}publishWeb3RequestCanceledEvent(a){this.publishEvent("Web3RequestCanceled",{type:"WEB3_REQUEST_CANCELED",id:a},!1).then()}publishEvent(a,b,c){return this.connection.publishEvent(a,b,c)}handleWeb3ResponseMessage(a,b){if("requestEthereumAccounts"===b.method){jU.accountRequestCallbackIds.forEach(a=>this.invokeCallback(a,b)),jU.accountRequestCallbackIds.clear();return}this.invokeCallback(a,b)}handleErrorResponse(a,b,c){var d;let e=null!=(d=null==c?void 0:c.message)?d:"Unspecified error message.";this.handleWeb3ResponseMessage(a,{method:b,errorMessage:e})}invokeCallback(a,b){let c=this.relayEventManager.callbacks.get(a);c&&(c(b),this.relayEventManager.callbacks.delete(a))}requestEthereumAccounts(){let{appName:a,appLogoUrl:b}=this.metadata,c={method:"requestEthereumAccounts",params:{appName:a,appLogoUrl:b}},d=Q(8);return new Promise((a,b)=>{this.relayEventManager.callbacks.set(d,c=>{if(bK(c))return b(Error(c.errorMessage));a(c)}),jU.accountRequestCallbackIds.add(d),this.publishWeb3RequestEvent(d,c)})}watchAsset(a,b,c,d,e,f){let g={method:"watchAsset",params:{type:a,options:{address:b,symbol:c,decimals:d,image:e},chainId:f}},h=null,i=Q(8),j=a=>{this.publishWeb3RequestCanceledEvent(i),this.handleErrorResponse(i,g.method,a),null==h||h()};return h=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:j,onResetConnection:this.resetAndReload}),new Promise((a,b)=>{this.relayEventManager.callbacks.set(i,c=>{if(null==h||h(),bK(c))return b(Error(c.errorMessage));a(c)}),this.publishWeb3RequestEvent(i,g)})}addEthereumChain(a,b,c,d,e,f){let g={method:"addEthereumChain",params:{chainId:a,rpcUrls:b,blockExplorerUrls:d,chainName:e,iconUrls:c,nativeCurrency:f}},h=null,i=Q(8),j=a=>{this.publishWeb3RequestCanceledEvent(i),this.handleErrorResponse(i,g.method,a),null==h||h()};return h=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:j,onResetConnection:this.resetAndReload}),new Promise((a,b)=>{this.relayEventManager.callbacks.set(i,c=>{if(null==h||h(),bK(c))return b(Error(c.errorMessage));a(c)}),this.publishWeb3RequestEvent(i,g)})}switchEthereumChain(a,b){let c={method:"switchEthereumChain",params:Object.assign({chainId:a},{address:b})},d=null,e=Q(8),f=a=>{this.publishWeb3RequestCanceledEvent(e),this.handleErrorResponse(e,c.method,a),null==d||d()};return d=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:f,onResetConnection:this.resetAndReload}),new Promise((a,b)=>{this.relayEventManager.callbacks.set(e,c=>(null==d||d(),bK(c)&&c.errorCode)?b(F({code:c.errorCode,message:"Unrecognized chain ID. Try adding the chain using addEthereumChain first."})):bK(c)?b(Error(c.errorMessage)):void a(c)),this.publishWeb3RequestEvent(e,c)})}}jU.accountRequestCallbackIds=new Set;let jV="DefaultChainId",jW="DefaultJsonRpcUrl";class jX{constructor(a){this._relay=null,this._addresses=[],this.metadata=a.metadata,this._storage=new bN("walletlink",av),this.callback=a.callback||null;const b=this._storage.getItem(js);if(b){const a=b.split(" ");""!==a[0]&&(this._addresses=a.map(a=>ab(a)))}this.initializeRelay()}getSession(){let{id:a,secret:b}=this.initializeRelay().getWalletLinkSession();return{id:a,secret:b}}async handshake(a){let b="eth_requestAccounts",c=bP(a);(({method:a,correlationId:b})=>{aw("walletlink_signer.handshake.started",{action:aJ.unknown,componentType:aI.unknown,method:a,correlationId:b},aK.high)})({method:b,correlationId:c});try{await this._eth_requestAccounts(),(({method:a,correlationId:b})=>{aw("walletlink_signer.handshake.completed",{action:aJ.unknown,componentType:aI.unknown,method:a,correlationId:b},aK.high)})({method:b,correlationId:c})}catch(a){throw(({method:a,correlationId:b,errorMessage:c})=>{aw("walletlink_signer.handshake.error",{action:aJ.error,componentType:aI.unknown,method:a,correlationId:b,errorMessage:c},aK.high)})({method:b,correlationId:c,errorMessage:bT(a)}),a}}get selectedAddress(){return this._addresses[0]||void 0}get jsonRpcUrl(){var a;return null!=(a=this._storage.getItem(jW))?a:void 0}set jsonRpcUrl(a){this._storage.setItem(jW,a)}updateProviderInfo(a,b){var c;this.jsonRpcUrl=a;let d=this.getChainId();this._storage.setItem(jV,b.toString(10)),ad(b)!==d&&(null==(c=this.callback)||c.call(this,"chainChanged",W(b)))}async watchAsset(a){let b=Array.isArray(a)?a[0]:a;if(!b.type)throw y("Type is required");if((null==b?void 0:b.type)!=="ERC20")throw y(`Asset of type '${b.type}' is not supported`);if(!(null==b?void 0:b.options))throw y("Options are required");if(!(null==b?void 0:b.options.address))throw y("Address is required");let c=this.getChainId(),{address:d,symbol:e,image:f,decimals:g}=b.options,h=this.initializeRelay(),i=await h.watchAsset(b.type,d,e,g,f,null==c?void 0:c.toString());return!bK(i)&&!!i.result}async addEthereumChain(a){var b,c;let d=a[0];if((null==(b=d.rpcUrls)?void 0:b.length)===0)throw y("please pass in at least 1 rpcUrl");if(!d.chainName||""===d.chainName.trim())throw y("chainName is a required field");if(!d.nativeCurrency)throw y("nativeCurrency is a required field");let e=Number.parseInt(d.chainId,16);if(e===this.getChainId())return!1;let f=this.initializeRelay(),{rpcUrls:g=[],blockExplorerUrls:h=[],chainName:i,iconUrls:j=[],nativeCurrency:k}=d,l=await f.addEthereumChain(e.toString(),g,j,h,i,k);if(bK(l))return!1;if((null==(c=l.result)?void 0:c.isApproved)===!0)return this.updateProviderInfo(g[0],e),null;throw z("unable to add ethereum chain")}async switchEthereumChain(a){let b=Number.parseInt(a[0].chainId,16),c=this.initializeRelay(),d=await c.switchEthereumChain(b.toString(10),this.selectedAddress||void 0);if(bK(d))throw d;let e=d.result;return e.isApproved&&e.rpcUrl.length>0&&this.updateProviderInfo(e.rpcUrl,b),null}async cleanup(){this.callback=null,this._relay&&this._relay.resetAndReload(),this._storage.clear()}_setAddresses(a,b){var c;if(!Array.isArray(a))throw Error("addresses is not an array");let d=a.map(a=>ab(a));JSON.stringify(d)!==JSON.stringify(this._addresses)&&(this._addresses=d,null==(c=this.callback)||c.call(this,"accountsChanged",d),this._storage.setItem(js,d.join(" ")))}async request(a){let b=bP(a);(({method:a,correlationId:b})=>{aw("walletlink_signer.request.started",{action:aJ.unknown,componentType:aI.unknown,method:a,correlationId:b},aK.high)})({method:a.method,correlationId:b});try{let c=await this._request(a);return(({method:a,correlationId:b})=>{aw("walletlink_signer.request.completed",{action:aJ.unknown,componentType:aI.unknown,method:a,correlationId:b},aK.high)})({method:a.method,correlationId:b}),c}catch(c){throw(({method:a,correlationId:b,errorMessage:c})=>{aw("walletlink_signer.request.error",{action:aJ.error,componentType:aI.unknown,method:a,correlationId:b,errorMessage:c},aK.high)})({method:a.method,correlationId:b,errorMessage:bT(c)}),c}}async _request(a){let b=a.params||[];switch(a.method){case"eth_accounts":return[...this._addresses];case"eth_coinbase":return this.selectedAddress||null;case"net_version":return this.getChainId().toString(10);case"eth_chainId":return W(this.getChainId());case"eth_requestAccounts":return this._eth_requestAccounts();case"eth_ecRecover":case"personal_ecRecover":return this.ecRecover(a);case"personal_sign":return this.personalSign(a);case"eth_signTransaction":return this._eth_signTransaction(b);case"eth_sendRawTransaction":return this._eth_sendRawTransaction(b);case"eth_sendTransaction":return this._eth_sendTransaction(b);case"eth_signTypedData_v1":case"eth_signTypedData_v3":case"eth_signTypedData_v4":case"eth_signTypedData":return this.signTypedData(a);case"wallet_addEthereumChain":return this.addEthereumChain(b);case"wallet_switchEthereumChain":return this.switchEthereumChain(b);case"wallet_watchAsset":return this.watchAsset(b);default:if(!this.jsonRpcUrl)throw z("No RPC URL set for chain");return aq(a,this.jsonRpcUrl)}}_ensureKnownAddress(a){let b=ab(a);if(!this._addresses.map(a=>ab(a)).includes(b))throw Error("Unknown Ethereum address")}_prepareTransactionParams(a){let b=a.from?ab(a.from):this.selectedAddress;if(!b)throw Error("Ethereum address is unavailable");this._ensureKnownAddress(b);let c=a.to?ab(a.to):null,d=null!=a.value?ae(a.value):BigInt(0),e=a.data?ac(a.data):Buffer.alloc(0),f=null!=a.nonce?ad(a.nonce):null,g=null!=a.gasPrice?ae(a.gasPrice):null,h=null!=a.maxFeePerGas?ae(a.maxFeePerGas):null,i=null!=a.maxPriorityFeePerGas?ae(a.maxPriorityFeePerGas):null;return{fromAddress:b,toAddress:c,weiValue:d,data:e,nonce:f,gasPriceInWei:g,maxFeePerGas:h,maxPriorityFeePerGas:i,gasLimit:null!=a.gas?ae(a.gas):null,chainId:a.chainId?ad(a.chainId):this.getChainId()}}async ecRecover(a){let{method:b,params:c}=a;if(!Array.isArray(c))throw y();let d=this.initializeRelay(),e=await d.sendRequest({method:"ethereumAddressFromSignedMessage",params:{message:U(c[0]),signature:U(c[1]),addPrefix:"personal_ecRecover"===b}});if(bK(e))throw e;return e.result}getChainId(){var a;return Number.parseInt(null!=(a=this._storage.getItem(jV))?a:"1",10)}async _eth_requestAccounts(){var a,b;if(this._addresses.length>0)return null==(a=this.callback)||a.call(this,"connect",{chainId:W(this.getChainId())}),this._addresses;let c=this.initializeRelay(),d=await c.requestEthereumAccounts();if(bK(d))throw d;if(!d.result)throw Error("accounts received is empty");return this._setAddresses(d.result),null==(b=this.callback)||b.call(this,"connect",{chainId:W(this.getChainId())}),this._addresses}async personalSign({params:a}){if(!Array.isArray(a))throw y();let b=a[1],c=a[0];this._ensureKnownAddress(b);let d=this.initializeRelay(),e=await d.sendRequest({method:"signEthereumMessage",params:{address:ab(b),message:U(c),addPrefix:!0,typedDataJson:null}});if(bK(e))throw e;return e.result}async _eth_signTransaction(a){let b=this._prepareTransactionParams(a[0]||{}),c=this.initializeRelay(),d=await c.signEthereumTransaction(b);if(bK(d))throw d;return d.result}async _eth_sendRawTransaction(a){let b=ac(a[0]),c=this.initializeRelay(),d=await c.submitEthereumTransaction(b,this.getChainId());if(bK(d))throw d;return d.result}async _eth_sendTransaction(a){let b=this._prepareTransactionParams(a[0]||{}),c=this.initializeRelay(),d=await c.signAndSubmitEthereumTransaction(b);if(bK(d))throw d;return d.result}async signTypedData(a){let{method:b,params:c}=a;if(!Array.isArray(c))throw y();let d=c[+("eth_signTypedData_v1"===b)],e=c[+("eth_signTypedData_v1"!==b)];this._ensureKnownAddress(d);let f=this.initializeRelay(),g=await f.sendRequest({method:"signEthereumMessage",params:{address:ab(d),message:T(({eth_signTypedData_v1:jr.default.hashForSignTypedDataLegacy,eth_signTypedData_v3:jr.default.hashForSignTypedData_v3,eth_signTypedData_v4:jr.default.hashForSignTypedData_v4,eth_signTypedData:jr.default.hashForSignTypedData_v4})[b]({data:function(a){if("string"==typeof a)return JSON.parse(a);if("object"==typeof a)return a;throw y(`Not a JSON string or an object: ${String(a)}`)}(e)}),!0),typedDataJson:JSON.stringify(e,null,2),addPrefix:!1}});if(bK(g))throw g;return g.result}initializeRelay(){return this._relay||(this._relay=new jU({linkAPIUrl:av,storage:this._storage,metadata:this.metadata,accountsCallback:this._setAddresses.bind(this),chainCallback:this.updateProviderInfo.bind(this)})),this._relay}}let jY="SignerType",jZ=new bN("CBWSDK","SignerConfigurator");function j$(a){if(a)return a instanceof jp?"scw":"walletlink"}async function j_(a){let{communicator:b,metadata:c,handshakeRequest:d,callback:e}=a;j0(b,c,e,d).catch(()=>{});let f={id:crypto.randomUUID(),event:"selectSignerType",data:Object.assign(Object.assign({},a.preference),{handshakeRequest:d})},{data:g}=await b.postRequestAndWaitForResponse(f);return g}async function j0(a,b,c,d){await a.onMessage(({event:a})=>"WalletLinkSessionRequest"===a);let e=new jX({metadata:b,callback:c});a.postMessage({event:"WalletLinkUpdate",data:{session:e.getSession()}}),await e.handshake(d),a.postMessage({event:"WalletLinkUpdate",data:{connected:!0}})}var j1=function(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c};class j2 extends bM{constructor(a){var{metadata:b}=a,c=a.preference,{keysUrl:d}=c,e=j1(c,["keysUrl"]);super(),this.signer=null,this.isCoinbaseWallet=!0,this.metadata=b,this.preference=e,this.communicator=new bJ({url:d,metadata:b,preference:e});const f=jZ.getItem(jY);f&&(this.signer=this.initSigner(f),(({signerType:a})=>{aw("provider.signer.loaded_from_storage",{action:aJ.measurement,componentType:aI.unknown,signerType:a},aK.low)})({signerType:f}))}async request(a){var b,c,d;let e=crypto.randomUUID();b=a,c=e,bO.setState(a=>{let d=new Map(a.correlationIds);return d.set(b,c),{correlationIds:d}}),(({method:a,correlationId:b})=>{aw("provider.request.started",{action:aJ.unknown,componentType:aI.unknown,method:a,correlationId:b},aK.high)})({method:a.method,correlationId:e});try{let b=await this._request(a);return(({method:a,signerType:b,correlationId:c})=>{aw("provider.request.responded",{action:aJ.unknown,componentType:aI.unknown,method:a,signerType:b,correlationId:c},aK.high)})({method:a.method,signerType:j$(this.signer),correlationId:e}),b}catch(b){throw(({method:a,correlationId:b,signerType:c,errorMessage:d})=>{aw("provider.request.error",{action:aJ.error,componentType:aI.unknown,method:a,signerType:c,correlationId:b,errorMessage:d},aK.high)})({method:a.method,correlationId:e,signerType:j$(this.signer),errorMessage:b instanceof Error?b.message:""}),b}finally{d=a,bO.setState(a=>{let b=new Map(a.correlationIds);return b.delete(d),{correlationIds:b}})}}async _request(a){try{if(!function(a){if(!a||"object"!=typeof a||Array.isArray(a))throw y({message:"Expected a single, non-array, object argument.",data:a});let{method:b,params:c}=a;if("string"!=typeof b||0===b.length)throw y({message:"'args.method' must be a non-empty string.",data:a});if(void 0!==c&&!Array.isArray(c)&&("object"!=typeof c||null===c))throw y({message:"'args.params' must be an object or array if provided.",data:a});switch(b){case"eth_sign":case"eth_signTypedData_v2":case"eth_subscribe":case"eth_unsubscribe":throw D()}}(a),!this.signer)switch(a.method){case"eth_requestAccounts":{let b,c=an.subAccountsConfig.get();b=(null==c?void 0:c.enableAutoSubAccounts)?"scw":await this.requestSignerSelection(a);let d=this.initSigner(b);"scw"===b&&(null==c?void 0:c.enableAutoSubAccounts)?(await d.handshake({method:"handshake"}),await d.request(a)):await d.handshake(a),this.signer=d,jZ.setItem(jY,b);break}case"wallet_connect":{let b=this.initSigner("scw");await b.handshake({method:"handshake"});let c=await b.request(a);return this.signer=b,c}case"wallet_sendCalls":case"wallet_sign":{let b=this.initSigner("scw");await b.handshake({method:"handshake"});let c=await b.request(a);return await b.cleanup(),c}case"wallet_getCallsStatus":return await aq(a,au);case"net_version":return 1;case"eth_chainId":return W(1);default:throw C("Must call 'eth_requestAccounts' before other methods")}return await this.signer.request(a)}catch(d){let a,b,{code:c}=d;return c===p&&this.disconnect(),Promise.reject((a=function(a,{shouldIncludeStack:b=!1}={}){var c,d;let e={};if(a&&"object"==typeof a&&!Array.isArray(a)&&w(a,"code")&&Number.isInteger(c=a.code)&&(s[c.toString()]||(d=c)>=-32099&&d<=-32e3))e.code=a.code,a.message&&"string"==typeof a.message?(e.message=a.message,w(a,"data")&&(e.data=a.data)):(e.message=u(e.code),e.data={originalError:v(a)});else e.code=n,e.message=x(a,"message")?a.message:t,e.data={originalError:v(a)};return b&&(e.stack=x(a,"stack")?a.stack:void 0),e}(function(a){var b;if("string"==typeof a)return{message:a,code:n};if(bK(a)){let c=a.errorMessage,d=null!=(b=a.errorCode)?b:c.match(/(denied|rejected)/i)?o:void 0;return Object.assign(Object.assign({},a),{message:c,code:d,data:{method:a.method}})}return a}(d),{shouldIncludeStack:!0}),(b=new URL("https://docs.cloud.coinbase.com/wallet-sdk/docs/errors")).searchParams.set("version",aj),b.searchParams.set("code",a.code.toString()),b.searchParams.set("message",a.message),Object.assign(Object.assign({},a),{docUrl:b.href})))}}async enable(){return console.warn('.enable() has been deprecated. Please use .request({ method: "eth_requestAccounts" }) instead.'),aw("provider.enable_function.called",{action:aJ.measurement,componentType:aI.unknown},aK.high),await this.request({method:"eth_requestAccounts"})}async disconnect(){var a;await (null==(a=this.signer)?void 0:a.cleanup()),this.signer=null,bN.clearAll(),bO.setState({correlationIds:new Map}),this.emit("disconnect",E("User initiated disconnection"))}async requestSignerSelection(a){aw("signer.selection.requested",{action:aJ.unknown,componentType:aI.unknown},aK.high);let b=await j_({communicator:this.communicator,preference:this.preference,metadata:this.metadata,handshakeRequest:a,callback:this.emit.bind(this)});return aw("signer.selection.responded",{action:aJ.unknown,componentType:aI.unknown,signerType:b},aK.high),b}initSigner(a){return function(a){let{signerType:b,metadata:c,communicator:d,callback:e}=a;switch(b){case"scw":return new jp({metadata:c,callback:e,communicator:d});case"walletlink":return new jX({metadata:c,callback:e})}}({signerType:a,metadata:this.metadata,communicator:this.communicator,callback:this.emit.bind(this)})}}class j3{constructor(a){an.persist.rehydrate(),this.metadata={appName:a.appName||"Dapp",appLogoUrl:a.appLogoUrl||function(){let a=document.querySelector('link[sizes="192x192"]')||document.querySelector('link[sizes="180x180"]')||document.querySelector('link[rel="icon"]')||document.querySelector('link[rel="shortcut icon"]'),{protocol:b,host:c}=document.location,d=a?a.getAttribute("href"):null;return!d||d.startsWith("javascript:")||d.startsWith("vbscript:")?`${b}//${c}/favicon.ico`:d.startsWith("http://")||d.startsWith("https://")||d.startsWith("data:")?d:d.startsWith("//")?b+d:`${b}//${c}${d}`}(),appChainIds:a.appChainIds||[]},an.config.set({metadata:this.metadata}),ao()}makeWeb3Provider(a={options:"all"}){var b;as(a),!1!==a.telemetry&&j(),an.config.set({preference:a});let c={metadata:this.metadata,preference:a};return null!=(b=ar(c))?b:new j2(c)}getCoinbaseWalletLogo(a,b=240){let c;switch(a){case"standard":default:return c=b,`data:image/svg+xml,%3Csvg width='${b}' height='${c}' viewBox='0 0 1024 1024' fill='none' xmlns='http://www.w3.org/2000/svg'%3E %3Crect width='1024' height='1024' fill='%230052FF'/%3E %3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M152 512C152 710.823 313.177 872 512 872C710.823 872 872 710.823 872 512C872 313.177 710.823 152 512 152C313.177 152 152 313.177 152 512ZM420 396C406.745 396 396 406.745 396 420V604C396 617.255 406.745 628 420 628H604C617.255 628 628 617.255 628 604V420C628 406.745 617.255 396 604 396H420Z' fill='white'/%3E %3C/svg%3E `;case"circle":return c=b,`data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='${b}' height='${c}' viewBox='0 0 999.81 999.81'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052fe;%7D.cls-2%7Bfill:%23fefefe;%7D.cls-3%7Bfill:%230152fe;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M655-115.9h56c.83,1.59,2.36.88,3.56,1a478,478,0,0,1,75.06,10.42C891.4-81.76,978.33-32.58,1049.19,44q116.7,126,131.94,297.61c.38,4.14-.34,8.53,1.78,12.45v59c-1.58.84-.91,2.35-1,3.56a482.05,482.05,0,0,1-10.38,74.05c-24,106.72-76.64,196.76-158.83,268.93s-178.18,112.82-287.2,122.6c-4.83.43-9.86-.25-14.51,1.77H654c-1-1.68-2.69-.91-4.06-1a496.89,496.89,0,0,1-105.9-18.59c-93.54-27.42-172.78-77.59-236.91-150.94Q199.34,590.1,184.87,426.58c-.47-5.19.25-10.56-1.77-15.59V355c1.68-1,.91-2.7,1-4.06a498.12,498.12,0,0,1,18.58-105.9c26-88.75,72.64-164.9,140.6-227.57q126-116.27,297.21-131.61C645.32-114.57,650.35-113.88,655-115.9Zm377.92,500c0-192.44-156.31-349.49-347.56-350.15-194.13-.68-350.94,155.13-352.29,347.42-1.37,194.55,155.51,352.1,348.56,352.47C876.15,734.23,1032.93,577.84,1032.93,384.11Z' transform='translate(-183.1 115.9)'/%3E%3Cpath class='cls-2' d='M1032.93,384.11c0,193.73-156.78,350.12-351.29,349.74-193-.37-349.93-157.92-348.56-352.47C334.43,189.09,491.24,33.28,685.37,34,876.62,34.62,1032.94,191.67,1032.93,384.11ZM683,496.81q43.74,0,87.48,0c15.55,0,25.32-9.72,25.33-25.21q0-87.48,0-175c0-15.83-9.68-25.46-25.59-25.46H595.77c-15.88,0-25.57,9.64-25.58,25.46q0,87.23,0,174.45c0,16.18,9.59,25.7,25.84,25.71Z' transform='translate(-183.1 115.9)'/%3E%3Cpath class='cls-3' d='M683,496.81H596c-16.25,0-25.84-9.53-25.84-25.71q0-87.23,0-174.45c0-15.82,9.7-25.46,25.58-25.46H770.22c15.91,0,25.59,9.63,25.59,25.46q0,87.47,0,175c0,15.49-9.78,25.2-25.33,25.21Q726.74,496.84,683,496.81Z' transform='translate(-183.1 115.9)'/%3E%3C/svg%3E`;case"text":return c=(.1*b).toFixed(2),`data:image/svg+xml,%3Csvg width='${b}' height='${c}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 528.15 53.64'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052ff;%7D%3C/style%3E%3C/defs%3E%3Ctitle%3ECoinbase_Wordmark_SubBrands_ALL%3C/title%3E%3Cpath class='cls-1' d='M164.45,15a15,15,0,0,0-11.74,5.4V0h-8.64V52.92h8.5V48a15,15,0,0,0,11.88,5.62c10.37,0,18.21-8.21,18.21-19.3S174.67,15,164.45,15Zm-1.3,30.67c-6.19,0-10.73-4.83-10.73-11.31S157,23,163.22,23s10.66,4.82,10.66,11.37S169.34,45.65,163.15,45.65Zm83.31-14.91-6.34-.93c-3-.43-5.18-1.44-5.18-3.82,0-2.59,2.8-3.89,6.62-3.89,4.18,0,6.84,1.8,7.42,4.76h8.35c-.94-7.49-6.7-11.88-15.55-11.88-9.15,0-15.2,4.68-15.2,11.3,0,6.34,4,10,12,11.16l6.33.94c3.1.43,4.83,1.65,4.83,4,0,2.95-3,4.17-7.2,4.17-5.12,0-8-2.09-8.43-5.25h-8.49c.79,7.27,6.48,12.38,16.84,12.38,9.44,0,15.7-4.32,15.7-11.74C258.12,35.28,253.58,31.82,246.46,30.74Zm-27.65-2.3c0-8.06-4.9-13.46-15.27-13.46-9.79,0-15.26,5-16.34,12.6h8.57c.43-3,2.73-5.4,7.63-5.4,4.39,0,6.55,1.94,6.55,4.32,0,3.09-4,3.88-8.85,4.39-6.63.72-14.84,3-14.84,11.66,0,6.7,5,11,12.89,11,6.19,0,10.08-2.59,12-6.7.28,3.67,3,6.05,6.84,6.05h5v-7.7h-4.25Zm-8.5,9.36c0,5-4.32,8.64-9.57,8.64-3.24,0-6-1.37-6-4.25,0-3.67,4.39-4.68,8.42-5.11s6-1.22,7.13-2.88ZM281.09,15c-11.09,0-19.23,8.35-19.23,19.36,0,11.6,8.72,19.3,19.37,19.3,9,0,16.06-5.33,17.86-12.89h-9c-1.3,3.31-4.47,5.19-8.71,5.19-5.55,0-9.72-3.46-10.66-9.51H299.3V33.12C299.3,22.46,291.53,15,281.09,15Zm-9.87,15.26c1.37-5.18,5.26-7.7,9.72-7.7,4.9,0,8.64,2.8,9.51,7.7ZM19.3,23a9.84,9.84,0,0,1,9.5,7h9.14c-1.65-8.93-9-15-18.57-15A19,19,0,0,0,0,34.34c0,11.09,8.28,19.3,19.37,19.3,9.36,0,16.85-6,18.5-15H28.8a9.75,9.75,0,0,1-9.43,7.06c-6.27,0-10.66-4.83-10.66-11.31S13,23,19.3,23Zm41.11-8A19,19,0,0,0,41,34.34c0,11.09,8.28,19.3,19.37,19.3A19,19,0,0,0,79.92,34.27C79.92,23.33,71.64,15,60.41,15Zm.07,30.67c-6.19,0-10.73-4.83-10.73-11.31S54.22,23,60.41,23s10.8,4.89,10.8,11.37S66.67,45.65,60.48,45.65ZM123.41,15c-5.62,0-9.29,2.3-11.45,5.54V15.7h-8.57V52.92H112V32.69C112,27,115.63,23,121,23c5,0,8.06,3.53,8.06,8.64V52.92h8.64V31C137.66,21.6,132.84,15,123.41,15ZM92,.36a5.36,5.36,0,0,0-5.55,5.47,5.55,5.55,0,0,0,11.09,0A5.35,5.35,0,0,0,92,.36Zm-9.72,23h5.4V52.92h8.64V15.7h-14Zm298.17-7.7L366.2,52.92H372L375.29,44H392l3.33,8.88h6L386.87,15.7ZM377,39.23l6.45-17.56h.1l6.56,17.56ZM362.66,15.7l-7.88,29h-.11l-8.14-29H341l-8,28.93h-.1l-8-28.87H319L329.82,53h5.45l8.19-29.24h.11L352,53h5.66L368.1,15.7Zm135.25,0v4.86h12.32V52.92h5.6V20.56h12.32V15.7ZM467.82,52.92h25.54V48.06H473.43v-12h18.35V31.35H473.43V20.56h19.93V15.7H467.82ZM443,15.7h-5.6V52.92h24.32V48.06H443Zm-30.45,0h-5.61V52.92h24.32V48.06H412.52Z'/%3E%3C/svg%3E`;case"textWithLogo":return c=(.25*b).toFixed(2),`data:image/svg+xml,%3Csvg width='${b}' height='${c}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 308.44 77.61'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052ff;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M142.94,20.2l-7.88,29H135l-8.15-29h-5.55l-8,28.93h-.11l-8-28.87H99.27l10.84,37.27h5.44l8.2-29.24h.1l8.41,29.24h5.66L148.39,20.2Zm17.82,0L146.48,57.42h5.82l3.28-8.88h16.65l3.34,8.88h6L167.16,20.2Zm-3.44,23.52,6.45-17.55h.11l6.56,17.55ZM278.2,20.2v4.86h12.32V57.42h5.6V25.06h12.32V20.2ZM248.11,57.42h25.54V52.55H253.71V40.61h18.35V35.85H253.71V25.06h19.94V20.2H248.11ZM223.26,20.2h-5.61V57.42H242V52.55H223.26Zm-30.46,0h-5.6V57.42h24.32V52.55H192.8Zm-154,38A19.41,19.41,0,1,1,57.92,35.57H77.47a38.81,38.81,0,1,0,0,6.47H57.92A19.39,19.39,0,0,1,38.81,58.21Z'/%3E%3C/svg%3E`;case"textLight":return c=(.1*b).toFixed(2),`data:image/svg+xml,%3Csvg width='${b}' height='${c}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 528.15 53.64'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fefefe;%7D%3C/style%3E%3C/defs%3E%3Ctitle%3ECoinbase_Wordmark_SubBrands_ALL%3C/title%3E%3Cpath class='cls-1' d='M164.45,15a15,15,0,0,0-11.74,5.4V0h-8.64V52.92h8.5V48a15,15,0,0,0,11.88,5.62c10.37,0,18.21-8.21,18.21-19.3S174.67,15,164.45,15Zm-1.3,30.67c-6.19,0-10.73-4.83-10.73-11.31S157,23,163.22,23s10.66,4.82,10.66,11.37S169.34,45.65,163.15,45.65Zm83.31-14.91-6.34-.93c-3-.43-5.18-1.44-5.18-3.82,0-2.59,2.8-3.89,6.62-3.89,4.18,0,6.84,1.8,7.42,4.76h8.35c-.94-7.49-6.7-11.88-15.55-11.88-9.15,0-15.2,4.68-15.2,11.3,0,6.34,4,10,12,11.16l6.33.94c3.1.43,4.83,1.65,4.83,4,0,2.95-3,4.17-7.2,4.17-5.12,0-8-2.09-8.43-5.25h-8.49c.79,7.27,6.48,12.38,16.84,12.38,9.44,0,15.7-4.32,15.7-11.74C258.12,35.28,253.58,31.82,246.46,30.74Zm-27.65-2.3c0-8.06-4.9-13.46-15.27-13.46-9.79,0-15.26,5-16.34,12.6h8.57c.43-3,2.73-5.4,7.63-5.4,4.39,0,6.55,1.94,6.55,4.32,0,3.09-4,3.88-8.85,4.39-6.63.72-14.84,3-14.84,11.66,0,6.7,5,11,12.89,11,6.19,0,10.08-2.59,12-6.7.28,3.67,3,6.05,6.84,6.05h5v-7.7h-4.25Zm-8.5,9.36c0,5-4.32,8.64-9.57,8.64-3.24,0-6-1.37-6-4.25,0-3.67,4.39-4.68,8.42-5.11s6-1.22,7.13-2.88ZM281.09,15c-11.09,0-19.23,8.35-19.23,19.36,0,11.6,8.72,19.3,19.37,19.3,9,0,16.06-5.33,17.86-12.89h-9c-1.3,3.31-4.47,5.19-8.71,5.19-5.55,0-9.72-3.46-10.66-9.51H299.3V33.12C299.3,22.46,291.53,15,281.09,15Zm-9.87,15.26c1.37-5.18,5.26-7.7,9.72-7.7,4.9,0,8.64,2.8,9.51,7.7ZM19.3,23a9.84,9.84,0,0,1,9.5,7h9.14c-1.65-8.93-9-15-18.57-15A19,19,0,0,0,0,34.34c0,11.09,8.28,19.3,19.37,19.3,9.36,0,16.85-6,18.5-15H28.8a9.75,9.75,0,0,1-9.43,7.06c-6.27,0-10.66-4.83-10.66-11.31S13,23,19.3,23Zm41.11-8A19,19,0,0,0,41,34.34c0,11.09,8.28,19.3,19.37,19.3A19,19,0,0,0,79.92,34.27C79.92,23.33,71.64,15,60.41,15Zm.07,30.67c-6.19,0-10.73-4.83-10.73-11.31S54.22,23,60.41,23s10.8,4.89,10.8,11.37S66.67,45.65,60.48,45.65ZM123.41,15c-5.62,0-9.29,2.3-11.45,5.54V15.7h-8.57V52.92H112V32.69C112,27,115.63,23,121,23c5,0,8.06,3.53,8.06,8.64V52.92h8.64V31C137.66,21.6,132.84,15,123.41,15ZM92,.36a5.36,5.36,0,0,0-5.55,5.47,5.55,5.55,0,0,0,11.09,0A5.35,5.35,0,0,0,92,.36Zm-9.72,23h5.4V52.92h8.64V15.7h-14Zm298.17-7.7L366.2,52.92H372L375.29,44H392l3.33,8.88h6L386.87,15.7ZM377,39.23l6.45-17.56h.1l6.56,17.56ZM362.66,15.7l-7.88,29h-.11l-8.14-29H341l-8,28.93h-.1l-8-28.87H319L329.82,53h5.45l8.19-29.24h.11L352,53h5.66L368.1,15.7Zm135.25,0v4.86h12.32V52.92h5.6V20.56h12.32V15.7ZM467.82,52.92h25.54V48.06H473.43v-12h18.35V31.35H473.43V20.56h19.93V15.7H467.82ZM443,15.7h-5.6V52.92h24.32V48.06H443Zm-30.45,0h-5.61V52.92h24.32V48.06H412.52Z'/%3E%3C/svg%3E`;case"textWithLogoLight":return c=(.25*b).toFixed(2),`data:image/svg+xml,%3Csvg width='${b}' height='${c}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 308.44 77.61'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fefefe;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M142.94,20.2l-7.88,29H135l-8.15-29h-5.55l-8,28.93h-.11l-8-28.87H99.27l10.84,37.27h5.44l8.2-29.24h.1l8.41,29.24h5.66L148.39,20.2Zm17.82,0L146.48,57.42h5.82l3.28-8.88h16.65l3.34,8.88h6L167.16,20.2Zm-3.44,23.52,6.45-17.55h.11l6.56,17.55ZM278.2,20.2v4.86h12.32V57.42h5.6V25.06h12.32V20.2ZM248.11,57.42h25.54V52.55H253.71V40.61h18.35V35.85H253.71V25.06h19.94V20.2H248.11ZM223.26,20.2h-5.61V57.42H242V52.55H223.26Zm-30.46,0h-5.6V57.42h24.32V52.55H192.8Zm-154,38A19.41,19.41,0,1,1,57.92,35.57H77.47a38.81,38.81,0,1,0,0,6.47H57.92A19.39,19.39,0,0,1,38.81,58.21Z'/%3E%3C/svg%3E`}}}a.s(["default",0,j3],77198),a.i(77198);let j4={options:"all"};function j5(a){var b,c,d,e;let f={metadata:{appName:a.appName||"Dapp",appLogoUrl:a.appLogoUrl||"",appChainIds:a.appChainIds||[]},preference:Object.assign(j4,null!=(b=a.preference)?b:{}),paymasterUrls:a.paymasterUrls};(null==(c=a.subAccounts)?void 0:c.toOwnerAccount)&&at(a.subAccounts.toOwnerAccount),an.subAccountsConfig.set({toOwnerAccount:null==(d=a.subAccounts)?void 0:d.toOwnerAccount,enableAutoSubAccounts:null==(e=a.subAccounts)?void 0:e.enableAutoSubAccounts}),an.config.set(f),an.persist.rehydrate(),ao(),!1!==f.preference.telemetry&&j(),as(f.preference);let g=null,h={getProvider(){var a;let b;return g||(g=null!=(a=ar(b={metadata:f.metadata,preference:f.preference}))?a:new j2(b)),g.sdk=h,g},subAccount:{async create(a){var b,c;return da(null==(b=an.getState().subAccount)?void 0:b.address,Error("subaccount already exists")),await (null==(c=h.getProvider())?void 0:c.request({method:"wallet_addSubAccount",params:[{version:"1",account:a}]}))},async get(){var a,b;let c=an.subAccounts.get();if(null==c?void 0:c.address)return c;let d=null==(b=(await (null==(a=h.getProvider())?void 0:a.request({method:"wallet_connect",params:[{version:"1",capabilities:{}}]}))).accounts[0].capabilities)?void 0:b.subAccounts;return Array.isArray(d)?d[0]:null},async addOwner({address:a,publicKey:b,chainId:c}){var d,e;let f=an.subAccounts.get(),g=an.account.get();da(g,Error("account does not exist")),da(null==f?void 0:f.address,Error("subaccount does not exist"));let i=[];if(b){let[a,c]=(0,jk.decodeAbiParameters)([{type:"bytes32"},{type:"bytes32"}],b);i.push({to:f.address,data:(0,cT.encodeFunctionData)({abi:iI,functionName:"addOwnerPublicKey",args:[a,c]}),value:(0,bS.toHex)(0)})}return a&&i.push({to:f.address,data:(0,cT.encodeFunctionData)({abi:iI,functionName:"addOwnerAddress",args:[a]}),value:(0,bS.toHex)(0)}),await (null==(d=h.getProvider())?void 0:d.request({method:"wallet_sendCalls",params:[{calls:i,chainId:(0,bS.toHex)(c),from:null==(e=g.accounts)?void 0:e[0],version:"1"}]}))},setToOwnerAccount(a){at(a),an.subAccountsConfig.set({toOwnerAccount:a})}}};return h}a.s(["CoinbaseWalletSDK",()=>j3,"createCoinbaseWalletSDK",()=>j5,"default",0,j3,"getCryptoKeyAccount",()=>im,"removeCryptoKey",()=>io],822554)}];

//# sourceMappingURL=7dfae_b633dd41._.js.map