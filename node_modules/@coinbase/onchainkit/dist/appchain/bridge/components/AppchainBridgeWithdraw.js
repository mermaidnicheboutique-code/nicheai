'use client';
import { jsxs, jsx } from "react/jsx-runtime";
import { Spinner } from "../../../internal/components/Spinner.js";
import { ErrorSvg } from "../../../internal/svg/fullWidthErrorSvg.js";
import { SuccessSvg } from "../../../internal/svg/fullWidthSuccessSvg.js";
import { cn, text, pressable } from "../../../styles/theme.js";
import { useEffect } from "react";
import { useWithdrawButton } from "../hooks/useWithdrawButton.js";
import { useAppchainBridgeContext } from "./AppchainBridgeProvider.js";
const buttonStyles = cn(pressable.primary, "rounded-ock-default", "w-full rounded-xl", "px-4 py-3 font-medium text-base text-white leading-6", text.headline);
const AppchainBridgeWithdraw = () => {
  const {
    withdrawStatus,
    waitForWithdrawal,
    resumeWithdrawalTxHash,
    handleResetState
  } = useAppchainBridgeContext();
  const {
    shouldShowClaim,
    label,
    isError,
    isPending
  } = useWithdrawButton({
    withdrawStatus
  });
  useEffect(() => {
    (async () => {
      if (withdrawStatus === "withdrawSuccess") {
        waitForWithdrawal();
      }
      if (resumeWithdrawalTxHash) {
        waitForWithdrawal(resumeWithdrawalTxHash);
      }
    })();
  }, [withdrawStatus, waitForWithdrawal, resumeWithdrawalTxHash]);
  return /* @__PURE__ */ jsxs("div", { className: "ock:flex ock:h-full ock:w-full ock:flex-col ock:justify-between", children: [
    /* @__PURE__ */ jsx("div", { children: /* @__PURE__ */ jsx("div", { className: "ock:flex ock:items-center", children: /* @__PURE__ */ jsx("h2", { className: "ock:text-ock-foreground ock:flex-1 ock:text-center ock:font-medium ock:text-lg", children: label }) }) }),
    /* @__PURE__ */ jsxs("div", { className: "ock:mt-16 ock:px-4 ock:pb-4", children: [
      isError && /* @__PURE__ */ jsx(ErrorContent, { onBack: handleResetState }),
      isPending && /* @__PURE__ */ jsx(LoadingContent, {}),
      shouldShowClaim && /* @__PURE__ */ jsx(ClaimContent, {}),
      withdrawStatus === "claimRejected" && /* @__PURE__ */ jsx("div", { className: cn(text.label2, "ock:text-ock-error", "ock:mt-2"), children: "Transaction denied" })
    ] })
  ] });
};
function LoadingContent() {
  return /* @__PURE__ */ jsxs("div", { className: "ock:flex ock:h-full ock:flex-col ock:items-center ock:justify-center ock:gap-16", children: [
    /* @__PURE__ */ jsx(Spinner, { className: "ock:border-t-ock-primary ock:h-24 ock:w-24" }),
    /* @__PURE__ */ jsxs("span", { className: "ock:px-4 ock:text-center ock:font-medium ock:text-base", children: [
      "Waiting for claim to be ready...",
      /* @__PURE__ */ jsx("br", {}),
      "Please do not close this window."
    ] })
  ] });
}
function ErrorContent({
  onBack
}) {
  return /* @__PURE__ */ jsxs("div", { className: "ock:flex ock:flex-col ock:items-center ock:gap-16", children: [
    /* @__PURE__ */ jsx("div", { className: "ock:flex ock:justify-center", children: /* @__PURE__ */ jsx("div", { className: "ock:h-20 ock:w-20", children: /* @__PURE__ */ jsx(ErrorSvg, { className: "ock:fill-ock-error" }) }) }),
    /* @__PURE__ */ jsxs("div", { className: "ock:flex ock:flex-col ock:items-center ock:gap-4", children: [
      /* @__PURE__ */ jsxs("span", { className: "ock:px-4 ock:text-center ock:font-medium ock:text-base", children: [
        "There was an error processing your withdrawal.",
        /* @__PURE__ */ jsx("br", {}),
        "If the issue persists, please contact support."
      ] }),
      /* @__PURE__ */ jsx("button", { onClick: onBack, className: buttonStyles, type: "button", children: /* @__PURE__ */ jsx("div", { className: cn(text.headline, "ock:text-ock-foreground-inverse", "ock:flex ock:justify-center"), children: "Back to bridge" }) })
    ] })
  ] });
}
function ClaimContent() {
  const {
    withdrawStatus,
    proveAndFinalizeWithdrawal
  } = useAppchainBridgeContext();
  const {
    buttonDisabled,
    buttonContent
  } = useWithdrawButton({
    withdrawStatus
  });
  return /* @__PURE__ */ jsxs("div", { className: "ock:flex ock:flex-col ock:items-center ock:gap-16", children: [
    /* @__PURE__ */ jsx("div", { className: "ock:flex ock:justify-center", children: /* @__PURE__ */ jsx("div", { className: "ock:h-20 ock:w-20", children: /* @__PURE__ */ jsx(SuccessSvg, { className: "ock:fill-ock-primary" }) }) }),
    /* @__PURE__ */ jsx("button", { onClick: proveAndFinalizeWithdrawal, className: cn(buttonStyles, buttonDisabled && pressable.disabled), type: "button", children: /* @__PURE__ */ jsx("div", { className: cn(text.headline, "ock:text-ock-foreground-inverse", "ock:flex ock:justify-center"), children: buttonContent }) })
  ] });
}
export {
  AppchainBridgeWithdraw
};
//# sourceMappingURL=AppchainBridgeWithdraw.js.map
