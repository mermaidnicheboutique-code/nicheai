{"version":3,"file":"AppchainBridgeWithdraw.js","sources":["../../../../src/appchain/bridge/components/AppchainBridgeWithdraw.tsx"],"sourcesContent":["'use client';\nimport { Spinner } from '@/internal/components/Spinner';\nimport { ErrorSvg } from '@/internal/svg/fullWidthErrorSvg';\nimport { SuccessSvg } from '@/internal/svg/fullWidthSuccessSvg';\nimport { cn, pressable, text } from '@/styles/theme';\nimport { useEffect } from 'react';\nimport { useWithdrawButton } from '../hooks/useWithdrawButton';\nimport { useAppchainBridgeContext } from './AppchainBridgeProvider';\n\nconst buttonStyles = cn(\n  pressable.primary,\n  'rounded-ock-default',\n  'w-full rounded-xl',\n  'px-4 py-3 font-medium text-base text-white leading-6',\n  text.headline,\n);\n\nexport const AppchainBridgeWithdraw = () => {\n  const {\n    withdrawStatus,\n    waitForWithdrawal,\n    resumeWithdrawalTxHash,\n    handleResetState,\n  } = useAppchainBridgeContext();\n\n  const { shouldShowClaim, label, isError, isPending } = useWithdrawButton({\n    withdrawStatus,\n  });\n\n  useEffect(() => {\n    (async () => {\n      if (withdrawStatus === 'withdrawSuccess') {\n        // If appchain withdrawal is successful, wait for claim to be ready\n        waitForWithdrawal();\n      }\n      if (resumeWithdrawalTxHash) {\n        // If the user has resumed a withdrawal transaction, wait for claim to be ready\n        waitForWithdrawal(resumeWithdrawalTxHash);\n      }\n    })();\n  }, [withdrawStatus, waitForWithdrawal, resumeWithdrawalTxHash]);\n\n  return (\n    <div className=\"flex h-full w-full flex-col justify-between\">\n      <div>\n        <div className=\"flex items-center\">\n          <h2 className=\"text-ock-foreground flex-1 text-center font-medium text-lg\">\n            {label}\n          </h2>\n        </div>\n      </div>\n      <div className=\"mt-16 px-4 pb-4\">\n        {isError && <ErrorContent onBack={handleResetState} />}\n        {isPending && <LoadingContent />}\n        {shouldShowClaim && <ClaimContent />}\n        {withdrawStatus === 'claimRejected' && (\n          <div className={cn(text.label2, 'text-ock-error', 'mt-2')}>\n            Transaction denied\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nfunction LoadingContent() {\n  return (\n    <div className=\"flex h-full flex-col items-center justify-center gap-16\">\n      <Spinner className=\"border-t-ock-primary h-24 w-24\" />\n      <span className=\"px-4 text-center font-medium text-base\">\n        Waiting for claim to be ready...\n        <br />\n        Please do not close this window.\n      </span>\n    </div>\n  );\n}\n\nfunction ErrorContent({ onBack }: { onBack: () => void }) {\n  return (\n    <div className=\"flex flex-col items-center gap-16\">\n      <div className=\"flex justify-center\">\n        <div className=\"h-20 w-20\">\n          <ErrorSvg className=\"fill-ock-error\" />\n        </div>\n      </div>\n      <div className=\"flex flex-col items-center gap-4\">\n        <span className=\"px-4 text-center font-medium text-base\">\n          There was an error processing your withdrawal.\n          <br />\n          If the issue persists, please contact support.\n        </span>\n        <button onClick={onBack} className={buttonStyles} type=\"button\">\n          <div\n            className={cn(\n              text.headline,\n              'text-ock-foreground-inverse',\n              'flex justify-center',\n            )}\n          >\n            Back to bridge\n          </div>\n        </button>\n      </div>\n    </div>\n  );\n}\n\nfunction ClaimContent() {\n  const { withdrawStatus, proveAndFinalizeWithdrawal } =\n    useAppchainBridgeContext();\n\n  const { buttonDisabled, buttonContent } = useWithdrawButton({\n    withdrawStatus,\n  });\n\n  return (\n    <div className=\"flex flex-col items-center gap-16\">\n      <div className=\"flex justify-center\">\n        <div className=\"h-20 w-20\">\n          <SuccessSvg className=\"fill-ock-primary\" />\n        </div>\n      </div>\n      <button\n        onClick={proveAndFinalizeWithdrawal}\n        className={cn(buttonStyles, buttonDisabled && pressable.disabled)}\n        type=\"button\"\n      >\n        <div\n          className={cn(\n            text.headline,\n            'text-ock-foreground-inverse',\n            'flex justify-center',\n          )}\n        >\n          {buttonContent}\n        </div>\n      </button>\n    </div>\n  );\n}\n"],"names":["buttonStyles","cn","pressable","primary","text","headline","AppchainBridgeWithdraw","withdrawStatus","waitForWithdrawal","resumeWithdrawalTxHash","handleResetState","useAppchainBridgeContext","shouldShowClaim","label","isError","isPending","useWithdrawButton","useEffect","label2","LoadingContent","ErrorContent","onBack","ClaimContent","proveAndFinalizeWithdrawal","buttonDisabled","buttonContent","disabled"],"mappings":"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"}