{"version":3,"file":"AppchainBridgeInput.js","sources":["../../../../src/appchain/bridge/components/AppchainBridgeInput.tsx"],"sourcesContent":["'use client';\nimport { Address } from '@/identity';\nimport { useMemo, useState } from 'react';\nimport { useAccount } from 'wagmi';\nimport { TextInput } from '../../../internal/components/TextInput';\nimport { isValidAmount } from '../../../internal/utils/isValidAmount';\nimport { cn, text } from '../../../styles/theme';\nimport { TokenSelectDropdown } from '../../../token';\nimport { useAppchainBridgeContext } from './AppchainBridgeProvider';\n\ninterface AppchainBridgeInputProps {\n  className?: string;\n  delayMs?: number;\n}\n\nexport function AppchainBridgeInput({\n  className,\n  delayMs = 50,\n}: AppchainBridgeInputProps) {\n  const {\n    balance,\n    bridgeParams,\n    bridgeableTokens,\n    to,\n    isPriceLoading,\n    handleAmountChange,\n    setIsAddressModalOpen,\n    resetDepositStatus,\n  } = useAppchainBridgeContext();\n  const [currentToken, setCurrentToken] = useState(bridgeableTokens[0]);\n  const { address } = useAccount();\n  const insufficientBalance = useMemo(() => {\n    return balance && Number(balance) < Number(bridgeParams.amount);\n  }, [balance, bridgeParams.amount]);\n\n  const label = useMemo(() => {\n    if (insufficientBalance) {\n      return 'Insufficient funds';\n    }\n    if (isPriceLoading) {\n      return (\n        <div className=\"h-4 w-16 animate-pulse rounded bg-gray-200 dark:bg-gray-700\" />\n      );\n    }\n    if (bridgeParams.amountUSD === 'NaN') {\n      return '';\n    }\n    return `~$${bridgeParams.amountUSD}`;\n  }, [insufficientBalance, isPriceLoading, bridgeParams.amountUSD]);\n\n  return (\n    <div\n      className={cn(\n        'bg-ock-secondary',\n        'rounded-ock-default',\n        'box-border flex h-[148px] w-full flex-col items-start p-4',\n        className,\n      )}\n      data-testid=\"ockBridgeAmountInput_Container\"\n    >\n      <div className=\"flex w-full items-center justify-between\">\n        <span\n          className={cn(\n            text.label2,\n            'text-ock-foreground-muted',\n            'flex items-center gap-1',\n          )}\n        >\n          Send to{' '}\n          <button\n            type=\"button\"\n            className={cn(\n              'cursor-pointer hover:underline focus:outline-none',\n              text.label2,\n            )}\n            onClick={() => {\n              setIsAddressModalOpen(true);\n            }}\n            title={bridgeParams.recipient}\n          >\n            <Address\n              address={\n                bridgeParams.recipient ||\n                '0x0000000000000000000000000000000000000000'\n              }\n              hasCopyAddressOnClick={false}\n              className={cn(text.label2, 'text-ock-foreground')}\n            />\n          </button>{' '}\n          on <span className=\"inline-flex h-4 w-4 items-center\">{to.icon}</span>\n        </span>\n      </div>\n      <div className=\"flex w-full items-center justify-between\">\n        <TextInput\n          className={cn(\n            'mr-2 w-full border-[none] bg-transparent font-display text-[2.5rem]',\n            'leading-none outline-none',\n            'text-ock-foreground',\n            insufficientBalance && 'text-ock-error',\n          )}\n          placeholder=\"0.00\"\n          delayMs={delayMs}\n          inputValidator={isValidAmount}\n          onChange={(value) => {\n            handleAmountChange({\n              amount: value,\n              token: currentToken,\n            });\n          }}\n          value={bridgeParams.amount}\n        />\n        <TokenSelectDropdown\n          token={currentToken}\n          options={bridgeableTokens}\n          setToken={(token) => {\n            handleAmountChange({\n              amount: bridgeParams.amount,\n              token: token,\n            });\n            resetDepositStatus();\n            setCurrentToken(token);\n          }}\n        />\n      </div>\n      <div className=\"mt-4 flex w-full justify-between\">\n        <div className=\"flex items-center\">\n          <span\n            className={cn(\n              text.label2,\n              'text-ock-foreground-muted',\n              insufficientBalance && 'text-ock-error',\n            )}\n          >\n            {label}\n          </span>\n        </div>\n        {address && (\n          <div className=\"flex items-center\">\n            <span\n              className={cn(text.label2, 'text-ock-foreground-muted')}\n            >{`Balance: ${Number(balance).toLocaleString(undefined, {\n              maximumFractionDigits: 5,\n              minimumFractionDigits: 0,\n            })}`}</span>\n            <button\n              type=\"button\"\n              className=\"flex cursor-pointer items-center justify-center px-2 py-1\"\n              data-testid=\"ockBridgeAmountInput_MaxButton\"\n              onClick={() => {\n                handleAmountChange({\n                  amount: balance,\n                  token: bridgeParams.token,\n                });\n              }}\n            >\n              <span className={cn(text.label1, 'text-ock-primary')}>Max</span>\n            </button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":["AppchainBridgeInput","className","delayMs","balance","bridgeParams","bridgeableTokens","to","isPriceLoading","handleAmountChange","setIsAddressModalOpen","resetDepositStatus","useAppchainBridgeContext","currentToken","setCurrentToken","useState","address","useAccount","insufficientBalance","useMemo","Number","amount","label","amountUSD","cn","text","label2","recipient","icon","isValidAmount","value","token","toLocaleString","undefined","maximumFractionDigits","minimumFractionDigits","label1"],"mappings":";;;;;;;;;;;;;;;;;;;;AAeO,SAASA,oBAAoB;AAAA,EAClCC;AAAAA,EACAC,UAAU;AACc,GAAG;AACrB,QAAA;AAAA,IACJC;AAAAA,IACAC;AAAAA,IACAC;AAAAA,IACAC;AAAAA,IACAC;AAAAA,IACAC;AAAAA,IACAC;AAAAA,IACAC;AAAAA,MACEC,yBAAyB;AAC7B,QAAM,CAACC,cAAcC,eAAe,IAAIC,SAAST,iBAAiB,CAAC,CAAC;AAC9D,QAAA;AAAA,IAAEU;AAAAA,MAAYC,WAAW;AACzBC,QAAAA,sBAAsBC,QAAQ,MAAM;AACxC,WAAOf,WAAWgB,OAAOhB,OAAO,IAAIgB,OAAOf,aAAagB,MAAM;AAAA,EAC7D,GAAA,CAACjB,SAASC,aAAagB,MAAM,CAAC;AAE3BC,QAAAA,QAAQH,QAAQ,MAAM;AAC1B,QAAID,qBAAqB;AAChB,aAAA;AAAA,IAAA;AAET,QAAIV,gBAAgB;AAEhB,aAAA,oBAAC,OAAI,EAAA,WAAU,sFAAgE,CAAA;AAAA,IAAA;AAG/EH,QAAAA,aAAakB,cAAc,OAAO;AAC7B,aAAA;AAAA,IAAA;AAEF,WAAA,KAAKlB,aAAakB,SAAS;AAAA,KACjC,CAACL,qBAAqBV,gBAAgBH,aAAakB,SAAS,CAAC;AAG9D,SAAA,qBAAC,OACC,EAAA,WAAWC,GAITtB,wBAAAA,2BAAAA,yFAAAA,SACF,GACA,eAAY,kCAEZ,UAAA;AAAA,IAAC,oBAAA,OAAA,EAAI,WAAU,4DACb,UAAC,qBAAA,QAAA,EACC,WAAWsB,GACTC,KAAKC,QAAM,iCAAA,qCAGb,GAAE,UAAA;AAAA,MAAA;AAAA,MAEM;AAAA,MACR,oBAAC,UACC,EAAA,MAAK,UACL,WAAWF,GAETC,iEAAAA,KAAKC,MACP,GACA,SAAS,MAAM;AACbhB,8BAAsB,IAAI;AAAA,MAAA,GAE5B,OAAOL,aAAasB,WAEpB,UAAC,oBAAA,SAAA,EACC,SACEtB,aAAasB,aACb,8CAEF,uBAAuB,OACvB,WAAWH,GAAGC,KAAKC,QAAM,yBAAuB,EAAE,CAAA,GAEtD;AAAA,MAAU;AAAA,MAAG;AAAA,MACT,oBAAA,QAAA,EAAK,WAAU,oDAAoCnB,aAAGqB,KAAK,CAAA;AAAA,IAAA,EAAA,CACjE,EACF,CAAA;AAAA,IACA,qBAAC,OAAI,EAAA,WAAU,4DACb,UAAA;AAAA,MAAA,oBAAC,WACC,EAAA,WAAWJ,GAITN,+FAAAA,qCAAAA,2BAAAA,uBACF,oBAAA,GACA,aAAY,QACZ,SACA,gBAAgBW,eAChB,UAAWC,CAAU,UAAA;AACA,2BAAA;AAAA,UACjBT,QAAQS;AAAAA,UACRC,OAAOlB;AAAAA,QAAAA,CACR;AAAA,MAAA,GAEH,OAAOR,aAAagB,QAAO;AAAA,0BAE5B,qBACC,EAAA,OAAOR,cACP,SAASP,kBACT,UAAWyB,CAAU,UAAA;AACA,2BAAA;AAAA,UACjBV,QAAQhB,aAAagB;AAAAA,UACrBU;AAAAA,QAAAA,CACD;AACkB,2BAAA;AACnBjB,wBAAgBiB,KAAK;AAAA,MAAA,EACrB,CAAA;AAAA,IAAA,GAEN;AAAA,IACA,qBAAC,OAAI,EAAA,WAAU,oDACb,UAAA;AAAA,MAAA,oBAAC,OAAI,EAAA,WAAU,6BACb,UAAA,oBAAC,UACC,WAAWP,GACTC,KAAKC,QAAM,iCAEXR,uBAAmB,oBACrB,GAECI,gBACH,CAAA,GACF;AAAA,MACCN,WACC,qBAAC,OAAI,EAAA,WAAU,6BACb,UAAA;AAAA,QAAA,oBAAC,QACC,EAAA,WAAWQ,GAAGC,KAAKC,QAAM,+BAA6B,GACtD,UAAA,YAAYN,OAAOhB,OAAO,EAAE4B,eAAeC,QAAW;AAAA,UACtDC,uBAAuB;AAAA,UACvBC,uBAAuB;AAAA,QAAA,CACxB,CAAC,GAAG,CAAA;AAAA,QACL,oBAAC,YACC,MAAK,UACL,WAAU,qFACV,eAAY,kCACZ,SAAS,MAAM;AACM,6BAAA;AAAA,YACjBd,QAAQjB;AAAAA,YACR2B,OAAO1B,aAAa0B;AAAAA,UAAAA,CACrB;AAAA,QACH,GAEA,UAAC,oBAAA,QAAA,EAAK,WAAWP,GAAGC,KAAKW,QAA0B,sBAAA,GAAG,UAAA,MAAG,CAAA,EAC3D,CAAA;AAAA,MAAA,EACF,CAAA;AAAA,IAAA,EAEJ,CAAA;AAAA,EAAA,GACF;AAEJ;"}