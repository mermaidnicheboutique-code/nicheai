{"version":3,"file":"usePopupMonitor.js","sources":["../../../src/buy/hooks/usePopupMonitor.ts"],"sourcesContent":["import { useCallback, useEffect, useRef } from 'react';\n\nexport const usePopupMonitor = (onClose?: () => void) => {\n  const intervalRef = useRef<number | null>(null);\n\n  // Start monitoring the popup\n  const startPopupMonitor = useCallback(\n    (popupWindow: Window) => {\n      if (intervalRef.current) {\n        clearInterval(intervalRef.current);\n      }\n      intervalRef.current = window.setInterval(() => {\n        if (popupWindow.closed) {\n          if (intervalRef.current) {\n            clearInterval(intervalRef.current);\n            intervalRef.current = null;\n          }\n          onClose?.();\n        }\n      }, 500);\n    },\n    [onClose],\n  );\n\n  // Stop monitoring the popup\n  const stopPopupMonitor = useCallback(() => {\n    if (intervalRef.current) {\n      clearInterval(intervalRef.current);\n      intervalRef.current = null;\n    }\n  }, []);\n\n  // Cleanup interval on unmount\n  useEffect(() => {\n    return () => stopPopupMonitor();\n  }, [stopPopupMonitor]);\n\n  return { startPopupMonitor, stopPopupMonitor };\n};\n"],"names":["usePopupMonitor","onClose","intervalRef","useRef","startPopupMonitor","useCallback","popupWindow","current","clearInterval","window","setInterval","closed","stopPopupMonitor","useEffect"],"mappings":";AAEaA,MAAAA,kBAAkBA,CAACC,YAAyB;AACjDC,QAAAA,cAAcC,OAAsB,IAAI;AAGxCC,QAAAA,oBAAoBC,YACxB,CAACC,gBAAwB;AACvB,QAAIJ,YAAYK,SAAS;AACvBC,oBAAcN,YAAYK,OAAO;AAAA,IAAA;AAEvBA,gBAAAA,UAAUE,OAAOC,YAAY,MAAM;AAC7C,UAAIJ,YAAYK,QAAQ;AACtB,YAAIT,YAAYK,SAAS;AACvBC,wBAAcN,YAAYK,OAAO;AACjCL,sBAAYK,UAAU;AAAA,QAAA;AAEd;AAAA,MAAA;AAAA,OAEX,GAAG;AAAA,EAAA,GAER,CAACN,OAAO,CACV;AAGMW,QAAAA,mBAAmBP,YAAY,MAAM;AACzC,QAAIH,YAAYK,SAAS;AACvBC,oBAAcN,YAAYK,OAAO;AACjCL,kBAAYK,UAAU;AAAA,IAAA;AAAA,EAE1B,GAAG,EAAE;AAGLM,YAAU,MAAM;AACd,WAAO,MAAMD,iBAAiB;AAAA,EAAA,GAC7B,CAACA,gBAAgB,CAAC;AAEd,SAAA;AAAA,IAAER;AAAAA,IAAmBQ;AAAAA,EAAiB;AAC/C;"}