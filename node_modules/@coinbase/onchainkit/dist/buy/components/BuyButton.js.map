{"version":3,"file":"BuyButton.js","sources":["../../../src/buy/components/BuyButton.tsx"],"sourcesContent":["'use client';\nimport { useCallback, useMemo } from 'react';\nimport { Spinner } from '../../internal/components/Spinner';\nimport { checkmarkSvg } from '../../internal/svg/checkmarkSvg';\nimport { CloseSvg } from '../../internal/svg/closeSvg';\nimport { cn, pressable, text } from '../../styles/theme';\nimport { ConnectWallet } from '../../wallet';\nimport { useBuyContext } from './BuyProvider';\n\nexport function BuyButton() {\n  const {\n    address,\n    disabled,\n    setIsDropdownOpen,\n    isDropdownOpen,\n    from,\n    fromETH,\n    fromUSDC,\n    to,\n    lifecycleStatus: { statusName },\n    updateLifecycleStatus,\n  } = useBuyContext();\n\n  const isLoading =\n    to?.loading ||\n    from?.loading ||\n    fromETH?.loading ||\n    fromUSDC?.loading ||\n    statusName === 'transactionPending' ||\n    statusName === 'transactionApproved';\n\n  const isMissingRequiredField = !to?.amount || !to?.token;\n  const isDisabled = isLoading || disabled;\n\n  const handleSubmit = useCallback(() => {\n    if (isMissingRequiredField) {\n      updateLifecycleStatus({\n        statusName: 'error',\n        statusData: {\n          code: 'TmBPc05',\n          error: 'Missing required fields',\n          message: 'Complete the field to continue',\n        },\n      });\n      return;\n    }\n    if (isDropdownOpen) {\n      setIsDropdownOpen(false);\n      return;\n    }\n    if (!isDropdownOpen) {\n      setIsDropdownOpen(true);\n    }\n  }, [\n    isMissingRequiredField,\n    setIsDropdownOpen,\n    isDropdownOpen,\n    updateLifecycleStatus,\n  ]);\n\n  const buttonContent = useMemo(() => {\n    if (statusName === 'success') {\n      return checkmarkSvg;\n    }\n    if (isDropdownOpen) {\n      return <CloseSvg className=\"fill-ock-foreground-inverse\" />;\n    }\n    return 'Buy';\n  }, [statusName, isDropdownOpen]);\n\n  if (!isDisabled && !address) {\n    return (\n      <ConnectWallet disconnectedLabel=\"Buy\" className=\"h-12 w-24 min-w-24\" />\n    );\n  }\n\n  return (\n    <button\n      type=\"button\"\n      className={cn(\n        'bg-ock-primary',\n        'rounded-ock-default',\n        'flex rounded-xl',\n        'h-12 w-24 items-center justify-center px-4 py-3',\n        isDisabled && pressable.disabled,\n        text.headline,\n      )}\n      onClick={handleSubmit}\n      data-testid=\"ockBuyButton_Button\"\n      disabled={isDisabled}\n    >\n      {isLoading ? (\n        <Spinner />\n      ) : (\n        <span className={cn(text.headline, 'text-ock-foreground-inverse')}>\n          {buttonContent}\n        </span>\n      )}\n    </button>\n  );\n}\n"],"names":["BuyButton","address","disabled","setIsDropdownOpen","isDropdownOpen","from","fromETH","fromUSDC","to","lifecycleStatus","statusName","updateLifecycleStatus","useBuyContext","isLoading","loading","isMissingRequiredField","amount","token","isDisabled","handleSubmit","useCallback","statusData","code","error","message","buttonContent","useMemo","checkmarkSvg","cn","pressable","text","headline"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASO,SAASA,YAAY;AACpB,QAAA;AAAA,IACJC;AAAAA,IACAC;AAAAA,IACAC;AAAAA,IACAC;AAAAA,IACAC;AAAAA,IACAC;AAAAA,IACAC;AAAAA,IACAC;AAAAA,IACAC,iBAAiB;AAAA,MAAEC;AAAAA,IAAW;AAAA,IAC9BC;AAAAA,MACEC,cAAc;AAEZC,QAAAA,aACJL,yBAAIM,aACJT,6BAAMS,aACNR,mCAASQ,aACTP,qCAAUO,YACVJ,eAAe,wBACfA,eAAe;AAEjB,QAAMK,yBAAyB,EAACP,yBAAIQ,WAAU,EAACR,yBAAIS;AACnD,QAAMC,aAAaL,aAAaX;AAE1BiB,QAAAA,eAAeC,YAAY,MAAM;AACrC,QAAIL,wBAAwB;AACJ,4BAAA;AAAA,QACpBL,YAAY;AAAA,QACZW,YAAY;AAAA,UACVC,MAAM;AAAA,UACNC,OAAO;AAAA,UACPC,SAAS;AAAA,QAAA;AAAA,MACX,CACD;AACD;AAAA,IAAA;AAEF,QAAIpB,gBAAgB;AAClBD,wBAAkB,KAAK;AACvB;AAAA,IAAA;AAEF,QAAI,CAACC,gBAAgB;AACnBD,wBAAkB,IAAI;AAAA,IAAA;AAAA,KAEvB,CACDY,wBACAZ,mBACAC,gBACAO,qBAAqB,CACtB;AAEKc,QAAAA,gBAAgBC,QAAQ,MAAM;AAClC,QAAIhB,eAAe,WAAW;AACrBiB,aAAAA;AAAAA,IAAAA;AAET,QAAIvB,gBAAgB;AACX,aAAA,oBAAC,UAAS,EAAA,WAAU,kCAAgC,CAAA;AAAA,IAAA;AAEtD,WAAA;AAAA,EAAA,GACN,CAACM,YAAYN,cAAc,CAAC;AAE3B,MAAA,CAACc,cAAc,CAACjB,SAAS;AAC3B,WACG,oBAAA,eAAA,EAAc,mBAAkB,OAAM,WAAU,kCAAuB;AAAA,EAAA;AAI5E,SACG,oBAAA,UAAA,EACC,MAAK,UACL,WAAW2B,GAKTV,sBAAAA,2BAAAA,2BAAAA,2EAAAA,cAAcW,UAAU3B,UACxB4B,KAAKC,QACP,GACA,SAASZ,cACT,eAAY,uBACZ,UAAUD,YAETL,UACC,YAAA,oBAAC,WAAU,IAEX,oBAAC,QAAK,EAAA,WAAWe,GAAGE,KAAKC,UAAQ,iCAA+B,GAC7DN,wBACH,CAAA,GAEJ;AAEJ;"}