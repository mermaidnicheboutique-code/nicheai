{"version":3,"file":"DefaultOnchainKitProviders.js","sources":["../src/DefaultOnchainKitProviders.tsx"],"sourcesContent":["'use client';\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\nimport { type PropsWithChildren, useContext, useMemo } from 'react';\nimport { Config, WagmiProvider } from 'wagmi';\nimport { baseAccount } from 'wagmi/connectors';\nimport { farcasterMiniApp } from '@farcaster/miniapp-wagmi-connector';\nimport { MiniKitContext } from '@/minikit/MiniKitProvider';\nimport { createWagmiConfig } from './core/createWagmiConfig';\nimport { useProviderDependencies } from './internal/hooks/useProviderDependencies';\nimport { useOnchainKit } from './useOnchainKit';\n\nexport function DefaultOnchainKitProviders({ children }: PropsWithChildren) {\n  // Check the React context for WagmiProvider and QueryClientProvider\n  const { providedWagmiConfig, providedQueryClient } =\n    useProviderDependencies();\n\n  return (\n    <WagmiProviderWithDefault providedWagmiConfig={providedWagmiConfig}>\n      <QueryClientProviderWithDefault providedQueryClient={providedQueryClient}>\n        {children}\n      </QueryClientProviderWithDefault>\n    </WagmiProviderWithDefault>\n  );\n}\n\nfunction WagmiProviderWithDefault({\n  children,\n  providedWagmiConfig,\n}: PropsWithChildren<{\n  providedWagmiConfig: Config | null;\n}>) {\n  const onchainKitConfig = useOnchainKit();\n  // Using useContext here because useMiniKit throws if MiniKit is not enabled\n  const miniKit = useContext(MiniKitContext);\n\n  const apiKey = onchainKitConfig.apiKey ?? undefined;\n  const appName = onchainKitConfig.config?.appearance?.name ?? undefined;\n  const appLogoUrl = onchainKitConfig.config?.appearance?.logo ?? undefined;\n\n  const defaultConnector = useMemo(() => {\n    if (miniKit?.context) {\n      return farcasterMiniApp();\n    }\n\n    return baseAccount({\n      appName,\n      appLogoUrl,\n    });\n  }, [appName, appLogoUrl, miniKit?.context]);\n\n  const defaultConfig = useMemo(() => {\n    if (providedWagmiConfig) return providedWagmiConfig;\n\n    return createWagmiConfig({\n      apiKey,\n      appName,\n      appLogoUrl,\n      connectors: [defaultConnector],\n    });\n  }, [providedWagmiConfig, defaultConnector, apiKey, appName, appLogoUrl]);\n\n  if (providedWagmiConfig) {\n    return children;\n  }\n\n  return <WagmiProvider config={defaultConfig}>{children}</WagmiProvider>;\n}\n\nfunction QueryClientProviderWithDefault({\n  children,\n  providedQueryClient,\n}: PropsWithChildren<{ providedQueryClient: QueryClient | null }>) {\n  const queryClient = useMemo(() => {\n    return providedQueryClient || new QueryClient();\n  }, [providedQueryClient]);\n\n  if (providedQueryClient) return children;\n\n  return (\n    <QueryClientProvider client={queryClient}>{children}</QueryClientProvider>\n  );\n}\n"],"names":["DefaultOnchainKitProviders","children","providedWagmiConfig","providedQueryClient","useProviderDependencies","WagmiProviderWithDefault","onchainKitConfig","useOnchainKit","miniKit","useContext","MiniKitContext","apiKey","undefined","appName","config","appearance","name","appLogoUrl","logo","defaultConnector","useMemo","context","farcasterMiniApp","baseAccount","defaultConfig","createWagmiConfig","connectors","QueryClientProviderWithDefault","queryClient","QueryClient"],"mappings":";;;;;;;;;;AAWO,SAASA,2BAA2B;AAAA,EAAEC;AAA4B,GAAG;AAEpE,QAAA;AAAA,IAAEC;AAAAA,IAAqBC;AAAAA,MAC3BC,wBAAwB;AAE1B,6BACG,0BAAyB,EAAA,qBACxB,8BAAC,gCAA+B,EAAA,qBAC7BH,UACH,EACF,CAAA;AAEJ;AAEA,SAASI,yBAAyB;AAAA,EAChCJ;AAAAA,EACAC;AAGD,GAAG;;AACF,QAAMI,mBAAmBC,cAAc;AAEjCC,QAAAA,UAAUC,WAAWC,cAAc;AAEnCC,QAAAA,SAASL,iBAAiBK,UAAUC;AAC1C,QAAMC,YAAUP,4BAAiBQ,WAAjBR,mBAAyBS,eAAzBT,mBAAqCU,SAAQJ;AAC7D,QAAMK,eAAaX,4BAAiBQ,WAAjBR,mBAAyBS,eAAzBT,mBAAqCY,SAAQN;AAE1DO,QAAAA,mBAAmBC,QAAQ,MAAM;AACrC,QAAIZ,mCAASa,SAAS;AACpB,aAAOC,iBAAiB;AAAA,IAAA;AAG1B,WAAOC,YAAY;AAAA,MACjBV;AAAAA,MACAI;AAAAA,IAAAA,CACD;AAAA,KACA,CAACJ,SAASI,YAAYT,mCAASa,OAAO,CAAC;AAEpCG,QAAAA,gBAAgBJ,QAAQ,MAAM;AAClC,QAAIlB,oBAA4BA,QAAAA;AAEhC,WAAOuB,kBAAkB;AAAA,MACvBd;AAAAA,MACAE;AAAAA,MACAI;AAAAA,MACAS,YAAY,CAACP,gBAAgB;AAAA,IAAA,CAC9B;AAAA,EAAA,GACA,CAACjB,qBAAqBiB,kBAAkBR,QAAQE,SAASI,UAAU,CAAC;AAEvE,MAAIf,qBAAqB;AAChBD,WAAAA;AAAAA,EAAAA;AAGT,SAAQ,oBAAA,eAAA,EAAc,QAAQuB,eAAgBvB,SAAS,CAAA;AACzD;AAEA,SAAS0B,+BAA+B;AAAA,EACtC1B;AAAAA,EACAE;AAC8D,GAAG;AAC3DyB,QAAAA,cAAcR,QAAQ,MAAM;AACzBjB,WAAAA,uBAAuB,IAAI0B,YAAY;AAAA,EAAA,GAC7C,CAAC1B,mBAAmB,CAAC;AAExB,MAAIA,oBAA4BF,QAAAA;AAEhC,SACG,oBAAA,qBAAA,EAAoB,QAAQ2B,aAAc3B,SAAS,CAAA;AAExD;"}