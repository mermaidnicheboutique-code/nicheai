{"version":3,"file":"convertReverseNodeToBytes.js","sources":["../../../src/identity/utils/convertReverseNodeToBytes.ts"],"sourcesContent":["import { encodePacked, keccak256, namehash } from 'viem';\nimport type { Address } from 'viem';\nimport { convertChainIdToCoinType } from './convertChainIdToCoinType';\n\n/**\n * Convert an address to a reverse node for ENS resolution\n */\nexport const convertReverseNodeToBytes = (\n  address: Address,\n  chainId: number,\n) => {\n  const addressFormatted = address.toLocaleLowerCase() as Address;\n  const addressNode = keccak256(addressFormatted.substring(2) as Address);\n  const chainCoinType = convertChainIdToCoinType(chainId);\n  const baseReverseNode = namehash(\n    `${chainCoinType.toLocaleUpperCase()}.reverse`,\n  );\n  const addressReverseNode = keccak256(\n    encodePacked(['bytes32', 'bytes32'], [baseReverseNode, addressNode]),\n  );\n  return addressReverseNode;\n};\n"],"names":["convertReverseNodeToBytes","address","chainId","addressFormatted","toLocaleLowerCase","addressNode","keccak256","substring","chainCoinType","convertChainIdToCoinType","baseReverseNode","namehash","toLocaleUpperCase","addressReverseNode","encodePacked"],"mappings":";;AAOaA,MAAAA,4BAA4BA,CACvCC,SACAC,YACG;AACGC,QAAAA,mBAAmBF,QAAQG,kBAAkB;AACnD,QAAMC,cAAcC,UAAUH,iBAAiBI,UAAU,CAAC,CAAY;AAChEC,QAAAA,gBAAgBC,yBAAyBP,OAAO;AACtD,QAAMQ,kBAAkBC,SACtB,GAAGH,cAAcI,kBAAAA,CAAmB,UACtC;AACMC,QAAAA,qBAAqBP,UACzBQ,aAAa,CAAC,WAAW,SAAS,GAAG,CAACJ,iBAAiBL,WAAW,CAAC,CACrE;AACOQ,SAAAA;AACT;"}