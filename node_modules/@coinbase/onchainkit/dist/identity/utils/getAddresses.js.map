{"version":3,"file":"getAddresses.js","sources":["../../../src/identity/utils/getAddresses.ts"],"sourcesContent":["import { getChainPublicClient } from '@/core/network/getChainPublicClient';\nimport type {\n  GetAddressReturnType,\n  GetAddressesParams,\n} from '@/identity/types';\nimport { mainnet } from 'viem/chains';\n\n/**\n * An asynchronous function to fetch multiple Ethereum addresses from ENS names or Basenames\n * in a single batch request.\n */\nexport const getAddresses = async ({\n  names,\n}: GetAddressesParams): Promise<GetAddressReturnType[]> => {\n  if (!names || names.length === 0) {\n    return [];\n  }\n\n  const mainnetClient = getChainPublicClient(mainnet);\n  const results: GetAddressReturnType[] = Array(names.length).fill(null);\n\n  try {\n    // Filter out null or undefined names\n    const validItems = names\n      .map((name, index) => (name ? { name, index } : null))\n      .filter((item): item is { name: string; index: number } => item !== null);\n\n    if (validItems.length === 0) {\n      return results;\n    }\n\n    const addressPromises = validItems.map(({ name, index }) =>\n      mainnetClient\n        .getEnsAddress({\n          name,\n        })\n        .then((address) => {\n          return { index, address };\n        })\n        .catch((error) => {\n          console.error(`Error resolving address for ${name}:`, error);\n          // Return null for the address if resolution fails\n          return { index, address: null };\n        }),\n    );\n\n    const resolvedAddresses = await Promise.all(addressPromises);\n\n    // Update results array with resolved addresses\n    resolvedAddresses.forEach(({ index, address }) => {\n      results[index] = address;\n    });\n  } catch (error) {\n    console.error('Error resolving addresses in batch:', error);\n    return Array(names.length).fill(null);\n  }\n\n  return results;\n};\n"],"names":["getAddresses","names","length","mainnetClient","getChainPublicClient","mainnet","results","Array","fill","validItems","map","name","index","filter","item","addressPromises","getEnsAddress","then","address","catch","error","console","resolvedAddresses","Promise","all","forEach"],"mappings":";;AAWO,MAAMA,eAAe,OAAO;AAAA,EACjCC;AACkB,MAAuC;AACzD,MAAI,CAACA,SAASA,MAAMC,WAAW,GAAG;AAChC,WAAO,CAAE;AAAA,EAAA;AAGLC,QAAAA,gBAAgBC,qBAAqBC,OAAO;AAClD,QAAMC,UAAkCC,MAAMN,MAAMC,MAAM,EAAEM,KAAK,IAAI;AAEjE,MAAA;AAEF,UAAMC,aAAaR,MAChBS,IAAI,CAACC,MAAMC,UAAWD,OAAO;AAAA,MAAEA;AAAAA,MAAMC;AAAAA,IAAAA,IAAU,IAAK,EACpDC,OAAO,CAACC,SAAkDA,SAAS,IAAI;AAEtEL,QAAAA,WAAWP,WAAW,GAAG;AACpBI,aAAAA;AAAAA,IAAAA;AAGHS,UAAAA,kBAAkBN,WAAWC,IAAI,CAAC;AAAA,MAAEC;AAAAA,MAAMC;AAAAA,IAAAA,MAC9CT,cACGa,cAAc;AAAA,MACbL;AAAAA,IAAAA,CACD,EACAM,KAAMC,CAAY,YAAA;AACV,aAAA;AAAA,QAAEN;AAAAA,QAAOM;AAAAA,MAAQ;AAAA,IAAA,CACzB,EACAC,MAAOC,CAAU,UAAA;AAChBC,cAAQD,MAAM,+BAA+BT,IAAI,KAAKS,KAAK;AAEpD,aAAA;AAAA,QAAER;AAAAA,QAAOM,SAAS;AAAA,MAAK;AAAA,IAAA,CAC/B,CACL;AAEA,UAAMI,oBAAoB,MAAMC,QAAQC,IAAIT,eAAe;AAG3DO,sBAAkBG,QAAQ,CAAC;AAAA,MAAEb;AAAAA,MAAOM;AAAAA,IAAAA,MAAc;AAChDZ,cAAQM,KAAK,IAAIM;AAAAA,IAAAA,CAClB;AAAA,WACME,OAAO;AACNA,YAAAA,MAAM,uCAAuCA,KAAK;AAC1D,WAAOb,MAAMN,MAAMC,MAAM,EAAEM,KAAK,IAAI;AAAA,EAAA;AAG/BF,SAAAA;AACT;"}