{"version":3,"file":"Address.js","sources":["../../../src/identity/components/Address.tsx"],"sourcesContent":["'use client';\n\nimport { copyToClipboard } from '@/internal/utils/copyToClipboard';\nimport { useState } from 'react';\nimport { cn, pressable, text } from '../../styles/theme';\nimport type { AddressProps } from '../types';\nimport { getSlicedAddress } from '../utils/getSlicedAddress';\nimport { useIdentityContext } from './IdentityProvider';\n\nexport function Address({\n  address = null,\n  className,\n  isSliced = true,\n  hasCopyAddressOnClick = true,\n}: AddressProps) {\n  const [copyText, setCopyText] = useState('Copy');\n  const { address: contextAddress } = useIdentityContext();\n  const accountAddress = address ?? contextAddress;\n\n  if (!accountAddress) {\n    console.error(\n      'Address: an Ethereum address must be provided to the Identity or Address component.',\n    );\n    return null;\n  }\n\n  const addressContent = isSliced\n    ? getSlicedAddress(accountAddress)\n    : accountAddress;\n\n  // Non-interactive version\n  if (!hasCopyAddressOnClick) {\n    return (\n      <span\n        data-testid=\"ockAddress\"\n        className={cn('text-ock-foreground-muted', text.label2, className)}\n      >\n        {addressContent}\n      </span>\n    );\n  }\n\n  // Interactive version with copy functionality\n  const handleClick = async () => {\n    await copyToClipboard({\n      copyValue: accountAddress,\n      onSuccess: () => {\n        setCopyText('Copied');\n        setTimeout(() => setCopyText('Copy'), 2000);\n      },\n      onError: (err: unknown) => {\n        console.error('Failed to copy address:', err);\n        setCopyText('Failed to copy');\n        setTimeout(() => setCopyText('Copy'), 2000);\n      },\n    });\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter' || e.key === ' ') {\n      e.preventDefault();\n      handleClick();\n    }\n  };\n\n  return (\n    <span\n      data-testid=\"ockAddress\"\n      className={cn(\n        'text-ock-foreground-muted',\n        text.label2,\n        className,\n        'group relative cursor-pointer',\n      )}\n      onClick={handleClick}\n      onKeyDown={handleKeyDown}\n      tabIndex={0}\n      role=\"button\"\n      aria-label={`Copy address ${accountAddress}`}\n    >\n      {addressContent}\n      <button\n        type=\"button\"\n        className={cn(\n          pressable.alternate,\n          text.legal,\n          'text-ock-foreground',\n          'border-ock-background',\n          'rounded-ock-default',\n          'absolute top-full left-[0%] z-10 mt-0.5 px-1.5 py-0.5 opacity-0 transition-opacity group-hover:opacity-100',\n        )}\n        aria-live=\"polite\"\n      >\n        {copyText}\n      </button>\n    </span>\n  );\n}\n"],"names":["Address","address","className","isSliced","hasCopyAddressOnClick","copyText","setCopyText","useState","contextAddress","useIdentityContext","accountAddress","console","error","addressContent","getSlicedAddress","cn","text","label2","handleClick","copyToClipboard","copyValue","onSuccess","setTimeout","onError","err","handleKeyDown","e","key","preventDefault","pressable","alternate","legal"],"mappings":";;;;;;AASO,SAASA,QAAQ;AAAA,EACtBC,UAAU;AAAA,EACVC;AAAAA,EACAC,WAAW;AAAA,EACXC,wBAAwB;AACZ,GAAG;AACf,QAAM,CAACC,UAAUC,WAAW,IAAIC,SAAS,MAAM;AACzC,QAAA;AAAA,IAAEN,SAASO;AAAAA,MAAmBC,mBAAmB;AACvD,QAAMC,iBAAiBT,WAAWO;AAElC,MAAI,CAACE,gBAAgB;AACnBC,YAAQC,MACN,qFACF;AACO,WAAA;AAAA,EAAA;AAGT,QAAMC,iBAAiBV,WACnBW,iBAAiBJ,cAAc,IAC/BA;AAGJ,MAAI,CAACN,uBAAuB;AAExB,WAAA,oBAAC,QACC,EAAA,eAAY,cACZ,WAAWW,oCAAgCC,KAAKC,QAAQf,SAAS,GAEhEW,UACH,eAAA,CAAA;AAAA,EAAA;AAKJ,QAAMK,cAAc,YAAY;AAC9B,UAAMC,gBAAgB;AAAA,MACpBC,WAAWV;AAAAA,MACXW,WAAWA,MAAM;AACff,oBAAY,QAAQ;AACpBgB,mBAAW,MAAMhB,YAAY,MAAM,GAAG,GAAI;AAAA,MAC5C;AAAA,MACAiB,SAASA,CAACC,QAAiB;AACjBZ,gBAAAA,MAAM,2BAA2BY,GAAG;AAC5ClB,oBAAY,gBAAgB;AAC5BgB,mBAAW,MAAMhB,YAAY,MAAM,GAAG,GAAI;AAAA,MAAA;AAAA,IAC5C,CACD;AAAA,EACH;AAEMmB,QAAAA,gBAAgBA,CAACC,MAA2B;AAChD,QAAIA,EAAEC,QAAQ,WAAWD,EAAEC,QAAQ,KAAK;AACtCD,QAAEE,eAAe;AACL,kBAAA;AAAA,IAAA;AAAA,EAEhB;AAGE,SAAA,qBAAC,UACC,eAAY,cACZ,WAAWb,oCAETC,KAAKC,QACLf,sDAEF,GACA,SAASgB,aACT,WAAWO,eACX,UAAU,GACV,MAAK,UACL,cAAY,gBAAgBf,cAAc,IAEzCG,UAAAA;AAAAA,IAAAA;AAAAA,wBACA,UACC,EAAA,MAAK,UACL,WAAWE,GACTc,UAAUC,WACVd,KAAKe,OAKP,2BAAA,6BAAA,2BAAA,oJAAA,GACA,aAAU,UAET1B,UACH,SAAA,CAAA;AAAA,EAAA,GACF;AAEJ;"}