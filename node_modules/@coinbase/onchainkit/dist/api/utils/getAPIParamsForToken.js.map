{"version":3,"file":"getAPIParamsForToken.js","sources":["../../../src/api/utils/getAPIParamsForToken.ts"],"sourcesContent":["import { parseUnits } from 'viem';\nimport type {\n  APIError,\n  BuildSwapTransactionParams,\n  GetAPIParamsForToken,\n  SwapAPIParams,\n} from '../types';\n\n/**\n * Converts parameters with `Token` to ones with address.\n *\n * Additionally adds default values for optional request fields.\n */\nexport function getAPIParamsForToken(\n  params: GetAPIParamsForToken,\n): SwapAPIParams | APIError {\n  const { from, to, amount, amountReference, isAmountInDecimals } = params;\n  const { fromAddress } = params as BuildSwapTransactionParams;\n  const decimals = amountReference === 'from' ? from.decimals : to.decimals;\n\n  // Input validation\n  if (typeof amount !== 'string' || amount.trim() === '') {\n    return {\n      code: 'INVALID_INPUT',\n      error: 'Invalid input: amount must be a non-empty string',\n      message: '',\n    };\n  }\n  if (!Number.isInteger(decimals) || decimals < 0) {\n    return {\n      code: 'INVALID_INPUT',\n      error: 'Invalid input: decimals must be a non-negative integer',\n      message: '',\n    };\n  }\n  if (!/^(?:0|[1-9]\\d*|\\.\\d+)(?:\\.\\d*)?$/.test(amount)) {\n    return {\n      code: 'INVALID_INPUT',\n      error: 'Invalid input: amount must be a non-negative number string',\n      message: '',\n    };\n  }\n\n  return {\n    fromAddress: fromAddress,\n    from: from.address || 'ETH',\n    to: to.address || 'ETH',\n    amount: isAmountInDecimals\n      ? amount\n      : parseUnits(amount, decimals).toString(),\n    amountReference: amountReference || 'from',\n  };\n}\n"],"names":["getAPIParamsForToken","params","from","to","amount","amountReference","isAmountInDecimals","fromAddress","decimals","trim","code","error","message","Number","isInteger","test","address","parseUnits","toString"],"mappings":";AAaO,SAASA,qBACdC,QAC0B;AACpB,QAAA;AAAA,IAAEC;AAAAA,IAAMC;AAAAA,IAAIC;AAAAA,IAAQC;AAAAA,IAAiBC;AAAAA,EAAAA,IAAuBL;AAC5D,QAAA;AAAA,IAAEM;AAAAA,EAAAA,IAAgBN;AACxB,QAAMO,WAAWH,oBAAoB,SAASH,KAAKM,WAAWL,GAAGK;AAGjE,MAAI,OAAOJ,WAAW,YAAYA,OAAOK,KAAAA,MAAW,IAAI;AAC/C,WAAA;AAAA,MACLC,MAAM;AAAA,MACNC,OAAO;AAAA,MACPC,SAAS;AAAA,IACX;AAAA,EAAA;AAEF,MAAI,CAACC,OAAOC,UAAUN,QAAQ,KAAKA,WAAW,GAAG;AACxC,WAAA;AAAA,MACLE,MAAM;AAAA,MACNC,OAAO;AAAA,MACPC,SAAS;AAAA,IACX;AAAA,EAAA;AAEF,MAAI,CAAC,mCAAmCG,KAAKX,MAAM,GAAG;AAC7C,WAAA;AAAA,MACLM,MAAM;AAAA,MACNC,OAAO;AAAA,MACPC,SAAS;AAAA,IACX;AAAA,EAAA;AAGK,SAAA;AAAA,IACLL;AAAAA,IACAL,MAAMA,KAAKc,WAAW;AAAA,IACtBb,IAAIA,GAAGa,WAAW;AAAA,IAClBZ,QAAQE,qBACJF,SACAa,WAAWb,QAAQI,QAAQ,EAAEU,SAAS;AAAA,IAC1Cb,iBAAiBA,mBAAmB;AAAA,EACtC;AACF;"}