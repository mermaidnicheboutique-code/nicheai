{"version":3,"file":"getPortfolios.js","sources":["../../src/api/getPortfolios.ts"],"sourcesContent":["import { RequestContext, RequestContextType } from '@/core/network/constants';\nimport { CDP_GET_PORTFOLIO_TOKEN_BALANCES } from '@/core/network/definitions/wallet';\nimport { sendRequest } from '@/core/network/request';\nimport type {\n  APIError,\n  GetPortfoliosParams,\n  GetPortfoliosResponse,\n} from './types';\nimport { buildErrorStruct } from './utils/buildErrorStruct';\nimport { ApiErrorCode } from './constants';\n\n/**\n * Retrieves the portfolios for the provided addresses\n * Supported networks: Base mainnet and Ethereum mainnet\n */\nexport async function getPortfolios(\n  params: GetPortfoliosParams,\n  _context: RequestContextType = RequestContext.API,\n): Promise<GetPortfoliosResponse | APIError> {\n  const { addresses } = params;\n\n  try {\n    const res = await sendRequest<GetPortfoliosParams, GetPortfoliosResponse>(\n      CDP_GET_PORTFOLIO_TOKEN_BALANCES,\n      [{ addresses }],\n      _context,\n    );\n    if (res.error) {\n      return buildErrorStruct({\n        code: `${res.error.code}`,\n        error: 'Error fetching portfolio token balances',\n        message: res.error.message,\n      });\n    }\n    return res.result;\n  } catch (error) {\n    return buildErrorStruct({\n      code: ApiErrorCode.UncaughtPortfolioError,\n      error: 'Something went wrong',\n      message: `Error fetching portfolio token balances: ${error}`,\n    });\n  }\n}\n"],"names":["getPortfolios","params","_context","RequestContext","API","addresses","res","sendRequest","CDP_GET_PORTFOLIO_TOKEN_BALANCES","error","buildErrorStruct","code","message","result","ApiErrorCode","UncaughtPortfolioError"],"mappings":";;;;;AAeA,eAAsBA,cACpBC,QACAC,WAA+BC,eAAeC,KACH;AACrC,QAAA;AAAA,IAAEC;AAAAA,EAAAA,IAAcJ;AAElB,MAAA;AACF,UAAMK,MAAM,MAAMC,YAChBC,kCACA,CAAC;AAAA,MAAEH;AAAAA,IAAW,CAAA,GACdH,QACF;AACA,QAAII,IAAIG,OAAO;AACb,aAAOC,iBAAiB;AAAA,QACtBC,MAAM,GAAGL,IAAIG,MAAME,IAAI;AAAA,QACvBF,OAAO;AAAA,QACPG,SAASN,IAAIG,MAAMG;AAAAA,MAAAA,CACpB;AAAA,IAAA;AAEH,WAAON,IAAIO;AAAAA,WACJJ,OAAO;AACd,WAAOC,iBAAiB;AAAA,MACtBC,MAAMG,aAAaC;AAAAA,MACnBN,OAAO;AAAA,MACPG,SAAS,4CAA4CH,KAAK;AAAA,IAAA,CAC3D;AAAA,EAAA;AAEL;"}