{"version":3,"file":"buildSendTransaction.js","sources":["../../src/api/buildSendTransaction.ts"],"sourcesContent":["import { encodeFunctionData, erc20Abi } from 'viem';\nimport type {\n  BuildSendTransactionParams,\n  BuildSendTransactionResponse,\n} from './types';\nimport { ApiErrorCode } from './constants';\nimport { buildErrorStruct } from './utils/buildErrorStruct';\n\nexport function buildSendTransaction({\n  recipientAddress,\n  tokenAddress,\n  amount,\n}: BuildSendTransactionParams): BuildSendTransactionResponse {\n  // if no token address, we are sending native ETH\n  // and the data prop is empty\n  if (!tokenAddress) {\n    return {\n      to: recipientAddress,\n      data: '0x',\n      value: amount,\n    };\n  }\n\n  try {\n    const transferCallData = encodeFunctionData({\n      abi: erc20Abi,\n      functionName: 'transfer',\n      args: [recipientAddress, amount],\n    });\n    return {\n      to: tokenAddress,\n      data: transferCallData,\n    };\n  } catch (error) {\n    const message = error instanceof Error ? error.message : String(error);\n    return buildErrorStruct({\n      code: ApiErrorCode.AmBSeTx01,\n      error: message,\n      message: 'Could not build transfer transaction',\n    });\n  }\n}\n"],"names":["buildSendTransaction","recipientAddress","tokenAddress","amount","to","data","value","transferCallData","encodeFunctionData","abi","erc20Abi","functionName","args","error","message","Error","String","buildErrorStruct","code","ApiErrorCode","AmBSeTx01"],"mappings":";;;AAQO,SAASA,qBAAqB;AAAA,EACnCC;AAAAA,EACAC;AAAAA,EACAC;AAC0B,GAAiC;AAG3D,MAAI,CAACD,cAAc;AACV,WAAA;AAAA,MACLE,IAAIH;AAAAA,MACJI,MAAM;AAAA,MACNC,OAAOH;AAAAA,IACT;AAAA,EAAA;AAGE,MAAA;AACF,UAAMI,mBAAmBC,mBAAmB;AAAA,MAC1CC,KAAKC;AAAAA,MACLC,cAAc;AAAA,MACdC,MAAM,CAACX,kBAAkBE,MAAM;AAAA,IAAA,CAChC;AACM,WAAA;AAAA,MACLC,IAAIF;AAAAA,MACJG,MAAME;AAAAA,IACR;AAAA,WACOM,OAAO;AACd,UAAMC,UAAUD,iBAAiBE,QAAQF,MAAMC,UAAUE,OAAOH,KAAK;AACrE,WAAOI,iBAAiB;AAAA,MACtBC,MAAMC,aAAaC;AAAAA,MACnBP,OAAOC;AAAAA,MACPA,SAAS;AAAA,IAAA,CACV;AAAA,EAAA;AAEL;"}