{"version":3,"file":"YieldDetails.js","sources":["../../../src/earn/components/YieldDetails.tsx"],"sourcesContent":["'use client';\nimport { useEarnContext } from '@/earn/components/EarnProvider';\nimport { getTruncatedAmount } from '@/earn/utils/getTruncatedAmount';\nimport { Popover } from '@/internal/components/Popover';\nimport { Skeleton } from '@/internal/components/Skeleton';\nimport { infoSvg } from '@/internal/svg/infoSvg';\nimport { formatPercent } from '@/internal/utils/formatPercent';\nimport { cn, text } from '@/styles/theme';\nimport { PopoverTrigger } from '@radix-ui/react-popover';\nimport { useState } from 'react';\n\nfunction YieldInfo() {\n  const { rewards, nativeApy, vaultToken, vaultFee } = useEarnContext();\n  return (\n    <div\n      className={cn(\n        'text-ock-foreground-muted',\n        'border-ock-background-active',\n        'bg-ock-background',\n        'fade-in flex min-w-52 animate-in flex-col gap-2 rounded-lg border p-3 text-sm duration-200',\n      )}\n    >\n      {nativeApy ? (\n        <div\n          className=\"flex items-center justify-between gap-1\"\n          data-testid=\"ock-earnNativeApy\"\n        >\n          <div>{vaultToken?.symbol}</div>\n          <div className=\"font-semibold\">{formatPercent(nativeApy)}</div>\n        </div>\n      ) : null}\n\n      {rewards?.map((reward) => (\n        <div\n          key={reward.asset}\n          className=\"flex items-center justify-between gap-1\"\n          data-testid=\"ock-earnRewards\"\n        >\n          <div>{reward.assetName}</div>\n          <div className=\"font-semibold\">{formatPercent(reward.apy)}</div>\n        </div>\n      ))}\n\n      {vaultFee && nativeApy ? (\n        <div\n          className=\"flex items-center justify-between gap-1\"\n          data-testid=\"ock-earnPerformanceFee\"\n        >\n          <div>\n            Perf. Fee{' '}\n            <span className=\"text-xs\">({formatPercent(vaultFee, 0)})</span>\n          </div>\n          <div className=\"font-semibold\">\n            -{formatPercent(vaultFee * nativeApy)}\n          </div>\n        </div>\n      ) : null}\n    </div>\n  );\n}\n\nexport function YieldDetails() {\n  const [isOpen, setIsOpen] = useState(false);\n\n  const { apy } = useEarnContext();\n\n  if (!apy) {\n    return <Skeleton className=\"!rounded-full h-7 min-w-28\" />;\n  }\n\n  return (\n    <Popover\n      open={isOpen}\n      onOpenChange={setIsOpen}\n      side=\"bottom\"\n      align=\"end\"\n      sideOffset={4}\n      anchor={\n        <div\n          className={cn(\n            text.label1,\n            'text-ock-foreground-muted',\n            'bg-ock-background-alternate',\n            'flex items-center justify-center gap-1 rounded-full p-1 px-3',\n          )}\n          data-testid=\"ock-yieldDetails\"\n        >\n          {`APY ${formatPercent(Number(getTruncatedAmount(apy.toString(), 4)))}`}\n          <PopoverTrigger asChild>\n            <button\n              type=\"button\"\n              data-testid=\"ock-apyInfoButton\"\n              className={cn(\n                'size-3 [&_path]:fill-ock-foreground-muted [&_path]:transition-colors [&_path]:ease-in-out [&_path]:hover:fill-ock-foreground',\n                isOpen && '[&_path]:fill-ock-foreground',\n              )}\n              onClick={() => setIsOpen(!isOpen)}\n            >\n              {infoSvg}\n            </button>\n          </PopoverTrigger>\n        </div>\n      }\n    >\n      <YieldInfo />\n    </Popover>\n  );\n}\n"],"names":["YieldInfo","rewards","nativeApy","vaultToken","vaultFee","useEarnContext","cn","symbol","formatPercent","map","reward","assetName","apy","asset","YieldDetails","isOpen","setIsOpen","useState","text","label1","Number","getTruncatedAmount","toString","infoSvg"],"mappings":";;;;;;;;;;AAWA,SAASA,YAAY;AACb,QAAA;AAAA,IAAEC;AAAAA,IAASC;AAAAA,IAAWC;AAAAA,IAAYC;AAAAA,MAAaC,eAAe;AAElE,SAAA,qBAAC,SACC,WAAWC,GAKX,iCAAA,oCAAA,yBAAA,wIAAA,GAECJ,UAAAA;AAAAA,IAAAA,YACE,qBAAA,OAAA,EACC,WAAU,2DACV,eAAY,qBAEZ,UAAA;AAAA,MAAC,oBAAA,OAAA,EAAKC,mDAAYI,OAAO,CAAA;AAAA,0BACxB,OAAI,EAAA,WAAU,qBAAiBC,UAAAA,cAAcN,SAAS,EAAE,CAAA;AAAA,IAAA,EAAA,CAC3D,IACE;AAAA,IAEHD,mCAASQ,IAAKC,CACb,WAAA,qBAAC,SAEC,WAAU,2DACV,eAAY,mBAEZ,UAAA;AAAA,MAAC,oBAAA,OAAA,EAAKA,iBAAOC,UAAU,CAAA;AAAA,0BACtB,OAAI,EAAA,WAAU,qBAAiBH,UAAcE,cAAAA,OAAOE,GAAG,EAAE,CAAA;AAAA,IAAA,KALrDF,OAAOG,KAMd;AAAA,IAGDT,YAAYF,YACX,qBAAC,SACC,WAAU,2DACV,eAAY,0BAEZ,UAAA;AAAA,MAAA,qBAAC,OAAG,EAAA,UAAA;AAAA,QAAA;AAAA,QACQ;AAAA,QACV,qBAAC,QAAK,EAAA,WAAU,eAAU,UAAA;AAAA,UAAA;AAAA,UAAEM,cAAcJ,UAAU,CAAC;AAAA,UAAE;AAAA,QAAA,EAAC,CAAA;AAAA,MAAA,GAC1D;AAAA,MACA,qBAAC,OAAI,EAAA,WAAU,qBAAe,UAAA;AAAA,QAAA;AAAA,QAC1BI,cAAcJ,WAAWF,SAAS;AAAA,MAAA,EACtC,CAAA;AAAA,IAAA,EAAA,CACF,IACE;AAAA,EAAA,GACN;AAEJ;AAEO,SAASY,eAAe;AAC7B,QAAM,CAACC,QAAQC,SAAS,IAAIC,SAAS,KAAK;AAEpC,QAAA;AAAA,IAAEL;AAAAA,MAAQP,eAAe;AAE/B,MAAI,CAACO,KAAK;AACD,WAAA,oBAAC,UAAS,EAAA,WAAU,yCAA+B,CAAA;AAAA,EAAA;AAI1D,SAAA,oBAAC,SACC,EAAA,MAAMG,QACN,cAAcC,WACd,MAAK,UACL,OAAM,OACN,YAAY,GACZ,QACG,qBAAA,OAAA,EACC,WAAWV,GACTY,KAAKC,QAAM,iCAAA,mCAAA,0FAIb,GACA,eAAY,oBAEX,UAAA;AAAA,IAAOX,OAAAA,cAAcY,OAAOC,mBAAmBT,IAAIU,YAAY,CAAC,CAAC,CAAC,CAAC;AAAA,IACpE,oBAAC,kBAAe,SAAO,MACrB,8BAAC,UACC,EAAA,MAAK,UACL,eAAY,qBACZ,WAAWhB,GAETS,oJAAAA,UACF,kCAAA,GACA,SAAS,MAAMC,UAAU,CAACD,MAAM,GAE/BQ,UAAAA,QACH,CAAA,EACF,CAAA;AAAA,EAAA,EACF,CAAA,GAGF,UAAC,oBAAA,WAAA,CAAA,CAAS,EACZ,CAAA;AAEJ;"}