'use client';
import { jsx, jsxs } from "react/jsx-runtime";
import { getTruncatedAmount } from "../utils/getTruncatedAmount.js";
import { Popover } from "../../internal/components/Popover.js";
import { Skeleton } from "../../internal/components/Skeleton.js";
import { etherscanSvg } from "../../internal/svg/etherscanSvg.js";
import { infoSvg } from "../../internal/svg/infoSvg.js";
import { cn, text } from "../../styles/theme.js";
import { TokenImage } from "../../token/components/TokenImage.js";
import "../../token/components/TokenRow.js";
import { useState } from "react";
import "../../styles/constants.js";
import "@radix-ui/react-dropdown-menu";
import "../../internal/components/LayerConfigProvider.js";
import "../../token/components/TokenSelectButton.js";
import "viem";
import { useEarnContext } from "./EarnProvider.js";
import { PopoverTrigger } from "@radix-ui/react-popover";
function Row({
  label,
  value
}) {
  return /* @__PURE__ */ jsxs("div", { className: "ock:flex ock:items-center ock:justify-between ock:gap-8", children: [
    /* @__PURE__ */ jsx("div", { children: label }),
    /* @__PURE__ */ jsx("div", { className: "ock:font-semibold", children: value })
  ] });
}
function VaultDetails() {
  const [isOpen, setIsOpen] = useState(false);
  const {
    vaultToken,
    vaultName,
    deposits,
    liquidity,
    vaultAddress
  } = useEarnContext();
  if (!vaultToken || !vaultName) {
    return /* @__PURE__ */ jsx(Skeleton, { className: "ock:!rounded-full ock:h-7 ock:min-w-28" });
  }
  return /* @__PURE__ */ jsx(Popover, { open: isOpen, onOpenChange: setIsOpen, side: "bottom", align: "start", sideOffset: 4, anchor: /* @__PURE__ */ jsxs("div", { className: cn(text.label1, "ock:text-ock-foreground-muted", "ock:bg-ock-background-alternate", "ock:flex ock:items-center ock:justify-center ock:gap-2 ock:rounded-full ock:p-1 ock:px-3"), "data-testid": "ock-vaultDetails", children: [
    /* @__PURE__ */ jsx(TokenImage, { token: vaultToken, size: 16 }),
    /* @__PURE__ */ jsx("span", { className: "ock:max-w-24 ock:truncate", title: vaultName, children: vaultName }),
    /* @__PURE__ */ jsx(PopoverTrigger, { asChild: true, children: /* @__PURE__ */ jsx("button", { type: "button", "data-testid": "ock-vaultDetailsButton", className: cn("ock:size-3 ock:[&_path]:fill-ock-foreground-muted ock:[&_path]:transition-colors ock:[&_path]:ease-in-out ock:[&_path]:hover:fill-ock-foreground", isOpen && "ock:[&_path]:fill-ock-foreground"), onClick: () => setIsOpen(!isOpen), children: infoSvg }) })
  ] }), children: /* @__PURE__ */ jsxs("div", { className: cn("ock:bg-ock-background", "ock:text-ock-foreground", "ock:border-ock-background-active", "ock:bg-ock-background", "ock:flex ock:min-w-40 ock:flex-col ock:gap-3 ock:rounded-lg ock:border ock:p-3 ock:text-sm", "ock:fade-in ock:animate-in ock:duration-200"), children: [
    /* @__PURE__ */ jsx("div", { className: "ock:font-semibold", children: vaultName }),
    /* @__PURE__ */ jsxs("div", { className: "ock:flex ock:flex-col ock:gap-2", children: [
      /* @__PURE__ */ jsx(Row, { label: "Token", value: /* @__PURE__ */ jsxs("div", { className: "ock:flex ock:items-center ock:gap-1", children: [
        /* @__PURE__ */ jsx(TokenImage, { token: vaultToken, size: 16 }),
        /* @__PURE__ */ jsx("span", { className: "ock:max-w-24 ock:truncate", children: vaultToken.symbol })
      ] }) }),
      deposits ? /* @__PURE__ */ jsx(Row, { label: "Total deposits", value: `${getTruncatedAmount(deposits, 1, "compact")} ${vaultToken.symbol}` }) : null,
      liquidity ? /* @__PURE__ */ jsx(Row, { label: "Liquidity", value: `${getTruncatedAmount(liquidity, 1, "compact")} ${vaultToken.symbol}` }) : null
    ] }),
    /* @__PURE__ */ jsxs("a", { href: `https://basescan.org/address/${vaultAddress}`, target: "_blank", rel: "noopener noreferrer", className: cn("ock:text-ock-primary", "ock:flex ock:max-w-fit ock:items-center ock:gap-1 ock:hover:opacity-80"), "data-testid": "ock-vaultDetailsBaseScanLink", children: [
      /* @__PURE__ */ jsx("div", { children: "View on BaseScan" }),
      /* @__PURE__ */ jsx("div", { className: "ock:h-3 ock:w-3", children: etherscanSvg })
    ] })
  ] }) });
}
export {
  VaultDetails
};
//# sourceMappingURL=VaultDetails.js.map
