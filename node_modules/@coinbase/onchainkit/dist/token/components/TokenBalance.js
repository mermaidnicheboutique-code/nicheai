import { jsxs, jsx } from "react/jsx-runtime";
import { formatFiatAmount } from "../../internal/utils/formatFiatAmount.js";
import { truncateDecimalPlaces } from "../../internal/utils/truncateDecimalPlaces.js";
import { cn, text } from "../../styles/theme.js";
import { TokenImage } from "./TokenImage.js";
import { useMemo } from "react";
import { formatUnits } from "viem";
function TokenBalance({
  token,
  onClick,
  onActionPress,
  actionText = "Max",
  classNames,
  "aria-label": ariaLabel,
  ...contentProps
}) {
  if (onClick) {
    return /* @__PURE__ */ jsxs("div", { className: "ock:relative", children: [
      /* @__PURE__ */ jsx("button", { type: "button", "aria-label": ariaLabel ?? `${token.name} token balance`, onClick: () => onClick(token), className: cn("ock:flex ock:w-full ock:items-center ock:justify-start ock:gap-4 ock:px-2 ock:py-1", classNames == null ? void 0 : classNames.container), "data-testid": "ockTokenBalanceButton", children: /* @__PURE__ */ jsx(TokenBalanceContent, { token, classNames, onActionPress, ...contentProps }) }),
      onActionPress && /* @__PURE__ */ jsx(ActionButton, { actionText, onActionPress, className: classNames == null ? void 0 : classNames.action })
    ] });
  }
  return /* @__PURE__ */ jsxs("div", { className: cn("ock:flex ock:w-full ock:items-center ock:justify-start ock:gap-4 ock:px-2 ock:py-1", classNames == null ? void 0 : classNames.container), "data-testid": "ockTokenBalance", children: [
    /* @__PURE__ */ jsx(TokenBalanceContent, { token, ...contentProps, classNames }),
    onActionPress && /* @__PURE__ */ jsx(ActionButton, { actionText, onActionPress, className: classNames == null ? void 0 : classNames.action })
  ] });
}
function TokenBalanceContent({
  token,
  subtitle,
  showImage = true,
  onActionPress,
  tokenSize = 40,
  classNames
}) {
  var _a;
  const formattedFiatValue = useMemo(() => formatFiatAmount({
    amount: token.fiatBalance,
    currency: "USD"
  }), [token.fiatBalance]);
  const formattedCryptoValue = useMemo(() => truncateDecimalPlaces(formatUnits(BigInt(token.cryptoBalance), token.decimals), 3), [token.cryptoBalance, token.decimals]);
  return /* @__PURE__ */ jsxs("div", { className: "ock:grid ock:w-full ock:grid-cols-[2.5rem_1fr_auto] ock:items-center ock:gap-3", children: [
    /* @__PURE__ */ jsx("div", { className: "ock:h-10 ock:w-10", children: showImage && /* @__PURE__ */ jsx(TokenImage, { token, size: tokenSize }) }),
    /* @__PURE__ */ jsxs("div", { className: "ock:flex ock:min-w-0 ock:flex-col ock:text-left", children: [
      /* @__PURE__ */ jsx("span", { className: cn(text.headline, "ock:text-ock-foreground", "ock:overflow-hidden ock:text-ellipsis ock:whitespace-nowrap", classNames == null ? void 0 : classNames.tokenName), children: (_a = token.name) == null ? void 0 : _a.trim() }),
      /* @__PURE__ */ jsx("span", { className: cn(text.label2, "ock:text-ock-foreground-muted", classNames == null ? void 0 : classNames.tokenValue), children: `${formattedCryptoValue} ${token.symbol} ${subtitle ?? ""}` })
    ] }),
    /* @__PURE__ */ jsx("div", { className: "ock:text-right", children: !onActionPress && /* @__PURE__ */ jsx("span", { className: cn(text.label2, "ock:text-ock-foreground-muted", "ock:whitespace-nowrap", classNames == null ? void 0 : classNames.fiatValue), children: formattedFiatValue }) })
  ] });
}
function ActionButton({
  actionText,
  onActionPress,
  className
}) {
  return /* @__PURE__ */ jsx("button", { type: "button", "data-testid": "ockTokenBalanceAction", "aria-label": actionText, onClick: onActionPress, className: cn(text.label2, "ock:text-ock-primary", "ock:rounded-ock-default", "ock:cursor-pointer ock:p-0.5 ock:font-bold", "ock:border ock:border-transparent ock:hover:border-(--color-ock-primary)", "ock:-translate-y-1/2 ock:absolute ock:top-1/2 ock:right-2", className), children: actionText });
}
export {
  TokenBalance
};
//# sourceMappingURL=TokenBalance.js.map
