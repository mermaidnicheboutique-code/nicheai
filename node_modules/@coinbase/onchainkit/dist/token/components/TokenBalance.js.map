{"version":3,"file":"TokenBalance.js","sources":["../../../src/token/components/TokenBalance.tsx"],"sourcesContent":["import { formatFiatAmount } from '@/internal/utils/formatFiatAmount';\nimport { truncateDecimalPlaces } from '@/internal/utils/truncateDecimalPlaces';\nimport { cn, text } from '@/styles/theme';\nimport { TokenImage } from '@/token/components/TokenImage';\nimport { useMemo } from 'react';\nimport { formatUnits } from 'viem';\nimport type { TokenBalanceProps } from '../types';\n\nexport function TokenBalance({\n  token,\n  onClick,\n  onActionPress,\n  actionText = 'Max',\n  classNames,\n  'aria-label': ariaLabel,\n  ...contentProps\n}: TokenBalanceProps) {\n  if (onClick) {\n    return (\n      <div className=\"relative\">\n        <button\n          type=\"button\"\n          aria-label={ariaLabel ?? `${token.name} token balance`}\n          onClick={() => onClick(token)}\n          className={cn(\n            'flex w-full items-center justify-start gap-4 px-2 py-1',\n            classNames?.container,\n          )}\n          data-testid=\"ockTokenBalanceButton\"\n        >\n          <TokenBalanceContent\n            token={token}\n            classNames={classNames}\n            onActionPress={onActionPress}\n            {...contentProps}\n          />\n        </button>\n        {onActionPress && (\n          <ActionButton\n            actionText={actionText}\n            onActionPress={onActionPress}\n            className={classNames?.action}\n          />\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <div\n      className={cn(\n        'flex w-full items-center justify-start gap-4 px-2 py-1',\n        classNames?.container,\n      )}\n      data-testid=\"ockTokenBalance\"\n    >\n      <TokenBalanceContent\n        token={token}\n        {...contentProps}\n        classNames={classNames}\n      />\n      {onActionPress && (\n        <ActionButton\n          actionText={actionText}\n          onActionPress={onActionPress}\n          className={classNames?.action}\n        />\n      )}\n    </div>\n  );\n}\n\nfunction TokenBalanceContent({\n  token,\n  subtitle,\n  showImage = true,\n  onActionPress,\n  tokenSize = 40,\n  classNames,\n}: TokenBalanceProps) {\n  const formattedFiatValue = useMemo(\n    () =>\n      formatFiatAmount({\n        amount: token.fiatBalance,\n        currency: 'USD',\n      }),\n    [token.fiatBalance],\n  );\n\n  const formattedCryptoValue = useMemo(\n    () =>\n      truncateDecimalPlaces(\n        formatUnits(BigInt(token.cryptoBalance), token.decimals),\n        3,\n      ),\n    [token.cryptoBalance, token.decimals],\n  );\n\n  return (\n    <div className=\"grid w-full grid-cols-[2.5rem_1fr_auto] items-center gap-3\">\n      <div className=\"h-10 w-10\">\n        {showImage && <TokenImage token={token} size={tokenSize} />}\n      </div>\n      <div className=\"flex min-w-0 flex-col text-left\">\n        <span\n          className={cn(\n            text.headline,\n            'text-ock-foreground',\n            'overflow-hidden text-ellipsis whitespace-nowrap',\n            classNames?.tokenName,\n          )}\n        >\n          {token.name?.trim()}\n        </span>\n        <span\n          className={cn(\n            text.label2,\n            'text-ock-foreground-muted',\n            classNames?.tokenValue,\n          )}\n        >\n          {`${formattedCryptoValue} ${token.symbol} ${subtitle ?? ''}`}\n        </span>\n      </div>\n      <div className=\"text-right\">\n        {!onActionPress && (\n          <span\n            className={cn(\n              text.label2,\n              'text-ock-foreground-muted',\n              'whitespace-nowrap',\n              classNames?.fiatValue,\n            )}\n          >\n            {formattedFiatValue}\n          </span>\n        )}\n      </div>\n    </div>\n  );\n}\n\nfunction ActionButton({\n  actionText,\n  onActionPress,\n  className,\n}: Pick<TokenBalanceProps, 'actionText' | 'onActionPress'> & {\n  className?: string;\n}) {\n  return (\n    <button\n      type=\"button\"\n      data-testid=\"ockTokenBalanceAction\"\n      aria-label={actionText}\n      onClick={onActionPress}\n      className={cn(\n        text.label2,\n        'text-ock-primary',\n        'rounded-ock-default',\n        'cursor-pointer p-0.5 font-bold',\n        'border border-transparent hover:border-(--color-ock-primary)',\n        '-translate-y-1/2 absolute top-1/2 right-2',\n        className,\n      )}\n    >\n      {actionText}\n    </button>\n  );\n}\n"],"names":["TokenBalance","token","onClick","onActionPress","actionText","classNames","ariaLabel","contentProps","name","cn","container","action","TokenBalanceContent","subtitle","showImage","tokenSize","formattedFiatValue","useMemo","formatFiatAmount","amount","fiatBalance","currency","formattedCryptoValue","truncateDecimalPlaces","formatUnits","BigInt","cryptoBalance","decimals","text","headline","tokenName","trim","label2","tokenValue","symbol","fiatValue","ActionButton","className"],"mappings":";;;;;;;AAQO,SAASA,aAAa;AAAA,EAC3BC;AAAAA,EACAC;AAAAA,EACAC;AAAAA,EACAC,aAAa;AAAA,EACbC;AAAAA,EACA,cAAcC;AAAAA,EACd,GAAGC;AACc,GAAG;AACpB,MAAIL,SAAS;AAET,WAAA,qBAAC,OAAI,EAAA,WAAU,gBACb,UAAA;AAAA,MAAA,oBAAC,UACC,EAAA,MAAK,UACL,cAAYI,aAAa,GAAGL,MAAMO,IAAI,kBACtC,SAAS,MAAMN,QAAQD,KAAK,GAC5B,WAAWQ,GAETJ,sFAAAA,yCAAYK,SACd,GACA,eAAY,yBAEZ,UAAC,oBAAA,qBAAA,EACC,OACA,YACA,eACIH,GAAAA,aAAa,CAAA,GAErB;AAAA,MACCJ,iBACE,oBAAA,cAAA,EACC,YACA,eACA,WAAWE,yCAAYM,OAE1B,CAAA;AAAA,IAAA,GACH;AAAA,EAAA;AAKF,SAAA,qBAAC,SACC,WAAWF,GAAE,sFAEXJ,yCAAYK,SACd,GACA,eAAY,mBAEZ,UAAA;AAAA,IAAA,oBAAC,qBACC,EAAA,OACA,GAAIH,cACJ,WAAuB,CAAA;AAAA,IAExBJ,iBACE,oBAAA,cAAA,EACC,YACA,eACA,WAAWE,yCAAYM,OAE1B,CAAA;AAAA,EAAA,GACH;AAEJ;AAEA,SAASC,oBAAoB;AAAA,EAC3BX;AAAAA,EACAY;AAAAA,EACAC,YAAY;AAAA,EACZX;AAAAA,EACAY,YAAY;AAAA,EACZV;AACiB,GAAG;;AACdW,QAAAA,qBAAqBC,QACzB,MACEC,iBAAiB;AAAA,IACfC,QAAQlB,MAAMmB;AAAAA,IACdC,UAAU;AAAA,EAAA,CACX,GACH,CAACpB,MAAMmB,WAAW,CACpB;AAEA,QAAME,uBAAuBL,QAC3B,MACEM,sBACEC,YAAYC,OAAOxB,MAAMyB,aAAa,GAAGzB,MAAM0B,QAAQ,GACvD,CACF,GACF,CAAC1B,MAAMyB,eAAezB,MAAM0B,QAAQ,CACtC;AAGE,SAAA,qBAAC,OAAI,EAAA,WAAU,kFACb,UAAA;AAAA,IAAC,oBAAA,OAAA,EAAI,WAAU,qBACZb,UAAAA,iCAAc,YAAW,EAAA,OAAc,MAAMC,UAAAA,CAAa,EAC7D,CAAA;AAAA,IACA,qBAAC,OAAI,EAAA,WAAU,mDACb,UAAA;AAAA,MAAA,oBAAC,QACC,EAAA,WAAWN,GACTmB,KAAKC,UAGLxB,2BAAAA,+DAAAA,yCAAYyB,SACd,GAEC7B,WAAMO,WAAAA,SAAAA,mBAAMuB,QACf;AAAA,0BACC,QACC,EAAA,WAAWtB,GACTmB,KAAKI,QAEL3B,iCAAAA,yCAAY4B,UACd,GAEC,UAAA,GAAGX,oBAAoB,IAAIrB,MAAMiC,MAAM,IAAIrB,YAAY,EAAE,GAC5D,CAAA;AAAA,IAAA,GACF;AAAA,wBACC,OAAI,EAAA,WAAU,kBACZ,UAACV,CAAAA,qCACC,QACC,EAAA,WAAWM,GACTmB,KAAKI,QAAM,iCAAA,yBAGX3B,yCAAY8B,SACd,GAECnB,8BACH,EAEJ,CAAA;AAAA,EAAA,GACF;AAEJ;AAEA,SAASoB,aAAa;AAAA,EACpBhC;AAAAA,EACAD;AAAAA,EACAkC;AAGF,GAAG;AAEC,SAAA,oBAAC,YACC,MAAK,UACL,eAAY,yBACZ,cAAYjC,YACZ,SAASD,eACT,WAAWM,GACTmB,KAAKI,QAMLK,wBAAAA,2BAAAA,8CAAAA,4EAAAA,6DAAAA,SACF,GAECjC,UACH,WAAA,CAAA;AAEJ;"}