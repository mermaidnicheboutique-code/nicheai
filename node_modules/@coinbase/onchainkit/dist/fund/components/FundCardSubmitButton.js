'use client';
import { jsx, jsxs, Fragment } from "react/jsx-runtime";
import { Spinner } from "../../internal/components/Spinner.js";
import { ErrorSvg } from "../../internal/svg/errorSvg.js";
import { SuccessSvg } from "../../internal/svg/successSvg.js";
import { useCallback, useMemo } from "react";
import { useFundCardFundingUrl } from "../hooks/useFundCardFundingUrl.js";
import { FundButton } from "./FundButton.js";
import { useFundContext } from "./FundCardProvider.js";
function FundCardSubmitButton({
  children,
  render
}) {
  const {
    fundAmountFiat,
    fundAmountCrypto,
    submitButtonState,
    setSubmitButtonState,
    currency,
    updateLifecycleStatus,
    sessionToken
  } = useFundContext();
  const fundingUrl = useFundCardFundingUrl();
  const handleOnClick = useCallback(() => setSubmitButtonState("loading"), [setSubmitButtonState]);
  const handleOnPopupClose = useCallback(() => {
    updateLifecycleStatus({
      statusName: "exit",
      statusData: void 0
    });
    setSubmitButtonState("default");
  }, [updateLifecycleStatus, setSubmitButtonState]);
  const isButtonDisabled = useMemo(() => (!fundAmountFiat || Number(fundAmountCrypto) === 0) && (!fundAmountCrypto || Number(fundAmountFiat) === 0), [fundAmountCrypto, fundAmountFiat]);
  const buttonIcon = useMemo(() => {
    switch (submitButtonState) {
      case "loading":
        return "";
      case "success":
        return /* @__PURE__ */ jsx(SuccessSvg, { className: "ock:fill-[#F9FAFB]" });
      case "error":
        return /* @__PURE__ */ jsx(ErrorSvg, { className: "ock:fill-[#F9FAFB]" });
      default:
        return null;
    }
  }, [submitButtonState]);
  const buttonTextContent = useMemo(() => {
    switch (submitButtonState) {
      case "loading":
        return "";
      case "success":
        return "Success";
      case "error":
        return "Something went wrong";
      default:
        return "Buy";
    }
  }, [submitButtonState]);
  const buttonContent = useMemo(() => {
    if (submitButtonState === "loading") {
      return /* @__PURE__ */ jsx(Spinner, {});
    }
    return /* @__PURE__ */ jsxs(Fragment, { children: [
      buttonIcon && /* @__PURE__ */ jsx("span", { "data-testid": "ockFundButtonIcon", className: "ock:flex ock:h-6 ock:items-center", children: buttonIcon }),
      /* @__PURE__ */ jsx("span", { "data-testid": "ockFundButtonTextContent", children: buttonTextContent })
    ] });
  }, [submitButtonState, buttonIcon, buttonTextContent]);
  if (render) {
    return /* @__PURE__ */ jsx(FundButton, { disabled: isButtonDisabled, sessionToken, fundingUrl, state: submitButtonState, onClick: handleOnClick, onPopupClose: handleOnPopupClose, fiatCurrency: currency, render });
  }
  return /* @__PURE__ */ jsx(FundButton, { disabled: isButtonDisabled, className: "ock:w-full", sessionToken, fundingUrl, state: submitButtonState, onClick: handleOnClick, onPopupClose: handleOnPopupClose, fiatCurrency: currency, children: children || buttonContent });
}
export {
  FundCardSubmitButton
};
//# sourceMappingURL=FundCardSubmitButton.js.map
