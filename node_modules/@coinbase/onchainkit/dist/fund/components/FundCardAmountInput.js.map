{"version":3,"file":"FundCardAmountInput.js","sources":["../../../src/fund/components/FundCardAmountInput.tsx"],"sourcesContent":["'use client';\nimport { AmountInput } from '@/internal/components/amount-input/AmountInput';\nimport { useThrottle } from '@/internal/hooks/useThrottle';\nimport { useCallback } from 'react';\nimport { useAnalytics } from '../../core/analytics/hooks/useAnalytics';\nimport { FundEvent } from '../../core/analytics/types';\nimport { useOnrampExchangeRate } from '../hooks/useOnrampExchangeRate';\nimport type { FundCardAmountInputProps } from '../types';\nimport { useFundContext } from './FundCardProvider';\n\nconst THROTTLE_DELAY_MS = 5000;\n\nexport const FundCardAmountInput = ({\n  className,\n}: FundCardAmountInputProps) => {\n  const {\n    fundAmountFiat,\n    fundAmountCrypto,\n    asset,\n    selectedInputType,\n    currency,\n    exchangeRate,\n    setFundAmountFiat,\n    setFundAmountCrypto,\n    country,\n    subdivision,\n    setExchangeRate,\n    onError,\n  } = useFundContext();\n\n  const { fetchExchangeRate } = useOnrampExchangeRate({\n    asset,\n    currency,\n    country,\n    subdivision,\n    setExchangeRate,\n    onError,\n  });\n\n  const throttledFetchExchangeRate = useThrottle(\n    fetchExchangeRate,\n    THROTTLE_DELAY_MS,\n  );\n\n  const { sendAnalytics } = useAnalytics();\n\n  /**\n   * Handle amount changes with throttled updates\n   *\n   * Both setFiatAmount and setCryptoAmount on the AmountInput component are called with the new amount so we only need to fetch exchange rate when either is called.\n   */\n  const handleFiatAmountChange = useCallback(\n    (amount: string) => {\n      setFundAmountFiat(amount);\n      throttledFetchExchangeRate();\n\n      sendAnalytics(FundEvent.FundAmountChanged, {\n        amount: Number(amount),\n        currency,\n      });\n    },\n    [currency, sendAnalytics, setFundAmountFiat, throttledFetchExchangeRate],\n  );\n\n  return (\n    <AmountInput\n      fiatAmount={fundAmountFiat}\n      cryptoAmount={fundAmountCrypto}\n      asset={asset}\n      selectedInputType={selectedInputType}\n      currency={currency}\n      className={className}\n      setFiatAmount={handleFiatAmountChange}\n      setCryptoAmount={setFundAmountCrypto}\n      exchangeRate={String(exchangeRate)}\n    />\n  );\n};\n\nexport default FundCardAmountInput;\n"],"names":["THROTTLE_DELAY_MS","FundCardAmountInput","className","fundAmountFiat","fundAmountCrypto","asset","selectedInputType","currency","exchangeRate","setFundAmountFiat","setFundAmountCrypto","country","subdivision","setExchangeRate","onError","useFundContext","fetchExchangeRate","useOnrampExchangeRate","throttledFetchExchangeRate","useThrottle","sendAnalytics","useAnalytics","handleFiatAmountChange","useCallback","amount","FundEvent","FundAmountChanged","Number","String"],"mappings":";;;;;;;;AAUA,MAAMA,oBAAoB;AAEnB,MAAMC,sBAAsBA,CAAC;AAAA,EAClCC;AACwB,MAAM;AACxB,QAAA;AAAA,IACJC;AAAAA,IACAC;AAAAA,IACAC;AAAAA,IACAC;AAAAA,IACAC;AAAAA,IACAC;AAAAA,IACAC;AAAAA,IACAC;AAAAA,IACAC;AAAAA,IACAC;AAAAA,IACAC;AAAAA,IACAC;AAAAA,MACEC,eAAe;AAEb,QAAA;AAAA,IAAEC;AAAAA,MAAsBC,sBAAsB;AAAA,IAClDZ;AAAAA,IACAE;AAAAA,IACAI;AAAAA,IACAC;AAAAA,IACAC;AAAAA,IACAC;AAAAA,EAAAA,CACD;AAEKI,QAAAA,6BAA6BC,YACjCH,mBACAhB,iBACF;AAEM,QAAA;AAAA,IAAEoB;AAAAA,MAAkBC,aAAa;AAOjCC,QAAAA,yBAAyBC,YAC7B,CAACC,WAAmB;AAClBf,sBAAkBe,MAAM;AACG,+BAAA;AAE3BJ,kBAAcK,UAAUC,mBAAmB;AAAA,MACzCF,QAAQG,OAAOH,MAAM;AAAA,MACrBjB;AAAAA,IAAAA,CACD;AAAA,KAEH,CAACA,UAAUa,eAAeX,mBAAmBS,0BAA0B,CACzE;AAEA,6BACG,aACC,EAAA,YAAYf,gBACZ,cAAcC,kBACd,OACA,mBACA,UACA,WACA,eAAekB,wBACf,iBAAiBZ,qBACjB,cAAckB,OAAOpB,YAAY,GACjC;AAEN;"}