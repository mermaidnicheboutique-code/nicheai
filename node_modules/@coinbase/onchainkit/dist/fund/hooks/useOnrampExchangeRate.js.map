{"version":3,"file":"useOnrampExchangeRate.js","sources":["../../../src/fund/hooks/useOnrampExchangeRate.ts"],"sourcesContent":["import { useCallback, useMemo } from 'react';\nimport type { OnrampError } from '../types';\nimport { fetchOnrampQuote } from '../utils/fetchOnrampQuote';\n\nexport const useOnrampExchangeRate = ({\n  asset,\n  currency,\n  country,\n  subdivision,\n  setExchangeRate,\n  onError,\n}: {\n  asset: string;\n  currency: string;\n  country: string;\n  subdivision?: string;\n  setExchangeRate: (exchangeRate: number) => void;\n  onError?: (error: OnrampError) => void;\n}) => {\n  const fetchExchangeRate = useCallback(async () => {\n    try {\n      const quote = await fetchOnrampQuote({\n        purchaseCurrency: asset,\n        paymentCurrency: currency,\n        paymentAmount: '100',\n        paymentMethod: 'CARD',\n        country,\n        subdivision,\n      });\n\n      setExchangeRate(\n        Number(quote.purchaseAmount.value) /\n          Number(quote.paymentSubtotal.value),\n      );\n    } catch (err) {\n      if (err instanceof Error) {\n        console.error('Error fetching exchange rate:', err);\n        onError?.({\n          errorType: 'handled_error',\n          code: 'EXCHANGE_RATE_ERROR',\n          debugMessage: err.message,\n        });\n      } else {\n        console.error('Unknown error fetching exchange rate:', err);\n        onError?.({\n          errorType: 'unknown_error',\n          code: 'EXCHANGE_RATE_ERROR',\n          debugMessage: JSON.stringify(err),\n        });\n      }\n    }\n  }, [asset, country, subdivision, currency, onError, setExchangeRate]);\n\n  return useMemo(() => ({ fetchExchangeRate }), [fetchExchangeRate]);\n};\n"],"names":["useOnrampExchangeRate","asset","currency","country","subdivision","setExchangeRate","onError","fetchExchangeRate","useCallback","quote","fetchOnrampQuote","purchaseCurrency","paymentCurrency","paymentAmount","paymentMethod","Number","purchaseAmount","value","paymentSubtotal","err","Error","error","errorType","code","debugMessage","message","JSON","stringify","useMemo"],"mappings":";;AAIO,MAAMA,wBAAwBA,CAAC;AAAA,EACpCC;AAAAA,EACAC;AAAAA,EACAC;AAAAA,EACAC;AAAAA,EACAC;AAAAA,EACAC;AAQF,MAAM;AACEC,QAAAA,oBAAoBC,YAAY,YAAY;AAC5C,QAAA;AACIC,YAAAA,QAAQ,MAAMC,iBAAiB;AAAA,QACnCC,kBAAkBV;AAAAA,QAClBW,iBAAiBV;AAAAA,QACjBW,eAAe;AAAA,QACfC,eAAe;AAAA,QACfX;AAAAA,QACAC;AAAAA,MAAAA,CACD;AAGCW,sBAAAA,OAAON,MAAMO,eAAeC,KAAK,IAC/BF,OAAON,MAAMS,gBAAgBD,KAAK,CACtC;AAAA,aACOE,KAAK;AACZ,UAAIA,eAAeC,OAAO;AAChBC,gBAAAA,MAAM,iCAAiCF,GAAG;AACxC,2CAAA;AAAA,UACRG,WAAW;AAAA,UACXC,MAAM;AAAA,UACNC,cAAcL,IAAIM;AAAAA,QAAAA;AAAAA,MACnB,OACI;AACGJ,gBAAAA,MAAM,yCAAyCF,GAAG;AAChD,2CAAA;AAAA,UACRG,WAAW;AAAA,UACXC,MAAM;AAAA,UACNC,cAAcE,KAAKC,UAAUR,GAAG;AAAA,QAAA;AAAA,MACjC;AAAA,IACH;AAAA,EACF,GACC,CAAClB,OAAOE,SAASC,aAAaF,UAAUI,SAASD,eAAe,CAAC;AAEpE,SAAOuB,QAAQ,OAAO;AAAA,IAAErB;AAAAA,EAAAA,IAAsB,CAACA,iBAAiB,CAAC;AACnE;"}