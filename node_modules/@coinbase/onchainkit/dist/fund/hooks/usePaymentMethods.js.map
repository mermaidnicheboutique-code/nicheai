{"version":3,"file":"usePaymentMethods.js","sources":["../../../src/fund/hooks/usePaymentMethods.ts"],"sourcesContent":["import { useCallback, useEffect } from 'react';\nimport type { OnrampError, PaymentMethod } from '../types';\nimport { buildPaymentMethods } from '../utils/buildPaymentMethods';\nimport { fetchOnrampOptions } from '../utils/fetchOnrampOptions';\n\nexport const usePaymentMethods = ({\n  country,\n  subdivision,\n  currency,\n  setPaymentMethods,\n  setIsPaymentMethodsLoading,\n  onError,\n}: {\n  country: string;\n  subdivision?: string;\n  currency: string;\n  setPaymentMethods: (paymentMethods: PaymentMethod[]) => void;\n  setIsPaymentMethodsLoading: (loading: boolean) => void;\n  onError?: (e: OnrampError | undefined) => void;\n}) => {\n  const handleFetchPaymentMethods = useCallback(async () => {\n    setIsPaymentMethodsLoading(true);\n\n    try {\n      const paymentOptions = await fetchOnrampOptions({\n        country,\n        subdivision,\n      });\n\n      const paymentMethods = buildPaymentMethods(\n        paymentOptions,\n        currency,\n        country,\n      );\n\n      if (paymentMethods.length === 0) {\n        console.error(\n          'No payment methods found for the selected country and currency. See docs for more information: https://docs.cdp.coinbase.com/onramp/docs/api-configurations',\n        );\n        onError?.({\n          errorType: 'handled_error',\n          code: 'NO_PAYMENT_METHODS',\n          debugMessage:\n            'No payment methods found for the selected country and currency. See docs for more information: https://docs.cdp.coinbase.com/onramp/docs/api-configurations',\n        });\n      }\n\n      setPaymentMethods(paymentMethods);\n    } catch (error) {\n      if (error instanceof Error) {\n        console.error('Error fetching payment options:', error);\n        onError?.({\n          errorType: 'handled_error',\n          code: 'PAYMENT_METHODS_ERROR',\n          debugMessage: error.message,\n        });\n      }\n    } finally {\n      setIsPaymentMethodsLoading(false);\n    }\n  }, [\n    country,\n    subdivision,\n    currency,\n    setPaymentMethods,\n    setIsPaymentMethodsLoading,\n    onError,\n  ]);\n\n  useEffect(() => {\n    handleFetchPaymentMethods();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n};\n"],"names":["usePaymentMethods","country","subdivision","currency","setPaymentMethods","setIsPaymentMethodsLoading","onError","handleFetchPaymentMethods","useCallback","paymentOptions","fetchOnrampOptions","paymentMethods","buildPaymentMethods","length","console","error","errorType","code","debugMessage","Error","message","useEffect"],"mappings":";;;AAKO,MAAMA,oBAAoBA,CAAC;AAAA,EAChCC;AAAAA,EACAC;AAAAA,EACAC;AAAAA,EACAC;AAAAA,EACAC;AAAAA,EACAC;AAQF,MAAM;AACEC,QAAAA,4BAA4BC,YAAY,YAAY;AACxDH,+BAA2B,IAAI;AAE3B,QAAA;AACII,YAAAA,iBAAiB,MAAMC,mBAAmB;AAAA,QAC9CT;AAAAA,QACAC;AAAAA,MAAAA,CACD;AAED,YAAMS,iBAAiBC,oBACrBH,gBACAN,UACAF,OACF;AAEIU,UAAAA,eAAeE,WAAW,GAAG;AAC/BC,gBAAQC,MACN,6JACF;AACU,2CAAA;AAAA,UACRC,WAAW;AAAA,UACXC,MAAM;AAAA,UACNC,cACE;AAAA,QAAA;AAAA,MACH;AAGHd,wBAAkBO,cAAc;AAAA,aACzBI,OAAO;AACd,UAAIA,iBAAiBI,OAAO;AAClBJ,gBAAAA,MAAM,mCAAmCA,KAAK;AAC5C,2CAAA;AAAA,UACRC,WAAW;AAAA,UACXC,MAAM;AAAA,UACNC,cAAcH,MAAMK;AAAAA,QAAAA;AAAAA,MACrB;AAAA,IACH,UACQ;AACRf,iCAA2B,KAAK;AAAA,IAAA;AAAA,EAClC,GACC,CACDJ,SACAC,aACAC,UACAC,mBACAC,4BACAC,OAAO,CACR;AAEDe,YAAU,MAAM;AACY,8BAAA;AAAA,EAE5B,GAAG,EAAE;AACP;"}