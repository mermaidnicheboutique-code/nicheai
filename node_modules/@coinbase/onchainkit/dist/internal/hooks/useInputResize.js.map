{"version":3,"file":"useInputResize.js","sources":["../../../src/internal/hooks/useInputResize.ts"],"sourcesContent":["import { type RefObject, useCallback, useEffect } from 'react';\n\ntype InputResizeConfig = {\n  // Font size in rem units\n  baseFontSize: number;\n  minScale: number;\n};\n\nconst defaultConfig: InputResizeConfig = {\n  baseFontSize: 3.75, // 60px = 3.75rem at default browser font size\n  minScale: 0.01,\n};\n\nexport function useInputResize(\n  containerRef: RefObject<HTMLDivElement | null>,\n  wrapperRef: RefObject<HTMLDivElement | null>,\n  inputRef: RefObject<HTMLInputElement | null>,\n  measureRef: RefObject<HTMLSpanElement | null>,\n  labelRef: RefObject<HTMLSpanElement | null>,\n  config: Partial<InputResizeConfig> = {},\n) {\n  const { baseFontSize, minScale } = {\n    ...defaultConfig,\n    ...config,\n  };\n\n  const updateScale = useCallback(() => {\n    const container = containerRef.current;\n    const wrapper = wrapperRef.current;\n    const input = inputRef.current;\n    const measure = measureRef.current;\n    const label = labelRef.current;\n\n    if (!container || !wrapper || !input || !measure || !label) {\n      return;\n    }\n\n    // Set base font size in rem units\n    measure.style.fontSize = `${baseFontSize}rem`;\n    input.style.fontSize = `${baseFontSize}rem`;\n\n    // Get natural content width\n    const contentWidth = measure.clientWidth;\n    const availableWidth = container.clientWidth - label.clientWidth;\n\n    // Set input width to match content\n    input.style.width = `${contentWidth}px`;\n\n    if (contentWidth > availableWidth) {\n      const scale = availableWidth / contentWidth;\n      const finalScale = Math.max(scale, minScale);\n\n      // Apply scale to wrapper instead of input\n      wrapper.style.transform = `scale(${finalScale})`;\n      wrapper.style.transformOrigin = 'left center';\n    } else {\n      wrapper.style.transform = 'scale(1)';\n    }\n  }, [\n    baseFontSize,\n    minScale,\n    containerRef,\n    wrapperRef,\n    inputRef,\n    measureRef,\n    labelRef,\n  ]);\n\n  // Update on resize and font size change\n  useEffect(() => {\n    const container = containerRef.current;\n    if (!container) {\n      return;\n    }\n\n    const resizeObserver = new ResizeObserver(updateScale);\n    resizeObserver.observe(container);\n\n    return () => {\n      resizeObserver.disconnect();\n    };\n  }, [containerRef, updateScale]);\n\n  return updateScale;\n}\n"],"names":["defaultConfig","baseFontSize","minScale","useInputResize","containerRef","wrapperRef","inputRef","measureRef","labelRef","config","updateScale","useCallback","container","current","wrapper","input","measure","label","style","fontSize","contentWidth","clientWidth","availableWidth","width","scale","finalScale","Math","max","transform","transformOrigin","useEffect","resizeObserver","ResizeObserver","observe","disconnect"],"mappings":";AAQA,MAAMA,gBAAmC;AAAA,EACvCC,cAAc;AAAA;AAAA,EACdC,UAAU;AACZ;AAEgBC,SAAAA,eACdC,cACAC,YACAC,UACAC,YACAC,UACAC,SAAqC,IACrC;AACM,QAAA;AAAA,IAAER;AAAAA,IAAcC;AAAAA,EAAAA,IAAa;AAAA,IACjC,GAAGF;AAAAA,IACH,GAAGS;AAAAA,EACL;AAEMC,QAAAA,cAAcC,YAAY,MAAM;AACpC,UAAMC,YAAYR,aAAaS;AAC/B,UAAMC,UAAUT,WAAWQ;AAC3B,UAAME,QAAQT,SAASO;AACvB,UAAMG,UAAUT,WAAWM;AAC3B,UAAMI,QAAQT,SAASK;AAEnB,QAAA,CAACD,aAAa,CAACE,WAAW,CAACC,SAAS,CAACC,WAAW,CAACC,OAAO;AAC1D;AAAA,IAAA;AAIMC,YAAAA,MAAMC,WAAW,GAAGlB,YAAY;AAClCiB,UAAAA,MAAMC,WAAW,GAAGlB,YAAY;AAGtC,UAAMmB,eAAeJ,QAAQK;AACvBC,UAAAA,iBAAiBV,UAAUS,cAAcJ,MAAMI;AAG/CH,UAAAA,MAAMK,QAAQ,GAAGH,YAAY;AAEnC,QAAIA,eAAeE,gBAAgB;AACjC,YAAME,QAAQF,iBAAiBF;AAC/B,YAAMK,aAAaC,KAAKC,IAAIH,OAAOtB,QAAQ;AAGnCgB,cAAAA,MAAMU,YAAY,SAASH,UAAU;AAC7CX,cAAQI,MAAMW,kBAAkB;AAAA,IAAA,OAC3B;AACLf,cAAQI,MAAMU,YAAY;AAAA,IAAA;AAAA,EAC5B,GACC,CACD3B,cACAC,UACAE,cACAC,YACAC,UACAC,YACAC,QAAQ,CACT;AAGDsB,YAAU,MAAM;AACd,UAAMlB,YAAYR,aAAaS;AAC/B,QAAI,CAACD,WAAW;AACd;AAAA,IAAA;AAGImB,UAAAA,iBAAiB,IAAIC,eAAetB,WAAW;AACrDqB,mBAAeE,QAAQrB,SAAS;AAEhC,WAAO,MAAM;AACXmB,qBAAeG,WAAW;AAAA,IAC5B;AAAA,EAAA,GACC,CAAC9B,cAAcM,WAAW,CAAC;AAEvBA,SAAAA;AACT;"}