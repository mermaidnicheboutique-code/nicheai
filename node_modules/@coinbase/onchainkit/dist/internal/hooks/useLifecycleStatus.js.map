{"version":3,"file":"useLifecycleStatus.js","sources":["../../../src/internal/hooks/useLifecycleStatus.ts"],"sourcesContent":["import type {\n  AbstractLifecycleStatus,\n  LifecycleStatusUpdate,\n  UseLifecycleStatusReturn,\n} from '@/internal/types';\nimport { useCallback, useState } from 'react';\n\nexport function useLifecycleStatus<T extends AbstractLifecycleStatus>(\n  initialState: T,\n  options?: {\n    onStatus?: (status: T) => void;\n  },\n): UseLifecycleStatusReturn<T> {\n  const [lifecycleStatus, setLifecycleStatus] = useState<T>(initialState); // Component lifecycle\n  const { onStatus } = options ?? {};\n\n  // Update lifecycle status, statusData will be persisted for the full lifecycle\n  const updateLifecycleStatus = useCallback(\n    (newStatus: LifecycleStatusUpdate<T>) => {\n      setLifecycleStatus((prevStatus: T) => {\n        // do not persist errors\n        const persistedStatusData =\n          prevStatus.statusName === 'error'\n            ? // eslint-disable-next-line @typescript-eslint/no-unused-vars\n              (({ error, code, message, ...statusData }) => statusData)(\n                prevStatus.statusData,\n              )\n            : prevStatus.statusData;\n        const nextStatus = {\n          statusName: newStatus.statusName,\n          statusData: {\n            ...persistedStatusData,\n            ...newStatus.statusData,\n          },\n        } as T;\n        onStatus?.(nextStatus);\n        return nextStatus;\n      });\n    },\n    [onStatus],\n  );\n\n  return [lifecycleStatus, updateLifecycleStatus];\n}\n"],"names":["useLifecycleStatus","initialState","options","lifecycleStatus","setLifecycleStatus","useState","onStatus","updateLifecycleStatus","useCallback","newStatus","prevStatus","persistedStatusData","statusName","error","code","message","statusData","nextStatus"],"mappings":";AAOgBA,SAAAA,mBACdC,cACAC,SAG6B;AAC7B,QAAM,CAACC,iBAAiBC,kBAAkB,IAAIC,SAAYJ,YAAY;AAChE,QAAA;AAAA,IAAEK;AAAAA,EAAS,IAAIJ,WAAW,CAAC;AAG3BK,QAAAA,wBAAwBC,YAC5B,CAACC,cAAwC;AACvCL,uBAAmB,CAACM,eAAkB;AAE9BC,YAAAA,sBACJD,WAAWE,eAAe;AAAA;AAAA,SAErB,CAAC;AAAA,UAAEC;AAAAA,UAAOC;AAAAA,UAAMC;AAAAA,UAAS,GAAGC;AAAAA,QAAAA,MAAiBA,YAC5CN,WAAWM,UACb;AAAA,UACAN,WAAWM;AACjB,YAAMC,aAAa;AAAA,QACjBL,YAAYH,UAAUG;AAAAA,QACtBI,YAAY;AAAA,UACV,GAAGL;AAAAA,UACH,GAAGF,UAAUO;AAAAA,QAAAA;AAAAA,MAEjB;AACAV,2CAAWW;AACJA,aAAAA;AAAAA,IAAAA,CACR;AAAA,EAAA,GAEH,CAACX,QAAQ,CACX;AAEO,SAAA,CAACH,iBAAiBI,qBAAqB;AAChD;"}