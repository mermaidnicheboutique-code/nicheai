{"version":3,"file":"useRepositionOnResize.js","sources":["../../../../src/internal/components/Draggable/useRepositionOnResize.ts"],"sourcesContent":["import { type Dispatch, useCallback, useEffect } from 'react';\n\nexport function useRespositionOnWindowResize(\n  draggableRef: React.RefObject<HTMLDivElement | null>,\n  position: { x: number; y: number },\n  resetPosition: Dispatch<\n    React.SetStateAction<{\n      x: number;\n      y: number;\n    }>\n  >,\n) {\n  const isElementInViewport = useCallback((rect: DOMRect) => {\n    return (\n      rect.right <= window.innerWidth &&\n      rect.bottom <= window.innerHeight &&\n      rect.left >= 0 &&\n      rect.top >= 0\n    );\n  }, []);\n\n  const repositionDraggable = useCallback(\n    (rect: DOMRect, currentPosition: { x: number; y: number }) => {\n      const viewportWidth = window.innerWidth;\n      const viewportHeight = window.innerHeight;\n\n      let newX: number;\n      let newY: number;\n\n      if (rect.right > viewportWidth) {\n        newX = viewportWidth - rect.width - 10;\n      } else if (rect.left < 0) {\n        newX = 10;\n      } else {\n        newX = currentPosition.x;\n      }\n\n      if (rect.bottom > viewportHeight) {\n        newY = viewportHeight - rect.height - 10;\n      } else if (rect.top < 0) {\n        newY = 10;\n      } else {\n        newY = currentPosition.y;\n      }\n\n      return { x: newX, y: newY };\n    },\n    [],\n  );\n\n  const handleWindowResize = useCallback(() => {\n    if (!draggableRef.current) {\n      return;\n    }\n\n    const el = draggableRef.current;\n    const rect = el.getBoundingClientRect();\n\n    const newPosition = repositionDraggable(rect, position);\n\n    resetPosition((currentPos) =>\n      isElementInViewport(rect) ? currentPos : newPosition,\n    );\n  }, [\n    draggableRef,\n    position,\n    repositionDraggable,\n    resetPosition,\n    isElementInViewport,\n  ]);\n\n  useEffect(() => {\n    window.addEventListener('resize', handleWindowResize);\n    return () => window.removeEventListener('resize', handleWindowResize);\n  }, [handleWindowResize]);\n}\n"],"names":["useRespositionOnWindowResize","draggableRef","position","resetPosition","isElementInViewport","useCallback","rect","right","window","innerWidth","bottom","innerHeight","left","top","repositionDraggable","currentPosition","viewportWidth","viewportHeight","newX","newY","width","x","height","y","handleWindowResize","current","el","getBoundingClientRect","newPosition","currentPos","useEffect","addEventListener","removeEventListener"],"mappings":";AAEgBA,SAAAA,6BACdC,cACAC,UACAC,eAMA;AACMC,QAAAA,sBAAsBC,YAAY,CAACC,SAAkB;AACzD,WACEA,KAAKC,SAASC,OAAOC,cACrBH,KAAKI,UAAUF,OAAOG,eACtBL,KAAKM,QAAQ,KACbN,KAAKO,OAAO;AAAA,EAEhB,GAAG,EAAE;AAEL,QAAMC,sBAAsBT,YAC1B,CAACC,MAAeS,oBAA8C;AAC5D,UAAMC,gBAAgBR,OAAOC;AAC7B,UAAMQ,iBAAiBT,OAAOG;AAE1BO,QAAAA;AACAC,QAAAA;AAEAb,QAAAA,KAAKC,QAAQS,eAAe;AACvBA,aAAAA,gBAAgBV,KAAKc,QAAQ;AAAA,IAAA,WAC3Bd,KAAKM,OAAO,GAAG;AACjB,aAAA;AAAA,IAAA,OACF;AACLM,aAAOH,gBAAgBM;AAAAA,IAAAA;AAGrBf,QAAAA,KAAKI,SAASO,gBAAgB;AACzBA,aAAAA,iBAAiBX,KAAKgB,SAAS;AAAA,IAAA,WAC7BhB,KAAKO,MAAM,GAAG;AAChB,aAAA;AAAA,IAAA,OACF;AACLM,aAAOJ,gBAAgBQ;AAAAA,IAAAA;AAGlB,WAAA;AAAA,MAAEF,GAAGH;AAAAA,MAAMK,GAAGJ;AAAAA,IAAK;AAAA,EAC5B,GACA,EACF;AAEMK,QAAAA,qBAAqBnB,YAAY,MAAM;AACvC,QAAA,CAACJ,aAAawB,SAAS;AACzB;AAAA,IAAA;AAGF,UAAMC,KAAKzB,aAAawB;AAClBnB,UAAAA,OAAOoB,GAAGC,sBAAsB;AAEhCC,UAAAA,cAAcd,oBAAoBR,MAAMJ,QAAQ;AAEtDC,kBAAe0B,CACbzB,eAAAA,oBAAoBE,IAAI,IAAIuB,aAAaD,WAC3C;AAAA,EAAA,GACC,CACD3B,cACAC,UACAY,qBACAX,eACAC,mBAAmB,CACpB;AAED0B,YAAU,MAAM;AACPC,WAAAA,iBAAiB,UAAUP,kBAAkB;AACpD,WAAO,MAAMhB,OAAOwB,oBAAoB,UAAUR,kBAAkB;AAAA,EAAA,GACnE,CAACA,kBAAkB,CAAC;AACzB;"}