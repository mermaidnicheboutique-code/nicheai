{"version":3,"file":"QrCodeSvg.js","sources":["../../../../src/internal/components/QrCode/QrCodeSvg.tsx"],"sourcesContent":["import { useId, useMemo } from 'react';\nimport { useTheme } from '../../hooks/useTheme';\nimport {\n  GRADIENT_END_COORDINATES,\n  GRADIENT_START_COORDINATES,\n  QR_CODE_SIZE,\n  QR_LOGO_BACKGROUND_COLOR,\n  QR_LOGO_RADIUS,\n  QR_LOGO_SIZE,\n  linearGradientStops,\n  ockThemeToLinearGradientColorMap,\n  ockThemeToRadialGradientColorMap,\n  presetGradients,\n} from './gradientConstants';\nimport { useCorners } from './useCorners';\nimport { useDotsPath } from './useDotsPath';\nimport { useLogo } from './useLogo';\nimport { useMatrix } from './useMatrix';\n\nfunction coordinateAsPercentage(coordinate: number) {\n  return `${coordinate * 100}%`;\n}\n\nexport type QRCodeSVGProps = {\n  value?: string | null;\n  size?: number;\n  backgroundColor?: string;\n  logo?: React.ReactNode;\n  logoSize?: number;\n  logoBackgroundColor?: string;\n  logoMargin?: number;\n  logoBorderRadius?: number;\n  quietZone?: number;\n  quietZoneBorderRadius?: number;\n  ecl?: 'L' | 'M' | 'Q' | 'H';\n  gradientType?: 'radial' | 'linear';\n};\n\nexport function QrCodeSvg({\n  value,\n  size = QR_CODE_SIZE,\n  backgroundColor = '#ffffff',\n  logo,\n  logoSize = QR_LOGO_SIZE,\n  logoBackgroundColor = QR_LOGO_BACKGROUND_COLOR,\n  logoMargin = 5,\n  logoBorderRadius = QR_LOGO_RADIUS,\n  quietZone = 12,\n  quietZoneBorderRadius = 10,\n  ecl = 'Q',\n  gradientType = 'radial',\n}: QRCodeSVGProps) {\n  const gradientRadius = size * 0.55;\n  const gradientCenterPoint = size / 2;\n  const uid = useId();\n\n  const theme = useTheme();\n  const themeName = theme.split('-')[0];\n\n  const isRadialGradient = gradientType === 'radial';\n  const fillColor = isRadialGradient ? `url(#radialGrad-${uid})` : '#000000';\n  const bgColor = isRadialGradient\n    ? backgroundColor\n    : `url(#linearGrad-${uid})`;\n\n  const linearGradientColor =\n    ockThemeToLinearGradientColorMap[\n      themeName as keyof typeof ockThemeToLinearGradientColorMap\n    ] ?? ockThemeToLinearGradientColorMap.default;\n  const linearColors = [\n    linearGradientStops[linearGradientColor].startColor,\n    linearGradientStops[linearGradientColor].endColor,\n  ];\n\n  const radialGradientColor =\n    ockThemeToRadialGradientColorMap[\n      themeName as keyof typeof ockThemeToLinearGradientColorMap\n    ] ?? ockThemeToRadialGradientColorMap.default;\n  const presetGradientForColor =\n    presetGradients[radialGradientColor as keyof typeof presetGradients];\n\n  const matrix = useMatrix(ecl, value);\n  const corners = useCorners(size, matrix.length, bgColor, fillColor, uid);\n  const { x: x1, y: y1 } = GRADIENT_START_COORDINATES;\n  const { x: x2, y: y2 } = GRADIENT_END_COORDINATES;\n\n  const viewBox = useMemo(() => {\n    return [\n      -quietZone,\n      -quietZone,\n      size + quietZone * 2,\n      size + quietZone * 2,\n    ].join(' ');\n  }, [quietZone, size]);\n\n  const svgLogo = useLogo({\n    size,\n    logo,\n    logoSize,\n    logoBackgroundColor,\n    logoMargin,\n    logoBorderRadius,\n  });\n\n  const path = useDotsPath({\n    matrix,\n    size,\n    logoSize,\n    logoMargin,\n    logoBorderRadius,\n    hasLogo: !!logo,\n  });\n\n  if (!path || !value) {\n    return null;\n  }\n\n  return (\n    <svg viewBox={viewBox} width={size} height={size}>\n      <title>QR Code</title>\n      <defs>\n        {isRadialGradient ? (\n          <radialGradient\n            id={`radialGrad-${uid}`}\n            data-testid=\"radialGrad\"\n            rx={gradientRadius}\n            ry={gradientRadius}\n            cx={gradientCenterPoint}\n            cy={gradientCenterPoint}\n            gradientUnits=\"userSpaceOnUse\"\n          >\n            {presetGradientForColor.map(([gradientColor, offset]) => (\n              <stop\n                key={`${gradientColor}${offset}`}\n                offset={offset}\n                stopColor={gradientColor}\n                stopOpacity={1}\n              />\n            ))}\n          </radialGradient>\n        ) : (\n          <linearGradient\n            id={`linearGrad-${uid}`}\n            data-testid=\"linearGrad\"\n            x1={coordinateAsPercentage(x1)}\n            y1={coordinateAsPercentage(y1)}\n            x2={coordinateAsPercentage(x2)}\n            y2={coordinateAsPercentage(y2)}\n            gradientUnits=\"userSpaceOnUse\"\n          >\n            <stop offset=\"0\" stopColor={linearColors[0]} />\n            <stop offset=\"1\" stopColor={linearColors[1]} />\n          </linearGradient>\n        )}\n      </defs>\n      <g>\n        <rect\n          rx={quietZoneBorderRadius}\n          ry={quietZoneBorderRadius}\n          x={-quietZone}\n          y={-quietZone}\n          width={size + quietZone * 2}\n          height={size + quietZone * 2}\n          fill={backgroundColor}\n          stroke={bgColor}\n          strokeWidth={2}\n        />\n      </g>\n      <g>\n        <path\n          d={path}\n          fill={fillColor}\n          strokeLinecap=\"butt\"\n          stroke={fillColor}\n          strokeWidth={0}\n          opacity={0.6}\n        />\n        {corners}\n        {svgLogo}\n      </g>\n    </svg>\n  );\n}\n"],"names":["coordinateAsPercentage","coordinate","QrCodeSvg","value","size","QR_CODE_SIZE","backgroundColor","logo","logoSize","QR_LOGO_SIZE","logoBackgroundColor","QR_LOGO_BACKGROUND_COLOR","logoMargin","logoBorderRadius","QR_LOGO_RADIUS","quietZone","quietZoneBorderRadius","ecl","gradientType","gradientRadius","gradientCenterPoint","uid","useId","theme","useTheme","themeName","split","isRadialGradient","fillColor","bgColor","linearGradientColor","ockThemeToLinearGradientColorMap","default","linearColors","linearGradientStops","startColor","endColor","radialGradientColor","ockThemeToRadialGradientColorMap","presetGradientForColor","presetGradients","matrix","useMatrix","corners","useCorners","length","x","x1","y","y1","GRADIENT_START_COORDINATES","x2","y2","GRADIENT_END_COORDINATES","viewBox","useMemo","join","svgLogo","useLogo","path","useDotsPath","hasLogo","map","gradientColor","offset"],"mappings":"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"}