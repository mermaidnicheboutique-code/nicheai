{"version":3,"file":"useMatrix.js","sources":["../../../../src/internal/components/QrCode/useMatrix.ts"],"sourcesContent":["import QRCode from 'qrcode';\nimport { useMemo } from 'react';\n\n/**\n * useMatrix generates a QR code matrix from a given value.\n * @param errorCorrectionLevel QR code error correction level (L, M, Q, H)\n * @param value String value to encode in QR code. useMatrix adds an 'ethereum:' prefix to the value as we only support EVM addresseses\n * @returns 2D array representing the QR code matrix, where 1 = black pixel and 0 = white pixel\n */\nexport function useMatrix(\n  errorCorrectionLevel: 'L' | 'M' | 'Q' | 'H',\n  value?: string | null,\n) {\n  const matrix = useMemo(() => {\n    if (!value) {\n      return [];\n    }\n\n    const transformedValue = `ethereum:${value}`;\n\n    const arr = Array.from(\n      QRCode.create(transformedValue, { errorCorrectionLevel }).modules.data,\n    );\n\n    const sqrt = Math.sqrt(arr.length);\n\n    return arr.reduce<number[][]>((rows, key, index) => {\n      if (index % sqrt === 0) {\n        rows.push([key]);\n      } else {\n        rows[rows.length - 1].push(key);\n      }\n      return rows;\n    }, []);\n  }, [errorCorrectionLevel, value]);\n  return matrix;\n}\n"],"names":["useMatrix","errorCorrectionLevel","value","matrix","useMemo","transformedValue","arr","Array","from","QRCode","create","modules","data","sqrt","Math","length","reduce","rows","key","index","push"],"mappings":";;AASgBA,SAAAA,UACdC,sBACAC,OACA;AACMC,QAAAA,SAASC,QAAQ,MAAM;AAC3B,QAAI,CAACF,OAAO;AACV,aAAO,CAAE;AAAA,IAAA;AAGLG,UAAAA,mBAAmB,YAAYH,KAAK;AAE1C,UAAMI,MAAMC,MAAMC,KAChBC,OAAOC,OAAOL,kBAAkB;AAAA,MAAEJ;AAAAA,IAAAA,CAAsB,EAAEU,QAAQC,IACpE;AAEA,UAAMC,OAAOC,KAAKD,KAAKP,IAAIS,MAAM;AAEjC,WAAOT,IAAIU,OAAmB,CAACC,MAAMC,KAAKC,UAAU;AAC9CA,UAAAA,QAAQN,SAAS,GAAG;AACjBO,aAAAA,KAAK,CAACF,GAAG,CAAC;AAAA,MAAA,OACV;AACLD,aAAKA,KAAKF,SAAS,CAAC,EAAEK,KAAKF,GAAG;AAAA,MAAA;AAEzBD,aAAAA;AAAAA,IACT,GAAG,EAAE;AAAA,EAAA,GACJ,CAAChB,sBAAsBC,KAAK,CAAC;AACzBC,SAAAA;AACT;"}