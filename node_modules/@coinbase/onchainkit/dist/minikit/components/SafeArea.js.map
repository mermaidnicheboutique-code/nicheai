{"version":3,"file":"SafeArea.js","sources":["../../../src/minikit/components/SafeArea.tsx"],"sourcesContent":["'use client';\nimport {\n  PropsWithChildren,\n  useLayoutEffect,\n  useMemo,\n  Children,\n  isValidElement,\n  cloneElement,\n} from 'react';\nimport type { CSSProperties, ReactElement } from 'react';\nimport { useIsInMiniApp } from '../hooks/useIsInMiniApp';\nimport { useMiniKit } from '../hooks/useMiniKit';\n\nexport type SafeAreaProps = PropsWithChildren<{\n  asChild?: boolean;\n}>;\n\n/**\n * Renders children with safe area padding when running inside a Mini App.\n *\n * - Reads inset values from `MiniKit` `context.client.safeAreaInsets` and exposes them as\n *   CSS custom properties on `:root`/`html`:\n *   `--ock-minikit-safe-area-inset-top|right|bottom|left`.\n * - Uses those variables directly as pixel values via `var(..., 0px)`.\n * - When `asChild` is true, expects a single React element and merges the padding into the\n *   child's `style`. Otherwise, wraps `children` in a `div` that has the padding applied.\n * - If no `children` are provided, the component renders nothing but still ensures the\n *   CSS variables are set on `:root`.\n * - When not inside a Mini App, returns `children` unchanged and does not set variables.\n *\n * @param props\n * @param props.children React children to render.\n * @param props.asChild When true, merges safe-area padding into the single child's `style` instead of wrapping.\n */\nexport function SafeArea({ children, asChild }: SafeAreaProps) {\n  const { context } = useMiniKit();\n  const { isInMiniApp } = useIsInMiniApp();\n\n  const safeAreaInsets = useMemo(() => {\n    const { top, bottom, left, right } = context?.client?.safeAreaInsets || {\n      top: 0,\n      bottom: 0,\n      left: 0,\n      right: 0,\n    };\n\n    return { top, bottom, left, right };\n  }, [context]);\n\n  useLayoutEffect(() => {\n    if (!isInMiniApp) {\n      return;\n    }\n\n    Object.entries(safeAreaInsets).forEach(([key, value]) => {\n      document.documentElement.style.setProperty(\n        `--ock-minikit-safe-area-inset-${key}`,\n        `${value}px`,\n      );\n    });\n  }, [safeAreaInsets, isInMiniApp]);\n\n  const paddingStyles: CSSProperties = useMemo(() => {\n    return {\n      paddingTop: 'var(--ock-minikit-safe-area-inset-top, 0px)',\n      paddingRight: 'var(--ock-minikit-safe-area-inset-right, 0px)',\n      paddingBottom: 'var(--ock-minikit-safe-area-inset-bottom, 0px)',\n      paddingLeft: 'var(--ock-minikit-safe-area-inset-left, 0px)',\n    };\n  }, []);\n\n  if (!isInMiniApp) {\n    return children;\n  }\n\n  if (!children) {\n    return null;\n  }\n\n  if (asChild) {\n    if (!isValidElement(children)) {\n      console.warn(\n        'SafeArea: children is not a valid element. Returning children as is.',\n      );\n      return children;\n    }\n\n    const onlyChild = Children.only(children) as ReactElement<{\n      style?: CSSProperties;\n    }>;\n\n    const mergedStyle: CSSProperties = {\n      ...onlyChild.props.style,\n      ...paddingStyles,\n    };\n\n    return cloneElement(onlyChild, { style: mergedStyle });\n  }\n\n  return <div style={paddingStyles}>{children}</div>;\n}\n"],"names":["SafeArea","children","asChild","context","useMiniKit","isInMiniApp","useIsInMiniApp","safeAreaInsets","useMemo","top","bottom","left","right","client","useLayoutEffect","entries","forEach","key","value","documentElement","style","setProperty","paddingStyles","paddingTop","paddingRight","paddingBottom","paddingLeft","isValidElement","console","warn","onlyChild","Children","only","mergedStyle","props","cloneElement"],"mappings":";;;;AAkCO,SAASA,SAAS;AAAA,EAAEC;AAAAA,EAAUC;AAAuB,GAAG;AACvD,QAAA;AAAA,IAAEC;AAAAA,MAAYC,WAAW;AACzB,QAAA;AAAA,IAAEC;AAAAA,MAAgBC,eAAe;AAEjCC,QAAAA,iBAAiBC,QAAQ,MAAM;;AAC7B,UAAA;AAAA,MAAEC;AAAAA,MAAKC;AAAAA,MAAQC;AAAAA,MAAMC;AAAAA,IAAAA,MAAUT,wCAASU,WAATV,mBAAiBI,mBAAkB;AAAA,MACtEE,KAAK;AAAA,MACLC,QAAQ;AAAA,MACRC,MAAM;AAAA,MACNC,OAAO;AAAA,IACT;AAEO,WAAA;AAAA,MAAEH;AAAAA,MAAKC;AAAAA,MAAQC;AAAAA,MAAMC;AAAAA,IAAM;AAAA,EAAA,GACjC,CAACT,OAAO,CAAC;AAEZW,kBAAgB,MAAM;AACpB,QAAI,CAACT,aAAa;AAChB;AAAA,IAAA;AAGKU,WAAAA,QAAQR,cAAc,EAAES,QAAQ,CAAC,CAACC,KAAKC,KAAK,MAAM;AAC9CC,eAAAA,gBAAgBC,MAAMC,YAC7B,iCAAiCJ,GAAG,IACpC,GAAGC,KAAK,IACV;AAAA,IAAA,CACD;AAAA,EAAA,GACA,CAACX,gBAAgBF,WAAW,CAAC;AAE1BiB,QAAAA,gBAA+Bd,QAAQ,MAAM;AAC1C,WAAA;AAAA,MACLe,YAAY;AAAA,MACZC,cAAc;AAAA,MACdC,eAAe;AAAA,MACfC,aAAa;AAAA,IACf;AAAA,EACF,GAAG,EAAE;AAEL,MAAI,CAACrB,aAAa;AACTJ,WAAAA;AAAAA,EAAAA;AAGT,MAAI,CAACA,UAAU;AACN,WAAA;AAAA,EAAA;AAGT,MAAIC,SAAS;AACP,QAAA,CAACyB,eAAe1B,QAAQ,GAAG;AAC7B2B,cAAQC,KACN,sEACF;AACO5B,aAAAA;AAAAA,IAAAA;AAGH6B,UAAAA,YAAYC,SAASC,KAAK/B,QAAQ;AAIxC,UAAMgC,cAA6B;AAAA,MACjC,GAAGH,UAAUI,MAAMd;AAAAA,MACnB,GAAGE;AAAAA,IACL;AAEA,WAAOa,aAAaL,WAAW;AAAA,MAAEV,OAAOa;AAAAA,IAAAA,CAAa;AAAA,EAAA;AAGvD,SAAQ,oBAAA,OAAA,EAAI,OAAOX,eAAgBrB,SAAS,CAAA;AAC9C;"}