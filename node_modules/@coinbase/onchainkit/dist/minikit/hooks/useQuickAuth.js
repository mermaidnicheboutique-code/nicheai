'use client';
import { useQuery } from "@tanstack/react-query";
import sdk from "@farcaster/miniapp-sdk";
import { useIsInMiniApp } from "./useIsInMiniApp.js";
import { useRef } from "react";
function useQuickAuth(input, init, useQueryOptions) {
  const {
    isInMiniApp
  } = useIsInMiniApp();
  const hasAuthedRef = useRef(false);
  return useQuery({
    queryKey: ["useQuickAuth", isInMiniApp],
    queryFn: async () => {
      if (hasAuthedRef.current) {
        return null;
      }
      try {
        const result = await sdk.quickAuth.fetch(input, init);
        if (!result.ok) {
          throw new Error("quickAuth.fetch response was not successful");
        }
        const data = await result.json();
        hasAuthedRef.current = true;
        return data;
      } catch (err) {
        console.error("Quick auth error:", err);
        hasAuthedRef.current = true;
        return null;
      }
    },
    enabled: !!isInMiniApp,
    ...useQueryOptions
  });
}
export {
  useQuickAuth
};
//# sourceMappingURL=useQuickAuth.js.map
