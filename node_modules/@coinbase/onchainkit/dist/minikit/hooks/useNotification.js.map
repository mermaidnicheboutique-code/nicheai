{"version":3,"file":"useNotification.js","sources":["../../../src/minikit/hooks/useNotification.ts"],"sourcesContent":["import { useCallback } from 'react';\nimport { useMiniKit } from './useMiniKit';\n\n/**\n * Sends notification data to the notification proxy URL set in the MiniKit context\n *\n * @deprecated\n * We recommend using a serverâ€‘initiated notification flow.\n * This hook will be removed in a future version.\n *\n * @param title - The title of the notification.\n * @param body - The body of the notification.\n * @returns boolean - true if the notification was sent successfully, false otherwise\n */\nexport function useNotification() {\n  const { context, notificationProxyUrl } = useMiniKit();\n\n  return useCallback(\n    async ({ title, body }: { title: string; body: string }) => {\n      if (!context) {\n        return false;\n      }\n\n      try {\n        const response = await fetch(notificationProxyUrl, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({\n            fid: context.user.fid,\n            notification: {\n              notificationId: crypto.randomUUID(),\n              notificationDetails: context.client?.notificationDetails ?? null,\n              title,\n              body,\n            },\n          }),\n        });\n\n        if (!response.ok) {\n          throw new Error(`HTTP error, status: ${response.status}`);\n        }\n\n        return true;\n      } catch (error) {\n        console.error('Error sending notification:', error);\n        return false;\n      }\n    },\n    [context, notificationProxyUrl],\n  );\n}\n"],"names":["useNotification","context","notificationProxyUrl","useMiniKit","useCallback","title","body","response","fetch","method","headers","JSON","stringify","fid","user","notification","notificationId","crypto","randomUUID","notificationDetails","client","ok","Error","status","error"],"mappings":";;AAcO,SAASA,kBAAkB;AAC1B,QAAA;AAAA,IAAEC;AAAAA,IAASC;AAAAA,MAAyBC,WAAW;AAErD,SAAOC,YACL,OAAO;AAAA,IAAEC;AAAAA,IAAOC;AAAAA,EAAAA,MAA4C;;AAC1D,QAAI,CAACL,SAAS;AACL,aAAA;AAAA,IAAA;AAGL,QAAA;AACIM,YAAAA,WAAW,MAAMC,MAAMN,sBAAsB;AAAA,QACjDO,QAAQ;AAAA,QACRC,SAAS;AAAA,UACP,gBAAgB;AAAA,QAClB;AAAA,QACAJ,MAAMK,KAAKC,UAAU;AAAA,UACnBC,KAAKZ,QAAQa,KAAKD;AAAAA,UAClBE,cAAc;AAAA,YACZC,gBAAgBC,OAAOC,WAAW;AAAA,YAClCC,uBAAqBlB,aAAQmB,WAARnB,mBAAgBkB,wBAAuB;AAAA,YAC5Dd;AAAAA,YACAC;AAAAA,UAAAA;AAAAA,QAEH,CAAA;AAAA,MAAA,CACF;AAEG,UAAA,CAACC,SAASc,IAAI;AAChB,cAAM,IAAIC,MAAM,uBAAuBf,SAASgB,MAAM,EAAE;AAAA,MAAA;AAGnD,aAAA;AAAA,aACAC,OAAO;AACNA,cAAAA,MAAM,+BAA+BA,KAAK;AAC3C,aAAA;AAAA,IAAA;AAAA,EACT,GAEF,CAACvB,SAASC,oBAAoB,CAChC;AACF;"}