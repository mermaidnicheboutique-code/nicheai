{"version":3,"file":"useMiniKit.js","sources":["../../../src/minikit/hooks/useMiniKit.ts"],"sourcesContent":["'use client';\nimport { MiniKitContext } from '@/minikit/MiniKitProvider';\nimport sdk from '@farcaster/miniapp-sdk';\nimport { useContext, useState } from 'react';\nimport type { MiniKitContextType } from '../types';\nimport type { ReadyOptions } from '@farcaster/miniapp-sdk';\n\ntype SetMiniAppReady = (\n  readyOptions?: Partial<ReadyOptions>,\n) => Promise<MiniKitContextType>;\n\ntype UseMiniKitReturn = {\n  /** The MiniKit context. */\n  context: MiniKitContextType['context'];\n  /** A boolean indicating if the mini app has been set as ready. */\n  isMiniAppReady: boolean;\n  /** A function to set the mini app as ready, which will hide the splash screen. */\n  setMiniAppReady: SetMiniAppReady;\n  /** A function to update the client context. */\n  updateClientContext: MiniKitContextType['updateClientContext'];\n  /** The notification proxy URL. */\n  notificationProxyUrl: MiniKitContextType['notificationProxyUrl'];\n  /** @deprecated Use `setMiniAppReady` instead. This property will be removed in a future version. */\n  setFrameReady: SetMiniAppReady;\n  /** @deprecated Use `isMiniAppReady` instead. This property will be removed in a future version. */\n  isFrameReady: boolean;\n};\n\n/**\n * Allows for the use of the MiniKit context.\n *\n * @returns The MiniKitContext object.\n */\nexport const useMiniKit = (): UseMiniKitReturn => {\n  const [isMiniAppReady, setIsMiniAppReady] = useState(false);\n  const context = useContext(MiniKitContext);\n\n  if (!context.enabled) {\n    throw new Error(\n      'MiniKit is not enabled. Please check your OnchainKitProvider.',\n    );\n  }\n\n  const setMiniAppReady = async (readyOptions: Partial<ReadyOptions> = {}) => {\n    sdk.actions.ready(readyOptions);\n    setIsMiniAppReady(true);\n    return context;\n  };\n\n  return {\n    setMiniAppReady,\n    isMiniAppReady,\n    context: context.context,\n    updateClientContext: context.updateClientContext,\n    notificationProxyUrl: context.notificationProxyUrl,\n    setFrameReady: setMiniAppReady,\n    isFrameReady: isMiniAppReady,\n  };\n};\n"],"names":["useMiniKit","isMiniAppReady","setIsMiniAppReady","useState","context","useContext","MiniKitContext","enabled","Error","setMiniAppReady","readyOptions","actions","ready","updateClientContext","notificationProxyUrl","setFrameReady","isFrameReady"],"mappings":";;;AAiCO,MAAMA,aAAaA,MAAwB;AAChD,QAAM,CAACC,gBAAgBC,iBAAiB,IAAIC,SAAS,KAAK;AACpDC,QAAAA,UAAUC,WAAWC,cAAc;AAErC,MAAA,CAACF,QAAQG,SAAS;AACd,UAAA,IAAIC,MACR,+DACF;AAAA,EAAA;AAGF,QAAMC,kBAAkB,OAAOC,eAAsC,OAAO;AACtEC,QAAAA,QAAQC,MAAMF,YAAY;AAC9BR,sBAAkB,IAAI;AACfE,WAAAA;AAAAA,EACT;AAEO,SAAA;AAAA,IACLK;AAAAA,IACAR;AAAAA,IACAG,SAASA,QAAQA;AAAAA,IACjBS,qBAAqBT,QAAQS;AAAAA,IAC7BC,sBAAsBV,QAAQU;AAAAA,IAC9BC,eAAeN;AAAAA,IACfO,cAAcf;AAAAA,EAChB;AACF;"}