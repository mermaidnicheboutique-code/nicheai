{"version":3,"file":"useCallsStatus.js","sources":["../../../src/transaction/hooks/useCallsStatus.ts"],"sourcesContent":["import { useCallsStatus as useCallsStatusWagmi } from 'wagmi/experimental';\nimport type { UseCallsStatusParams } from '../types';\nimport { normalizeStatus } from '@/internal/utils/normalizeWagmi';\n\nexport function useCallsStatus({\n  setLifecycleStatus,\n  transactionId,\n}: UseCallsStatusParams) {\n  try {\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    const { data } = useCallsStatusWagmi({\n      id: transactionId,\n      query: {\n        refetchInterval: (query) => {\n          return normalizeStatus(query.state.data?.status) === 'success'\n            ? false\n            : 1000;\n        },\n        enabled: !!transactionId,\n      },\n    });\n    const transactionHash = data?.receipts?.[0]?.transactionHash;\n    return { status: data?.status, transactionHash };\n  } catch (err) {\n    setLifecycleStatus({\n      statusName: 'error',\n      statusData: {\n        code: 'TmUCSh01',\n        error: JSON.stringify(err),\n        message: '',\n      },\n    });\n    return { status: 'error', transactionHash: undefined };\n  }\n}\n"],"names":["useCallsStatus","setLifecycleStatus","transactionId","data","useCallsStatusWagmi","id","query","refetchInterval","normalizeStatus","state","status","enabled","transactionHash","receipts","err","statusName","statusData","code","error","JSON","stringify","message","undefined"],"mappings":";;AAIO,SAASA,eAAe;AAAA,EAC7BC;AAAAA,EACAC;AACoB,GAAG;;AACnB,MAAA;AAEI,UAAA;AAAA,MAAEC;AAAAA,QAASC,iBAAoB;AAAA,MACnCC,IAAIH;AAAAA,MACJI,OAAO;AAAA,QACLC,iBAAkBD,CAAU,UAAA;;AAC1B,iBAAOE,iBAAgBF,MAAAA,MAAMG,MAAMN,SAAZG,gBAAAA,IAAkBI,MAAM,MAAM,YACjD,QACA;AAAA,QACN;AAAA,QACAC,SAAS,CAAC,CAACT;AAAAA,MAAAA;AAAAA,IACb,CACD;AACD,UAAMU,mBAAkBT,wCAAMU,aAANV,mBAAiB,OAAjBA,mBAAqBS;AACtC,WAAA;AAAA,MAAEF,QAAQP,6BAAMO;AAAAA,MAAQE;AAAAA,IAAgB;AAAA,WACxCE,KAAK;AACO,uBAAA;AAAA,MACjBC,YAAY;AAAA,MACZC,YAAY;AAAA,QACVC,MAAM;AAAA,QACNC,OAAOC,KAAKC,UAAUN,GAAG;AAAA,QACzBO,SAAS;AAAA,MAAA;AAAA,IACX,CACD;AACM,WAAA;AAAA,MAAEX,QAAQ;AAAA,MAASE,iBAAiBU;AAAAA,IAAU;AAAA,EAAA;AAEzD;"}