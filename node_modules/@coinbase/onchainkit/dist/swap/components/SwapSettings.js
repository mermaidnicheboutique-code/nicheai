import { jsx, jsxs, Fragment } from "react/jsx-runtime";
import { Popover } from "../../internal/components/Popover.js";
import { useBreakpoints } from "../../internal/hooks/useBreakpoints.js";
import { useIcon } from "../../internal/hooks/useIcon.js";
import { cn, pressable, text } from "../../styles/theme.js";
import { useState, useRef, useCallback } from "react";
import { SwapSettingsSlippageDescription } from "./SwapSettingsSlippageDescription.js";
import { SwapSettingsSlippageInput } from "./SwapSettingsSlippageInput.js";
import { SwapSettingsSlippageLayout } from "./SwapSettingsSlippageLayout.js";
import { SwapSettingsSlippageLayoutBottomSheet } from "./SwapSettingsSlippageLayoutBottomSheet.js";
import { SwapSettingsSlippageTitle } from "./SwapSettingsSlippageTitle.js";
import { Sheet } from "../../internal/components/Sheet.js";
const DEFAULT_CHILDREN = /* @__PURE__ */ jsxs(Fragment, { children: [
  /* @__PURE__ */ jsx(SwapSettingsSlippageTitle, { children: "Max. slippage" }),
  /* @__PURE__ */ jsx(SwapSettingsSlippageDescription, { children: "Your swap will revert if the prices change by more than the selected percentage." }),
  /* @__PURE__ */ jsx(SwapSettingsSlippageInput, {})
] });
function SwapSettings({
  children = DEFAULT_CHILDREN,
  className,
  icon = "swapSettings",
  text: buttonText = ""
}) {
  const breakpoint = useBreakpoints();
  const [isOpen, setIsOpen] = useState(false);
  const dropdownRef = useRef(null);
  const triggerRef = useRef(null);
  const handleToggle = useCallback((e) => {
    e.stopPropagation();
    setIsOpen((prev) => !prev);
  }, []);
  const handleClose = useCallback(() => {
    setIsOpen(false);
  }, []);
  const iconSvg = useIcon({
    icon
  });
  const trigger = /* @__PURE__ */ jsx("button", { ref: triggerRef, type: "button", "aria-label": "Toggle swap settings", className: cn(pressable.default, "ock:rounded-full ock:p-2 ock:opacity-50 ock:transition-opacity ock:hover:opacity-100"), onClick: handleToggle, children: /* @__PURE__ */ jsx("div", { className: "ock:h-[1.125rem] ock:w-[1.125rem]", children: iconSvg }) });
  return /* @__PURE__ */ jsxs("div", { className: cn("ock:flex ock:w-auto ock:items-center ock:justify-end ock:space-x-1 ock:pb-4", className), "data-testid": "ockSwapSettings_Settings", children: [
    buttonText && /* @__PURE__ */ jsx("span", { className: cn(text.body), children: buttonText }),
    /* @__PURE__ */ jsx("div", { className: cn("ock:relative", isOpen && "ock:group"), ref: dropdownRef, children: breakpoint === "sm" ? /* @__PURE__ */ jsxs(Fragment, { children: [
      trigger,
      /* @__PURE__ */ jsx(Sheet, { isOpen, onClose: handleClose, side: "bottom", title: "Swap settings", description: "Swap settings", children: /* @__PURE__ */ jsx("div", { className: cn("ock:bg-ock-background-inverse", "ock:shadow-ock-default", "ock:fixed ock:inset-x-0 ock:z-50 ock:transition-[bottom] ock:duration-300 ock:ease-in-out", isOpen ? "ock:bottom-0" : "ock:-bottom-[12.875rem]", "ock:h-[12.875rem] ock:rounded-t-lg", className), "data-testid": "ockSwapSettingsSlippageLayoutBottomSheet_container", children: /* @__PURE__ */ jsx(SwapSettingsSlippageLayoutBottomSheet, { className, children }) }) })
    ] }) : /* @__PURE__ */ jsx(Popover, { open: isOpen, onOpenChange: setIsOpen, side: "bottom", align: "end", trigger, children: /* @__PURE__ */ jsx("div", { className: cn("ock:rounded-ock-default", "ock:bg-ock-background", "ock:shadow-ock-default", "ock:absolute ock:right-0 ock:z-10 ock:mt-1 ock:w-[21.75rem] ock:rounded-lg"), "data-testid": "ockSwapSettingsDropdown", children: /* @__PURE__ */ jsx(SwapSettingsSlippageLayout, { children }) }) }) })
  ] });
}
export {
  SwapSettings
};
//# sourceMappingURL=SwapSettings.js.map
