{"version":3,"file":"SwapSettings.js","sources":["../../../src/swap/components/SwapSettings.tsx"],"sourcesContent":["import { Popover } from '@/internal/components/Popover';\nimport { useBreakpoints } from '@/internal/hooks/useBreakpoints';\nimport { useIcon } from '@/internal/hooks/useIcon';\nimport { cn, pressable, text } from '@/styles/theme';\nimport { useCallback, useRef, useState } from 'react';\nimport type { SwapSettingsProps } from '../types';\nimport { SwapSettingsSlippageDescription } from './SwapSettingsSlippageDescription';\nimport { SwapSettingsSlippageInput } from './SwapSettingsSlippageInput';\nimport { SwapSettingsSlippageLayout } from './SwapSettingsSlippageLayout';\nimport { SwapSettingsSlippageLayoutBottomSheet } from './SwapSettingsSlippageLayoutBottomSheet';\nimport { SwapSettingsSlippageTitle } from './SwapSettingsSlippageTitle';\nimport { Sheet } from '@/internal/components/Sheet';\n\nconst DEFAULT_CHILDREN = (\n  <>\n    <SwapSettingsSlippageTitle>Max. slippage</SwapSettingsSlippageTitle>\n    <SwapSettingsSlippageDescription>\n      Your swap will revert if the prices change by more than the selected\n      percentage.\n    </SwapSettingsSlippageDescription>\n    <SwapSettingsSlippageInput />\n  </>\n);\n\nexport function SwapSettings({\n  children = DEFAULT_CHILDREN,\n  className,\n  icon = 'swapSettings',\n  text: buttonText = '',\n}: SwapSettingsProps) {\n  const breakpoint = useBreakpoints();\n  const [isOpen, setIsOpen] = useState(false);\n  const dropdownRef = useRef<HTMLDivElement>(null);\n  const triggerRef = useRef<HTMLButtonElement>(null);\n\n  const handleToggle = useCallback((e: React.MouseEvent) => {\n    e.stopPropagation();\n    setIsOpen((prev) => !prev);\n  }, []);\n\n  const handleClose = useCallback(() => {\n    setIsOpen(false);\n  }, []);\n\n  const iconSvg = useIcon({ icon });\n\n  const trigger = (\n    <button\n      ref={triggerRef}\n      type=\"button\"\n      aria-label=\"Toggle swap settings\"\n      className={cn(\n        pressable.default,\n        'rounded-full p-2 opacity-50 transition-opacity hover:opacity-100',\n      )}\n      onClick={handleToggle}\n    >\n      <div className=\"h-[1.125rem] w-[1.125rem]\">{iconSvg}</div>\n    </button>\n  );\n\n  return (\n    <div\n      className={cn(\n        'flex w-auto items-center justify-end space-x-1 pb-4',\n        className,\n      )}\n      data-testid=\"ockSwapSettings_Settings\"\n    >\n      {buttonText && <span className={cn(text.body)}>{buttonText}</span>}\n      <div className={cn('relative', isOpen && 'group')} ref={dropdownRef}>\n        {breakpoint === 'sm' ? (\n          <>\n            {trigger}\n            <Sheet\n              isOpen={isOpen}\n              onClose={handleClose}\n              side=\"bottom\"\n              title=\"Swap settings\"\n              description=\"Swap settings\"\n            >\n              <div\n                className={cn(\n                  'bg-ock-background-inverse',\n                  'shadow-ock-default',\n                  'fixed inset-x-0 z-50 transition-[bottom] duration-300 ease-in-out',\n                  isOpen ? 'bottom-0' : '-bottom-[12.875rem]',\n                  'h-[12.875rem] rounded-t-lg',\n                  className,\n                )}\n                data-testid=\"ockSwapSettingsSlippageLayoutBottomSheet_container\"\n              >\n                <SwapSettingsSlippageLayoutBottomSheet className={className}>\n                  {children}\n                </SwapSettingsSlippageLayoutBottomSheet>\n              </div>\n            </Sheet>\n          </>\n        ) : (\n          <Popover\n            open={isOpen}\n            onOpenChange={setIsOpen}\n            side=\"bottom\"\n            align=\"end\"\n            trigger={trigger}\n          >\n            <div\n              className={cn(\n                'rounded-ock-default',\n                'bg-ock-background',\n                'shadow-ock-default',\n                'absolute right-0 z-10 mt-1 w-[21.75rem] rounded-lg',\n              )}\n              data-testid=\"ockSwapSettingsDropdown\"\n            >\n              <SwapSettingsSlippageLayout>\n                {children}\n              </SwapSettingsSlippageLayout>\n            </div>\n          </Popover>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":["DEFAULT_CHILDREN","SwapSettings","children","className","icon","text","buttonText","breakpoint","useBreakpoints","isOpen","setIsOpen","useState","dropdownRef","useRef","triggerRef","handleToggle","useCallback","e","stopPropagation","prev","handleClose","iconSvg","useIcon","trigger","cn","pressable","default","body"],"mappings":";;;;;;;;;;;;AAaA,MAAMA,mBAEF,qBAAA,UAAA,EAAA,UAAA;AAAA,EAAA,oBAAC,6BAA0B,UAAa,gBAAA,CAAA;AAAA,EACxC,oBAAC,mCAA+B,UAGhC,mFAAA,CAAA;AAAA,sBACC,2BAAyB,CAAA,CAAA;AAAA,GAC5B;AAGK,SAASC,aAAa;AAAA,EAC3BC,WAAWF;AAAAA,EACXG;AAAAA,EACAC,OAAO;AAAA,EACPC,MAAMC,aAAa;AACF,GAAG;AACpB,QAAMC,aAAaC,eAAe;AAClC,QAAM,CAACC,QAAQC,SAAS,IAAIC,SAAS,KAAK;AACpCC,QAAAA,cAAcC,OAAuB,IAAI;AACzCC,QAAAA,aAAaD,OAA0B,IAAI;AAE3CE,QAAAA,eAAeC,YAAY,CAACC,MAAwB;AACxDA,MAAEC,gBAAgB;AACPC,cAAAA,CAAAA,SAAS,CAACA,IAAI;AAAA,EAC3B,GAAG,EAAE;AAECC,QAAAA,cAAcJ,YAAY,MAAM;AACpCN,cAAU,KAAK;AAAA,EACjB,GAAG,EAAE;AAEL,QAAMW,UAAUC,QAAQ;AAAA,IAAElB;AAAAA,EAAAA,CAAM;AAE1BmB,QAAAA,8BACH,UACC,EAAA,KAAKT,YACL,MAAK,UACL,cAAW,wBACX,WAAWU,GACTC,UAAUC,SAEZ,sFAAA,GACA,SAASX,cAET,8BAAC,OAAI,EAAA,WAAU,qCAA6BM,UAAAA,QAAAA,CAAQ,EACtD,CAAA;AAIA,SAAA,qBAAC,SACC,WAAWG,GAETrB,+EAAAA,SACF,GACA,eAAY,4BAEXG,UAAAA;AAAAA,IAAAA,kCAAe,QAAK,EAAA,WAAWkB,GAAGnB,KAAKsB,IAAI,GAAIrB,UAAW,YAAA;AAAA,IAC1D,oBAAA,OAAA,EAAI,WAAWkB,GAAE,gBAAaf,UAAM,WAAW,GAAG,KAAKG,aACrDL,UAAe,eAAA,OAEXgB,qBAAAA,UAAAA,EAAAA,UAAAA;AAAAA,MAAAA;AAAAA,MACA,oBAAA,OAAA,EACC,QACA,SAASH,aACT,MAAK,UACL,OAAM,iBACN,aAAY,iBAEZ,UAAA,oBAAC,SACC,WAAWI,GAAE,iCAAA,0BAAA,6FAIXf,SAAM,iBAAA,iEAENN,SACF,GACA,eAAY,sDAEZ,UAAC,oBAAA,uCAAA,EAAsC,WACpCD,SAAAA,CACH,GACF,EACF,CAAA;AAAA,IAAA,EACF,CAAA,IAEA,oBAAC,SACC,EAAA,MAAMO,QACN,cAAcC,WACd,MAAK,UACL,OAAM,OACN,SAEA,UAAC,oBAAA,OAAA,EACC,WAAWc,GAAE,2BAAA,yBAAA,0BAAA,4EAKb,GACA,eAAY,2BAEZ,UAAA,oBAAC,4BACEtB,EAAAA,SAAAA,CACH,EACF,CAAA,EAAA,CACF,EAEJ,CAAA;AAAA,EAAA,GACF;AAEJ;"}