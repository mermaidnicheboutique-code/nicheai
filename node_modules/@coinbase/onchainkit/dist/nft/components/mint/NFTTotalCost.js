import { jsxs, jsx } from "react/jsx-runtime";
import { infoSvg } from "../../../internal/svg/infoSvg.js";
import { multiplyFloats } from "../../../internal/utils/multiplyFloats.js";
import { useNFTContext } from "../NFTProvider.js";
import { cn, text } from "../../../styles/theme.js";
import { formatAmount } from "../../../token/utils/formatAmount.js";
import { useState, useCallback, useMemo } from "react";
function NFTTotalCost({
  className,
  label = "Total cost"
}) {
  const [isOverlayVisible, setIsOverlayVisible] = useState(false);
  const {
    price,
    mintFee,
    quantity
  } = useNFTContext();
  const toggleOverlay = useCallback(() => {
    setIsOverlayVisible((prev) => !prev);
  }, []);
  const showOverlay = useCallback(() => {
    setIsOverlayVisible(true);
  }, []);
  const hideOverlay = useCallback(() => {
    setIsOverlayVisible(false);
  }, []);
  const overlay = useMemo(() => {
    if ((price == null ? void 0 : price.amount) === void 0 || (price == null ? void 0 : price.amountUSD) === void 0 || (mintFee == null ? void 0 : mintFee.amount) === void 0 || mintFee.amountUSD === void 0) {
      return null;
    }
    return /* @__PURE__ */ jsxs("div", { className: cn("ock:bg-ock-background", "ock:rounded-ock-default", "ock:border-ock-background-active", "ock:absolute ock:z-10 ock:w-full ock:border"), children: [
      /* @__PURE__ */ jsxs("div", { className: cn(text.label2, "ock:flex ock:items-center ock:justify-between ock:px-4 ock:py-2"), children: [
        /* @__PURE__ */ jsx("div", { children: "NFT cost" }),
        /* @__PURE__ */ jsxs("div", { children: [
          "$",
          formatAmount(`${multiplyFloats(Number(price.amountUSD), quantity)}`, {
            minimumFractionDigits: 2,
            maximumFractionDigits: 2
          })
        ] })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: cn("ock:flex ock:items-center ock:justify-between ock:px-4 ock:py-2", text.label2), children: [
        /* @__PURE__ */ jsx("div", { children: "Mint fee" }),
        /* @__PURE__ */ jsxs("div", { children: [
          "$",
          formatAmount(`${multiplyFloats(Number(mintFee.amountUSD), quantity)}`, {
            minimumFractionDigits: 2,
            maximumFractionDigits: 2
          })
        ] })
      ] })
    ] });
  }, [mintFee, price, quantity]);
  if (!(price == null ? void 0 : price.amount) || !(price == null ? void 0 : price.currency) || !(price == null ? void 0 : price.amountUSD) || !(mintFee == null ? void 0 : mintFee.amount) || !mintFee.amountUSD) {
    return null;
  }
  return /* @__PURE__ */ jsxs("div", { className: "ock:relative", children: [
    /* @__PURE__ */ jsxs("div", { className: cn(text.label2, "ock:flex ock:items-center ock:justify-between", className), children: [
      /* @__PURE__ */ jsx("div", { children: label }),
      /* @__PURE__ */ jsxs("div", { className: "ock:flex ock:items-center ock:gap-2", children: [
        /* @__PURE__ */ jsxs("div", { children: [
          "$",
          formatAmount(`${multiplyFloats(Number(price.amountUSD), quantity)}`, {
            minimumFractionDigits: 2,
            maximumFractionDigits: 2
          })
        ] }),
        overlay && /* @__PURE__ */ jsx("button", { type: "button", "data-testid": "ockNFTTotalCostInfo", className: "ock:h-2.5 ock:w-2.5 ock:cursor-pointer ock:object-cover", onClick: toggleOverlay, onMouseEnter: showOverlay, onMouseLeave: hideOverlay, children: infoSvg })
      ] })
    ] }),
    isOverlayVisible && overlay
  ] });
}
export {
  NFTTotalCost
};
//# sourceMappingURL=NFTTotalCost.js.map
