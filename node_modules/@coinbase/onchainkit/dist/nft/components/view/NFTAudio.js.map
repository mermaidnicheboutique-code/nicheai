{"version":3,"file":"NFTAudio.js","sources":["../../../../src/nft/components/view/NFTAudio.tsx"],"sourcesContent":["import type { NFTError } from '@/api/types';\nimport { useNFTContext } from '@/nft/components/NFTProvider';\nimport {\n  type MouseEvent,\n  useCallback,\n  useEffect,\n  useRef,\n  useState,\n} from 'react';\nimport { cn } from '../../../styles/theme';\n\ntype NFTAudioProps = {\n  className?: string;\n  onLoading?: (mediaUrl: string) => void;\n  onLoaded?: () => void;\n  onError?: (error: NFTError) => void;\n};\n\nexport function NFTAudio({\n  className,\n  onLoading,\n  onLoaded,\n  onError,\n}: NFTAudioProps) {\n  const { animationUrl } = useNFTContext();\n  const audioRef = useRef<HTMLAudioElement>(null);\n  const [isPlaying, setIsPlaying] = useState(false);\n\n  useEffect(() => {\n    function onEnded() {\n      setIsPlaying(false);\n    }\n\n    if (animationUrl && audioRef?.current) {\n      audioRef.current.onloadstart = () => {\n        onLoading?.(animationUrl);\n      };\n\n      audioRef.current.onloadeddata = () => {\n        onLoaded?.();\n      };\n\n      audioRef.current.addEventListener('ended', onEnded);\n\n      audioRef.current.onerror = (error: string | Event) => {\n        onError?.({\n          error: typeof error === 'string' ? error : error.type,\n          code: 'NmNAc01', // NFT module NFTAudio component 01 error\n          message: 'Error loading audio',\n        });\n      };\n    }\n  }, [animationUrl, onLoading, onLoaded, onError]);\n\n  const handlePlayPause = useCallback(\n    (event: MouseEvent) => {\n      event.stopPropagation();\n      if (isPlaying) {\n        audioRef.current?.pause();\n        setIsPlaying(false);\n      } else {\n        audioRef.current?.play();\n        setIsPlaying(true);\n      }\n    },\n    [isPlaying],\n  );\n\n  if (!animationUrl) {\n    return null;\n  }\n\n  return (\n    <div className={cn('max-h-350 w-350 max-w-350', className)}>\n      <button\n        type=\"button\"\n        className={cn(\n          'bg-ock-background-reverse',\n          'ml-6 inline-flex h-[42px] w-[42px] cursor-pointer items-center justify-center rounded-full',\n        )}\n        onClick={handlePlayPause}\n      >\n        <div\n          className={cn(\n            'ml-px box-border h-[18px] transition-all ease-[100ms] will-change-[border-width]',\n            'border-ock-background-reverse border-l-ock-background',\n            {\n              'border-[length:0_0_0_16px] border-double': isPlaying,\n              '-mr-px border-[length:9px_0_9px_16px] border-solid': !isPlaying,\n            },\n          )}\n        />\n      </button>\n      <audio\n        ref={audioRef}\n        data-testid=\"ockNFTAudio\"\n        autoPlay={false}\n        controls={false}\n        src={animationUrl}\n      >\n        <track kind=\"captions\" />\n      </audio>\n    </div>\n  );\n}\n"],"names":["NFTAudio","className","onLoading","onLoaded","onError","animationUrl","useNFTContext","audioRef","useRef","isPlaying","setIsPlaying","useState","useEffect","onEnded","current","onloadstart","onloadeddata","addEventListener","onerror","error","type","code","message","handlePlayPause","useCallback","event","stopPropagation","pause","play","cn"],"mappings":";;;;AAkBO,SAASA,SAAS;AAAA,EACvBC;AAAAA,EACAC;AAAAA,EACAC;AAAAA,EACAC;AACa,GAAG;AACV,QAAA;AAAA,IAAEC;AAAAA,MAAiBC,cAAc;AACjCC,QAAAA,WAAWC,OAAyB,IAAI;AAC9C,QAAM,CAACC,WAAWC,YAAY,IAAIC,SAAS,KAAK;AAEhDC,YAAU,MAAM;AACd,aAASC,UAAU;AACjBH,mBAAa,KAAK;AAAA,IAAA;AAGhBL,QAAAA,iBAAgBE,qCAAUO,UAAS;AAC5BA,eAAAA,QAAQC,cAAc,MAAM;AACnCb,+CAAYG;AAAAA,MACd;AAESS,eAAAA,QAAQE,eAAe,MAAM;AACzB;AAAA,MACb;AAESF,eAAAA,QAAQG,iBAAiB,SAASJ,OAAO;AAEzCC,eAAAA,QAAQI,UAAU,CAACC,UAA0B;AAC1C,2CAAA;AAAA,UACRA,OAAO,OAAOA,UAAU,WAAWA,QAAQA,MAAMC;AAAAA,UACjDC,MAAM;AAAA;AAAA,UACNC,SAAS;AAAA,QAAA;AAAA,MAEb;AAAA,IAAA;AAAA,KAED,CAACjB,cAAcH,WAAWC,UAAUC,OAAO,CAAC;AAEzCmB,QAAAA,kBAAkBC,YACtB,CAACC,UAAsB;;AACrBA,UAAMC,gBAAgB;AACtB,QAAIjB,WAAW;AACbF,qBAASO,YAATP,mBAAkBoB;AAClBjB,mBAAa,KAAK;AAAA,IAAA,OACb;AACLH,qBAASO,YAATP,mBAAkBqB;AAClBlB,mBAAa,IAAI;AAAA,IAAA;AAAA,EACnB,GAEF,CAACD,SAAS,CACZ;AAEA,MAAI,CAACJ,cAAc;AACV,WAAA;AAAA,EAAA;AAGT,8BACG,OAAI,EAAA,WAAWwB,GAAE,yCAA8B5B,SAAS,GACvD,UAAA;AAAA,IAAA,oBAAC,UACC,EAAA,MAAK,UACL,WAAW4B,GAAE,iCAAA,4HAGb,GACA,SAASN,iBAET,UAAC,oBAAA,OAAA,EACC,WAAWM,GAGT,4GAAA,iEAAA;AAAA,MACE,4CAA4CpB;AAAAA,MAC5C,sDAAsD,CAACA;AAAAA,IAAAA,CAE3D,GAAE,EAEN,CAAA;AAAA,wBACC,SACC,EAAA,KAAKF,UACL,eAAY,eACZ,UAAU,OACV,UAAU,OACV,KAAKF,cAEL,UAAA,oBAAC,SAAM,EAAA,MAAK,YAAU,EACxB,CAAA;AAAA,EAAA,GACF;AAEJ;"}