{"version":3,"file":"NFTVideo.js","sources":["../../../../src/nft/components/view/NFTVideo.tsx"],"sourcesContent":["import type { NFTError } from '@/api/types';\nimport { useNFTContext } from '@/nft/components/NFTProvider';\nimport { useCallback, useEffect, useRef } from 'react';\nimport { defaultNFTSvg } from '../../../internal/svg/defaultNFTSvg';\nimport { cn } from '../../../styles/theme';\n\ntype NFTVideoProps = {\n  className?: string;\n  square?: boolean;\n  onLoading?: (mediaUrl: string) => void;\n  onLoaded?: () => void;\n  onError?: (error: NFTError) => void;\n};\n\nexport function NFTVideo({\n  className,\n  square = true,\n  onLoading,\n  onLoaded,\n  onError,\n}: NFTVideoProps) {\n  const { animationUrl, imageUrl } = useNFTContext();\n  const videoRef = useRef<HTMLVideoElement>(null);\n\n  useEffect(() => {\n    if (animationUrl && videoRef?.current) {\n      videoRef.current.onloadstart = () => {\n        onLoading?.(animationUrl);\n      };\n\n      videoRef.current.onloadeddata = () => {\n        onLoaded?.();\n      };\n\n      videoRef.current.onerror = (error: string | Event) => {\n        onError?.({\n          error: typeof error === 'string' ? error : error.type,\n          code: 'NmNVc01', // NFT module NFTVideo component 01 error\n          message: 'Error loading video',\n        });\n      };\n    }\n  }, [animationUrl, onLoading, onLoaded, onError]);\n\n  const handleClick = useCallback((e: React.MouseEvent<HTMLVideoElement>) => {\n    e.stopPropagation();\n  }, []);\n\n  if (!animationUrl) {\n    return <div className=\"max-h-350 w-350 max-w-350\">{defaultNFTSvg}</div>;\n  }\n\n  return (\n    <div\n      className={cn(\n        'grid w-full',\n        '[&>*]:col-start-1 [&>*]:col-end-1 [&>*]:row-start-1 [&>*]:row-end-1',\n        { 'content-center justify-center': !square },\n        { 'aspect-square': square },\n        className,\n      )}\n    >\n      <video\n        ref={videoRef}\n        data-testid=\"ockNFTVideo\"\n        onClick={handleClick}\n        className={cn({ 'h-full w-full object-cover aspect-square': square })}\n        poster={imageUrl}\n        controls={true}\n        loop={true}\n        src={animationUrl}\n        muted={true}\n        autoPlay={true}\n        playsInline={true}\n        draggable={false}\n        width=\"100%\"\n      />\n    </div>\n  );\n}\n"],"names":["NFTVideo","className","square","onLoading","onLoaded","onError","animationUrl","imageUrl","useNFTContext","videoRef","useRef","useEffect","current","onloadstart","onloadeddata","onerror","error","type","code","message","handleClick","useCallback","e","stopPropagation","defaultNFTSvg","cn"],"mappings":";;;;;AAcO,SAASA,SAAS;AAAA,EACvBC;AAAAA,EACAC,SAAS;AAAA,EACTC;AAAAA,EACAC;AAAAA,EACAC;AACa,GAAG;AACV,QAAA;AAAA,IAAEC;AAAAA,IAAcC;AAAAA,MAAaC,cAAc;AAC3CC,QAAAA,WAAWC,OAAyB,IAAI;AAE9CC,YAAU,MAAM;AACVL,QAAAA,iBAAgBG,qCAAUG,UAAS;AAC5BA,eAAAA,QAAQC,cAAc,MAAM;AACnCV,+CAAYG;AAAAA,MACd;AAESM,eAAAA,QAAQE,eAAe,MAAM;AACzB;AAAA,MACb;AAESF,eAAAA,QAAQG,UAAU,CAACC,UAA0B;AAC1C,2CAAA;AAAA,UACRA,OAAO,OAAOA,UAAU,WAAWA,QAAQA,MAAMC;AAAAA,UACjDC,MAAM;AAAA;AAAA,UACNC,SAAS;AAAA,QAAA;AAAA,MAEb;AAAA,IAAA;AAAA,KAED,CAACb,cAAcH,WAAWC,UAAUC,OAAO,CAAC;AAEzCe,QAAAA,cAAcC,YAAY,CAACC,MAA0C;AACzEA,MAAEC,gBAAgB;AAAA,EACpB,GAAG,EAAE;AAEL,MAAI,CAACjB,cAAc;AACjB,WAAQ,oBAAA,OAAA,EAAI,WAAU,yCAA6BkB,UAAc,eAAA;AAAA,EAAA;AAGnE,SACG,oBAAA,OAAA,EACC,WAAWC,GAGT,uBAAA,uFAAA;AAAA,IAAE,iCAAiC,CAACvB;AAAAA,EAAAA,GACpC;AAAA,IAAE,iBAAiBA;AAAAA,EACnBD,GAAAA,SACF,GAEA,UAAA,oBAAC,SACC,EAAA,KAAKQ,UACL,eAAY,eACZ,SAASW,aACT,WAAWK,GAAG;AAAA,IAAE,4CAA4CvB;AAAAA,EAAAA,CAAQ,GACpE,QAAQK,UACR,UAAU,MACV,MAAM,MACN,KAAKD,cACL,OAAO,MACP,UAAU,MACV,aAAa,MACb,WAAW,OACX,OAAM,OAAM,CAAA,GAEhB;AAEJ;"}