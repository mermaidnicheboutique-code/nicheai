{"version":3,"file":"useMintData.js","sources":["../../../src/nft/hooks/useMintData.ts"],"sourcesContent":["import type { NFTError } from '@/api/types';\nimport { RequestContext } from '@/core/network/constants';\nimport { convertIpfsToHttps } from '@/nft/utils/ipfs';\nimport { useEffect, useState } from 'react';\nimport { useAccount } from 'wagmi';\nimport { useNFTLifecycleContext } from '../components/NFTLifecycleProvider';\nimport type { NFTData } from '../types';\nimport { useMintDetails } from './useMintDetails';\n\nexport function useMintData(\n  contractAddress: `0x${string}`,\n  tokenId?: string,\n): NFTData | NFTError {\n  const { updateLifecycleStatus } = useNFTLifecycleContext();\n  const [error, setError] = useState<NFTError | null>(null);\n  const { address } = useAccount();\n\n  useEffect(() => {\n    if (error) {\n      updateLifecycleStatus({\n        statusName: 'error',\n        statusData: error,\n      });\n    }\n  }, [error, updateLifecycleStatus]);\n\n  const { error: mintError, data: mintData } = useMintDetails(\n    {\n      contractAddress,\n      takerAddress: address,\n      ...(tokenId ? { tokenId } : {}),\n    },\n    RequestContext.NFT,\n  );\n\n  if (mintError && !error) {\n    setError({\n      code: 'NmMD01',\n      message: mintError.message,\n      error: 'Error fetching mint data',\n    });\n    return mintError;\n  }\n\n  return {\n    name: mintData?.name,\n    description: mintData?.description,\n    imageUrl: convertIpfsToHttps(mintData?.imageUrl),\n    animationUrl: convertIpfsToHttps(mintData?.animationUrl),\n    mimeType: mintData?.mimeType,\n    contractType: mintData?.contractType,\n    maxMintsPerWallet:\n      mintData?.maxMintsPerWallet === 0\n        ? undefined\n        : mintData?.maxMintsPerWallet,\n    price: mintData?.price,\n    mintFee: mintData?.mintFee,\n    isEligibleToMint: mintData?.isEligibleToMint,\n    creatorAddress: mintData?.creatorAddress,\n    totalOwners: mintData?.totalOwners,\n    network: mintData?.network,\n  };\n}\n"],"names":["useMintData","contractAddress","tokenId","updateLifecycleStatus","useNFTLifecycleContext","error","setError","useState","address","useAccount","useEffect","statusName","statusData","mintError","data","mintData","useMintDetails","takerAddress","RequestContext","NFT","code","message","name","description","imageUrl","convertIpfsToHttps","animationUrl","mimeType","contractType","maxMintsPerWallet","undefined","price","mintFee","isEligibleToMint","creatorAddress","totalOwners","network"],"mappings":";;;;;;AASgBA,SAAAA,YACdC,iBACAC,SACoB;AACd,QAAA;AAAA,IAAEC;AAAAA,MAA0BC,uBAAuB;AACzD,QAAM,CAACC,OAAOC,QAAQ,IAAIC,SAA0B,IAAI;AAClD,QAAA;AAAA,IAAEC;AAAAA,MAAYC,WAAW;AAE/BC,YAAU,MAAM;AACd,QAAIL,OAAO;AACa,4BAAA;AAAA,QACpBM,YAAY;AAAA,QACZC,YAAYP;AAAAA,MAAAA,CACb;AAAA,IAAA;AAAA,EACH,GACC,CAACA,OAAOF,qBAAqB,CAAC;AAE3B,QAAA;AAAA,IAAEE,OAAOQ;AAAAA,IAAWC,MAAMC;AAAAA,MAAaC,eAC3C;AAAA,IACEf;AAAAA,IACAgB,cAAcT;AAAAA,IACd,GAAIN,UAAU;AAAA,MAAEA;AAAAA,IAAAA,IAAY,CAAA;AAAA,EAAC,GAE/BgB,eAAeC,GACjB;AAEIN,MAAAA,aAAa,CAACR,OAAO;AACd,aAAA;AAAA,MACPe,MAAM;AAAA,MACNC,SAASR,UAAUQ;AAAAA,MACnBhB,OAAO;AAAA,IAAA,CACR;AACMQ,WAAAA;AAAAA,EAAAA;AAGF,SAAA;AAAA,IACLS,MAAMP,qCAAUO;AAAAA,IAChBC,aAAaR,qCAAUQ;AAAAA,IACvBC,UAAUC,mBAAmBV,qCAAUS,QAAQ;AAAA,IAC/CE,cAAcD,mBAAmBV,qCAAUW,YAAY;AAAA,IACvDC,UAAUZ,qCAAUY;AAAAA,IACpBC,cAAcb,qCAAUa;AAAAA,IACxBC,oBACEd,qCAAUc,uBAAsB,IAC5BC,SACAf,qCAAUc;AAAAA,IAChBE,OAAOhB,qCAAUgB;AAAAA,IACjBC,SAASjB,qCAAUiB;AAAAA,IACnBC,kBAAkBlB,qCAAUkB;AAAAA,IAC5BC,gBAAgBnB,qCAAUmB;AAAAA,IAC1BC,aAAapB,qCAAUoB;AAAAA,IACvBC,SAASrB,qCAAUqB;AAAAA,EACrB;AACF;"}