{"version":3,"file":"getCommerceContracts.js","sources":["../../../src/checkout/utils/getCommerceContracts.ts"],"sourcesContent":["import { type ContractFunctionParameters, erc20Abi } from 'viem';\nimport { COMMERCE_ABI, CONTRACT_METHODS } from '../constants';\nimport type { GetCommerceContractsParams } from '../types';\n\nexport function getCommerceContracts({\n  transaction,\n}: GetCommerceContractsParams): ContractFunctionParameters[] {\n  const { callData, metaData } = transaction;\n\n  return [\n    {\n      address: callData.recipientCurrency,\n      abi: erc20Abi,\n      functionName: CONTRACT_METHODS.APPROVE,\n      args: [\n        metaData.contractAddress,\n        BigInt(callData.recipientAmount) + BigInt(callData.feeAmount),\n      ],\n    },\n    {\n      address: metaData.contractAddress,\n      abi: COMMERCE_ABI,\n      functionName: CONTRACT_METHODS.TRANSFER_TOKEN_PRE_APPROVED,\n      args: [\n        {\n          id: callData.id,\n          recipientAmount: BigInt(callData.recipientAmount),\n          deadline: BigInt(\n            Math.floor(new Date(callData.deadline).getTime() / 1000),\n          ),\n          recipient: callData.recipient,\n          recipientCurrency: callData.recipientCurrency,\n          refundDestination: callData.refundDestination,\n          feeAmount: BigInt(callData.feeAmount),\n          operator: callData.operator,\n          signature: callData.signature,\n          prefix: callData.prefix,\n        },\n      ],\n    },\n  ];\n}\n"],"names":["getCommerceContracts","transaction","callData","metaData","address","recipientCurrency","abi","erc20Abi","functionName","CONTRACT_METHODS","APPROVE","args","contractAddress","BigInt","recipientAmount","feeAmount","COMMERCE_ABI","TRANSFER_TOKEN_PRE_APPROVED","id","deadline","Math","floor","Date","getTime","recipient","refundDestination","operator","signature","prefix"],"mappings":";;AAIO,SAASA,qBAAqB;AAAA,EACnCC;AAC0B,GAAiC;AACrD,QAAA;AAAA,IAAEC;AAAAA,IAAUC;AAAAA,EAAAA,IAAaF;AAE/B,SAAO,CACL;AAAA,IACEG,SAASF,SAASG;AAAAA,IAClBC,KAAKC;AAAAA,IACLC,cAAcC,iBAAiBC;AAAAA,IAC/BC,MAAM,CACJR,SAASS,iBACTC,OAAOX,SAASY,eAAe,IAAID,OAAOX,SAASa,SAAS,CAAC;AAAA,EAAA,GAGjE;AAAA,IACEX,SAASD,SAASS;AAAAA,IAClBN,KAAKU;AAAAA,IACLR,cAAcC,iBAAiBQ;AAAAA,IAC/BN,MAAM,CACJ;AAAA,MACEO,IAAIhB,SAASgB;AAAAA,MACbJ,iBAAiBD,OAAOX,SAASY,eAAe;AAAA,MAChDK,UAAUN,OACRO,KAAKC,MAAM,IAAIC,KAAKpB,SAASiB,QAAQ,EAAEI,QAAY,IAAA,GAAI,CACzD;AAAA,MACAC,WAAWtB,SAASsB;AAAAA,MACpBnB,mBAAmBH,SAASG;AAAAA,MAC5BoB,mBAAmBvB,SAASuB;AAAAA,MAC5BV,WAAWF,OAAOX,SAASa,SAAS;AAAA,MACpCW,UAAUxB,SAASwB;AAAAA,MACnBC,WAAWzB,SAASyB;AAAAA,MACpBC,QAAQ1B,SAAS0B;AAAAA,IAClB,CAAA;AAAA,EAAA,CAEJ;AAEL;"}