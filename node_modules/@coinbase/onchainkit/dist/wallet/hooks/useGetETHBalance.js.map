{"version":3,"file":"useGetETHBalance.js","sources":["../../../src/wallet/hooks/useGetETHBalance.ts"],"sourcesContent":["import { useMemo } from 'react';\nimport { formatUnits } from 'viem';\nimport type { Address } from 'viem';\nimport { useBalance } from 'wagmi';\nimport type { UseBalanceReturnType } from 'wagmi';\nimport { DEFAULT_QUERY_OPTIONS } from '../../internal/constants';\nimport { getRoundedAmount } from '../../internal/utils/getRoundedAmount';\nimport type { SwapError } from '../../swap';\nimport { getSwapErrorCode } from '../../swap/utils/getSwapErrorCode';\n\nconst ETH_DECIMALS = 18;\n\nexport type UseGetETHBalanceResponse = {\n  error?: SwapError;\n  response?: UseBalanceReturnType;\n  convertedBalance?: string;\n  roundedBalance?: string;\n};\n\n/**\n * A custom hook that retrieves and formats the ETH balance for a given wallet address.\n *\n * This hook uses `wagmi`'s `useBalance` internally and formats the raw balance value\n * into a human-readable string with 18 decimals (ETH standard), along with a rounded\n * version limited to 8 decimal places.\n *\n * It also handles potential balance-fetching errors and returns them in a structured format.\n *\n * @param address - The wallet address for which to fetch the ETH balance.\n * @returns An object containing:\n * - `convertedBalance`: The balance in ETH as a string.\n * - `roundedBalance`: The balance rounded to 8 decimal places.\n * - `error`: An optional `SwapError` object if an error occurred while fetching the balance.\n * - `response`: The original `useBalance` response from `wagmi`.\n */\n\nexport function useGetETHBalance(address?: Address): UseGetETHBalanceResponse {\n  const ethBalanceResponse: UseBalanceReturnType = useBalance({\n    address,\n    query: {\n      ...DEFAULT_QUERY_OPTIONS,\n    },\n  });\n\n  return useMemo(() => {\n    let error: SwapError | undefined;\n    if (ethBalanceResponse?.error) {\n      error = {\n        code: getSwapErrorCode('balance'),\n        error: ethBalanceResponse?.error?.message,\n        message: '',\n      };\n    }\n    if (\n      !ethBalanceResponse?.data?.value &&\n      ethBalanceResponse?.data?.value !== 0n\n    ) {\n      return {\n        convertedBalance: '',\n        roundedBalance: '',\n        error,\n        response: ethBalanceResponse,\n      };\n    }\n    const convertedBalance = formatUnits(\n      ethBalanceResponse?.data?.value,\n      ETH_DECIMALS,\n    );\n    const roundedBalance = getRoundedAmount(convertedBalance, 8);\n    return {\n      convertedBalance,\n      error,\n      response: ethBalanceResponse,\n      roundedBalance,\n    };\n  }, [ethBalanceResponse]);\n}\n"],"names":["ETH_DECIMALS","useGetETHBalance","address","ethBalanceResponse","useBalance","query","DEFAULT_QUERY_OPTIONS","useMemo","error","code","getSwapErrorCode","message","data","value","convertedBalance","roundedBalance","response","formatUnits","getRoundedAmount"],"mappings":";;;;;;AAUA,MAAMA,eAAe;AA0Bd,SAASC,iBAAiBC,SAA6C;AAC5E,QAAMC,qBAA2CC,WAAW;AAAA,IAC1DF;AAAAA,IACAG,OAAO;AAAA,MACL,GAAGC;AAAAA,IAAAA;AAAAA,EACL,CACD;AAED,SAAOC,QAAQ,MAAM;;AACfC,QAAAA;AACJ,QAAIL,yDAAoBK,OAAO;AACrB,cAAA;AAAA,QACNC,MAAMC,iBAAiB,SAAS;AAAA,QAChCF,QAAOL,8DAAoBK,UAApBL,mBAA2BQ;AAAAA,QAClCA,SAAS;AAAA,MACX;AAAA,IAAA;AAEF,QACE,GAACR,8DAAoBS,SAApBT,mBAA0BU,YAC3BV,8DAAoBS,SAApBT,mBAA0BU,WAAU,IACpC;AACO,aAAA;AAAA,QACLC,kBAAkB;AAAA,QAClBC,gBAAgB;AAAA,QAChBP;AAAAA,QACAQ,UAAUb;AAAAA,MACZ;AAAA,IAAA;AAEF,UAAMW,mBAAmBG,aACvBd,8DAAoBS,SAApBT,mBAA0BU,OAC1Bb,YACF;AACMe,UAAAA,iBAAiBG,iBAAiBJ,kBAAkB,CAAC;AACpD,WAAA;AAAA,MACLA;AAAAA,MACAN;AAAAA,MACAQ,UAAUb;AAAAA,MACVY;AAAAA,IACF;AAAA,EAAA,GACC,CAACZ,kBAAkB,CAAC;AACzB;"}