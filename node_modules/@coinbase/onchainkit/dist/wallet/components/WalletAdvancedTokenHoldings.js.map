{"version":3,"file":"WalletAdvancedTokenHoldings.js","sources":["../../../src/wallet/components/WalletAdvancedTokenHoldings.tsx"],"sourcesContent":["'use client';\n\nimport { cn, text } from '@/styles/theme';\nimport { type Token, TokenImage } from '@/token';\nimport { formatUnits } from 'viem';\nimport { useWalletContext } from './WalletProvider';\nimport { usePortfolio } from '../hooks/usePortfolio';\nimport { RequestContext } from '@/core/network/constants';\nimport { useAccount } from 'wagmi';\n\ntype WalletAdvancedTokenDetailsProps = {\n  token: Token;\n  tokenImageSize?: number;\n  balance: number;\n  valueInFiat: number;\n  classNames?: {\n    container?: string;\n    tokenImage?: string;\n    tokenName?: string;\n    tokenBalance?: string;\n    fiatValue?: string;\n  };\n};\n\ntype WalletAdvancedTokenHoldingsProps = {\n  classNames?: {\n    container?: string;\n    tokenDetails?: WalletAdvancedTokenDetailsProps['classNames'];\n  };\n};\n\nexport function WalletAdvancedTokenHoldings({\n  classNames,\n}: WalletAdvancedTokenHoldingsProps) {\n  const { address } = useAccount();\n  const { animations } = useWalletContext();\n\n  const { data: portfolioData, isFetching: isFetchingPortfolioData } =\n    usePortfolio({ address }, RequestContext.Wallet);\n\n  const tokenBalances = portfolioData?.tokenBalances;\n\n  if (isFetchingPortfolioData || !tokenBalances || tokenBalances.length === 0) {\n    return (\n      <div\n        data-testid=\"ockWalletAdvanced_LoadingPlaceholder\"\n        className=\"mx-auto my-2 h-44 w-80 px-4 py-3\"\n      />\n    ); // Prevent layout shift\n  }\n\n  return (\n    <div\n      className={cn(\n        'flex flex-col items-center gap-4',\n        'my-2 h-44 max-h-44',\n        'scrollbar-hidden w-88 overflow-y-auto px-4 py-3',\n        animations.content,\n        classNames?.container,\n      )}\n      data-testid=\"ockWalletAdvanced_TokenHoldings\"\n    >\n      {tokenBalances.map((tokenBalance, index) => (\n        <TokenDetails\n          key={`${tokenBalance.address}-${index}`}\n          token={{\n            address: tokenBalance.address,\n            chainId: tokenBalance.chainId,\n            decimals: tokenBalance.decimals,\n            image: tokenBalance.image,\n            name: tokenBalance.name,\n            symbol: tokenBalance.symbol,\n          }}\n          balance={Number(\n            formatUnits(\n              BigInt(tokenBalance.cryptoBalance),\n              tokenBalance.decimals,\n            ),\n          )}\n          valueInFiat={Number(tokenBalance.fiatBalance)}\n          classNames={classNames?.tokenDetails}\n        />\n      ))}\n    </div>\n  );\n}\n\nfunction TokenDetails({\n  token,\n  balance,\n  valueInFiat,\n  classNames,\n  tokenImageSize = 32,\n}: WalletAdvancedTokenDetailsProps) {\n  const formattedBalance = new Intl.NumberFormat('en-US', {\n    minimumFractionDigits: 2,\n    maximumFractionDigits: 5,\n  }).format(balance);\n\n  const formattedValueInFiat = new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'USD',\n  }).format(valueInFiat);\n\n  return (\n    <div\n      className={cn(\n        'flex w-full flex-row items-center justify-between',\n        classNames?.container,\n      )}\n    >\n      <div\n        data-testid=\"ockWalletAdvanced_TokenDetails_TokenImage\"\n        className={cn(\n          'flex flex-row items-center gap-2',\n          classNames?.tokenImage,\n        )}\n      >\n        <TokenImage token={token} size={tokenImageSize} />\n        <div className=\"flex flex-col\">\n          <span\n            className={cn(\n              text.label1,\n              'text-ock-foreground',\n              'max-w-52 overflow-hidden text-ellipsis whitespace-nowrap text-left',\n              classNames?.tokenName,\n            )}\n          >\n            {token.name?.trim()}\n          </span>\n          <span\n            className={cn(\n              text.legal,\n              'text-ock-foreground-muted',\n              classNames?.tokenBalance,\n            )}\n          >\n            {`${formattedBalance} ${token.symbol}`}\n          </span>\n        </div>\n      </div>\n      <span\n        className={cn(\n          text.label2,\n          'text-ock-foreground-muted',\n          classNames?.fiatValue,\n        )}\n      >\n        {formattedValueInFiat}\n      </span>\n    </div>\n  );\n}\n"],"names":["WalletAdvancedTokenHoldings","classNames","address","useAccount","animations","useWalletContext","data","portfolioData","isFetching","isFetchingPortfolioData","usePortfolio","RequestContext","Wallet","tokenBalances","length","cn","content","container","map","tokenBalance","index","chainId","decimals","image","name","symbol","Number","formatUnits","BigInt","cryptoBalance","fiatBalance","tokenDetails","TokenDetails","token","balance","valueInFiat","tokenImageSize","formattedBalance","Intl","NumberFormat","minimumFractionDigits","maximumFractionDigits","format","formattedValueInFiat","style","currency","tokenImage","text","label1","tokenName","trim","legal","label2","fiatValue"],"mappings":";;;;;;;;;;;;;;AA+BO,SAASA,4BAA4B;AAAA,EAC1CC;AACgC,GAAG;AAC7B,QAAA;AAAA,IAAEC;AAAAA,MAAYC,WAAW;AACzB,QAAA;AAAA,IAAEC;AAAAA,MAAeC,iBAAiB;AAElC,QAAA;AAAA,IAAEC,MAAMC;AAAAA,IAAeC,YAAYC;AAAAA,MACvCC,aAAa;AAAA,IAAER;AAAAA,EAAAA,GAAWS,eAAeC,MAAM;AAEjD,QAAMC,gBAAgBN,+CAAeM;AAErC,MAAIJ,2BAA2B,CAACI,iBAAiBA,cAAcC,WAAW,GAAG;AAC3E,WACG,oBAAA,OAAA,EACC,eAAY,wCACZ,WAAU,4DACV;AAAA,EAAA;AAKJ,SAAA,oBAAC,SACC,WAAWC,gKAITX,WAAWY,SACXf,yCAAYgB,SACd,GACA,eAAY,mCAEXJ,UAAcK,cAAAA,IAAI,CAACC,cAAcC,UAC/B,oBAAA,cAAA,EAEC,OAAO;AAAA,IACLlB,SAASiB,aAAajB;AAAAA,IACtBmB,SAASF,aAAaE;AAAAA,IACtBC,UAAUH,aAAaG;AAAAA,IACvBC,OAAOJ,aAAaI;AAAAA,IACpBC,MAAML,aAAaK;AAAAA,IACnBC,QAAQN,aAAaM;AAAAA,EACvB,GACA,SAASC,OACPC,YACEC,OAAOT,aAAaU,aAAa,GACjCV,aAAaG,QACf,CACF,GACA,aAAaI,OAAOP,aAAaW,WAAW,GAC5C,YAAY7B,yCAAY8B,aAhBnB,GAAA,GAAGZ,aAAajB,OAAO,IAAIkB,KAAK,GAkBxC,EACH,CAAA;AAEJ;AAEA,SAASY,aAAa;AAAA,EACpBC;AAAAA,EACAC;AAAAA,EACAC;AAAAA,EACAlC;AAAAA,EACAmC,iBAAiB;AACc,GAAG;;AAClC,QAAMC,mBAAmB,IAAIC,KAAKC,aAAa,SAAS;AAAA,IACtDC,uBAAuB;AAAA,IACvBC,uBAAuB;AAAA,EAAA,CACxB,EAAEC,OAAOR,OAAO;AAEjB,QAAMS,uBAAuB,IAAIL,KAAKC,aAAa,SAAS;AAAA,IAC1DK,OAAO;AAAA,IACPC,UAAU;AAAA,EAAA,CACX,EAAEH,OAAOP,WAAW;AAErB,8BACG,OACC,EAAA,WAAWpB,GAAE,yEAEXd,yCAAYgB,SACd,GAEA,UAAA;AAAA,IAAC,qBAAA,OAAA,EACC,eAAY,6CACZ,WAAWF,GAETd,oDAAAA,yCAAY6C,UACd,GAEA,UAAA;AAAA,MAAC,oBAAA,YAAA,EAAW,OAAc,MAAMV,eAAe,CAAA;AAAA,MAC/C,qBAAC,OAAI,EAAA,WAAU,yBACb,UAAA;AAAA,QAAA,oBAAC,QACC,EAAA,WAAWrB,GACTgC,KAAKC,QAGL/C,2BAAAA,0FAAAA,yCAAYgD,SACd,GAEChB,WAAMT,WAAAA,SAAAA,mBAAM0B,QACf;AAAA,QACC,oBAAA,QAAA,EACC,WAAWnC,GACTgC,KAAKI,OAELlD,iCAAAA,yCAAYkB,YACd,GAEC,UAAGkB,GAAAA,gBAAgB,IAAIJ,MAAMR,MAAM,GACtC,CAAA;AAAA,MAAA,EACF,CAAA;AAAA,IAAA,GACF;AAAA,IACA,oBAAC,QACC,EAAA,WAAWV,GACTgC,KAAKK,QAELnD,iCAAAA,yCAAYoD,SACd,GAECV,UACH,qBAAA,CAAA;AAAA,EAAA,GACF;AAEJ;"}