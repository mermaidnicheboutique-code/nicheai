{"version":3,"file":"WalletDropdownFundLink.js","sources":["../../../src/wallet/components/WalletDropdownFundLink.tsx"],"sourcesContent":["'use client';\n\nimport { ReactNode, useCallback, useMemo } from 'react';\nimport { useGetFundingUrl } from '../../fund/hooks/useGetFundingUrl';\nimport { getFundingPopupSize } from '../../fund/utils/getFundingPopupSize';\nimport { useIcon } from '../../internal/hooks/useIcon';\nimport { openPopup } from '../../internal/utils/openPopup';\nimport { cn, pressable, text as themeText } from '../../styles/theme';\n\nexport type WalletDropdownFundLinkProps = {\n  /** Optional className override for the element */\n  className?: string;\n  /** Optional icon override */\n  icon?: ReactNode;\n  /** Whether to open the funding flow in a tab or a popup window */\n  openIn?: 'popup' | 'tab';\n  /**\n   * Note: popupSize is only respected when providing your own funding link, or when a Coinbase Smart Wallet is\n   * connected. For any other wallet popupSize will be ignored as the Coinbase Onramp widget requires a fixed size\n   * popup window.\n   */\n  popupSize?: 'sm' | 'md' | 'lg';\n  /** Specifies the relationship between the current document and the linked document */\n  rel?: string;\n  /** Where to open the target if `openIn` is set to tab */\n  target?: string;\n  /** Optional text override */\n  text?: string;\n  /** Optional funding URL override */\n  fundingUrl?: string;\n};\n\nexport function WalletDropdownFundLink({\n  className,\n  fundingUrl,\n  icon = 'fundWallet',\n  openIn = 'popup',\n  popupSize = 'md',\n  rel,\n  target,\n  text = 'Fund wallet',\n}: WalletDropdownFundLinkProps) {\n  // If we can't get a funding URL, this component will be a no-op and render a disabled link\n  const fundingUrlToRender =\n    fundingUrl ??\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    useGetFundingUrl({\n      originComponentName: 'WalletDropdownFundLink',\n    });\n  const iconSvg = useIcon({ icon });\n\n  const handleClick = useCallback(\n    (e: React.MouseEvent) => {\n      e.preventDefault();\n      if (fundingUrlToRender) {\n        const { height, width } = getFundingPopupSize(\n          popupSize,\n          fundingUrlToRender,\n        );\n        openPopup({\n          url: fundingUrlToRender,\n          height,\n          width,\n          target,\n        });\n      }\n    },\n    [fundingUrlToRender, popupSize, target],\n  );\n\n  const overrideClassName = cn(\n    pressable.default,\n    'text-ock-foreground',\n    // Disable hover effects if there is no funding URL\n    !fundingUrlToRender && 'pointer-events-none',\n    'relative flex items-center px-4 py-3 w-full',\n    className,\n  );\n\n  const linkContent = useMemo(\n    () => (\n      // We put disabled on the content wrapper rather than the button/link because we dont wan't to change the\n      // background color of the dropdown item, just the text and icon\n      <span className={cn(!fundingUrlToRender && pressable.disabled)}>\n        <div className=\"-translate-y-1/2 absolute top-1/2 left-4 flex h-[1.125rem] w-[1.125rem] items-center justify-center\">\n          {iconSvg}\n        </div>\n        <span className={cn(themeText.body, 'pl-6')}>{text}</span>\n      </span>\n    ),\n    [fundingUrlToRender, iconSvg, text],\n  );\n\n  if (openIn === 'tab') {\n    return (\n      <a\n        className={overrideClassName}\n        href={fundingUrlToRender}\n        target={target}\n        rel={rel}\n      >\n        {linkContent}\n      </a>\n    );\n  }\n\n  return (\n    <button type=\"button\" className={overrideClassName} onClick={handleClick}>\n      {linkContent}\n    </button>\n  );\n}\n"],"names":["WalletDropdownFundLink","className","fundingUrl","icon","openIn","popupSize","rel","target","text","fundingUrlToRender","useGetFundingUrl","originComponentName","iconSvg","useIcon","handleClick","useCallback","e","preventDefault","height","width","getFundingPopupSize","url","overrideClassName","cn","pressable","default","linkContent","useMemo","disabled","themeText","body"],"mappings":";;;;;;;AAgCO,SAASA,uBAAuB;AAAA,EACrCC;AAAAA,EACAC;AAAAA,EACAC,OAAO;AAAA,EACPC,SAAS;AAAA,EACTC,YAAY;AAAA,EACZC;AAAAA,EACAC;AAAAA,EAAAA,MACAC,SAAO;AACoB,GAAG;AAE9B,QAAMC,qBACJP;AAAAA,EAEAQ,iBAAiB;AAAA,IACfC,qBAAqB;AAAA,EAAA,CACtB;AACH,QAAMC,UAAUC,QAAQ;AAAA,IAAEV;AAAAA,EAAAA,CAAM;AAE1BW,QAAAA,cAAcC,YAClB,CAACC,MAAwB;AACvBA,MAAEC,eAAe;AACjB,QAAIR,oBAAoB;AAChB,YAAA;AAAA,QAAES;AAAAA,QAAQC;AAAAA,MAAAA,IAAUC,oBACxBf,WACAI,kBACF;AACU,gBAAA;AAAA,QACRY,KAAKZ;AAAAA,QACLS;AAAAA,QACAC;AAAAA,QACAZ;AAAAA,MAAAA,CACD;AAAA,IAAA;AAAA,EAGL,GAAA,CAACE,oBAAoBJ,WAAWE,MAAM,CACxC;AAEA,QAAMe,oBAAoBC;AAAAA,IACxBC,UAAUC;AAAAA,IACV;AAAA;AAAA,IAEA,CAAChB,sBAAsB;AAAA,IACvB;AAAA,IACAR;AAAAA,EACF;AAEA,QAAMyB,cAAcC,QAClB;AAAA;AAAA;AAAA,IAGE,qBAAC,UAAK,WAAWJ,GAAG,CAACd,sBAAsBe,UAAUI,QAAQ,GAC3D,UAAA;AAAA,MAAC,oBAAA,OAAA,EAAI,WAAU,2IACZhB,UACH,SAAA;AAAA,MACA,oBAAC,UAAK,WAAWW,GAAGM,KAAUC,MAAI,UAAQ,GAAItB,UAAKA,OAAA,CAAA;AAAA,IAAA,EACrD,CAAA;AAAA,KAEF,CAACC,oBAAoBG,SAASJ,MAAI,CACpC;AAEA,MAAIJ,WAAW,OAAO;AAElB,WAAA,oBAAC,OACC,WAAWkB,mBACX,MAAMb,oBACN,QACA,KAECiB,UACH,YAAA,CAAA;AAAA,EAAA;AAKF,SAAA,oBAAC,YAAO,MAAK,UAAS,WAAWJ,mBAAmB,SAASR,aAC1DY,UACH,YAAA,CAAA;AAEJ;"}