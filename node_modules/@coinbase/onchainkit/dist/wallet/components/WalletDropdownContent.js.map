{"version":3,"file":"WalletDropdownContent.js","sources":["../../../src/wallet/components/WalletDropdownContent.tsx"],"sourcesContent":["import { Sheet } from '@/internal/components/Sheet';\nimport { zIndex } from '@/styles/constants';\nimport { border, cn, text } from '@/styles/theme';\nimport { useCallback, useMemo } from 'react';\nimport { WALLET_ADVANCED_DEFAULT_SWAPPABLE_TOKENS } from '../constants';\nimport { WalletAdvancedQrReceive } from './WalletAdvancedQrReceive';\nimport { WalletAdvancedSwap } from './WalletAdvancedSwap';\nimport { useWalletContext } from './WalletProvider';\nimport { Send } from './wallet-advanced-send/components/Send';\nimport { RequestContext } from '@/core/network/constants';\nimport { usePortfolio } from '@/wallet/hooks/usePortfolio';\nimport { useAccount } from 'wagmi';\nimport {\n  WalletAdvancedQrReceiveProps,\n  WalletAdvancedSwapProps,\n} from '../types';\nimport { Token } from '@/token';\n\nexport type WalletDropdownContentProps = {\n  children?: React.ReactNode;\n  swappableTokens?: Token[];\n  classNames?: {\n    container?: string;\n    qr?: WalletAdvancedQrReceiveProps['classNames'];\n    swap?: WalletAdvancedSwapProps['classNames'];\n  };\n};\n\nexport function WalletDropdownContent({\n  children,\n  swappableTokens,\n  classNames,\n}: WalletDropdownContentProps) {\n  const {\n    isSubComponentOpen,\n    setIsSubComponentOpen,\n    isSubComponentClosing,\n    setIsSubComponentClosing,\n    breakpoint,\n    activeFeature,\n    animations,\n  } = useWalletContext();\n\n  const { address } = useAccount();\n  const { data: portfolioData } = usePortfolio(\n    { address, enabled: Boolean(activeFeature) },\n    RequestContext.Wallet,\n  );\n  const tokenBalances = portfolioData?.tokenBalances;\n\n  const handleBottomSheetClose = useCallback(() => {\n    setIsSubComponentOpen(false);\n  }, [setIsSubComponentOpen]);\n\n  const handleAnimationEnd = useCallback(() => {\n    if (isSubComponentClosing) {\n      setIsSubComponentOpen(false);\n      setIsSubComponentClosing(false);\n    }\n  }, [isSubComponentClosing, setIsSubComponentOpen, setIsSubComponentClosing]);\n\n  const content = useMemo(() => {\n    if (activeFeature === 'send') {\n      return (\n        <ContentWrapper>\n          <Send className=\"border-none\" />\n        </ContentWrapper>\n      );\n    }\n\n    if (activeFeature === 'qr') {\n      return (\n        <ContentWrapper>\n          <WalletAdvancedQrReceive classNames={classNames?.qr} />\n        </ContentWrapper>\n      );\n    }\n\n    if (activeFeature === 'swap') {\n      return (\n        <ContentWrapper>\n          <WalletAdvancedSwap\n            title={\n              <div\n                className={cn(text.headline, 'w-full text-center text-base')}\n              >\n                Swap\n              </div>\n            }\n            to={swappableTokens ?? WALLET_ADVANCED_DEFAULT_SWAPPABLE_TOKENS}\n            from={\n              tokenBalances?.map((token) => ({\n                address: token.address,\n                chainId: token.chainId,\n                symbol: token.symbol,\n                decimals: token.decimals,\n                image: token.image,\n                name: token.name,\n              })) ?? []\n            }\n            classNames={classNames?.swap}\n          />\n        </ContentWrapper>\n      );\n    }\n\n    return <ContentWrapper>{children}</ContentWrapper>;\n  }, [activeFeature, swappableTokens, tokenBalances, children, classNames]);\n\n  if (breakpoint === 'sm') {\n    return (\n      <Sheet\n        isOpen={isSubComponentOpen}\n        onClose={handleBottomSheetClose}\n        className={classNames?.container}\n        side=\"bottom\"\n        title=\"Wallet\"\n        description=\"Wallet menu\"\n      >\n        <div className=\"flex h-full w-full flex-col items-center justify-center\">\n          {content}\n        </div>\n      </Sheet>\n    );\n  }\n\n  if (!isSubComponentOpen && !isSubComponentClosing) {\n    return null;\n  }\n\n  return (\n    <div\n      data-testid=\"ockWalletDropdownContent\"\n      className={cn(\n        'bg-ock-background',\n        'rounded-ock-default',\n        border.lineDefault,\n        zIndex.dropdown,\n        'my-1.5 h-auto w-full',\n        'flex justify-center',\n        // ensure border radius is respected\n        'overflow-hidden',\n        animations.container,\n        classNames?.container,\n      )}\n      onAnimationEnd={handleAnimationEnd}\n    >\n      {content}\n    </div>\n  );\n}\n\nfunction ContentWrapper({\n  children,\n  className,\n}: {\n  children: React.ReactNode;\n  className?: string;\n}) {\n  return (\n    <div\n      className={cn(\n        'flex flex-col justify-between',\n        'min-w-80 max-h-120',\n        className,\n      )}\n    >\n      {children}\n    </div>\n  );\n}\n"],"names":["WalletDropdownContent","children","swappableTokens","classNames","isSubComponentOpen","setIsSubComponentOpen","isSubComponentClosing","setIsSubComponentClosing","breakpoint","activeFeature","animations","useWalletContext","address","useAccount","data","portfolioData","usePortfolio","enabled","Boolean","RequestContext","Wallet","tokenBalances","handleBottomSheetClose","useCallback","handleAnimationEnd","content","useMemo","qr","cn","text","headline","WALLET_ADVANCED_DEFAULT_SWAPPABLE_TOKENS","map","token","chainId","symbol","decimals","image","name","swap","container","border","lineDefault","zIndex","dropdown","ContentWrapper","className"],"mappings":";;;;;;;;;;;;;AA4BO,SAASA,sBAAsB;AAAA,EACpCC;AAAAA,EACAC;AAAAA,EACAC;AAC0B,GAAG;AACvB,QAAA;AAAA,IACJC;AAAAA,IACAC;AAAAA,IACAC;AAAAA,IACAC;AAAAA,IACAC;AAAAA,IACAC;AAAAA,IACAC;AAAAA,MACEC,iBAAiB;AAEf,QAAA;AAAA,IAAEC;AAAAA,MAAYC,WAAW;AACzB,QAAA;AAAA,IAAEC,MAAMC;AAAAA,MAAkBC,aAC9B;AAAA,IAAEJ;AAAAA,IAASK,SAASC,QAAQT,aAAa;AAAA,EAAA,GACzCU,eAAeC,MACjB;AACA,QAAMC,gBAAgBN,+CAAeM;AAE/BC,QAAAA,yBAAyBC,YAAY,MAAM;AAC/ClB,0BAAsB,KAAK;AAAA,EAAA,GAC1B,CAACA,qBAAqB,CAAC;AAEpBmB,QAAAA,qBAAqBD,YAAY,MAAM;AAC3C,QAAIjB,uBAAuB;AACzBD,4BAAsB,KAAK;AAC3BE,+BAAyB,KAAK;AAAA,IAAA;AAAA,EAE/B,GAAA,CAACD,uBAAuBD,uBAAuBE,wBAAwB,CAAC;AAErEkB,QAAAA,UAAUC,QAAQ,MAAM;AAC5B,QAAIjB,kBAAkB,QAAQ;AAC5B,iCACG,gBACC,EAAA,UAAA,oBAAC,MAAK,EAAA,WAAU,kBAAa,CAAA,GAC/B;AAAA,IAAA;AAIJ,QAAIA,kBAAkB,MAAM;AAC1B,iCACG,gBACC,EAAA,UAAA,oBAAC,2BAAwB,YAAYN,yCAAYwB,IAAG,EACtD,CAAA;AAAA,IAAA;AAIJ,QAAIlB,kBAAkB,QAAQ;AAE1B,aAAA,oBAAC,kBACC,UAAC,oBAAA,oBAAA,EACC,OACG,oBAAA,OAAA,EACC,WAAWmB,GAAGC,KAAKC,UAAQ,0CAAgC,GAAE,kBAG/D,GAEF,IAAI5B,mBAAmB6B,0CACvB,OACEV,+CAAeW,IAAKC,CAAW,WAAA;AAAA,QAC7BrB,SAASqB,MAAMrB;AAAAA,QACfsB,SAASD,MAAMC;AAAAA,QACfC,QAAQF,MAAME;AAAAA,QACdC,UAAUH,MAAMG;AAAAA,QAChBC,OAAOJ,MAAMI;AAAAA,QACbC,MAAML,MAAMK;AAAAA,MAAAA,QACP,CAAA,GAET,YAAYnC,yCAAYoC,KAAK,CAAA,GAEjC;AAAA,IAAA;AAIG,WAAA,oBAAC,kBAAgBtC,UAAS;AAAA,EAAA,GAChC,CAACQ,eAAeP,iBAAiBmB,eAAepB,UAAUE,UAAU,CAAC;AAExE,MAAIK,eAAe,MAAM;AAErB,WAAA,oBAAC,SACC,QAAQJ,oBACR,SAASkB,wBACT,WAAWnB,yCAAYqC,WACvB,MAAK,UACL,OAAM,UACN,aAAY,eAEZ,UAAA,oBAAC,SAAI,WAAU,mFACZf,mBACH,EACF,CAAA;AAAA,EAAA;AAIA,MAAA,CAACrB,sBAAsB,CAACE,uBAAuB;AAC1C,WAAA;AAAA,EAAA;AAIP,SAAA,oBAAC,SACC,eAAY,4BACZ,WAAWsB,GAAE,yBAAA,2BAGXa,OAAOC,aACPC,OAAOC,UAKPlC,oCAAAA,+BAAAA,uBAAAA,WAAW8B,WACXrC,yCAAYqC,SACd,GACA,gBAAgBhB,oBAEfC,UACH,QAAA,CAAA;AAEJ;AAEA,SAASoB,eAAe;AAAA,EACtB5C;AAAAA,EACA6C;AAIF,GAAG;AAEC,SAAA,oBAAC,SACC,WAAWlB,GAAE,6CAAA,8BAGXkB,SACF,GAEC7C,UACH;AAEJ;"}