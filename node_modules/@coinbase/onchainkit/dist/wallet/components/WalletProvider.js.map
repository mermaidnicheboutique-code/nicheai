{"version":3,"file":"WalletProvider.js","sources":["../../../src/wallet/components/WalletProvider.tsx"],"sourcesContent":["'use client';\n\nimport { useBreakpoints } from '@/internal/hooks/useBreakpoints';\nimport {\n  createContext,\n  useCallback,\n  useContext,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport type { ReactNode, Dispatch, SetStateAction } from 'react';\nimport type { WalletAdvancedFeature } from '../types';\nimport { getAnimations } from '../utils/getAnimations';\nimport { calculateSubComponentPosition } from '../utils/getWalletSubComponentPosition';\n\nexport type WalletContextType = {\n  /** The breakpoint of the current device */\n  breakpoint: string | undefined;\n  /** Whether the connect modal is open */\n  isConnectModalOpen: boolean;\n  setIsConnectModalOpen: Dispatch<SetStateAction<boolean>>;\n  isSubComponentOpen: boolean;\n  setIsSubComponentOpen: Dispatch<SetStateAction<boolean>>;\n  isSubComponentClosing: boolean;\n  setIsSubComponentClosing: Dispatch<SetStateAction<boolean>>;\n  handleClose: () => void;\n  connectRef: React.RefObject<HTMLDivElement | null>;\n  showSubComponentAbove: boolean;\n  alignSubComponentRight: boolean;\n\n  activeFeature: WalletAdvancedFeature | null;\n  setActiveFeature: Dispatch<SetStateAction<WalletAdvancedFeature | null>>;\n  isActiveFeatureClosing: boolean;\n  setIsActiveFeatureClosing: Dispatch<SetStateAction<boolean>>;\n  animations: {\n    container: string;\n    content: string;\n  };\n  /** Whether to sponsor transactions for Send feature of advanced wallet implementation */\n  isSponsored?: boolean;\n};\n\nexport const WalletContext = createContext<WalletContextType | null>(null);\n\ntype WalletProviderProps = {\n  children: ReactNode;\n  /** Whether to sponsor transactions for Send feature of advanced wallet implementation */\n  isSponsored?: boolean;\n};\n\nexport function WalletProvider({ children, isSponsored }: WalletProviderProps) {\n  const [isConnectModalOpen, setIsConnectModalOpen] = useState(false);\n  const [isSubComponentOpen, setIsSubComponentOpen] = useState(false);\n  const [isSubComponentClosing, setIsSubComponentClosing] = useState(false);\n  const [showSubComponentAbove, setShowSubComponentAbove] = useState(false);\n  const [alignSubComponentRight, setAlignSubComponentRight] = useState(false);\n\n  const connectRef = useRef<HTMLDivElement | null>(null);\n  const breakpoint = useBreakpoints();\n\n  const [activeFeature, setActiveFeature] =\n    useState<WalletAdvancedFeature | null>(null);\n  const [isActiveFeatureClosing, setIsActiveFeatureClosing] = useState(false);\n\n  const animations = useMemo(() => {\n    return getAnimations(isSubComponentClosing, showSubComponentAbove);\n  }, [isSubComponentClosing, showSubComponentAbove]);\n\n  const handleClose = useCallback(() => {\n    if (!isSubComponentOpen) {\n      return;\n    }\n\n    setIsSubComponentClosing(true);\n  }, [isSubComponentOpen]);\n\n  useEffect(() => {\n    if (isSubComponentOpen && connectRef?.current) {\n      const connectRect = connectRef.current.getBoundingClientRect();\n      const position = calculateSubComponentPosition(connectRect);\n      setShowSubComponentAbove(position.showAbove);\n      setAlignSubComponentRight(position.alignRight);\n    }\n  }, [isSubComponentOpen]);\n\n  const value = useMemo(() => {\n    return {\n      breakpoint,\n      isConnectModalOpen,\n      setIsConnectModalOpen,\n      isSubComponentOpen,\n      setIsSubComponentOpen,\n      isSubComponentClosing,\n      setIsSubComponentClosing,\n      handleClose,\n      connectRef,\n      showSubComponentAbove,\n      alignSubComponentRight,\n      activeFeature,\n      setActiveFeature,\n      isActiveFeatureClosing,\n      setIsActiveFeatureClosing,\n      animations,\n      isSponsored,\n      __hasContext: true,\n    };\n  }, [\n    breakpoint,\n    isConnectModalOpen,\n    isSubComponentOpen,\n    isSubComponentClosing,\n    handleClose,\n    showSubComponentAbove,\n    alignSubComponentRight,\n    activeFeature,\n    isActiveFeatureClosing,\n    animations,\n    isSponsored,\n  ]);\n\n  return (\n    <WalletContext.Provider value={value}>{children}</WalletContext.Provider>\n  );\n}\n\nexport function useWalletContext() {\n  const context = useContext(WalletContext);\n\n  if (!context) {\n    throw new Error('useWalletContext must be used within a WalletProvider');\n  }\n\n  return context;\n}\n"],"names":["WalletContext","createContext","WalletProvider","children","isSponsored","isConnectModalOpen","setIsConnectModalOpen","useState","isSubComponentOpen","setIsSubComponentOpen","isSubComponentClosing","setIsSubComponentClosing","showSubComponentAbove","setShowSubComponentAbove","alignSubComponentRight","setAlignSubComponentRight","connectRef","useRef","breakpoint","useBreakpoints","activeFeature","setActiveFeature","isActiveFeatureClosing","setIsActiveFeatureClosing","animations","useMemo","getAnimations","handleClose","useCallback","useEffect","current","connectRect","getBoundingClientRect","position","calculateSubComponentPosition","showAbove","alignRight","value","__hasContext","useWalletContext","context","useContext","Error"],"mappings":";;;;;AA4CaA,MAAAA,gBAAgBC,cAAwC,IAAI;AAQlE,SAASC,eAAe;AAAA,EAAEC;AAAAA,EAAUC;AAAiC,GAAG;AAC7E,QAAM,CAACC,oBAAoBC,qBAAqB,IAAIC,SAAS,KAAK;AAClE,QAAM,CAACC,oBAAoBC,qBAAqB,IAAIF,SAAS,KAAK;AAClE,QAAM,CAACG,uBAAuBC,wBAAwB,IAAIJ,SAAS,KAAK;AACxE,QAAM,CAACK,uBAAuBC,wBAAwB,IAAIN,SAAS,KAAK;AACxE,QAAM,CAACO,wBAAwBC,yBAAyB,IAAIR,SAAS,KAAK;AAEpES,QAAAA,aAAaC,OAA8B,IAAI;AACrD,QAAMC,aAAaC,eAAe;AAElC,QAAM,CAACC,eAAeC,gBAAgB,IACpCd,SAAuC,IAAI;AAC7C,QAAM,CAACe,wBAAwBC,yBAAyB,IAAIhB,SAAS,KAAK;AAEpEiB,QAAAA,aAAaC,QAAQ,MAAM;AACxBC,WAAAA,cAAchB,uBAAuBE,qBAAqB;AAAA,EAAA,GAChE,CAACF,uBAAuBE,qBAAqB,CAAC;AAE3Ce,QAAAA,cAAcC,YAAY,MAAM;AACpC,QAAI,CAACpB,oBAAoB;AACvB;AAAA,IAAA;AAGFG,6BAAyB,IAAI;AAAA,EAAA,GAC5B,CAACH,kBAAkB,CAAC;AAEvBqB,YAAU,MAAM;AACVrB,QAAAA,uBAAsBQ,yCAAYc,UAAS;AACvCC,YAAAA,cAAcf,WAAWc,QAAQE,sBAAsB;AACvDC,YAAAA,WAAWC,8BAA8BH,WAAW;AAC1DlB,+BAAyBoB,SAASE,SAAS;AAC3CpB,gCAA0BkB,SAASG,UAAU;AAAA,IAAA;AAAA,EAC/C,GACC,CAAC5B,kBAAkB,CAAC;AAEjB6B,QAAAA,QAAQZ,QAAQ,MAAM;AACnB,WAAA;AAAA,MACLP;AAAAA,MACAb;AAAAA,MACAC;AAAAA,MACAE;AAAAA,MACAC;AAAAA,MACAC;AAAAA,MACAC;AAAAA,MACAgB;AAAAA,MACAX;AAAAA,MACAJ;AAAAA,MACAE;AAAAA,MACAM;AAAAA,MACAC;AAAAA,MACAC;AAAAA,MACAC;AAAAA,MACAC;AAAAA,MACApB;AAAAA,MACAkC,cAAc;AAAA,IAChB;AAAA,EACC,GAAA,CACDpB,YACAb,oBACAG,oBACAE,uBACAiB,aACAf,uBACAE,wBACAM,eACAE,wBACAE,YACApB,WAAW,CACZ;AAED,SACG,oBAAA,cAAc,UAAd,EAAuB,OAAeD,SAAS,CAAA;AAEpD;AAEO,SAASoC,mBAAmB;AAC3BC,QAAAA,UAAUC,WAAWzC,aAAa;AAExC,MAAI,CAACwC,SAAS;AACN,UAAA,IAAIE,MAAM,uDAAuD;AAAA,EAAA;AAGlEF,SAAAA;AACT;"}