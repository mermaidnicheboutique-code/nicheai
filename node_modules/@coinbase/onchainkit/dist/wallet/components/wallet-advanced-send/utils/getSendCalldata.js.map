{"version":3,"file":"getSendCalldata.js","sources":["../../../../../src/wallet/components/wallet-advanced-send/utils/getSendCalldata.ts"],"sourcesContent":["import { buildSendTransaction } from '@/api/buildSendTransaction';\nimport type { APIError } from '@/api/types';\nimport { isApiError } from '@/internal/utils/isApiResponseError';\nimport type { Token } from '@/token';\nimport type { Call } from '@/transaction/types';\nimport { type Address, parseUnits } from 'viem';\n\ntype GetSendCalldataParams = {\n  recipientAddress: Address | null;\n  token: Token | null;\n  amount: string | null;\n};\n\ntype GetSendCalldataResponse = {\n  calldata: Call | null;\n  error: APIError | null;\n};\n\nexport function getSendCalldata({\n  recipientAddress,\n  token,\n  amount,\n}: GetSendCalldataParams): GetSendCalldataResponse {\n  if (!recipientAddress || !token || !token.decimals || !amount) {\n    return {\n      calldata: null,\n      error: {\n        code: 'SemBSeTx01',\n        error: 'Invalid transaction parameters',\n        message: 'Could not build send transaction',\n      },\n    };\n  }\n\n  if (!token.address && token.symbol !== 'ETH') {\n    return {\n      calldata: null,\n      error: {\n        code: 'SemBSeTx02',\n        error: 'No token address provided for non-ETH token',\n        message: 'Could not build send transaction',\n      },\n    };\n  }\n\n  try {\n    const parsedAmount = parseUnits(amount, token.decimals);\n    const sendTransaction = buildSendTransaction({\n      recipientAddress,\n      tokenAddress: token.address || null,\n      amount: parsedAmount,\n    });\n\n    if (isApiError(sendTransaction)) {\n      return {\n        calldata: null,\n        error: sendTransaction,\n      };\n    }\n\n    return {\n      calldata: sendTransaction,\n      error: null,\n    };\n  } catch (err) {\n    return {\n      calldata: null,\n      error: {\n        code: 'SemBSeTx03',\n        error: err instanceof Error ? err.message : 'Unknown error',\n        message: 'Could not build send transaction',\n      },\n    };\n  }\n}\n"],"names":["getSendCalldata","recipientAddress","token","amount","decimals","calldata","error","code","message","address","symbol","parsedAmount","parseUnits","sendTransaction","buildSendTransaction","tokenAddress","isApiError","err","Error"],"mappings":";;;AAkBO,SAASA,gBAAgB;AAAA,EAC9BC;AAAAA,EACAC;AAAAA,EACAC;AACqB,GAA4B;AAC7C,MAAA,CAACF,oBAAoB,CAACC,SAAS,CAACA,MAAME,YAAY,CAACD,QAAQ;AACtD,WAAA;AAAA,MACLE,UAAU;AAAA,MACVC,OAAO;AAAA,QACLC,MAAM;AAAA,QACND,OAAO;AAAA,QACPE,SAAS;AAAA,MAAA;AAAA,IAEb;AAAA,EAAA;AAGF,MAAI,CAACN,MAAMO,WAAWP,MAAMQ,WAAW,OAAO;AACrC,WAAA;AAAA,MACLL,UAAU;AAAA,MACVC,OAAO;AAAA,QACLC,MAAM;AAAA,QACND,OAAO;AAAA,QACPE,SAAS;AAAA,MAAA;AAAA,IAEb;AAAA,EAAA;AAGE,MAAA;AACF,UAAMG,eAAeC,WAAWT,QAAQD,MAAME,QAAQ;AACtD,UAAMS,kBAAkBC,qBAAqB;AAAA,MAC3Cb;AAAAA,MACAc,cAAcb,MAAMO,WAAW;AAAA,MAC/BN,QAAQQ;AAAAA,IAAAA,CACT;AAEGK,QAAAA,WAAWH,eAAe,GAAG;AACxB,aAAA;AAAA,QACLR,UAAU;AAAA,QACVC,OAAOO;AAAAA,MACT;AAAA,IAAA;AAGK,WAAA;AAAA,MACLR,UAAUQ;AAAAA,MACVP,OAAO;AAAA,IACT;AAAA,WACOW,KAAK;AACL,WAAA;AAAA,MACLZ,UAAU;AAAA,MACVC,OAAO;AAAA,QACLC,MAAM;AAAA,QACND,OAAOW,eAAeC,QAAQD,IAAIT,UAAU;AAAA,QAC5CA,SAAS;AAAA,MAAA;AAAA,IAEb;AAAA,EAAA;AAEJ;"}