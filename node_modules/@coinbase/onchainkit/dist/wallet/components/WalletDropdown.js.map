{"version":3,"file":"WalletDropdown.js","sources":["../../../src/wallet/components/WalletDropdown.tsx"],"sourcesContent":["'use client';\n\nimport { Address, Avatar, EthBalance, Identity, Name } from '@/identity';\nimport { cn } from '@/styles/theme';\nimport {\n  useFloating,\n  autoUpdate,\n  offset,\n  flip,\n  shift,\n  FloatingPortal,\n} from '@floating-ui/react';\nimport { useEffect } from 'react';\nimport type {\n  WalletAdvancedQrReceiveProps,\n  WalletAdvancedSwapProps,\n} from '../types';\nimport { WalletDropdownContent } from './WalletDropdownContent';\nimport { WalletDropdownDisconnect } from './WalletDropdownDisconnect';\nimport { WalletDropdownLink } from './WalletDropdownLink';\nimport { useWalletContext } from './WalletProvider';\nimport { useAccount } from 'wagmi';\nimport { Token } from '@/token';\nimport { useOutsideClick } from '@/internal/hooks/useOutsideClick';\n\nexport type WalletDropdownProps = {\n  children?: React.ReactNode;\n  /** Optional className override for top div element */\n  className?: string;\n  classNames?: {\n    container?: string;\n    qr?: WalletAdvancedQrReceiveProps['classNames'];\n    swap?: WalletAdvancedSwapProps['classNames'];\n  };\n  swappableTokens?: Token[];\n};\n\nconst defaultWalletDropdownChildren = (\n  <>\n    <Identity className=\"px-4 pt-3 pb-2\" key=\"wallet-dd-identity\">\n      <Avatar />\n      <Name />\n      <Address className={'text-ock-foreground-muted'} />\n      <EthBalance />\n    </Identity>\n    <WalletDropdownLink\n      icon=\"wallet\"\n      key=\"wallet-dd-link\"\n      href=\"https://keys.coinbase.com\"\n      target=\"_blank\"\n    >\n      Wallet\n    </WalletDropdownLink>\n    <WalletDropdownDisconnect key=\"wallet-dd-disconnect\" />\n  </>\n);\n\nexport function WalletDropdown({\n  children,\n  className,\n  classNames,\n  swappableTokens,\n}: WalletDropdownProps) {\n  const {\n    breakpoint,\n    isSubComponentOpen,\n    showSubComponentAbove,\n    alignSubComponentRight,\n    connectRef,\n    handleClose,\n  } = useWalletContext();\n  const { address } = useAccount();\n\n  const { refs, floatingStyles } = useFloating({\n    open: isSubComponentOpen,\n    placement: showSubComponentAbove\n      ? alignSubComponentRight\n        ? 'top-end'\n        : 'top-start'\n      : alignSubComponentRight\n        ? 'bottom-end'\n        : 'bottom-start',\n    middleware: [\n      offset(6),\n      flip({\n        fallbackPlacements: [\n          'top-start',\n          'top-end',\n          'bottom-start',\n          'bottom-end',\n        ],\n      }),\n      shift({ padding: 8 }),\n    ],\n    whileElementsMounted: autoUpdate,\n  });\n\n  useOutsideClick(refs.floating, handleClose);\n\n  useEffect(() => {\n    if (connectRef?.current) {\n      refs.setReference(connectRef.current);\n    }\n  }, [connectRef, refs]);\n\n  if (!address || !breakpoint || !isSubComponentOpen) {\n    return null;\n  }\n\n  return (\n    <FloatingPortal>\n      <div\n        ref={refs.setFloating}\n        style={floatingStyles}\n        data-testid=\"ockWalletDropdown\"\n        className={cn('z-50', className)}\n      >\n        <WalletDropdownContent\n          classNames={classNames}\n          swappableTokens={swappableTokens}\n        >\n          {children || defaultWalletDropdownChildren}\n        </WalletDropdownContent>\n      </div>\n    </FloatingPortal>\n  );\n}\n"],"names":["defaultWalletDropdownChildren","WalletDropdown","children","className","classNames","swappableTokens","breakpoint","isSubComponentOpen","showSubComponentAbove","alignSubComponentRight","connectRef","handleClose","useWalletContext","address","useAccount","refs","floatingStyles","useFloating","open","placement","middleware","offset","flip","fallbackPlacements","shift","padding","whileElementsMounted","autoUpdate","floating","useEffect","current","setReference","setFloating","cn"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAqCA,MAAMA,gCAEF,qBAAA,UAAA,EAAA,UAAA;AAAA,EAAC,qBAAA,UAAA,EAAS,WAAU,8BAClB,UAAA;AAAA,IAAA,oBAAC,QAAM,EAAA;AAAA,wBACN,MAAI,EAAA;AAAA,IACL,oBAAC,SAAQ,EAAA,WAAW,4BAA4B,CAAA;AAAA,wBAC/C,YAAU,CAAA,CAAA;AAAA,EAAA,EAAA,GAJ4B,oBAKzC;AAAA,EACA,oBAAC,sBACC,MAAK,UAEL,MAAK,6BACL,QAAO,UAAQ,UAAA,SAAA,GAFX,gBAKN;AAAA,EACA,oBAAC,8BAA6B,sBAAsB;AAAA,GACtD;AAGK,SAASC,eAAe;AAAA,EAC7BC;AAAAA,EACAC;AAAAA,EACAC;AAAAA,EACAC;AACmB,GAAG;AAChB,QAAA;AAAA,IACJC;AAAAA,IACAC;AAAAA,IACAC;AAAAA,IACAC;AAAAA,IACAC;AAAAA,IACAC;AAAAA,MACEC,iBAAiB;AACf,QAAA;AAAA,IAAEC;AAAAA,MAAYC,WAAW;AAEzB,QAAA;AAAA,IAAEC;AAAAA,IAAMC;AAAAA,MAAmBC,YAAY;AAAA,IAC3CC,MAAMX;AAAAA,IACNY,WAAWX,wBACPC,yBACE,YACA,cACFA,yBACE,eACA;AAAA,IACNW,YAAY,CACVC,OAAO,CAAC,GACRC,KAAK;AAAA,MACHC,oBAAoB,CAClB,aACA,WACA,gBACA,YAAY;AAAA,IAEf,CAAA,GACDC,MAAM;AAAA,MAAEC,SAAS;AAAA,IAAA,CAAG,CAAC;AAAA,IAEvBC,sBAAsBC;AAAAA,EAAAA,CACvB;AAEeZ,kBAAAA,KAAKa,UAAUjB,WAAW;AAE1CkB,YAAU,MAAM;AACd,QAAInB,yCAAYoB,SAAS;AAClBC,WAAAA,aAAarB,WAAWoB,OAAO;AAAA,IAAA;AAAA,EACtC,GACC,CAACpB,YAAYK,IAAI,CAAC;AAErB,MAAI,CAACF,WAAW,CAACP,cAAc,CAACC,oBAAoB;AAC3C,WAAA;AAAA,EAAA;AAIP,SAAA,oBAAC,kBACC,UAAC,oBAAA,OAAA,EACC,KAAKQ,KAAKiB,aACV,OAAOhB,gBACP,eAAY,qBACZ,WAAWiB,GAAE,YAAS9B,SAAS,GAE/B,UAAC,oBAAA,uBAAA,EACC,YACA,iBAECD,UAAAA,YAAYF,8BACf,CAAA,EAAA,CACF,EACF,CAAA;AAEJ;"}