{"version":3,"file":"WalletAdvancedAddressDetails.js","sources":["../../../src/wallet/components/WalletAdvancedAddressDetails.tsx"],"sourcesContent":["'use client';\n\nimport { Avatar, Name } from '@/identity';\nimport { Spinner } from '@/internal/components/Spinner';\nimport { zIndex } from '@/styles/constants';\nimport { cn, pressable, text } from '@/styles/theme';\nimport { useCallback, useState } from 'react';\nimport { useWalletContext } from './WalletProvider';\nimport { usePortfolio } from '../hooks/usePortfolio';\nimport { RequestContext } from '@/core/network/constants';\nimport { useAccount } from 'wagmi';\nimport { useOnchainKit } from '@/useOnchainKit';\n\ntype WalletAdvancedAddressDetailsProps = {\n  classNames?: {\n    container?: string;\n    avatar?: string;\n    nameButton?: string;\n    fiatBalance?: string;\n  };\n};\n\nexport function WalletAdvancedAddressDetails({\n  classNames,\n}: WalletAdvancedAddressDetailsProps) {\n  const { animations } = useWalletContext();\n  const { address } = useAccount();\n  const { chain } = useOnchainKit();\n  const [copyText, setCopyText] = useState('Copy');\n\n  const handleCopyAddress = useCallback(async () => {\n    try {\n      await navigator.clipboard.writeText(String(address));\n      setCopyText('Copied');\n      setTimeout(() => setCopyText('Copy'), 2000);\n    } catch (err) {\n      console.error('Failed to copy address:', err);\n      setCopyText('Failed to copy');\n      setTimeout(() => setCopyText('Copy'), 2000);\n    }\n  }, [address]);\n\n  if (!address || !chain) {\n    return <div className=\"mt-1 h-28 w-10 px-4 py-3\" />; // Prevent layout shift\n  }\n\n  return (\n    <div\n      data-testid=\"ockWalletAdvanced_AddressDetails\"\n      className={cn(\n        'mt-2 flex w-88 flex-col items-center justify-center px-4 py-3',\n        'text-ock-foreground',\n        text.body,\n        animations.content,\n        classNames?.container,\n      )}\n    >\n      <Avatar\n        address={address}\n        chain={chain}\n        className={cn('pointer-events-none h-10 w-10', classNames?.avatar)}\n      />\n      <div className=\"group relative mt-2 text-base\">\n        <button\n          type=\"button\"\n          onClick={handleCopyAddress}\n          data-testid=\"ockWalletAdvanced_NameButton\"\n        >\n          <Name\n            address={address}\n            chain={chain}\n            className={cn(\n              'hover:text-ock-foreground-muted active:text-ock-primary',\n              classNames?.nameButton,\n            )}\n          />\n        </button>\n        <button\n          type=\"button\"\n          onClick={handleCopyAddress}\n          className={cn(\n            pressable.alternate,\n            text.legal,\n            'text-ock-foreground',\n            'border-ock-background',\n            'rounded-ock-default',\n            zIndex.tooltip,\n            'absolute top-full right-0 mt-0.5 px-1.5 py-0.5 opacity-0 transition-opacity group-hover:opacity-100',\n          )}\n          aria-live=\"polite\"\n          data-testid=\"ockWalletAdvanced_NameTooltip\"\n        >\n          {copyText}\n        </button>\n      </div>\n      <AddressBalanceInFiat className={classNames?.fiatBalance} />\n    </div>\n  );\n}\n\nfunction AddressBalanceInFiat({ className }: { className?: string }) {\n  const { address } = useAccount();\n\n  const { data: portfolioData, isFetching: isFetchingPortfolioData } =\n    usePortfolio({ address }, RequestContext.Wallet);\n\n  const portfolioFiatValue = portfolioData?.portfolioBalanceInUsd;\n\n  const formattedValueInFiat = new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'USD',\n  }).format(Number(portfolioFiatValue));\n\n  if (isFetchingPortfolioData) {\n    return (\n      <div className=\"mt-1 h-8 w-full\">\n        <Spinner />\n      </div>\n    );\n  }\n\n  if (portfolioFiatValue === null || portfolioFiatValue === undefined) {\n    return null;\n  }\n\n  return (\n    <div\n      className={cn(text.title1, 'mt-1 font-normal', className)}\n      data-testid=\"ockWalletAdvanced_AddressBalance\"\n    >\n      {formattedValueInFiat}\n    </div>\n  );\n}\n"],"names":["WalletAdvancedAddressDetails","classNames","animations","useWalletContext","address","useAccount","chain","useOnchainKit","copyText","setCopyText","useState","handleCopyAddress","useCallback","navigator","clipboard","writeText","String","setTimeout","err","error","cn","text","body","content","container","avatar","nameButton","pressable","alternate","legal","zIndex","tooltip","fiatBalance","AddressBalanceInFiat","className","data","portfolioData","isFetching","isFetchingPortfolioData","usePortfolio","RequestContext","Wallet","portfolioFiatValue","portfolioBalanceInUsd","formattedValueInFiat","Intl","NumberFormat","style","currency","format","Number","undefined","title1"],"mappings":";;;;;;;;;;;;;;;;;;;;AAsBO,SAASA,6BAA6B;AAAA,EAC3CC;AACiC,GAAG;AAC9B,QAAA;AAAA,IAAEC;AAAAA,MAAeC,iBAAiB;AAClC,QAAA;AAAA,IAAEC;AAAAA,MAAYC,WAAW;AACzB,QAAA;AAAA,IAAEC;AAAAA,MAAUC,cAAc;AAChC,QAAM,CAACC,UAAUC,WAAW,IAAIC,SAAS,MAAM;AAEzCC,QAAAA,oBAAoBC,YAAY,YAAY;AAC5C,QAAA;AACF,YAAMC,UAAUC,UAAUC,UAAUC,OAAOZ,OAAO,CAAC;AACnDK,kBAAY,QAAQ;AACpBQ,iBAAW,MAAMR,YAAY,MAAM,GAAG,GAAI;AAAA,aACnCS,KAAK;AACJC,cAAAA,MAAM,2BAA2BD,GAAG;AAC5CT,kBAAY,gBAAgB;AAC5BQ,iBAAW,MAAMR,YAAY,MAAM,GAAG,GAAI;AAAA,IAAA;AAAA,EAC5C,GACC,CAACL,OAAO,CAAC;AAER,MAAA,CAACA,WAAW,CAACE,OAAO;AACf,WAAA,oBAAC,OAAI,EAAA,WAAU,+CAA0B,CAAA;AAAA,EAAA;AAGlD,SACG,qBAAA,OAAA,EACC,eAAY,oCACZ,WAAWc,GAAE,iGAAA,2BAGXC,KAAKC,MACLpB,WAAWqB,SACXtB,yCAAYuB,SACd,GAEA,UAAA;AAAA,IAAC,oBAAA,QAAA,EACC,SACA,OACA,WAAWJ,gDAAoCnB,yCAAYwB,MAAM,GAAE;AAAA,IAErE,qBAAC,OAAI,EAAA,WAAU,iDACb,UAAA;AAAA,MAAA,oBAAC,YACC,MAAK,UACL,SAASd,mBACT,eAAY,gCAEZ,UAAA,oBAAC,MACC,EAAA,SACA,OACA,WAAWS,sEAETnB,yCAAYyB,UACd,EAAE,CAAA,GAEN;AAAA,MACA,oBAAC,YACC,MAAK,UACL,SAASf,mBACT,WAAWS,GACTO,UAAUC,WACVP,KAAKQ,OAILC,2BAAAA,6BAAAA,2BAAAA,OAAOC,SAAO,yIAEhB,GACA,aAAU,UACV,eAAY,iCAEXvB,UACH,SAAA,CAAA;AAAA,IAAA,GACF;AAAA,IACC,oBAAA,sBAAA,EAAqB,WAAWP,yCAAY+B,YAAY,CAAA;AAAA,EAAA,GAC3D;AAEJ;AAEA,SAASC,qBAAqB;AAAA,EAAEC;AAAkC,GAAG;AAC7D,QAAA;AAAA,IAAE9B;AAAAA,MAAYC,WAAW;AAEzB,QAAA;AAAA,IAAE8B,MAAMC;AAAAA,IAAeC,YAAYC;AAAAA,MACvCC,aAAa;AAAA,IAAEnC;AAAAA,EAAAA,GAAWoC,eAAeC,MAAM;AAEjD,QAAMC,qBAAqBN,+CAAeO;AAE1C,QAAMC,uBAAuB,IAAIC,KAAKC,aAAa,SAAS;AAAA,IAC1DC,OAAO;AAAA,IACPC,UAAU;AAAA,EACX,CAAA,EAAEC,OAAOC,OAAOR,kBAAkB,CAAC;AAEpC,MAAIJ,yBAAyB;AAC3B,+BACG,OAAI,EAAA,WAAU,+BACb,UAAA,oBAAC,UAAO,CAAA,GACV;AAAA,EAAA;AAIAI,MAAAA,uBAAuB,QAAQA,uBAAuBS,QAAW;AAC5D,WAAA;AAAA,EAAA;AAIP,SAAA,oBAAC,OACC,EAAA,WAAW/B,GAAGC,KAAK+B,oCAA4BlB,SAAS,GACxD,eAAY,oCAEXU,UACH,qBAAA,CAAA;AAEJ;"}