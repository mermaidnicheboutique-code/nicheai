'use client';
import { jsxs, jsx } from "react/jsx-runtime";
import { CopyButton } from "../../internal/components/CopyButton.js";
import { PressableIcon } from "../../internal/components/PressableIcon.js";
import { QrCodeSvg } from "../../internal/components/QrCode/QrCodeSvg.js";
import { backArrowSvg } from "../../internal/svg/backArrowSvg.js";
import { copySvg } from "../../internal/svg/copySvg.js";
import { zIndex } from "../../styles/constants.js";
import { cn, pressable, text } from "../../styles/theme.js";
import { useState, useCallback } from "react";
import { useWalletContext } from "./WalletProvider.js";
import { useAccount } from "wagmi";
function WalletAdvancedQrReceive({
  classNames
}) {
  const {
    setActiveFeature,
    isActiveFeatureClosing,
    setIsActiveFeatureClosing
  } = useWalletContext();
  const {
    address
  } = useAccount();
  const [copyText, setCopyText] = useState("Copy");
  const [copyButtonText, setCopyButtonText] = useState("Copy address");
  const handleCloseQr = useCallback(() => {
    setIsActiveFeatureClosing(true);
  }, [setIsActiveFeatureClosing]);
  const handleAnimationEnd = useCallback(() => {
    if (isActiveFeatureClosing) {
      setActiveFeature(null);
      setIsActiveFeatureClosing(false);
    }
  }, [isActiveFeatureClosing, setActiveFeature, setIsActiveFeatureClosing]);
  const resetAffordanceText = useCallback(() => {
    setTimeout(() => {
      setCopyText("Copy");
      setCopyButtonText("Copy address");
    }, 2e3);
  }, []);
  const handleCopyButtonSuccess = useCallback(() => {
    setCopyButtonText("Address copied");
    resetAffordanceText();
  }, [resetAffordanceText]);
  const handleCopyButtonError = useCallback(() => {
    setCopyButtonText("Failed to copy address");
    resetAffordanceText();
  }, [resetAffordanceText]);
  const handleCopyIconSuccess = useCallback(() => {
    setCopyText("Copied");
    resetAffordanceText();
  }, [resetAffordanceText]);
  const handleCopyIconError = useCallback(() => {
    setCopyText("Failed to copy");
    resetAffordanceText();
  }, [resetAffordanceText]);
  return /* @__PURE__ */ jsxs("div", { "data-testid": "ockWalletAdvancedQrReceive", className: cn("ock:rounded-ock-default", "ock:text-ock-foreground", text.headline, "ock:flex ock:flex-col ock:items-center ock:justify-between", "ock:h-120 ock:w-88 ock:px-4 ock:pt-3 ock:pb-4", isActiveFeatureClosing ? "ock:fade-out ock:slide-out-to-left-5 ock:animate-out ock:fill-mode-forwards ock:ease-in-out" : "ock:fade-in ock:slide-in-from-left-5 ock:linear ock:animate-in ock:duration-150", classNames == null ? void 0 : classNames.container), onAnimationEnd: handleAnimationEnd, children: [
    /* @__PURE__ */ jsxs("div", { className: cn("ock:flex ock:h-[34px] ock:w-full ock:flex-row ock:items-center ock:justify-between", classNames == null ? void 0 : classNames.header), children: [
      /* @__PURE__ */ jsx(PressableIcon, { "aria-label": "Back button", onClick: handleCloseQr, children: /* @__PURE__ */ jsx("div", { className: "ock:p-2", children: backArrowSvg }) }),
      /* @__PURE__ */ jsx("span", { children: "Scan to receive" }),
      /* @__PURE__ */ jsxs("div", { className: "ock:group ock:relative", children: [
        /* @__PURE__ */ jsx(CopyButton, { label: copySvg, copyValue: address ?? "", onSuccess: handleCopyIconSuccess, onError: handleCopyIconError, className: cn(pressable.default, "ock:rounded-ock-inner", "ock:border-ock-background", "ock:flex ock:items-center ock:justify-center ock:p-2"), "aria-label": "Copy your address by clicking the icon" }),
        /* @__PURE__ */ jsx(CopyButton, { label: copyText, copyValue: address ?? "", onSuccess: handleCopyIconSuccess, onError: handleCopyIconError, className: cn(pressable.alternate, text.legal, "ock:text-ock-foreground", "ock:border-ock-background", "ock:rounded-ock-default", zIndex.dropdown, "ock:absolute ock:top-full ock:right-0 ock:mt-0.5 ock:px-1.5 ock:py-0.5 ock:opacity-0 ock:transition-opacity ock:group-hover:opacity-100"), "aria-label": "Copy your address by clicking the tooltip" })
      ] })
    ] }),
    /* @__PURE__ */ jsx(QrCodeSvg, { value: address }),
    /* @__PURE__ */ jsx(CopyButton, { copyValue: address ?? "", label: copyButtonText, className: cn("ock:rounded-ock-default", pressable.alternate, "ock:w-full ock:p-3", classNames == null ? void 0 : classNames.copyButton), onSuccess: handleCopyButtonSuccess, onError: handleCopyButtonError, "aria-label": "Copy your address by clicking the button" })
  ] });
}
export {
  WalletAdvancedQrReceive
};
//# sourceMappingURL=WalletAdvancedQrReceive.js.map
