{"version":3,"file":"WalletAdvancedTransactionActions.js","sources":["../../../src/wallet/components/WalletAdvancedTransactionActions.tsx"],"sourcesContent":["'use client';\n\nimport { useAnalytics } from '@/core/analytics/hooks/useAnalytics';\nimport {\n  WalletEvent,\n  WalletOption,\n  WalletOptionType,\n} from '@/core/analytics/types';\nimport { Skeleton } from '@/internal/components/Skeleton';\nimport { addSvgForeground } from '@/internal/svg/addForegroundSvg';\nimport { arrowUpRightSvg } from '@/internal/svg/arrowUpRightSvg';\nimport { toggleSvg } from '@/internal/svg/toggleSvg';\nimport { cn, pressable, text } from '@/styles/theme';\nimport { useOnchainKit } from '@/useOnchainKit';\nimport { useCallback } from 'react';\nimport { useWalletContext } from './WalletProvider';\nimport { RequestContext } from '@/core/network/constants';\nimport { usePortfolio } from '../hooks/usePortfolio';\nimport { useAccount } from 'wagmi';\n\ntype WalletAdvancedTransactionActionProps = {\n  icon: React.ReactNode;\n  label: string;\n  action: () => void;\n  classNames?: {\n    container?: string;\n    icon?: string;\n    label?: string;\n  };\n};\n\ntype WalletAdvancedTransactionActionsProps = {\n  classNames?: {\n    container?: string;\n    leftAction?: WalletAdvancedTransactionActionProps['classNames'];\n    middleAction?: WalletAdvancedTransactionActionProps['classNames'];\n    rightAction?: WalletAdvancedTransactionActionProps['classNames'];\n  };\n};\n\nexport function WalletAdvancedTransactionActions({\n  classNames,\n}: WalletAdvancedTransactionActionsProps) {\n  const { setActiveFeature, animations } = useWalletContext();\n  const { address } = useAccount();\n  const { chain } = useOnchainKit();\n  const { projectId } = useOnchainKit();\n  const { sendAnalytics } = useAnalytics();\n\n  const { isFetching: isFetchingPortfolioData } = usePortfolio(\n    { address },\n    RequestContext.Wallet,\n  );\n\n  const handleAnalyticsOptionSelected = useCallback(\n    (option: WalletOptionType) => {\n      sendAnalytics(WalletEvent.OptionSelected, {\n        option,\n      });\n    },\n    [sendAnalytics],\n  );\n\n  const handleBuy = useCallback(() => {\n    handleAnalyticsOptionSelected(WalletOption.Buy);\n\n    if (!projectId || !address || !chain?.name) {\n      return;\n    }\n\n    const url = new URL('https://pay.coinbase.com/buy/select-asset');\n    const params = new URLSearchParams({\n      appId: projectId,\n      destinationWallets: JSON.stringify([\n        {\n          address,\n          blockchains: [chain.name.toLowerCase()],\n        },\n      ]),\n      defaultAsset: 'USDC',\n      defaultPaymentMethod: 'CRYPTO_ACCOUNT',\n      presetFiatAmount: '25',\n    });\n\n    window.open(\n      `${url}?${params}`,\n      'popup',\n      'width=400,height=600,scrollbars=yes',\n    );\n  }, [address, chain?.name, projectId, handleAnalyticsOptionSelected]);\n\n  const handleSend = useCallback(() => {\n    handleAnalyticsOptionSelected(WalletOption.Send);\n    setActiveFeature('send');\n  }, [handleAnalyticsOptionSelected, setActiveFeature]);\n\n  const handleSwap = useCallback(() => {\n    handleAnalyticsOptionSelected(WalletOption.Swap);\n    setActiveFeature('swap');\n  }, [setActiveFeature, handleAnalyticsOptionSelected]);\n\n  if (isFetchingPortfolioData) {\n    return <Skeleton className=\"mx-auto my-3 h-16 w-80 px-4 py-3\" />;\n  }\n\n  return (\n    <div\n      data-testid=\"ockWalletAdvanced_TransactionActions\"\n      className={cn(\n        'my-3 flex w-88 flex-row justify-between gap-2 px-4 py-3',\n        animations.content,\n        classNames?.container,\n      )}\n    >\n      <WalletAdvancedTransactionAction\n        icon={addSvgForeground}\n        label=\"Buy\"\n        action={handleBuy}\n        classNames={classNames?.leftAction}\n      />\n      <WalletAdvancedTransactionAction\n        icon={arrowUpRightSvg}\n        label=\"Send\"\n        action={handleSend}\n        classNames={classNames?.middleAction}\n      />\n      <WalletAdvancedTransactionAction\n        icon={toggleSvg}\n        label=\"Swap\"\n        action={handleSwap}\n        classNames={classNames?.rightAction}\n      />\n    </div>\n  );\n}\n\nfunction WalletAdvancedTransactionAction({\n  icon,\n  label,\n  action,\n  classNames,\n}: WalletAdvancedTransactionActionProps) {\n  return (\n    <button\n      type=\"button\"\n      className={cn(\n        'flex flex-col items-center justify-center gap-2 pt-2.5 pb-2',\n        'h-16 flex-1',\n        'rounded-ock-default',\n        pressable.alternate,\n        classNames?.container,\n      )}\n      onClick={action}\n      aria-label={label}\n    >\n      <span\n        className={cn(\n          'flex h-4 w-4 flex-col items-center justify-center',\n          classNames?.icon,\n        )}\n      >\n        {icon}\n      </span>\n      <span\n        className={cn(\n          text.label2,\n          'text-ock-foreground',\n          'flex flex-col justify-center',\n          classNames?.label,\n        )}\n      >\n        {label}\n      </span>\n    </button>\n  );\n}\n"],"names":["WalletAdvancedTransactionActions","classNames","setActiveFeature","animations","useWalletContext","address","useAccount","chain","useOnchainKit","projectId","sendAnalytics","useAnalytics","isFetching","isFetchingPortfolioData","usePortfolio","RequestContext","Wallet","handleAnalyticsOptionSelected","useCallback","option","WalletEvent","OptionSelected","handleBuy","WalletOption","Buy","name","url","URL","params","URLSearchParams","appId","destinationWallets","JSON","stringify","blockchains","toLowerCase","defaultAsset","defaultPaymentMethod","presetFiatAmount","window","open","handleSend","Send","handleSwap","Swap","cn","content","container","addSvgForeground","leftAction","arrowUpRightSvg","middleAction","toggleSvg","rightAction","WalletAdvancedTransactionAction","icon","label","action","pressable","alternate","text","label2"],"mappings":"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"}