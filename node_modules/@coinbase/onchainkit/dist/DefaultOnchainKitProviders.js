'use client';
import { jsx } from "react/jsx-runtime";
import { QueryClient, QueryClientProvider } from "@tanstack/react-query";
import { useContext, useMemo } from "react";
import { WagmiProvider } from "wagmi";
import { baseAccount } from "wagmi/connectors";
import { farcasterMiniApp } from "@farcaster/miniapp-wagmi-connector";
import { MiniKitContext } from "./minikit/MiniKitProvider.js";
import { createWagmiConfig } from "./core/createWagmiConfig.js";
import { useProviderDependencies } from "./internal/hooks/useProviderDependencies.js";
import { useOnchainKit } from "./useOnchainKit.js";
function DefaultOnchainKitProviders({
  children
}) {
  const {
    providedWagmiConfig,
    providedQueryClient
  } = useProviderDependencies();
  return /* @__PURE__ */ jsx(WagmiProviderWithDefault, { providedWagmiConfig, children: /* @__PURE__ */ jsx(QueryClientProviderWithDefault, { providedQueryClient, children }) });
}
function WagmiProviderWithDefault({
  children,
  providedWagmiConfig
}) {
  var _a, _b, _c, _d;
  const onchainKitConfig = useOnchainKit();
  const miniKit = useContext(MiniKitContext);
  const apiKey = onchainKitConfig.apiKey ?? void 0;
  const appName = ((_b = (_a = onchainKitConfig.config) == null ? void 0 : _a.appearance) == null ? void 0 : _b.name) ?? void 0;
  const appLogoUrl = ((_d = (_c = onchainKitConfig.config) == null ? void 0 : _c.appearance) == null ? void 0 : _d.logo) ?? void 0;
  const defaultConnector = useMemo(() => {
    if (miniKit == null ? void 0 : miniKit.context) {
      return farcasterMiniApp();
    }
    return baseAccount({
      appName,
      appLogoUrl
    });
  }, [appName, appLogoUrl, miniKit == null ? void 0 : miniKit.context]);
  const defaultConfig = useMemo(() => {
    if (providedWagmiConfig) return providedWagmiConfig;
    return createWagmiConfig({
      apiKey,
      appName,
      appLogoUrl,
      connectors: [defaultConnector]
    });
  }, [providedWagmiConfig, defaultConnector, apiKey, appName, appLogoUrl]);
  if (providedWagmiConfig) {
    return children;
  }
  return /* @__PURE__ */ jsx(WagmiProvider, { config: defaultConfig, children });
}
function QueryClientProviderWithDefault({
  children,
  providedQueryClient
}) {
  const queryClient = useMemo(() => {
    return providedQueryClient || new QueryClient();
  }, [providedQueryClient]);
  if (providedQueryClient) return children;
  return /* @__PURE__ */ jsx(QueryClientProvider, { client: queryClient, children });
}
export {
  DefaultOnchainKitProviders
};
//# sourceMappingURL=DefaultOnchainKitProviders.js.map
