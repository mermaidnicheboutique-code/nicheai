import { useCallback, useMemo } from "react";
import { useSignTypedData, useSignMessage } from "wagmi";
import { Message } from "../types.js";
import { validateMessage } from "../utils/validateMessage.js";
function useSignData() {
  const {
    signTypedDataAsync,
    reset: resetSignTypedData
  } = useSignTypedData();
  const {
    signMessageAsync,
    reset: resetSignMessage
  } = useSignMessage();
  const signData = useCallback(async ({
    domain,
    types,
    message,
    primaryType
  }) => {
    const {
      type,
      data
    } = validateMessage({
      domain,
      types,
      message,
      primaryType
    });
    if (type === Message.INVALID) {
      throw new Error("Invalid message data");
    }
    const signature = type === Message.TYPED_DATA ? await signTypedDataAsync(data) : await signMessageAsync(data);
    return signature;
  }, [signTypedDataAsync, signMessageAsync]);
  return useMemo(() => {
    return {
      signData,
      resetSignData: () => {
        resetSignMessage();
        resetSignTypedData();
      }
    };
  }, [signData, resetSignMessage, resetSignTypedData]);
}
export {
  useSignData
};
//# sourceMappingURL=useSignData.js.map
