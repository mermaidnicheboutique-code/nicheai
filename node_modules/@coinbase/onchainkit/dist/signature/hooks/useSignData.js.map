{"version":3,"file":"useSignData.js","sources":["../../../src/signature/hooks/useSignData.ts"],"sourcesContent":["import { useCallback, useMemo } from 'react';\nimport { useSignMessage, useSignTypedData } from 'wagmi';\nimport { MessageData, Message } from '../types';\nimport { validateMessage } from '../utils/validateMessage';\n\nexport function useSignData() {\n  const { signTypedDataAsync, reset: resetSignTypedData } = useSignTypedData();\n  const { signMessageAsync, reset: resetSignMessage } = useSignMessage();\n\n  const signData = useCallback(\n    async ({ domain, types, message, primaryType }: MessageData) => {\n      const { type, data } = validateMessage({\n        domain,\n        types,\n        message,\n        primaryType,\n      });\n\n      if (type === Message.INVALID) {\n        throw new Error('Invalid message data');\n      }\n\n      const signature =\n        type === Message.TYPED_DATA\n          ? await signTypedDataAsync(data)\n          : await signMessageAsync(data);\n\n      return signature;\n    },\n    [signTypedDataAsync, signMessageAsync],\n  );\n\n  return useMemo(() => {\n    return {\n      signData,\n      resetSignData: () => {\n        resetSignMessage();\n        resetSignTypedData();\n      },\n    };\n  }, [signData, resetSignMessage, resetSignTypedData]);\n}\n"],"names":["useSignData","signTypedDataAsync","reset","resetSignTypedData","useSignTypedData","signMessageAsync","resetSignMessage","useSignMessage","signData","useCallback","domain","types","message","primaryType","type","data","validateMessage","Message","INVALID","Error","signature","TYPED_DATA","useMemo","resetSignData"],"mappings":";;;;AAKO,SAASA,cAAc;AACtB,QAAA;AAAA,IAAEC;AAAAA,IAAoBC,OAAOC;AAAAA,MAAuBC,iBAAiB;AACrE,QAAA;AAAA,IAAEC;AAAAA,IAAkBH,OAAOI;AAAAA,MAAqBC,eAAe;AAE/DC,QAAAA,WAAWC,YACf,OAAO;AAAA,IAAEC;AAAAA,IAAQC;AAAAA,IAAOC;AAAAA,IAASC;AAAAA,EAAAA,MAA+B;AACxD,UAAA;AAAA,MAAEC;AAAAA,MAAMC;AAAAA,QAASC,gBAAgB;AAAA,MACrCN;AAAAA,MACAC;AAAAA,MACAC;AAAAA,MACAC;AAAAA,IAAAA,CACD;AAEGC,QAAAA,SAASG,QAAQC,SAAS;AACtB,YAAA,IAAIC,MAAM,sBAAsB;AAAA,IAAA;AAGlCC,UAAAA,YACJN,SAASG,QAAQI,aACb,MAAMpB,mBAAmBc,IAAI,IAC7B,MAAMV,iBAAiBU,IAAI;AAE1BK,WAAAA;AAAAA,EAAAA,GAET,CAACnB,oBAAoBI,gBAAgB,CACvC;AAEA,SAAOiB,QAAQ,MAAM;AACZ,WAAA;AAAA,MACLd;AAAAA,MACAe,eAAeA,MAAM;AACF,yBAAA;AACE,2BAAA;AAAA,MAAA;AAAA,IAEvB;AAAA,EACC,GAAA,CAACf,UAAUF,kBAAkBH,kBAAkB,CAAC;AACrD;"}