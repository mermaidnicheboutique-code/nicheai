{"version":3,"file":"validateMessage.js","sources":["../../../src/signature/utils/validateMessage.ts"],"sourcesContent":["import type {\n  SignMessageParameters,\n  SignTypedDataParameters,\n} from 'wagmi/actions';\nimport { type MessageData, Message } from '../types';\n\nfunction isTypedData(params: MessageData): params is SignTypedDataParameters {\n  return !!(\n    params?.types &&\n    params?.primaryType &&\n    typeof params?.message === 'object'\n  );\n}\n\nfunction isSignableMessage(\n  params: MessageData,\n): params is SignMessageParameters {\n  return (\n    typeof params?.message === 'string' ||\n    (typeof params?.message === 'object' &&\n      'raw' in params.message &&\n      (typeof params.message.raw === 'string' ||\n        params.message.raw instanceof Uint8Array))\n  );\n}\n\ntype ValidateMessageResult =\n  | { type: typeof Message.TYPED_DATA; data: SignTypedDataParameters }\n  | { type: typeof Message.SIGNABLE_MESSAGE; data: SignMessageParameters }\n  | { type: typeof Message.INVALID; data: null };\n\nexport function validateMessage(\n  messageData: MessageData,\n): ValidateMessageResult {\n  if (isTypedData(messageData)) {\n    return {\n      type: Message.TYPED_DATA,\n      data: messageData,\n    };\n  }\n\n  if (isSignableMessage(messageData)) {\n    return {\n      type: Message.SIGNABLE_MESSAGE,\n      data: messageData,\n    };\n  }\n\n  return {\n    type: Message.INVALID,\n    data: null,\n  };\n}\n"],"names":["isTypedData","params","types","primaryType","message","isSignableMessage","raw","Uint8Array","validateMessage","messageData","type","Message","TYPED_DATA","data","SIGNABLE_MESSAGE","INVALID"],"mappings":";AAMA,SAASA,YAAYC,QAAwD;AACpE,SAAA,CAAC,GACNA,iCAAQC,WACRD,iCAAQE,gBACR,QAAOF,iCAAQG,aAAY;AAE/B;AAEA,SAASC,kBACPJ,QACiC;AACjC,SACE,QAAOA,iCAAQG,aAAY,YAC1B,QAAOH,iCAAQG,aAAY,YAC1B,SAASH,OAAOG,YACf,OAAOH,OAAOG,QAAQE,QAAQ,YAC7BL,OAAOG,QAAQE,eAAeC;AAEtC;AAOO,SAASC,gBACdC,aACuB;AACnBT,MAAAA,YAAYS,WAAW,GAAG;AACrB,WAAA;AAAA,MACLC,MAAMC,QAAQC;AAAAA,MACdC,MAAMJ;AAAAA,IACR;AAAA,EAAA;AAGEJ,MAAAA,kBAAkBI,WAAW,GAAG;AAC3B,WAAA;AAAA,MACLC,MAAMC,QAAQG;AAAAA,MACdD,MAAMJ;AAAAA,IACR;AAAA,EAAA;AAGK,SAAA;AAAA,IACLC,MAAMC,QAAQI;AAAAA,IACdF,MAAM;AAAA,EACR;AACF;"}